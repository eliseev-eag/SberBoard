{
  "url": "https://api.github.com/repos/facebook/react/issues/3002",
  "repository_url": "https://api.github.com/repos/facebook/react",
  "labels_url": "https://api.github.com/repos/facebook/react/issues/3002/labels{/name}",
  "comments_url": "https://api.github.com/repos/facebook/react/issues/3002/comments",
  "events_url": "https://api.github.com/repos/facebook/react/issues/3002/events",
  "html_url": "https://github.com/facebook/react/pull/3002",
  "id": 56142487,
  "node_id": "MDExOlB1bGxSZXF1ZXN0Mjg0MjIyODc=",
  "number": 3002,
  "title": "Add optional transitionCount prop allowing CSSTransitionGroup to wait for multiple transitions to finish before ",
  "user": {
    "login": "charlieschwabacher",
    "id": 533045,
    "node_id": "MDQ6VXNlcjUzMzA0NQ==",
    "avatar_url": "https://avatars3.githubusercontent.com/u/533045?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/charlieschwabacher",
    "html_url": "https://github.com/charlieschwabacher",
    "followers_url": "https://api.github.com/users/charlieschwabacher/followers",
    "following_url": "https://api.github.com/users/charlieschwabacher/following{/other_user}",
    "gists_url": "https://api.github.com/users/charlieschwabacher/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/charlieschwabacher/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/charlieschwabacher/subscriptions",
    "organizations_url": "https://api.github.com/users/charlieschwabacher/orgs",
    "repos_url": "https://api.github.com/users/charlieschwabacher/repos",
    "events_url": "https://api.github.com/users/charlieschwabacher/events{/privacy}",
    "received_events_url": "https://api.github.com/users/charlieschwabacher/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 196858374,
      "node_id": "MDU6TGFiZWwxOTY4NTgzNzQ=",
      "url": "https://api.github.com/repos/facebook/react/labels/CLA%20Signed",
      "name": "CLA Signed",
      "color": "e7e7e7",
      "default": false
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 4,
  "created_at": "2015-01-31T22:34:27Z",
  "updated_at": "2016-03-26T20:01:10Z",
  "closed_at": "2016-03-26T20:01:10Z",
  "author_association": "NONE",
  "pull_request": {
    "url": "https://api.github.com/repos/facebook/react/pulls/3002",
    "html_url": "https://github.com/facebook/react/pull/3002",
    "diff_url": "https://github.com/facebook/react/pull/3002.diff",
    "patch_url": "https://github.com/facebook/react/pull/3002.patch"
  },
  "body": "In a few cases I have wanted to animate multiple child elements of a component independently.. for example I have a modal component where I would like the backdrop to fade in, at the same time as the body flies in with a transform.\n\n``` jsx\nModal = React.createComponent({\n  render: function() {\n    return (\n      <div className=\"modal\">\n        <div className=\"modal-backdrop\"/>\n        <div className=\"modal-body\">\n          {this.props.children}\n        </div>\n      </div>\n    );\n  }\n});\n```\n\nThe current implementation detects transition end events, but only on the root dom element of a component.  A complex animation like the one I describe is possible, but requires an awkward workaround in the css.  Here I have set a transition on background color on the root element, animating between two different colors w/ alpha 0.. this animation ends up working as a timer to trigger the end of the animation in CSSTransitionGroupChild.\n\n``` css\n.modal-enter {\n  background-color: rgba(0,0,0,0);\n  transition: background-color 0.5s;\n}\n  .modal-enter .modal-backdrop {\n    opacity: 0;\n    transition: opacity 0.5s;\n  }\n  .modal-enter .modal-body {\n    opacity: 0;\n    transition: transform 0.3s, opacity 0.3s;\n    transform: scale(1.5);\n  }\n.modal-enter.modal-enter-active {\n  background-color: rgba(1,0,0,0);\n}\n  .modal-enter.modal-enter-active .modal-backdrop {\n    opacity: 0.65;\n  }\n  .modal-enter.modal-enter-active .modal-body {\n    opacity: 1;\n    transform: scale(1);\n  }\n```\n\nI think a better approach may be just to allow the number of transitions to be specified, allow the events to bubble normally from children to the ReactCSSTransitionGroupChild element, and to only remove the component after the expected number of transitions have ended.\n\nThis pull adds an optional transitionCount prop to ReactCSSTransitionGroup, defaulting to 1.  It would preserve the current behavior in most cases, although it would revert changes to transitionend event bubbling behavior made in v0.12.2 and could break code written to depend on those changes.\n\n``` jsx\n<ReactCSSTransitionGroup transitionName='modal' transitionCount={2}>\n```\n\nI opened this as a starting point for discussion, and have not written tests or ran the build scripts on it yet - If this is something that you could be convinced to accept, I will gladly get the pull in better shape to merge.\n",
  "closed_by": {
    "login": "gaearon",
    "id": 810438,
    "node_id": "MDQ6VXNlcjgxMDQzOA==",
    "avatar_url": "https://avatars0.githubusercontent.com/u/810438?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/gaearon",
    "html_url": "https://github.com/gaearon",
    "followers_url": "https://api.github.com/users/gaearon/followers",
    "following_url": "https://api.github.com/users/gaearon/following{/other_user}",
    "gists_url": "https://api.github.com/users/gaearon/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/gaearon/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/gaearon/subscriptions",
    "organizations_url": "https://api.github.com/users/gaearon/orgs",
    "repos_url": "https://api.github.com/users/gaearon/repos",
    "events_url": "https://api.github.com/users/gaearon/events{/privacy}",
    "received_events_url": "https://api.github.com/users/gaearon/received_events",
    "type": "User",
    "site_admin": false
  }
}

{
  "url": "https://api.github.com/repos/facebook/react/issues/16200",
  "repository_url": "https://api.github.com/repos/facebook/react",
  "labels_url": "https://api.github.com/repos/facebook/react/issues/16200/labels{/name}",
  "comments_url": "https://api.github.com/repos/facebook/react/issues/16200/comments",
  "events_url": "https://api.github.com/repos/facebook/react/issues/16200/events",
  "html_url": "https://github.com/facebook/react/issues/16200",
  "id": 472649947,
  "node_id": "MDU6SXNzdWU0NzI2NDk5NDc=",
  "number": 16200,
  "title": "custom hook with Promise.all causes duplicate network request",
  "user": {
    "login": "kang-chen",
    "id": 6122370,
    "node_id": "MDQ6VXNlcjYxMjIzNzA=",
    "avatar_url": "https://avatars0.githubusercontent.com/u/6122370?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/kang-chen",
    "html_url": "https://github.com/kang-chen",
    "followers_url": "https://api.github.com/users/kang-chen/followers",
    "following_url": "https://api.github.com/users/kang-chen/following{/other_user}",
    "gists_url": "https://api.github.com/users/kang-chen/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/kang-chen/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/kang-chen/subscriptions",
    "organizations_url": "https://api.github.com/users/kang-chen/orgs",
    "repos_url": "https://api.github.com/users/kang-chen/repos",
    "events_url": "https://api.github.com/users/kang-chen/events{/privacy}",
    "received_events_url": "https://api.github.com/users/kang-chen/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 5,
  "created_at": "2019-07-25T03:47:03Z",
  "updated_at": "2019-07-25T06:44:18Z",
  "closed_at": "2019-07-25T06:44:17Z",
  "author_association": "NONE",
  "body": "**Do you want to request a *feature* or report a *bug*?**\r\nbug\r\n\r\n**What is the current behavior?**\r\n\r\nWith custom hook with using Promise.all I'm noticing duplicate network requests, the issue occurs when I call the `setState` method of the hook. If I don't setState the call is made once.\r\n\r\nThe same hook written without Promise.all seems to work fine, ie one fetch request.\r\n\r\nThis could well be something with my code and happy to know if there's anything missing.\r\n\r\nhttps://gist.github.com/kang-chen/fe9fed2ca1c95a782713f76886a81865\r\n\r\n**If the current behavior is a bug, please provide the steps to reproduce and if possible a minimal demo of the problem. Your bug will get fixed much faster if we can run your code and it doesn't have dependencies other than React. Paste the link to your JSFiddle (https://jsfiddle.net/Luktwrdm/) or CodeSandbox (https://codesandbox.io/s/new) example below:**\r\n\r\nhttps://codesandbox.io/s/hook-test-ndj7s\r\n\r\nOpen the network tab and view requests going out to test API, there should be only three requests although there are six.\r\n\r\n**What is the expected behavior?**\r\n\r\nNo duplicated network calls using Promise.all in conjunction with custom hook.\r\n\r\n**Which versions of React, and which browser / OS are affected by this issue? Did this work in previous versions of React?**\r\n\r\n16.8.6\r\n\r\n",
  "closed_by": {
    "login": "kang-chen",
    "id": 6122370,
    "node_id": "MDQ6VXNlcjYxMjIzNzA=",
    "avatar_url": "https://avatars0.githubusercontent.com/u/6122370?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/kang-chen",
    "html_url": "https://github.com/kang-chen",
    "followers_url": "https://api.github.com/users/kang-chen/followers",
    "following_url": "https://api.github.com/users/kang-chen/following{/other_user}",
    "gists_url": "https://api.github.com/users/kang-chen/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/kang-chen/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/kang-chen/subscriptions",
    "organizations_url": "https://api.github.com/users/kang-chen/orgs",
    "repos_url": "https://api.github.com/users/kang-chen/repos",
    "events_url": "https://api.github.com/users/kang-chen/events{/privacy}",
    "received_events_url": "https://api.github.com/users/kang-chen/received_events",
    "type": "User",
    "site_admin": false
  }
}

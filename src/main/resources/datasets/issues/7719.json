{
  "url": "https://api.github.com/repos/facebook/react/issues/7719",
  "repository_url": "https://api.github.com/repos/facebook/react",
  "labels_url": "https://api.github.com/repos/facebook/react/issues/7719/labels{/name}",
  "comments_url": "https://api.github.com/repos/facebook/react/issues/7719/comments",
  "events_url": "https://api.github.com/repos/facebook/react/issues/7719/events",
  "html_url": "https://github.com/facebook/react/issues/7719",
  "id": 176729259,
  "node_id": "MDU6SXNzdWUxNzY3MjkyNTk=",
  "number": 7719,
  "title": "state prop collecting geoloacation data even before component is mounted",
  "user": {
    "login": "kurtschlueter",
    "id": 13968074,
    "node_id": "MDQ6VXNlcjEzOTY4MDc0",
    "avatar_url": "https://avatars3.githubusercontent.com/u/13968074?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/kurtschlueter",
    "html_url": "https://github.com/kurtschlueter",
    "followers_url": "https://api.github.com/users/kurtschlueter/followers",
    "following_url": "https://api.github.com/users/kurtschlueter/following{/other_user}",
    "gists_url": "https://api.github.com/users/kurtschlueter/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/kurtschlueter/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/kurtschlueter/subscriptions",
    "organizations_url": "https://api.github.com/users/kurtschlueter/orgs",
    "repos_url": "https://api.github.com/users/kurtschlueter/repos",
    "events_url": "https://api.github.com/users/kurtschlueter/events{/privacy}",
    "received_events_url": "https://api.github.com/users/kurtschlueter/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 2,
  "created_at": "2016-09-13T19:31:58Z",
  "updated_at": "2017-04-21T21:30:33Z",
  "closed_at": "2017-04-21T21:30:33Z",
  "author_association": "NONE",
  "body": "Ok so here is the problem. I have a Map component that gets someones current location every x seconds and stores the data in an array. When I launch my app, I am in a home scene with the option of opening the map in a new scene using the navigator. \n\n``` javascript\n  startMemory() {\n    this.props.navigator.push({\n      component: Map,\n      name: 'Map',\n    })\n  }\n```\n\nWhen I select this button, the route coordinates seem to have been collecting even before I rendered the map view. Here is what I have under component did mount.\n\n``` javascript\n  componentDidMount() {\n      this.setState({\n        routeCoordinates: []\n      });\n\n    navigator.geolocation.getCurrentPosition(\n      (position) => {},\n      (error) => alert(error.message),\n      {enableHighAccuracy: true, timeout: 20000, maximumAge: 5000}\n    );\n    this.watchID = navigator.geolocation.watchPosition((position) => {\n      const cp = {\n        long: parseFloat(position.coords.longitude),\n        lat: parseFloat(position.coords.latitude)\n      }\n      this.setState({\n        routeCoordinates: this.state.routeCoordinates.concat({latitude: cp.lat, longitude: cp.long}),\n        currentPosition: cp\n      });\n    });\n  }\n```\n\nWhen I console log routCoordinates at the beginning of ComponentDidMount, it does give me an empty array as it should. The problem is that is seems to have been secretly rendering even before I navigated to the map component. I console logged the routeCoords immediately after the render(){...\n\n``` javascript\n  render() {\n    console.log(this.state.routeCoordinates)\n    return (\n```\n\nand so when I navigate to the map component the output gives me \n\n[]\n\n[ { latitude: 37.33282574, longitude: -122.06131389 } ]\n\n[ { latitude: [Getter/Setter], longitude: [Getter/Setter] },\n  { latitude: 37.33230505, longitude: -122.05871525 } ]\n\n[ { latitude: [Getter/Setter], longitude: [Getter/Setter] },\n  { latitude: [Getter/Setter], longitude: [Getter/Setter] },\n  { latitude: 37.33282574, longitude: -122.06131389 } ]\n\n[ { latitude: [Getter/Setter], longitude: [Getter/Setter] },\n  { latitude: [Getter/Setter], longitude: [Getter/Setter] },\n  { latitude: [Getter/Setter], longitude: [Getter/Setter] },\n  { latitude: 37.33282574, longitude: -122.06131389 } ]\n\nAnd so on... all at once. Why is it doing this? I want to start fresh every time i mount this component. setState is irrelevant because it will set it to [] and then start collecting data even before ComponentDidMount gets run.  \n",
  "closed_by": {
    "login": "aweary",
    "id": 6886061,
    "node_id": "MDQ6VXNlcjY4ODYwNjE=",
    "avatar_url": "https://avatars2.githubusercontent.com/u/6886061?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/aweary",
    "html_url": "https://github.com/aweary",
    "followers_url": "https://api.github.com/users/aweary/followers",
    "following_url": "https://api.github.com/users/aweary/following{/other_user}",
    "gists_url": "https://api.github.com/users/aweary/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/aweary/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/aweary/subscriptions",
    "organizations_url": "https://api.github.com/users/aweary/orgs",
    "repos_url": "https://api.github.com/users/aweary/repos",
    "events_url": "https://api.github.com/users/aweary/events{/privacy}",
    "received_events_url": "https://api.github.com/users/aweary/received_events",
    "type": "User",
    "site_admin": false
  }
}

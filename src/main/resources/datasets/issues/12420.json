{
  "url": "https://api.github.com/repos/facebook/react/issues/12420",
  "repository_url": "https://api.github.com/repos/facebook/react",
  "labels_url": "https://api.github.com/repos/facebook/react/issues/12420/labels{/name}",
  "comments_url": "https://api.github.com/repos/facebook/react/issues/12420/comments",
  "events_url": "https://api.github.com/repos/facebook/react/issues/12420/events",
  "html_url": "https://github.com/facebook/react/issues/12420",
  "id": 307420197,
  "node_id": "MDU6SXNzdWUzMDc0MjAxOTc=",
  "number": 12420,
  "title": "Password field causes memory leak in production builds",
  "user": {
    "login": "dcodus",
    "id": 12925816,
    "node_id": "MDQ6VXNlcjEyOTI1ODE2",
    "avatar_url": "https://avatars0.githubusercontent.com/u/12925816?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/dcodus",
    "html_url": "https://github.com/dcodus",
    "followers_url": "https://api.github.com/users/dcodus/followers",
    "following_url": "https://api.github.com/users/dcodus/following{/other_user}",
    "gists_url": "https://api.github.com/users/dcodus/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/dcodus/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/dcodus/subscriptions",
    "organizations_url": "https://api.github.com/users/dcodus/orgs",
    "repos_url": "https://api.github.com/users/dcodus/repos",
    "events_url": "https://api.github.com/users/dcodus/events{/privacy}",
    "received_events_url": "https://api.github.com/users/dcodus/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 710722093,
      "node_id": "MDU6TGFiZWw3MTA3MjIwOTM=",
      "url": "https://api.github.com/repos/facebook/react/labels/Type:%20Needs%20Investigation",
      "name": "Type: Needs Investigation",
      "color": "fbca04",
      "default": false
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 13,
  "created_at": "2018-03-21T21:13:31Z",
  "updated_at": "2018-09-12T12:07:26Z",
  "closed_at": "2018-08-02T19:39:41Z",
  "author_association": "NONE",
  "body": "<!--\r\n  Note: if the issue is about documentation or the website, please file it at:\r\n  https://github.com/reactjs/reactjs.org/issues/new\r\n-->\r\n\r\n**Do you want to request a *feature* or report a *bug*?**\r\n*Bug*\r\n\r\n**What is the current behavior?**\r\nWe're noticing that password-type input fields  (as well as their wrapping parents) remain as detached DOM elements when conditionally being rendered and removed from the DOM.\r\n\r\nThis issue seems to be occurring across several applications using React 16, include a newly created app from `Create React App`, and we're able to produce Chrome memory heap snapshots in all of these environments to demonstrate this issue.\r\n\r\nObserve in the following example, the button adds/removes the input field to the DOM. To reproduce the problem stated in this issue, repeatedly click this button (say 20-30 times), then take a memory heap snapshot. You will *see multiple detached DOM elements, the password `input` field and its wrapping div.* Note that this issue does not happen for other types of input fields.\r\n\r\n```\r\nclass App extends Component {\r\n  state = { show: false };\r\n\r\n  toggle = () => this.setState({show: !this.state.show})\r\n\r\n  render() {\r\n    return (\r\n      <div>\r\n        <button onClick={this.toggle}>Toggle password field</button>\r\n        {this.state.show && (\r\n          <div>\r\n            <input type=\"password\"/>\r\n          </div>\r\n       )}\r\n       </div>\r\n    );\r\n  }\r\n}\r\n```\r\n\r\n![image](https://user-images.githubusercontent.com/12925816/37737606-989d51be-2d2a-11e8-8650-ac4237c1ab7f.png)\r\n\r\n**Which versions of React, and which browser / OS are affected by this issue? Did this work in previous versions of React?**\r\nWe have tried this issue in React 16.2, 16.1 and React 15.6. Chrome and Canary were the browsers tested in particular.",
  "closed_by": {
    "login": "gaearon",
    "id": 810438,
    "node_id": "MDQ6VXNlcjgxMDQzOA==",
    "avatar_url": "https://avatars0.githubusercontent.com/u/810438?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/gaearon",
    "html_url": "https://github.com/gaearon",
    "followers_url": "https://api.github.com/users/gaearon/followers",
    "following_url": "https://api.github.com/users/gaearon/following{/other_user}",
    "gists_url": "https://api.github.com/users/gaearon/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/gaearon/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/gaearon/subscriptions",
    "organizations_url": "https://api.github.com/users/gaearon/orgs",
    "repos_url": "https://api.github.com/users/gaearon/repos",
    "events_url": "https://api.github.com/users/gaearon/events{/privacy}",
    "received_events_url": "https://api.github.com/users/gaearon/received_events",
    "type": "User",
    "site_admin": false
  }
}

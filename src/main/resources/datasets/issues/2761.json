{
  "url": "https://api.github.com/repos/facebook/react/issues/2761",
  "repository_url": "https://api.github.com/repos/facebook/react",
  "labels_url": "https://api.github.com/repos/facebook/react/issues/2761/labels{/name}",
  "comments_url": "https://api.github.com/repos/facebook/react/issues/2761/comments",
  "events_url": "https://api.github.com/repos/facebook/react/issues/2761/events",
  "html_url": "https://github.com/facebook/react/issues/2761",
  "id": 52609570,
  "node_id": "MDU6SXNzdWU1MjYwOTU3MA==",
  "number": 2761,
  "title": "Feature request to strip data-reactid and return them as an array or string",
  "user": {
    "login": "EloB",
    "id": 476567,
    "node_id": "MDQ6VXNlcjQ3NjU2Nw==",
    "avatar_url": "https://avatars1.githubusercontent.com/u/476567?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/EloB",
    "html_url": "https://github.com/EloB",
    "followers_url": "https://api.github.com/users/EloB/followers",
    "following_url": "https://api.github.com/users/EloB/following{/other_user}",
    "gists_url": "https://api.github.com/users/EloB/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/EloB/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/EloB/subscriptions",
    "organizations_url": "https://api.github.com/users/EloB/orgs",
    "repos_url": "https://api.github.com/users/EloB/repos",
    "events_url": "https://api.github.com/users/EloB/events{/privacy}",
    "received_events_url": "https://api.github.com/users/EloB/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 6,
  "created_at": "2014-12-21T23:22:28Z",
  "updated_at": "2017-08-01T20:39:46Z",
  "closed_at": "2017-08-01T20:39:46Z",
  "author_association": "NONE",
  "body": "Right now `data-reactid` on every element adds up a lot of unnecessary space for server generated pages.\n\nI know that they are still needed to initialize on the browser. My solution minimize the output is that I strip all the `data-reactid` and add them as an array in a `<script>` tag at the end `<body>` tag. See my example below.\n\n**Except from example server script:**\n\n``` js\nvar html = React.renderToString(React.createElement(element, { some: data }))\n  , reacts = []\n  , filtered;\n\nhtml = html.replace(/ data-reactid=\"([^\"]*)\"/g, function(full, value) {\n    reacts.push(value);\n    return '';\n});\n\nfiltered = html.replace('appReact=[]', 'appReact=' + JSON.stringify(reacts));\n\nres.send('<!doctype html>' + filtered);\n```\n\n**Except from example client script**\n\n``` js\nvar elements = document.getElementsByTagName('*');\n\n// This is fast because it doesn't trigger any reflow.\nArray.prototype.slice.call(elements).forEach(function(element, index) {\n    element.setAttribute('data-reactid', appReact[index]);\n});\n\nReact.render(React.createElement(element, { some: data }), document);\n```\n\n**Except from example jsx**\n\n``` html\n<html>\n    <head>\n    </head>\n    <body>\n        <script dangerouslySetInnerHTML={{__html:'var appReact=[];'}}></script>\n        <script src=\"/client.js\"></script>\n    </body>\n</html>\n```\n\nI think this solution could be done a lot better/safer if its somehow included in the core.\n\n| HTML tags | Saved characters |\n| --- | --- |\n| 10 | 120+ |\n| 100 | 1 200+ |\n| 1 000 | 12 000+ |\n\n_Saved characters is even higher because labels often gets wrapped into `<span>`_\n",
  "closed_by": {
    "login": "gaearon",
    "id": 810438,
    "node_id": "MDQ6VXNlcjgxMDQzOA==",
    "avatar_url": "https://avatars0.githubusercontent.com/u/810438?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/gaearon",
    "html_url": "https://github.com/gaearon",
    "followers_url": "https://api.github.com/users/gaearon/followers",
    "following_url": "https://api.github.com/users/gaearon/following{/other_user}",
    "gists_url": "https://api.github.com/users/gaearon/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/gaearon/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/gaearon/subscriptions",
    "organizations_url": "https://api.github.com/users/gaearon/orgs",
    "repos_url": "https://api.github.com/users/gaearon/repos",
    "events_url": "https://api.github.com/users/gaearon/events{/privacy}",
    "received_events_url": "https://api.github.com/users/gaearon/received_events",
    "type": "User",
    "site_admin": false
  }
}

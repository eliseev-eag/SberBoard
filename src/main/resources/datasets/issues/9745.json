{
  "url": "https://api.github.com/repos/facebook/react/issues/9745",
  "repository_url": "https://api.github.com/repos/facebook/react",
  "labels_url": "https://api.github.com/repos/facebook/react/issues/9745/labels{/name}",
  "comments_url": "https://api.github.com/repos/facebook/react/issues/9745/comments",
  "events_url": "https://api.github.com/repos/facebook/react/issues/9745/events",
  "html_url": "https://github.com/facebook/react/issues/9745",
  "id": 230345192,
  "node_id": "MDU6SXNzdWUyMzAzNDUxOTI=",
  "number": 9745,
  "title": "ReactDOMServer.renderToStaticMarkup will trigger componentWillMount on server-side. Is it a bug? How can I avoid that?",
  "user": {
    "login": "rolele",
    "id": 22406571,
    "node_id": "MDQ6VXNlcjIyNDA2NTcx",
    "avatar_url": "https://avatars0.githubusercontent.com/u/22406571?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/rolele",
    "html_url": "https://github.com/rolele",
    "followers_url": "https://api.github.com/users/rolele/followers",
    "following_url": "https://api.github.com/users/rolele/following{/other_user}",
    "gists_url": "https://api.github.com/users/rolele/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/rolele/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/rolele/subscriptions",
    "organizations_url": "https://api.github.com/users/rolele/orgs",
    "repos_url": "https://api.github.com/users/rolele/repos",
    "events_url": "https://api.github.com/users/rolele/events{/privacy}",
    "received_events_url": "https://api.github.com/users/rolele/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 1,
  "created_at": "2017-05-22T10:02:41Z",
  "updated_at": "2017-05-22T11:17:07Z",
  "closed_at": "2017-05-22T11:17:07Z",
  "author_association": "NONE",
  "body": "react@15.5.4\r\nreact-dom@15.5.4\r\nreact-router@4.1.1\r\n\r\ncalling ReactDOMServer.renderToStaticMarkup(...) on server-side will trigger componentWillMount of one of my component (but not all).\r\nThis strange behavior does not happen on some other components.\r\n\r\nThis is how I do server rendering using the recommended way from react-router: https://github.com/rolele/universal-react-redux-boilerplate/blob/master/src/server.js\r\nNow routes is defining a fetchData attribute that will call a static function of a component: https://github.com/rolele/universal-react-redux-boilerplate/blob/master/src/routes.js\r\nThe component will define the static function and will use the react life cycle hooks to render on client: https://github.com/rolele/universal-react-redux-boilerplate/blob/master/src/modules/Blog/components/BlogArticle.js\r\n\r\nTo reproduce this behavior you can clone this repo:\r\nhttps://github.com/rolele/universal-react-redux-boilerplate\r\n`npm i && npm run dev`\r\n\r\nvisit http://localhost:3000/blog\r\nyou should see some server side rendering logs and see that re reducer `FETCH_ARTICLES_SUCCESS` is run and then `fetchBranchData location: /blog`\r\nwhich means that SSR is doing its job, the __INITIAL_STATE__ is build, everything fine.\r\n\r\nvisit http://localhost:3000/blog/the-wizard-of-oz\r\nyou will see: FETCH_ARTICLES_REQUEST and FETCH_ARTICLE_REQUEST (note the plural)\r\nthen `fetchBranchData location: /blog/the-wizard-of-oz`\r\nbut then you will see \r\n`--- componentWillMount FETCH` (from BlogArticle Component)\r\nwhich will retrigger `FETCH_ARTICLE_REQUEST` a second time meaning that my global state is affected and you will see and object { article: { \"loading\":true} } is my state __INITIAL_STATE__.\r\nBy the time the client receive it will get this error on the client:\r\n```\r\nhy the markup being generated is different on the client or server:\r\n (client) 1 data-reactid=\"27\">Loading...</h1></art\r\n (server) 1 data-reactid=\"27\">The Wizard of Oz</h1\r\n```\r\n\r\nThis behavious is quite strange because componentWillMount will be call on the nested route BlogArticle but not on Blog. I am wondering if there is a bug in react there.",
  "closed_by": {
    "login": "rolele",
    "id": 22406571,
    "node_id": "MDQ6VXNlcjIyNDA2NTcx",
    "avatar_url": "https://avatars0.githubusercontent.com/u/22406571?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/rolele",
    "html_url": "https://github.com/rolele",
    "followers_url": "https://api.github.com/users/rolele/followers",
    "following_url": "https://api.github.com/users/rolele/following{/other_user}",
    "gists_url": "https://api.github.com/users/rolele/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/rolele/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/rolele/subscriptions",
    "organizations_url": "https://api.github.com/users/rolele/orgs",
    "repos_url": "https://api.github.com/users/rolele/repos",
    "events_url": "https://api.github.com/users/rolele/events{/privacy}",
    "received_events_url": "https://api.github.com/users/rolele/received_events",
    "type": "User",
    "site_admin": false
  }
}

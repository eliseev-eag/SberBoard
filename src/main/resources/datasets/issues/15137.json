{
  "url": "https://api.github.com/repos/facebook/react/issues/15137",
  "repository_url": "https://api.github.com/repos/facebook/react",
  "labels_url": "https://api.github.com/repos/facebook/react/issues/15137/labels{/name}",
  "comments_url": "https://api.github.com/repos/facebook/react/issues/15137/comments",
  "events_url": "https://api.github.com/repos/facebook/react/issues/15137/events",
  "html_url": "https://github.com/facebook/react/issues/15137",
  "id": 422164632,
  "node_id": "MDU6SXNzdWU0MjIxNjQ2MzI=",
  "number": 15137,
  "title": "Suspense throwing before first render, leading to useMemo not working correctly",
  "user": {
    "login": "samdenty",
    "id": 13242392,
    "node_id": "MDQ6VXNlcjEzMjQyMzky",
    "avatar_url": "https://avatars3.githubusercontent.com/u/13242392?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/samdenty",
    "html_url": "https://github.com/samdenty",
    "followers_url": "https://api.github.com/users/samdenty/followers",
    "following_url": "https://api.github.com/users/samdenty/following{/other_user}",
    "gists_url": "https://api.github.com/users/samdenty/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/samdenty/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/samdenty/subscriptions",
    "organizations_url": "https://api.github.com/users/samdenty/orgs",
    "repos_url": "https://api.github.com/users/samdenty/repos",
    "events_url": "https://api.github.com/users/samdenty/events{/privacy}",
    "received_events_url": "https://api.github.com/users/samdenty/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 3,
  "created_at": "2019-03-18T11:19:32Z",
  "updated_at": "2019-03-18T14:28:36Z",
  "closed_at": "2019-03-18T11:56:48Z",
  "author_association": "NONE",
  "body": "<!--\r\n  Note: if the issue is about documentation or the website, please file it at:\r\n  https://github.com/reactjs/reactjs.org/issues/new\r\n-->\r\n\r\n**Do you want to request a *feature* or report a *bug*?** bug\r\n\r\n**What is the current behavior?**\r\n\r\nThe `useMemo` callback is called twice if Suspense throws a promise before the  first render. Same with the `useState` lazy initializer\r\n\r\n**If the current behavior is a bug, please provide the steps to reproduce and if possible a minimal demo of the problem. Your bug will get fixed much faster if we can run your code and it doesn't have dependencies other than React. Paste the link to your JSFiddle (https://jsfiddle.net/Luktwrdm/) or CodeSandbox (https://codesandbox.io/s/new) example below:**\r\n\r\nSee https://codesandbox.io/s/oj3q9yv2jz?expanddevtools=1&fontsize=14. If you check the console, it should only be called once but instead it's called twice.\r\n\r\n**What is the expected behavior?**\r\n\r\n`useMemo` should only evaluate the function on the first render, if the dependency array is empty.\r\n\r\n**Which versions of React, and which browser / OS are affected by this issue? Did this work in previous versions of React?**\r\n\r\n16.8.3, haven't tested previous versions\r\n",
  "closed_by": {
    "login": "gaearon",
    "id": 810438,
    "node_id": "MDQ6VXNlcjgxMDQzOA==",
    "avatar_url": "https://avatars0.githubusercontent.com/u/810438?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/gaearon",
    "html_url": "https://github.com/gaearon",
    "followers_url": "https://api.github.com/users/gaearon/followers",
    "following_url": "https://api.github.com/users/gaearon/following{/other_user}",
    "gists_url": "https://api.github.com/users/gaearon/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/gaearon/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/gaearon/subscriptions",
    "organizations_url": "https://api.github.com/users/gaearon/orgs",
    "repos_url": "https://api.github.com/users/gaearon/repos",
    "events_url": "https://api.github.com/users/gaearon/events{/privacy}",
    "received_events_url": "https://api.github.com/users/gaearon/received_events",
    "type": "User",
    "site_admin": false
  }
}

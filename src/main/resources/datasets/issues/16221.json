{
  "url": "https://api.github.com/repos/facebook/react/issues/16221",
  "repository_url": "https://api.github.com/repos/facebook/react",
  "labels_url": "https://api.github.com/repos/facebook/react/issues/16221/labels{/name}",
  "comments_url": "https://api.github.com/repos/facebook/react/issues/16221/comments",
  "events_url": "https://api.github.com/repos/facebook/react/issues/16221/events",
  "html_url": "https://github.com/facebook/react/issues/16221",
  "id": 473327349,
  "node_id": "MDU6SXNzdWU0NzMzMjczNDk=",
  "number": 16221,
  "title": "[Feature Request] Allow custom compare function on hooks.",
  "user": {
    "login": "niwinz",
    "id": 843689,
    "node_id": "MDQ6VXNlcjg0MzY4OQ==",
    "avatar_url": "https://avatars2.githubusercontent.com/u/843689?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/niwinz",
    "html_url": "https://github.com/niwinz",
    "followers_url": "https://api.github.com/users/niwinz/followers",
    "following_url": "https://api.github.com/users/niwinz/following{/other_user}",
    "gists_url": "https://api.github.com/users/niwinz/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/niwinz/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/niwinz/subscriptions",
    "organizations_url": "https://api.github.com/users/niwinz/orgs",
    "repos_url": "https://api.github.com/users/niwinz/repos",
    "events_url": "https://api.github.com/users/niwinz/events{/privacy}",
    "received_events_url": "https://api.github.com/users/niwinz/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "open",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 6,
  "created_at": "2019-07-26T12:09:48Z",
  "updated_at": "2019-08-31T09:02:42Z",
  "closed_at": null,
  "author_association": "NONE",
  "body": "**Do you want to request a *feature* or report a *bug*?**\r\nFeature\r\n\r\n**What is the current behavior?**\r\nReact performs a Shallow Compare on depenedencies for avoid unnecesary calls.\r\n\r\n**What is the expected behavior?**\r\n\r\nShallow Compare is ok for plain values. For object it uses reference values and this may cause hook execution when maybe you don't want to.\r\n\r\nMy concrete use case is: im using ClojureScript immutable data structures that I want to be able to pass as dependency to a Hook and prevent execute the useEffect (as example) if the passed dependency is the same as previous one. With shallow  compare two identical objects will have different reference values that will make execute again the useEffect (with the corresponding cleanup) when I really don't want. \r\n\r\nI think that a good solution for this is provide the ability to pass a custom compare function to hooks (in the same way as `React.memo`).\r\n\r\n**Which versions of React, and which browser / OS are affected by this issue? Did this work in previous versions of React?**\r\n\r\n16.8.6\r\n",
  "closed_by": null
}

{
  "url": "https://api.github.com/repos/facebook/react/issues/16177",
  "repository_url": "https://api.github.com/repos/facebook/react",
  "labels_url": "https://api.github.com/repos/facebook/react/issues/16177/labels{/name}",
  "comments_url": "https://api.github.com/repos/facebook/react/issues/16177/comments",
  "events_url": "https://api.github.com/repos/facebook/react/issues/16177/events",
  "html_url": "https://github.com/facebook/react/issues/16177",
  "id": 471220722,
  "node_id": "MDU6SXNzdWU0NzEyMjA3MjI=",
  "number": 16177,
  "title": "Unnecessary re-render when using the hooks API",
  "user": {
    "login": "PepijnSenders",
    "id": 2052659,
    "node_id": "MDQ6VXNlcjIwNTI2NTk=",
    "avatar_url": "https://avatars0.githubusercontent.com/u/2052659?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/PepijnSenders",
    "html_url": "https://github.com/PepijnSenders",
    "followers_url": "https://api.github.com/users/PepijnSenders/followers",
    "following_url": "https://api.github.com/users/PepijnSenders/following{/other_user}",
    "gists_url": "https://api.github.com/users/PepijnSenders/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/PepijnSenders/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/PepijnSenders/subscriptions",
    "organizations_url": "https://api.github.com/users/PepijnSenders/orgs",
    "repos_url": "https://api.github.com/users/PepijnSenders/repos",
    "events_url": "https://api.github.com/users/PepijnSenders/events{/privacy}",
    "received_events_url": "https://api.github.com/users/PepijnSenders/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "open",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 5,
  "created_at": "2019-07-22T17:45:30Z",
  "updated_at": "2019-07-23T19:11:03Z",
  "closed_at": null,
  "author_association": "NONE",
  "body": "**Do you want to request a *feature* or report a *bug*?**\r\n\r\nAsking for advice.\r\n\r\n**What is the current behavior?**\r\n\r\nWhen you have a component that conditionally depends on a hook, it's quite hard to extract this logic to a place and not have the app do unnecessary re-renders.\r\n\r\n**If the current behavior is a bug, please provide the steps to reproduce and if possible a minimal demo of the problem. Your bug will get fixed much faster if we can run your code and it doesn't have dependencies other than React. Paste the link to your JSFiddle (https://jsfiddle.net/Luktwrdm/) or CodeSandbox (https://codesandbox.io/s/new) example below:**\r\n\r\nImplementation with hooks: https://codesandbox.io/s/nifty-williams-jg3q2\r\nWithout hooks: https://codesandbox.io/s/pedantic-ganguly-xchuz\r\n\r\n**What is the expected behavior?**\r\n\r\nWe could, of course, send a value down to the hook `useLongOperation({ dontRun: true })`, but this seems quite ugly to me. I expect some kind of API to do this more cleanly.\r\n\r\n**Which versions of React, and which browser / OS are affected by this issue? Did this work in previous versions of React?**\r\n\r\nIn previous versions of React you would just do the long operation on a didMount lifecycle when the context value equals true. The component would then have the images inside and would just re-render the image with the changed opacity.",
  "closed_by": null
}

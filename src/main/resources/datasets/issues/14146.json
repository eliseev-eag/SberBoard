{
  "url": "https://api.github.com/repos/facebook/react/issues/14146",
  "repository_url": "https://api.github.com/repos/facebook/react",
  "labels_url": "https://api.github.com/repos/facebook/react/issues/14146/labels{/name}",
  "comments_url": "https://api.github.com/repos/facebook/react/issues/14146/comments",
  "events_url": "https://api.github.com/repos/facebook/react/issues/14146/events",
  "html_url": "https://github.com/facebook/react/issues/14146",
  "id": 378537980,
  "node_id": "MDU6SXNzdWUzNzg1Mzc5ODA=",
  "number": 14146,
  "title": "ref callback not works as expected.",
  "user": {
    "login": "liudonghua123",
    "id": 2276718,
    "node_id": "MDQ6VXNlcjIyNzY3MTg=",
    "avatar_url": "https://avatars3.githubusercontent.com/u/2276718?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/liudonghua123",
    "html_url": "https://github.com/liudonghua123",
    "followers_url": "https://api.github.com/users/liudonghua123/followers",
    "following_url": "https://api.github.com/users/liudonghua123/following{/other_user}",
    "gists_url": "https://api.github.com/users/liudonghua123/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/liudonghua123/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/liudonghua123/subscriptions",
    "organizations_url": "https://api.github.com/users/liudonghua123/orgs",
    "repos_url": "https://api.github.com/users/liudonghua123/repos",
    "events_url": "https://api.github.com/users/liudonghua123/events{/privacy}",
    "received_events_url": "https://api.github.com/users/liudonghua123/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 1,
  "created_at": "2018-11-08T01:17:27Z",
  "updated_at": "2018-11-08T01:34:20Z",
  "closed_at": "2018-11-08T01:34:19Z",
  "author_association": "NONE",
  "body": "**What is the current behavior?**\r\nI used the ref callback in my code, I want to implement clicking a input and got that focused.\r\nMy main code was the belows.\r\n```js\r\n  handleFocus = name => event => {\r\n    console.info(`handleFocus ${name}, ${this[name]}`);\r\n    if (this[name]) {\r\n      this[name].focus();\r\n    }\r\n  };\r\n\r\n  itemRenderer = (item, index) => {\r\n    return (\r\n      <div className={this.props.classes.card} key={`${item.search}-${item.replace}`}>\r\n        <div className={this.props.classes.cardContent}>\r\n          <div className={this.props.classes.cardLeftContent}>\r\n            {this.state.editMode[index] ? <Input onKeyDown={this.handleKeyDown(item, index)} autoFocus ref={input => { console.info(`set ref ${input} on ${this}`); this.searchInput = input }} value={this.state.searchEdit} onClick={this.handleFocus('searchInput')} onChange={this.handleChange('searchEdit')} className={this.props.classes.input} inputProps={{ 'aria-label': 'Description', }} /> : <div onClick={this.handleDoubleClick(item, index)} className={this.props.classes.cardSearch}>{item.search}</div>}\r\n            <div className={this.props.classes.cardArrow}>{' -> '}</div>\r\n            {this.state.editMode[index] ? <Input onKeyDown={this.handleKeyDown(item, index)} ref={input => { console.info(`set ref ${input} on ${this}`); this.replaceInput = input }} value={this.state.replaceEdit} onClick={this.handleFocus('replaceInput')} onChange={this.handleChange('replaceEdit')} className={this.props.classes.input} inputProps={{ 'aria-label': 'Description', }} /> : <div onClick={this.handleDoubleClick(item, index)} className={this.props.classes.cardReplace}>{item.replace}</div>}\r\n          </div>\r\n          <div className={this.props.classes.cardRightAction}>\r\n            <Button variant=\"contained\" color=\"primary\" onClick={this.handleUpdate(item, index)} disabled={!this.state.editMode[index]}>修改</Button>\r\n            <Button variant=\"contained\" color=\"primary\" onClick={this.handleDelete(item)}>删除</Button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  };\r\n\r\n```\r\n\r\nBut in the handleFocus, the `this.replaceInput` is not the actural one, I could not invoke `this.replaceInput.focus()` or `this.replaceInput.current.focus()` or `this.replaceInput.input.focus()` .\r\n\r\n![image](https://user-images.githubusercontent.com/2276718/48171388-a7567380-e336-11e8-9260-14c1e534a9eb.png)\r\n\r\nThe full code is [here](https://github.com/liudonghua123/react-material-electron/blob/search-replace-example/src/pages/Configuration.js#L140).\r\n\r\nI have read https://github.com/facebook/react/issues/8359 and https://reactjs.org/docs/refs-and-the-dom.html#callback-refs but still could not make it works as expected.",
  "closed_by": {
    "login": "liudonghua123",
    "id": 2276718,
    "node_id": "MDQ6VXNlcjIyNzY3MTg=",
    "avatar_url": "https://avatars3.githubusercontent.com/u/2276718?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/liudonghua123",
    "html_url": "https://github.com/liudonghua123",
    "followers_url": "https://api.github.com/users/liudonghua123/followers",
    "following_url": "https://api.github.com/users/liudonghua123/following{/other_user}",
    "gists_url": "https://api.github.com/users/liudonghua123/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/liudonghua123/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/liudonghua123/subscriptions",
    "organizations_url": "https://api.github.com/users/liudonghua123/orgs",
    "repos_url": "https://api.github.com/users/liudonghua123/repos",
    "events_url": "https://api.github.com/users/liudonghua123/events{/privacy}",
    "received_events_url": "https://api.github.com/users/liudonghua123/received_events",
    "type": "User",
    "site_admin": false
  }
}

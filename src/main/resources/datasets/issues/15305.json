{
  "url": "https://api.github.com/repos/facebook/react/issues/15305",
  "repository_url": "https://api.github.com/repos/facebook/react",
  "labels_url": "https://api.github.com/repos/facebook/react/issues/15305/labels{/name}",
  "comments_url": "https://api.github.com/repos/facebook/react/issues/15305/comments",
  "events_url": "https://api.github.com/repos/facebook/react/issues/15305/events",
  "html_url": "https://github.com/facebook/react/pull/15305",
  "id": 428791142,
  "node_id": "MDExOlB1bGxSZXF1ZXN0MjY3MDY1Nzc5",
  "number": 15305,
  "title": "Prevent bundling of Node polyfills when importing TestUtils/TestRenderer",
  "user": {
    "login": "gaearon",
    "id": 810438,
    "node_id": "MDQ6VXNlcjgxMDQzOA==",
    "avatar_url": "https://avatars0.githubusercontent.com/u/810438?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/gaearon",
    "html_url": "https://github.com/gaearon",
    "followers_url": "https://api.github.com/users/gaearon/followers",
    "following_url": "https://api.github.com/users/gaearon/following{/other_user}",
    "gists_url": "https://api.github.com/users/gaearon/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/gaearon/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/gaearon/subscriptions",
    "organizations_url": "https://api.github.com/users/gaearon/orgs",
    "repos_url": "https://api.github.com/users/gaearon/repos",
    "events_url": "https://api.github.com/users/gaearon/events{/privacy}",
    "received_events_url": "https://api.github.com/users/gaearon/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 196858374,
      "node_id": "MDU6TGFiZWwxOTY4NTgzNzQ=",
      "url": "https://api.github.com/repos/facebook/react/labels/CLA%20Signed",
      "name": "CLA Signed",
      "color": "e7e7e7",
      "default": false
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 0,
  "created_at": "2019-04-03T14:11:08Z",
  "updated_at": "2019-04-03T15:12:35Z",
  "closed_at": "2019-04-03T15:12:32Z",
  "author_association": "MEMBER",
  "pull_request": {
    "url": "https://api.github.com/repos/facebook/react/pulls/15305",
    "html_url": "https://github.com/facebook/react/pull/15305",
    "diff_url": "https://github.com/facebook/react/pull/15305.diff",
    "patch_url": "https://github.com/facebook/react/pull/15305.patch"
  },
  "body": "I think this fixes https://github.com/facebook/react/pull/14853#discussion_r271517721.\r\n\r\nIn particular, there are two cases we'd like to avoid:\r\n\r\n* We don't want Webpack to emit a warning about `require` expression being dynamic.\r\n* We don't want Webpack to include its Node polyfills (for example, for `timers` or for `global`) because we access them. *(This is happening on master.)*\r\n\r\nEffectively, we want to obscure the `require` call from webpack. There are a few webpack-specific ways to do it but they seem brittle. Additionally, naïve ways to obscure it (like the current code) are inlined by GCC at our build step for the prod bundle.\r\n\r\nInstead, I'm reading `module.require` — which doesn't even exist in webpack runtime but exists in Node. Webpack doesn't analyze it. To further strengthen it, I make the `require` string itself dynamic. Seems like this is sufficient. I only tested webpack and Node. It might be worth testing that browserify or Rollup work as expected — but they also not known for noisy warnings so I assume it should be fine.\r\n\r\nThis wouldn't work if TestRender or TestUtils were a Node ESM because there would be no `require` in it. But that's status quo anyway because our current `require` call wouldn't work either.",
  "closed_by": {
    "login": "gaearon",
    "id": 810438,
    "node_id": "MDQ6VXNlcjgxMDQzOA==",
    "avatar_url": "https://avatars0.githubusercontent.com/u/810438?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/gaearon",
    "html_url": "https://github.com/gaearon",
    "followers_url": "https://api.github.com/users/gaearon/followers",
    "following_url": "https://api.github.com/users/gaearon/following{/other_user}",
    "gists_url": "https://api.github.com/users/gaearon/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/gaearon/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/gaearon/subscriptions",
    "organizations_url": "https://api.github.com/users/gaearon/orgs",
    "repos_url": "https://api.github.com/users/gaearon/repos",
    "events_url": "https://api.github.com/users/gaearon/events{/privacy}",
    "received_events_url": "https://api.github.com/users/gaearon/received_events",
    "type": "User",
    "site_admin": false
  }
}

{
  "url": "https://api.github.com/repos/facebook/react/issues/12740",
  "repository_url": "https://api.github.com/repos/facebook/react",
  "labels_url": "https://api.github.com/repos/facebook/react/issues/12740/labels{/name}",
  "comments_url": "https://api.github.com/repos/facebook/react/issues/12740/comments",
  "events_url": "https://api.github.com/repos/facebook/react/issues/12740/events",
  "html_url": "https://github.com/facebook/react/issues/12740",
  "id": 320241189,
  "node_id": "MDU6SXNzdWUzMjAyNDExODk=",
  "number": 12740,
  "title": "ComponentDidCatch is not working properly React js16.2.0",
  "user": {
    "login": "opteamix-ppalanisamy",
    "id": 18116033,
    "node_id": "MDQ6VXNlcjE4MTE2MDMz",
    "avatar_url": "https://avatars2.githubusercontent.com/u/18116033?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/opteamix-ppalanisamy",
    "html_url": "https://github.com/opteamix-ppalanisamy",
    "followers_url": "https://api.github.com/users/opteamix-ppalanisamy/followers",
    "following_url": "https://api.github.com/users/opteamix-ppalanisamy/following{/other_user}",
    "gists_url": "https://api.github.com/users/opteamix-ppalanisamy/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/opteamix-ppalanisamy/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/opteamix-ppalanisamy/subscriptions",
    "organizations_url": "https://api.github.com/users/opteamix-ppalanisamy/orgs",
    "repos_url": "https://api.github.com/users/opteamix-ppalanisamy/repos",
    "events_url": "https://api.github.com/users/opteamix-ppalanisamy/events{/privacy}",
    "received_events_url": "https://api.github.com/users/opteamix-ppalanisamy/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 4,
  "created_at": "2018-05-04T11:30:42Z",
  "updated_at": "2019-04-04T08:43:45Z",
  "closed_at": "2018-05-04T13:27:58Z",
  "author_association": "NONE",
  "body": "I'm using componentDidCatch method to catch errors in my child component and show error msg instead of broken UI. The below is sample code(Can't share client code base. So created the sample code)\r\n\r\nI can see the error UI for a second. After a second the UI is breaking and giving below error.\r\n\r\nÃ—\r\nError: I crashed!\r\nChild.render\r\nC:/Users/139376/Documents/workspace/ngen/lods/dev_1.0.0/externals/ngen-crm-webapp/framework/src/Child.js:21\r\n18 | render() {\r\n19 | if (this.state.counter === 2) {\r\n20 | // Simulate a JS error\r\n\r\n21 | throw new Error('I crashed!');\r\n22 | }\r\n23 | return\r\n\r\n{this.state.counter}\r\n;\r\n24 | }\r\npackage.json file as below.\r\n\"dependencies\": {\r\n\"react\": \"^16.2.0\",\r\n\"react-dom\": \"^16.2.0\",\r\n\"react-router\": \"^4.2.0\",\r\n\"react-router-dom\": \"^4.2.2\",\r\n\"react-scripts\": \"1.1.1\"\r\n},\r\n\r\nimport React, { Component } from 'react';\r\nimport ErrorBoundary from './ErrorBoundary'\r\nimport Child from './Child'\r\n\r\nclass App extends Component {\r\n\r\nconstructor(props) {\r\nsuper(props)\r\nthis.state = {\r\n}\r\n}\r\n\r\n// All child components should go inside ErrorBoundary.\r\nrender() {\r\nreturn (\r\n\r\nThese counter are inside the same error boundary. If crashes, the error boundary will replace both of them.\r\n\r\n\r\n\r\n\r\n);\r\n}\r\n}\r\nexport default App;\r\n\r\nimport React,{ Component } from 'react';\r\n\r\nclass Child extends Component {\r\n\r\nconstructor(props) {\r\nsuper(props);\r\nthis.state = { counter: 0 };\r\nthis.handleClick = this.handleClick.bind(this);\r\n}\r\n\r\nhandleClick() {\r\nthis.setState(({counter}) => ({\r\ncounter: counter + 1\r\n}));\r\n}\r\n\r\nrender() {\r\nif (this.state.counter === 2) {\r\n// Simulate a JS error\r\nthrow new Error('I crashed!');\r\n}\r\nreturn\r\n\r\n{this.state.counter}\r\n;\r\n}\r\n}\r\nexport default Child;\r\n\r\nimport React, { Component } from 'react';\r\n\r\nclass ErrorBoundary extends Component {\r\n\r\nconstructor(props) {\r\nsuper(props);\r\nthis.state = { error: null, errorInfo: null };\r\n}\r\n\r\ncomponentDidCatch(error, errorInfo) {\r\n// Catch errors in any components below and re-render with error message\r\nthis.setState({\r\nerror: error,\r\nerrorInfo: errorInfo\r\n})\r\n// You can also log error messages to an error reporting service here\r\n}\r\n\r\nrender() {\r\nif (this.state.errorInfo) {\r\n// Error path\r\nreturn (\r\n\r\nSomething went wrong.\r\n\r\n<details style={{ whiteSpace: 'pre-wrap' }}>\r\n{this.state.error && this.state.error.toString()}\r\n\r\n\r\n{this.state.errorInfo.componentStack}\r\n\r\n\r\n);\r\n}\r\n// Normally, just render children\r\nreturn this.props.children;\r\n}\r\n}\r\n\r\nexport default ErrorBoundary;\r\n",
  "closed_by": {
    "login": "gaearon",
    "id": 810438,
    "node_id": "MDQ6VXNlcjgxMDQzOA==",
    "avatar_url": "https://avatars0.githubusercontent.com/u/810438?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/gaearon",
    "html_url": "https://github.com/gaearon",
    "followers_url": "https://api.github.com/users/gaearon/followers",
    "following_url": "https://api.github.com/users/gaearon/following{/other_user}",
    "gists_url": "https://api.github.com/users/gaearon/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/gaearon/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/gaearon/subscriptions",
    "organizations_url": "https://api.github.com/users/gaearon/orgs",
    "repos_url": "https://api.github.com/users/gaearon/repos",
    "events_url": "https://api.github.com/users/gaearon/events{/privacy}",
    "received_events_url": "https://api.github.com/users/gaearon/received_events",
    "type": "User",
    "site_admin": false
  }
}

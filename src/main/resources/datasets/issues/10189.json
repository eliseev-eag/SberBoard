{
  "url": "https://api.github.com/repos/facebook/react/issues/10189",
  "repository_url": "https://api.github.com/repos/facebook/react",
  "labels_url": "https://api.github.com/repos/facebook/react/issues/10189/labels{/name}",
  "comments_url": "https://api.github.com/repos/facebook/react/issues/10189/comments",
  "events_url": "https://api.github.com/repos/facebook/react/issues/10189/events",
  "html_url": "https://github.com/facebook/react/issues/10189",
  "id": 243147750,
  "node_id": "MDU6SXNzdWUyNDMxNDc3NTA=",
  "number": 10189,
  "title": "Settle on Heuristic/API for Choosing Hydration",
  "user": {
    "login": "sebmarkbage",
    "id": 63648,
    "node_id": "MDQ6VXNlcjYzNjQ4",
    "avatar_url": "https://avatars2.githubusercontent.com/u/63648?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/sebmarkbage",
    "html_url": "https://github.com/sebmarkbage",
    "followers_url": "https://api.github.com/users/sebmarkbage/followers",
    "following_url": "https://api.github.com/users/sebmarkbage/following{/other_user}",
    "gists_url": "https://api.github.com/users/sebmarkbage/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/sebmarkbage/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/sebmarkbage/subscriptions",
    "organizations_url": "https://api.github.com/users/sebmarkbage/orgs",
    "repos_url": "https://api.github.com/users/sebmarkbage/repos",
    "events_url": "https://api.github.com/users/sebmarkbage/events{/privacy}",
    "received_events_url": "https://api.github.com/users/sebmarkbage/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": {
    "url": "https://api.github.com/repos/facebook/react/milestones/23",
    "html_url": "https://github.com/facebook/react/milestone/23",
    "labels_url": "https://api.github.com/repos/facebook/react/milestones/23/labels",
    "id": 1670888,
    "node_id": "MDk6TWlsZXN0b25lMTY3MDg4OA==",
    "number": 23,
    "title": "16.0",
    "description": "",
    "creator": {
      "login": "gaearon",
      "id": 810438,
      "node_id": "MDQ6VXNlcjgxMDQzOA==",
      "avatar_url": "https://avatars0.githubusercontent.com/u/810438?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/gaearon",
      "html_url": "https://github.com/gaearon",
      "followers_url": "https://api.github.com/users/gaearon/followers",
      "following_url": "https://api.github.com/users/gaearon/following{/other_user}",
      "gists_url": "https://api.github.com/users/gaearon/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/gaearon/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/gaearon/subscriptions",
      "organizations_url": "https://api.github.com/users/gaearon/orgs",
      "repos_url": "https://api.github.com/users/gaearon/repos",
      "events_url": "https://api.github.com/users/gaearon/events{/privacy}",
      "received_events_url": "https://api.github.com/users/gaearon/received_events",
      "type": "User",
      "site_admin": false
    },
    "open_issues": 0,
    "closed_issues": 69,
    "state": "closed",
    "created_at": "2016-03-29T02:12:16Z",
    "updated_at": "2017-10-04T11:52:38Z",
    "due_on": null,
    "closed_at": "2017-10-04T11:52:38Z"
  },
  "comments": 5,
  "created_at": "2017-07-15T02:34:08Z",
  "updated_at": "2017-08-09T00:39:52Z",
  "closed_at": "2017-08-01T20:36:16Z",
  "author_association": "MEMBER",
  "body": "`ReactDOM.render(..., container)` can be used on either purely client-side content or on server-side rendered content. If it is client-side, we empty the container first and then render into it. If it is server-side, we hydrate it. We currently use data-reactid to determine if we should hydrate or clear.\r\n\r\nWe could in theory hydrate to patch it up but it's not safe with the current hydration model.\r\n\r\nIf this is your initial DOM `<div id=\"container\"><div class=\"spinner\">Loading...</div></div>` and then call `ReactDOM.render(<div class=\"myapp\"><span>App</span></div>, document.getElementById('container'))` intending to do a client-side only render (not hydration).\r\nThen you end with `<div id=\"container\"><div class=\"spinner\"><span>App</span></div></div>`. Because we don't patch up the attributes.\r\n\r\nI see four possible solutions:\r\n\r\n1) Always patch up attributes if they differ. This would be really slow to hydrate in the normal hydration mode and slow down initial render into a non-SSR tree.\r\n\r\n2) Continue to use a heuristic by hydrating when some kind of extra meta data in the HTML is present. Add it in the server-renderer. We can change it so that only one meta data is needed. Not one per element. It can be a comment or an attribute.\r\n\r\n3) Introduce an explicit API to hydrate. `ReactDOM.hydrate(..., container)`. SSR hydration callsites have to be updated.\r\n\r\n4) Introduce Option 3 but keep Option 2 with a warning for one major version to make it a non-breaking change. Allows people to incrementally upgrade to `ReactDOM.hydrate` at their leisure.",
  "closed_by": {
    "login": "gaearon",
    "id": 810438,
    "node_id": "MDQ6VXNlcjgxMDQzOA==",
    "avatar_url": "https://avatars0.githubusercontent.com/u/810438?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/gaearon",
    "html_url": "https://github.com/gaearon",
    "followers_url": "https://api.github.com/users/gaearon/followers",
    "following_url": "https://api.github.com/users/gaearon/following{/other_user}",
    "gists_url": "https://api.github.com/users/gaearon/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/gaearon/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/gaearon/subscriptions",
    "organizations_url": "https://api.github.com/users/gaearon/orgs",
    "repos_url": "https://api.github.com/users/gaearon/repos",
    "events_url": "https://api.github.com/users/gaearon/events{/privacy}",
    "received_events_url": "https://api.github.com/users/gaearon/received_events",
    "type": "User",
    "site_admin": false
  }
}

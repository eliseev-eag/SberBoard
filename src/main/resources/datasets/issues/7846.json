{
  "url": "https://api.github.com/repos/facebook/react/issues/7846",
  "repository_url": "https://api.github.com/repos/facebook/react",
  "labels_url": "https://api.github.com/repos/facebook/react/issues/7846/labels{/name}",
  "comments_url": "https://api.github.com/repos/facebook/react/issues/7846/comments",
  "events_url": "https://api.github.com/repos/facebook/react/issues/7846/events",
  "html_url": "https://github.com/facebook/react/issues/7846",
  "id": 180610036,
  "node_id": "MDU6SXNzdWUxODA2MTAwMzY=",
  "number": 7846,
  "title": "React lets access from the DOM to internal instances",
  "user": {
    "login": "bloodyowl",
    "id": 1688645,
    "node_id": "MDQ6VXNlcjE2ODg2NDU=",
    "avatar_url": "https://avatars1.githubusercontent.com/u/1688645?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/bloodyowl",
    "html_url": "https://github.com/bloodyowl",
    "followers_url": "https://api.github.com/users/bloodyowl/followers",
    "following_url": "https://api.github.com/users/bloodyowl/following{/other_user}",
    "gists_url": "https://api.github.com/users/bloodyowl/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/bloodyowl/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/bloodyowl/subscriptions",
    "organizations_url": "https://api.github.com/users/bloodyowl/orgs",
    "repos_url": "https://api.github.com/users/bloodyowl/repos",
    "events_url": "https://api.github.com/users/bloodyowl/events{/privacy}",
    "received_events_url": "https://api.github.com/users/bloodyowl/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 3,
  "created_at": "2016-10-03T10:40:22Z",
  "updated_at": "2016-10-03T12:06:24Z",
  "closed_at": "2016-10-03T11:34:46Z",
  "author_association": "CONTRIBUTOR",
  "body": "**current behavior?**\n\nIn [ReactDOMComponentTree.js ](https://github.com/facebook/react/blob/master/src/renderers/dom/client/ReactDOMComponentTree.js), `internalInstanceKey` gives easy access to React internal instances, even if the property name is randomly generated.\n\nFor instance the following piece of code lets access to the redux state, placed in context. \n\n``` javascript\nlet reactRoot = document.querySelector(\"[data-reactroot]\")\nreactRoot[Object.getOwnPropertyNames(reactRoot)[0]]._currentElement._owner._context.store.getState()\n```\n\nThis might lead to some security issues with potentially malicious third-party scripts or self-XSS.\n\nIs something like the following piece of code considerable in order not to expose these things?\n\n``` javascript\nconst instanceMap = {}\n\nconst setInstance = (node, instance) => {\n  const id = nuid()\n  node[internalInstanceKey] = id\n  instanceMap[id] = instance\n}\n\nconst removeInstance = (node) => {\n  delete instanceMap[node[internalInstanceKey]]\n}\n\nconst getInstance = (node) => {\n  return instanceMap[node[internalInstanceKey]]\n}\n```\n",
  "closed_by": {
    "login": "gaearon",
    "id": 810438,
    "node_id": "MDQ6VXNlcjgxMDQzOA==",
    "avatar_url": "https://avatars0.githubusercontent.com/u/810438?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/gaearon",
    "html_url": "https://github.com/gaearon",
    "followers_url": "https://api.github.com/users/gaearon/followers",
    "following_url": "https://api.github.com/users/gaearon/following{/other_user}",
    "gists_url": "https://api.github.com/users/gaearon/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/gaearon/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/gaearon/subscriptions",
    "organizations_url": "https://api.github.com/users/gaearon/orgs",
    "repos_url": "https://api.github.com/users/gaearon/repos",
    "events_url": "https://api.github.com/users/gaearon/events{/privacy}",
    "received_events_url": "https://api.github.com/users/gaearon/received_events",
    "type": "User",
    "site_admin": false
  }
}

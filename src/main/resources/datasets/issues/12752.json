{
  "url": "https://api.github.com/repos/facebook/react/issues/12752",
  "repository_url": "https://api.github.com/repos/facebook/react",
  "labels_url": "https://api.github.com/repos/facebook/react/issues/12752/labels{/name}",
  "comments_url": "https://api.github.com/repos/facebook/react/issues/12752/comments",
  "events_url": "https://api.github.com/repos/facebook/react/issues/12752/events",
  "html_url": "https://github.com/facebook/react/issues/12752",
  "id": 320578876,
  "node_id": "MDU6SXNzdWUzMjA1Nzg4NzY=",
  "number": 12752,
  "title": "requestAnimationFrame not supported error when unit testing a d3 transition react component",
  "user": {
    "login": "alphagamer7",
    "id": 17358908,
    "node_id": "MDQ6VXNlcjE3MzU4OTA4",
    "avatar_url": "https://avatars3.githubusercontent.com/u/17358908?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/alphagamer7",
    "html_url": "https://github.com/alphagamer7",
    "followers_url": "https://api.github.com/users/alphagamer7/followers",
    "following_url": "https://api.github.com/users/alphagamer7/following{/other_user}",
    "gists_url": "https://api.github.com/users/alphagamer7/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/alphagamer7/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/alphagamer7/subscriptions",
    "organizations_url": "https://api.github.com/users/alphagamer7/orgs",
    "repos_url": "https://api.github.com/users/alphagamer7/repos",
    "events_url": "https://api.github.com/users/alphagamer7/events{/privacy}",
    "received_events_url": "https://api.github.com/users/alphagamer7/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 1,
  "created_at": "2018-05-06T09:59:28Z",
  "updated_at": "2018-05-06T18:13:20Z",
  "closed_at": "2018-05-06T18:13:20Z",
  "author_association": "NONE",
  "body": "I use d3 with transition in my react component similar to this example (http://bl.ocks.org/d3noob/7030f35b72de721622b8) where transition happens on button click.\r\n\r\nThe unit test\r\n```\r\nconst graphData = data;\r\n\r\nconst transactionDetail = {\r\n\tdisplayFrom: \"2018-05-01\",\r\n\tdisplayTo: \"2018-06-01\"\r\n};\r\n\r\nconst component = shallow(<TimelineGraph graphData={graphData} transactionDetail={transactionDetail} />);\r\n\r\ndescribe(\"TimelineGraph\", function() {\r\n\ttest(\"should render svg\", function() {\r\n\t\texpect(component.find(\"svg\")).to.have.length(1);\r\n\t});\r\n\ttest(\"should handle click anchor tag\", () => {\r\n\t\tconst handleClick = component.find(\"a\").first();\r\n\t\texpect(handleClick.prop.length).to.equal(1);\r\n\t});\r\n});\r\n```\r\nThe error\r\n```\r\n  ● Test suite failed to run\r\n\r\n    requestAnimationFrame is not supported in Node\r\n\r\n       5 | window.addEventListener = () => {};\r\n       6 | window.requestAnimationFrame = () => {\r\n    >  7 | \tthrow new Error(\"requestAnimationFrame is not supported in Node\");\r\n       8 | };\r\n       9 | \r\n      10 | module.exports = react;\r\n      \r\n      at Object.<anonymous>.window.requestAnimationFrame (__mocks__/react.js:7:8)\r\n      at Object.now (node_modules/d3-timer/build/d3-timer.js:21:23)\r\n      at Selection.selection_transition [as transition] (node_modules/d3-transition/build/d3-transition.js:745:59)\r\n      at TimelineGraph._this.renderYAxis (src/components/Graphs/TimelineGraph/index.js:74:35)\r\n      at TimelineGraph.renderGraph (src/components/Graphs/TimelineGraph/index.js:249:622)\r\n      at TimelineGraph.componentDidMount (src/components/Graphs/TimelineGraph/index.js:249:429)\r\n      at node_modules/enzyme/build/ShallowWrapper.js:126:20\r\n      at Object.batchedUpdates (node_modules/enzyme-adapter-react-16/build/ReactSixteenAdapter.js:342:22)\r\n      at new ShallowWrapper (node_modules/enzyme/build/ShallowWrapper.js:125:24)\r\n      at shallow (node_modules/enzyme/build/shallow.js:19:10)\r\n      at Object.<anonymous> (src/components/Graphs/TimelineGraph/TimelineGraph.test.js:16:37)\r\n```\r\n\r\n\r\nWhen I test the component, I get this `requestAnimationFrame is not supported in Node` exception from the issue #9102 thrown even when I try to use d3 timer(https://groups.google.com/forum/#!topic/d3-js/BioLtR9ixYE). Is there any way of overcoming this thrown exception other than by removing the thrown exception code mentioned in #9102 issue ?\r\n\r\nInfo:\r\n\r\nreact : 16.2.0\r\nreact-dom-16.2.0\r\nenzyme -3.3.0\r\nreact-test-renderer-16.2.0\r\nOS : Windows 10\r\n",
  "closed_by": {
    "login": "aweary",
    "id": 6886061,
    "node_id": "MDQ6VXNlcjY4ODYwNjE=",
    "avatar_url": "https://avatars2.githubusercontent.com/u/6886061?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/aweary",
    "html_url": "https://github.com/aweary",
    "followers_url": "https://api.github.com/users/aweary/followers",
    "following_url": "https://api.github.com/users/aweary/following{/other_user}",
    "gists_url": "https://api.github.com/users/aweary/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/aweary/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/aweary/subscriptions",
    "organizations_url": "https://api.github.com/users/aweary/orgs",
    "repos_url": "https://api.github.com/users/aweary/repos",
    "events_url": "https://api.github.com/users/aweary/events{/privacy}",
    "received_events_url": "https://api.github.com/users/aweary/received_events",
    "type": "User",
    "site_admin": false
  }
}

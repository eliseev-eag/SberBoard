{
  "url": "https://api.github.com/repos/facebook/react/issues/15360",
  "repository_url": "https://api.github.com/repos/facebook/react",
  "labels_url": "https://api.github.com/repos/facebook/react/issues/15360/labels{/name}",
  "comments_url": "https://api.github.com/repos/facebook/react/issues/15360/comments",
  "events_url": "https://api.github.com/repos/facebook/react/issues/15360/events",
  "html_url": "https://github.com/facebook/react/issues/15360",
  "id": 431057553,
  "node_id": "MDU6SXNzdWU0MzEwNTc1NTM=",
  "number": 15360,
  "title": "Support `useState` style lazy state initialization in `useReducer`",
  "user": {
    "login": "fediev",
    "id": 8394938,
    "node_id": "MDQ6VXNlcjgzOTQ5Mzg=",
    "avatar_url": "https://avatars0.githubusercontent.com/u/8394938?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/fediev",
    "html_url": "https://github.com/fediev",
    "followers_url": "https://api.github.com/users/fediev/followers",
    "following_url": "https://api.github.com/users/fediev/following{/other_user}",
    "gists_url": "https://api.github.com/users/fediev/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/fediev/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/fediev/subscriptions",
    "organizations_url": "https://api.github.com/users/fediev/orgs",
    "repos_url": "https://api.github.com/users/fediev/repos",
    "events_url": "https://api.github.com/users/fediev/events{/privacy}",
    "received_events_url": "https://api.github.com/users/fediev/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 1,
  "created_at": "2019-04-09T16:20:05Z",
  "updated_at": "2019-04-09T21:30:26Z",
  "closed_at": "2019-04-09T21:30:26Z",
  "author_association": "NONE",
  "body": "**Do you want to request a *feature* or report a *bug*?**\r\n\r\nFeature\r\n\r\n**What is the current behavior?**\r\n\r\nSignatures of `useState` and `useReducer` for lazy state initialization are different and not consistent.\r\n\r\n- signature of `useState`\r\n```ts\r\nfunction useState<S>(initialState: () => S)\r\n```\r\n\r\n- signature of `useReducer`\r\n```ts\r\nfunction useReducer<S, I, A>(\r\n  reducer: (S, A) => S,\r\n  initialArg: I,\r\n  init: I => S,\r\n)\r\n```\r\n\r\n**What is the expected behavior?**\r\n\r\nSupport below signature of `useReducer` for lazy initialization.\r\n\r\n```ts\r\nfunction useReducer<S, A>(\r\n  reducer: (S, A) => S, \r\n  initialState: () => S\r\n)\r\n```\r\n\r\nThis will allow lazy initializations like this.\r\n\r\n```js\r\n// Lazy initialization example in https://reactjs.org/docs/hooks-reference.html#usereducer \r\n// will be\r\nfunction Counter({initialCount}) {\r\n  // previously\r\n  // `const [state, dispatch] = useReducer(reducer, initialCount, init);`\r\n  const [state, dispatch] = useReducer(reducer, () => init(initialCount));\r\n  // ...\r\n}\r\n\r\n// To get initial state from `reducer` (redux style)\r\n// `useReducer(reducer, undefined, reducer)` will be\r\nconst [state, dispatch] = useReducer(reducer, reducer);\r\n```\r\n\r\n**Which versions of React, and which browser / OS are affected by this issue?**\r\n\r\n16.8",
  "closed_by": {
    "login": "acdlite",
    "id": 3624098,
    "node_id": "MDQ6VXNlcjM2MjQwOTg=",
    "avatar_url": "https://avatars0.githubusercontent.com/u/3624098?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/acdlite",
    "html_url": "https://github.com/acdlite",
    "followers_url": "https://api.github.com/users/acdlite/followers",
    "following_url": "https://api.github.com/users/acdlite/following{/other_user}",
    "gists_url": "https://api.github.com/users/acdlite/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/acdlite/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/acdlite/subscriptions",
    "organizations_url": "https://api.github.com/users/acdlite/orgs",
    "repos_url": "https://api.github.com/users/acdlite/repos",
    "events_url": "https://api.github.com/users/acdlite/events{/privacy}",
    "received_events_url": "https://api.github.com/users/acdlite/received_events",
    "type": "User",
    "site_admin": false
  }
}

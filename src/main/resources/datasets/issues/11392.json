{
  "url": "https://api.github.com/repos/facebook/react/issues/11392",
  "repository_url": "https://api.github.com/repos/facebook/react",
  "labels_url": "https://api.github.com/repos/facebook/react/issues/11392/labels{/name}",
  "comments_url": "https://api.github.com/repos/facebook/react/issues/11392/comments",
  "events_url": "https://api.github.com/repos/facebook/react/issues/11392/events",
  "html_url": "https://github.com/facebook/react/issues/11392",
  "id": 269319071,
  "node_id": "MDU6SXNzdWUyNjkzMTkwNzE=",
  "number": 11392,
  "title": "Calling setState inside a requestAnimationFrame loop causes a leak",
  "user": {
    "login": "cristidrg",
    "id": 13036803,
    "node_id": "MDQ6VXNlcjEzMDM2ODAz",
    "avatar_url": "https://avatars3.githubusercontent.com/u/13036803?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/cristidrg",
    "html_url": "https://github.com/cristidrg",
    "followers_url": "https://api.github.com/users/cristidrg/followers",
    "following_url": "https://api.github.com/users/cristidrg/following{/other_user}",
    "gists_url": "https://api.github.com/users/cristidrg/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/cristidrg/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/cristidrg/subscriptions",
    "organizations_url": "https://api.github.com/users/cristidrg/orgs",
    "repos_url": "https://api.github.com/users/cristidrg/repos",
    "events_url": "https://api.github.com/users/cristidrg/events{/privacy}",
    "received_events_url": "https://api.github.com/users/cristidrg/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 4,
  "created_at": "2017-10-28T13:54:28Z",
  "updated_at": "2017-10-30T14:27:52Z",
  "closed_at": "2017-10-30T14:27:52Z",
  "author_association": "CONTRIBUTOR",
  "body": "**Do you want to request a *feature* or report a *bug*?**\r\nBug\r\n\r\n**What is the current behavior?**\r\nIf a component implements a `requestAnimationFrame` loop and calls `setState` inside it, it will endlessly create listeners on the page as shown in the picture below:\r\n   https://i.imgur.com/6MN5JQc.png   (Chrome Developer Tools)\r\n\r\nWhile I understand that React 16 uses rAF for its reconciliation algorithm, running multiple rAF should work without producing the above behavior. From my understanding, all rAF callbacks will be appended to the next frame's callstack.\r\n\r\n**If the current behavior is a bug, please provide the steps to reproduce and if possible a minimal demo of the problem**\r\nHere is the minimal code required to trigger this behavior in React16: https://jsfiddle.net/cristidrg/Luktwrdm/29/\r\n\r\nProfiling this fiddle will produce the same result as in the previous picture.\r\n\r\n**What is the expected behavior?**\r\nIn React 15.6.2 this behavior does not happen, running the same code will not produce any unwanted listeners as seen in the picture below: https://i.imgur.com/EBhiE6p.png\r\n\r\n**Which versions of React, and which browser / OS are affected by this issue? Did this work in previous versions of React?**\r\nThis was tested in React 16.0.0 on Ubuntu 16.04 with Chrome 57.0.2987.98. The behavior did not happen in previous versions of React.",
  "closed_by": {
    "login": "cristidrg",
    "id": 13036803,
    "node_id": "MDQ6VXNlcjEzMDM2ODAz",
    "avatar_url": "https://avatars3.githubusercontent.com/u/13036803?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/cristidrg",
    "html_url": "https://github.com/cristidrg",
    "followers_url": "https://api.github.com/users/cristidrg/followers",
    "following_url": "https://api.github.com/users/cristidrg/following{/other_user}",
    "gists_url": "https://api.github.com/users/cristidrg/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/cristidrg/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/cristidrg/subscriptions",
    "organizations_url": "https://api.github.com/users/cristidrg/orgs",
    "repos_url": "https://api.github.com/users/cristidrg/repos",
    "events_url": "https://api.github.com/users/cristidrg/events{/privacy}",
    "received_events_url": "https://api.github.com/users/cristidrg/received_events",
    "type": "User",
    "site_admin": false
  }
}

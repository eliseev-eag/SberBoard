{
  "url": "https://api.github.com/repos/facebook/react/issues/4018",
  "repository_url": "https://api.github.com/repos/facebook/react",
  "labels_url": "https://api.github.com/repos/facebook/react/issues/4018/labels{/name}",
  "comments_url": "https://api.github.com/repos/facebook/react/issues/4018/comments",
  "events_url": "https://api.github.com/repos/facebook/react/issues/4018/events",
  "html_url": "https://github.com/facebook/react/issues/4018",
  "id": 84618045,
  "node_id": "MDU6SXNzdWU4NDYxODA0NQ==",
  "number": 4018,
  "title": "componentDidUpdate and componentWillUpdate pass incorrect state",
  "user": {
    "login": "xowirun",
    "id": 6922277,
    "node_id": "MDQ6VXNlcjY5MjIyNzc=",
    "avatar_url": "https://avatars0.githubusercontent.com/u/6922277?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/xowirun",
    "html_url": "https://github.com/xowirun",
    "followers_url": "https://api.github.com/users/xowirun/followers",
    "following_url": "https://api.github.com/users/xowirun/following{/other_user}",
    "gists_url": "https://api.github.com/users/xowirun/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/xowirun/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/xowirun/subscriptions",
    "organizations_url": "https://api.github.com/users/xowirun/orgs",
    "repos_url": "https://api.github.com/users/xowirun/repos",
    "events_url": "https://api.github.com/users/xowirun/events{/privacy}",
    "received_events_url": "https://api.github.com/users/xowirun/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 3,
  "created_at": "2015-06-03T15:20:49Z",
  "updated_at": "2015-06-05T07:22:05Z",
  "closed_at": "2015-06-03T17:37:02Z",
  "author_association": "NONE",
  "body": "with these 2 functions we should be able to react to state/props change, but that not happening with  objects.\n\n```\nvar Component = React.createClass({\n    getInitialState: function () {\n        return {var1: 1, var2: {a: 1}};\n    },\n    componentDidMount: function () {\n        setInterval(function () { this.updateState() }.bind(this), 2000);\n    },\n    componentWillUpdate: function (nextProps, nextState) {\n        console.log('----');\n        console.log(this.state.var1, nextState.var1);\n        console.log(this.state.var2, nextState.var2);\n    },\n\n    updateState: function () {\n        var var2 = this.state.var2,\n            var1 = this.state.var1;\n        var1 = var1 + 1;\n        var2['a'] = var2['a'] + 1;\n        this.setState({ var1: var1, var2: var2 });\n    },\n    render: function () {\n        return <div>1</div>\n    }\n});\n```\n\nresult:\n\n```\n----\n2 3\nObject {a: 3} Object {a: 3}\n----\n3 4\nObject {a: 4} Object {a: 4}\n----\n4 5\nObject {a: 5} Object {a: 5}\n```\n\nas you can see, numbers in states are different, but objects in states are identical, so we cant rely on them.\nthe same with componentDidUpdate - objects in prevState are already modified.\n",
  "closed_by": {
    "login": "zpao",
    "id": 8445,
    "node_id": "MDQ6VXNlcjg0NDU=",
    "avatar_url": "https://avatars1.githubusercontent.com/u/8445?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/zpao",
    "html_url": "https://github.com/zpao",
    "followers_url": "https://api.github.com/users/zpao/followers",
    "following_url": "https://api.github.com/users/zpao/following{/other_user}",
    "gists_url": "https://api.github.com/users/zpao/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/zpao/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/zpao/subscriptions",
    "organizations_url": "https://api.github.com/users/zpao/orgs",
    "repos_url": "https://api.github.com/users/zpao/repos",
    "events_url": "https://api.github.com/users/zpao/events{/privacy}",
    "received_events_url": "https://api.github.com/users/zpao/received_events",
    "type": "User",
    "site_admin": false
  }
}

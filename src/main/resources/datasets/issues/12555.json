{
  "url": "https://api.github.com/repos/facebook/react/issues/12555",
  "repository_url": "https://api.github.com/repos/facebook/react",
  "labels_url": "https://api.github.com/repos/facebook/react/issues/12555/labels{/name}",
  "comments_url": "https://api.github.com/repos/facebook/react/issues/12555/comments",
  "events_url": "https://api.github.com/repos/facebook/react/issues/12555/events",
  "html_url": "https://github.com/facebook/react/issues/12555",
  "id": 311818816,
  "node_id": "MDU6SXNzdWUzMTE4MTg4MTY=",
  "number": 12555,
  "title": "Webpack 4.5.0 package react 16.3.1 development mode popProvider error",
  "user": {
    "login": "dreamthen",
    "id": 13704681,
    "node_id": "MDQ6VXNlcjEzNzA0Njgx",
    "avatar_url": "https://avatars2.githubusercontent.com/u/13704681?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/dreamthen",
    "html_url": "https://github.com/dreamthen",
    "followers_url": "https://api.github.com/users/dreamthen/followers",
    "following_url": "https://api.github.com/users/dreamthen/following{/other_user}",
    "gists_url": "https://api.github.com/users/dreamthen/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/dreamthen/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/dreamthen/subscriptions",
    "organizations_url": "https://api.github.com/users/dreamthen/orgs",
    "repos_url": "https://api.github.com/users/dreamthen/repos",
    "events_url": "https://api.github.com/users/dreamthen/events{/privacy}",
    "received_events_url": "https://api.github.com/users/dreamthen/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 620368407,
      "node_id": "MDU6TGFiZWw2MjAzNjg0MDc=",
      "url": "https://api.github.com/repos/facebook/react/labels/Resolution:%20Needs%20More%20Information",
      "name": "Resolution: Needs More Information",
      "color": "fffde7",
      "default": false
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 3,
  "created_at": "2018-04-06T01:08:59Z",
  "updated_at": "2018-04-06T14:43:03Z",
  "closed_at": "2018-04-06T14:43:03Z",
  "author_association": "NONE",
  "body": "<!--\r\n  Note: if the issue is about documentation or the website, please file it at:\r\n  https://github.com/reactjs/reactjs.org/issues/new\r\n-->\r\n\r\n**Do you want to request a *feature* or report a *bug*?**\r\nBug\r\n**What is the current behavior?**\r\nhi,I used webpack 4.5.0 to package react 16.3.1 and react-dom 16.3.1. There was no problem with compiling, but there was a react-dom.development.js problem with the browser:\r\n```javascript\r\nUncaught TypeError: Cannot read property 'popProvider' of undefined\r\n```\r\nOpened the react-dom.development.js file and there was a problem with this sentence:\r\n```javascript\r\nvar popProvider = newContext.popProvider;\r\n```\r\nin ReactFiberScheduler Function.\r\nI have just discovered that this problem only occurs in the development mode, there is no problem in the production mode.\r\n\r\n**If the current behavior is a bug, please provide the steps to reproduce and if possible a minimal demo of the problem. Your bug will get fixed much faster if we can run your code and it doesn't have dependencies other than React. Paste the link to your JSFiddle (https://jsfiddle.net/Luktwrdm/) or CodeSandbox (https://codesandbox.io/s/new) example below:**\r\nI tried to pack react 16.3.1 and react-dom 16.3.1 with webpack 3.x and webpack devserver 2.x, no problem.\r\nBelow is my webpack.config.js:\r\n```javascript\r\nconst webpack = require(\"webpack\"),\r\n    path = require(\"path\"),\r\n    ExtractTextPlugin = require(\"extract-text-webpack-plugin\"),\r\n    HtmlWebpackPlugin = require(\"html-webpack-plugin\"),\r\n    UglifyJsPlugin = require(\"uglifyjs-webpack-plugin\");\r\n\r\nconst PUBLIC_DIR = \"/\",\r\n    DLL_DIR = path.resolve(__dirname, \"../dll\"),\r\n    APP_DIR = path.resolve(__dirname, \"../scripts\"),\r\n    ROOT_DIR = path.resolve(__dirname, \"../\"),\r\n    BUILD_DIR = path.resolve(__dirname, \"../build\"),\r\n    STYLE_DIR = path.resolve(__dirname, \"../stylesheets\"),\r\n    MANIFEST_DIR = require(path.resolve(__dirname, `${DLL_DIR}/vendor_manifest.dll.json`));\r\n\r\nconst port = 9997;\r\n\r\nconst webpackDevConfig = {\r\n    mode: \"development\",\r\n    devtool: \"source-map\",\r\n    entry: {\r\n        index: `${APP_DIR}/index.js`\r\n    },\r\n    output: {\r\n        publicPath: PUBLIC_DIR,\r\n        filename: \"[name]_[hash].js\",\r\n        path: BUILD_DIR\r\n    },\r\n    optimization: {\r\n        minimize: true,\r\n        minimizer: [\r\n            new UglifyJsPlugin({\r\n                sourceMap: true,\r\n                uglifyOptions: {\r\n                    compress: {\r\n                        unused: false,\r\n                        dead_code: false,\r\n                        warnings: true\r\n                    },\r\n                    output: {\r\n                        comments: true\r\n                    }\r\n                }\r\n            })\r\n        ]\r\n    },\r\n    resolve: {\r\n        modules: [\r\n            \"node_modules\",\r\n            APP_DIR,\r\n            DLL_DIR\r\n        ]\r\n    },\r\n    externals: {\r\n        jquery: \"jQuery\"\r\n    },\r\n    module: {\r\n        rules: [{\r\n            test: /.js[x]?$/,\r\n            include: [\r\n                APP_DIR,\r\n                DLL_DIR,\r\n                STYLE_DIR\r\n            ],\r\n            use: [{loader: \"babel-loader\"}]\r\n        }, {\r\n            test: /.css$/,\r\n            use: ExtractTextPlugin.extract({\r\n                fallback: \"style-loader\",\r\n                use: [{loader: \"css-loader\", options: {importLoaders: 1}}, {loader: \"postcss-loader\"}],\r\n                publicPath: STYLE_DIR\r\n            })\r\n        }, {\r\n            test: /.(png|jpg|jpeg|bmp|gif)$/,\r\n            use: [{\r\n                loader: \"url-loader\",\r\n                options: {\r\n                    limit: 10000\r\n                }\r\n            }, {loader: \"image-webpack-loader\"}]\r\n        }]\r\n    },\r\n    plugins: [\r\n        new webpack.NoEmitOnErrorsPlugin(),\r\n        new webpack.DllReferencePlugin({\r\n            manifest: MANIFEST_DIR,\r\n            context: ROOT_DIR\r\n        }),\r\n        new ExtractTextPlugin(\"[name]_[hash].css\"),\r\n        new HtmlWebpackPlugin({\r\n            publicPath: PUBLIC_DIR,\r\n            filename: \"index.html\",\r\n            template: `${ROOT_DIR}/index.html`,\r\n            chunks: ['index'],\r\n            inject: 'body'\r\n        })\r\n    ],\r\n    devServer: {\r\n        host: \"0.0.0.0\",\r\n        port: port,\r\n        proxy: {},\r\n        historyApiFallback: true\r\n    }\r\n};\r\n\r\nmodule.exports = webpackDevConfig;\r\n```\r\n\r\n**What is the expected behavior?**\r\nnormal operation\r\n\r\n\r\n**Which versions of React, and which browser / OS are affected by this issue? Did this work in previous versions of React?**\r\n```javascript\r\nreact 16.3.1\r\nreact-dom 16.3.1\r\nmacOs High Sierra 10.13.3\r\n```\r\n",
  "closed_by": {
    "login": "gaearon",
    "id": 810438,
    "node_id": "MDQ6VXNlcjgxMDQzOA==",
    "avatar_url": "https://avatars0.githubusercontent.com/u/810438?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/gaearon",
    "html_url": "https://github.com/gaearon",
    "followers_url": "https://api.github.com/users/gaearon/followers",
    "following_url": "https://api.github.com/users/gaearon/following{/other_user}",
    "gists_url": "https://api.github.com/users/gaearon/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/gaearon/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/gaearon/subscriptions",
    "organizations_url": "https://api.github.com/users/gaearon/orgs",
    "repos_url": "https://api.github.com/users/gaearon/repos",
    "events_url": "https://api.github.com/users/gaearon/events{/privacy}",
    "received_events_url": "https://api.github.com/users/gaearon/received_events",
    "type": "User",
    "site_admin": false
  }
}

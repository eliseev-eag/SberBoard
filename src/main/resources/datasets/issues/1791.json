{
  "url": "https://api.github.com/repos/facebook/react/issues/1791",
  "repository_url": "https://api.github.com/repos/facebook/react",
  "labels_url": "https://api.github.com/repos/facebook/react/issues/1791/labels{/name}",
  "comments_url": "https://api.github.com/repos/facebook/react/issues/1791/comments",
  "events_url": "https://api.github.com/repos/facebook/react/issues/1791/events",
  "html_url": "https://github.com/facebook/react/issues/1791",
  "id": 37201374,
  "node_id": "MDU6SXNzdWUzNzIwMTM3NA==",
  "number": 1791,
  "title": "Add api for focus management",
  "user": {
    "login": "bmeck",
    "id": 234659,
    "node_id": "MDQ6VXNlcjIzNDY1OQ==",
    "avatar_url": "https://avatars1.githubusercontent.com/u/234659?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/bmeck",
    "html_url": "https://github.com/bmeck",
    "followers_url": "https://api.github.com/users/bmeck/followers",
    "following_url": "https://api.github.com/users/bmeck/following{/other_user}",
    "gists_url": "https://api.github.com/users/bmeck/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/bmeck/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/bmeck/subscriptions",
    "organizations_url": "https://api.github.com/users/bmeck/orgs",
    "repos_url": "https://api.github.com/users/bmeck/repos",
    "events_url": "https://api.github.com/users/bmeck/events{/privacy}",
    "received_events_url": "https://api.github.com/users/bmeck/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 127893911,
      "node_id": "MDU6TGFiZWwxMjc4OTM5MTE=",
      "url": "https://api.github.com/repos/facebook/react/labels/Component:%20DOM",
      "name": "Component: DOM",
      "color": "fef2c0",
      "default": false
    },
    {
      "id": 121709921,
      "node_id": "MDU6TGFiZWwxMjE3MDk5MjE=",
      "url": "https://api.github.com/repos/facebook/react/labels/Type:%20Feature%20Request",
      "name": "Type: Feature Request",
      "color": "c7def8",
      "default": false
    }
  ],
  "state": "open",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 12,
  "created_at": "2014-07-05T16:05:32Z",
  "updated_at": "2017-10-04T10:38:28Z",
  "closed_at": null,
  "author_association": "NONE",
  "body": "There are currently a couple of problems with focus management in React.\n## current problems\n- `this.getDOMElement().focus()`\n\ndoes not guarantee the node is on a document/visible. visibility can be hard to detect due to other components firing render().\n- `this.refs.x.getDOMElement().focus()`\n\ndoes not guarantee that x has finished any pending renders. if `x` renders, focus is lost.\n- `componentDidUpdate`\n\nthis fires on the child nodes before parents so in the case of:\n\n```\n<ul style=\"display:none\">\n  <li><button>can't focus</button></li>\n</ul>\n```\n\nif we want to show the `<ul/>` and focus the button.\n\nthe component of the `<button/>` focusing during componentDidUpdate has no affect because the `<ul/>` is still hidden.\n## discussion\n\nif looks like some of the PRs to react are using raf or timeouts to achieve fixes to the problems listed. This can cause race conditions, and can be fixed with a lifeCycle addition, or just a hidden lifeCycle purely for focus management.\n\nThe issue comes down to not having a lifecycle able to fire a function after _all_ rendering is done, not just an individual component.\n\nI would suggest we add a simple API of component.blur()/component.focus() that queues the requests and fires them after all rendering is done. The fix is fairly simple, but I wonder how people feel about this.\n",
  "closed_by": null
}

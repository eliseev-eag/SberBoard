{
  "url": "https://api.github.com/repos/facebook/react/issues/4826",
  "repository_url": "https://api.github.com/repos/facebook/react",
  "labels_url": "https://api.github.com/repos/facebook/react/issues/4826/labels{/name}",
  "comments_url": "https://api.github.com/repos/facebook/react/issues/4826/comments",
  "events_url": "https://api.github.com/repos/facebook/react/issues/4826/events",
  "html_url": "https://github.com/facebook/react/issues/4826",
  "id": 105690323,
  "node_id": "MDU6SXNzdWUxMDU2OTAzMjM=",
  "number": 4826,
  "title": "React.render reloads iframes when rendering with a new component",
  "user": {
    "login": "Gozala",
    "id": 21236,
    "node_id": "MDQ6VXNlcjIxMjM2",
    "avatar_url": "https://avatars1.githubusercontent.com/u/21236?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/Gozala",
    "html_url": "https://github.com/Gozala",
    "followers_url": "https://api.github.com/users/Gozala/followers",
    "following_url": "https://api.github.com/users/Gozala/following{/other_user}",
    "gists_url": "https://api.github.com/users/Gozala/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/Gozala/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/Gozala/subscriptions",
    "organizations_url": "https://api.github.com/users/Gozala/orgs",
    "repos_url": "https://api.github.com/users/Gozala/repos",
    "events_url": "https://api.github.com/users/Gozala/events{/privacy}",
    "received_events_url": "https://api.github.com/users/Gozala/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 7,
  "created_at": "2015-09-09T21:41:46Z",
  "updated_at": "2015-09-11T23:21:29Z",
  "closed_at": "2015-09-09T22:02:39Z",
  "author_association": "NONE",
  "body": "I've run into this issue when integrating live reloading into our toolchain. Example is obviously convoluted as it tries to capture our setup and also illustrate the issue. The problem is once we swap modules we end up with a new sets of react component definitions and even though their keys and render output is equal iframe still seem to get reloaded.  \n\n``` js\nvar Thunk = function(props, context) {\n  React.Component.call(this, props, context);\n}\nThunk.for = function(view, key) {\n  var ReactComponent = function(props, context) {\n    Thunk.call(this, props, context)\n  }\n  ReactComponent.prototype = Object.create(Thunk.prototype);\n  ReactComponent.displayName = key.split('@')[0];\n  return ReactComponent\n}\nThunk.prototype = Object.create(React.Component.prototype);\nThunk.prototype.shouldComponentUpdate = function(props) {\n  this.props.model !== props.model\n}\nThunk.prototype.render = function() {\n  return this.props.view(this.props.model)  \n}\n\nlet render = (key, view, model) => {\n  let  component = view.reactComponent ||\n                   (view.reactComponent = Thunk.for(view, key));\n  return React.createElement(component, {key, view, model});\n}\n\n\nlet redFrame = ({src}) => React.DOM.iframe({\n  key: 'frame',\n  style: {border: '1px solid red'},\n  src\n})\n\nlet blueFrame = ({src}) => React.DOM.iframe({\n  key: 'frame',\n  style: {border: '1px solid blue'},\n  src\n})\n\nReact.render(render('main', redFrame, {src: 'https://facebook.github.io/react/docs/getting-started.html'}), document.body)\n\nsetTimeout(function() {\n  React.render(render('main', blueFrame, {src: 'https://facebook.github.io/react/docs/getting-started.html'}), document.body)\n}, 3000);\n```\n\nP.S. I also tried to keep the same root component to keep the identical `data-reactid` attributes across `React.render` calls but iframes still reload.\n\n**Edit: Updated example so `view` from props is used and note stored as property of the class which seemed to cause confusion**\n",
  "closed_by": {
    "login": "sophiebits",
    "id": 6820,
    "node_id": "MDQ6VXNlcjY4MjA=",
    "avatar_url": "https://avatars2.githubusercontent.com/u/6820?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/sophiebits",
    "html_url": "https://github.com/sophiebits",
    "followers_url": "https://api.github.com/users/sophiebits/followers",
    "following_url": "https://api.github.com/users/sophiebits/following{/other_user}",
    "gists_url": "https://api.github.com/users/sophiebits/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/sophiebits/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/sophiebits/subscriptions",
    "organizations_url": "https://api.github.com/users/sophiebits/orgs",
    "repos_url": "https://api.github.com/users/sophiebits/repos",
    "events_url": "https://api.github.com/users/sophiebits/events{/privacy}",
    "received_events_url": "https://api.github.com/users/sophiebits/received_events",
    "type": "User",
    "site_admin": false
  }
}

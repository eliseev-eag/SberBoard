{
  "url": "https://api.github.com/repos/facebook/react/issues/16203",
  "repository_url": "https://api.github.com/repos/facebook/react",
  "labels_url": "https://api.github.com/repos/facebook/react/issues/16203/labels{/name}",
  "comments_url": "https://api.github.com/repos/facebook/react/issues/16203/comments",
  "events_url": "https://api.github.com/repos/facebook/react/issues/16203/events",
  "html_url": "https://github.com/facebook/react/issues/16203",
  "id": 472822447,
  "node_id": "MDU6SXNzdWU0NzI4MjI0NDc=",
  "number": 16203,
  "title": "After redirecting React is re rendered and send back to the cached login IE11",
  "user": {
    "login": "gmumdzhiev",
    "id": 32012354,
    "node_id": "MDQ6VXNlcjMyMDEyMzU0",
    "avatar_url": "https://avatars1.githubusercontent.com/u/32012354?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/gmumdzhiev",
    "html_url": "https://github.com/gmumdzhiev",
    "followers_url": "https://api.github.com/users/gmumdzhiev/followers",
    "following_url": "https://api.github.com/users/gmumdzhiev/following{/other_user}",
    "gists_url": "https://api.github.com/users/gmumdzhiev/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/gmumdzhiev/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/gmumdzhiev/subscriptions",
    "organizations_url": "https://api.github.com/users/gmumdzhiev/orgs",
    "repos_url": "https://api.github.com/users/gmumdzhiev/repos",
    "events_url": "https://api.github.com/users/gmumdzhiev/events{/privacy}",
    "received_events_url": "https://api.github.com/users/gmumdzhiev/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 1,
  "created_at": "2019-07-25T11:52:51Z",
  "updated_at": "2019-07-27T12:32:33Z",
  "closed_at": "2019-07-27T12:32:33Z",
  "author_association": "NONE",
  "body": "I'am struggling to find a quick solution to my problem , because clients are complaining about that the Site cannot be rendered on the IE . I have done a little research and i came across this `react-app-polyfill/ie11` .\r\nI have insert it as an entry point on mine `src/index.js` It have worked i saw my project ( only the login tho ) working on IE 11 , but after the login it is redirected again back to the login page . The error that IE throws back is :\r\n`DOM7011 : The code on this page disabled back and forward caching.`\r\n`Unhandled promise rejection TypeError: Unable to get property 'data' of undefined or null reference`\r\n\r\nAfter a while i came also across this :\r\nhttps://reactjs.org/docs/javascript-environment-requirements.html\r\n\r\nThe new JavaScript Environment Requirements . Bassicly they suggest to enable as an entry point on your `index.js` this\r\n`import 'core-js/es/map'; import 'core-js/es/set';`\r\n\r\nSo far i have no clue what is going on , but still the app is not running properly on IE . Can somebody give me some advice what to do ?\r\n\r\n**UPDATED**\r\nLogin.js\r\n\r\n```jsx\r\nexport default class Login extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      translations: EN_TRANSLATIONS,\r\n      clientNumber: \"\",\r\n      password: \"\",\r\n      redirectToReferrer: \"\",\r\n      loginErrorMessage: \"\",\r\n      lockedUntilDate: \"\"\r\n    };\r\n  }\r\n\r\n  async componentWillMount() {\r\n    let tenant = window.location.hostname;\r\n\r\n    axios\r\n      .post(SERVER_URL + \"/api/user/page\", {\r\n        tenant: tenant\r\n      })\r\n\r\n      .then(response => {\r\n        localStorage.setItem(\"page\", JSON.stringify(response.data.branding));\r\n        localStorage.setItem(\"tenant\", tenant);\r\n\r\n        this.setState({\r\n          branding: response.data.branding,\r\n          tenant: tenant,\r\n          pageReady: true\r\n        });\r\n      });\r\n  }\r\n\r\n  login = () => {\r\n    axios\r\n      .post(SERVER_URL + \"/api/user/access\", {\r\n        tenant: this.state.tenant,\r\n        customerNumber: parseInt(this.state.clientNumber),\r\n        password: sha1(this.state.password + FE_SALT)\r\n      })\r\n      .then(response => {\r\n        localStorage.setItem(\"token\", response.data.token);\r\n        localStorage.setItem(\"access\", JSON.stringify(response.data.branding));\r\n\r\n        this.setState({\r\n          branding: response.data.branding,\r\n          accessReady: true\r\n        });\r\n\r\n        if (this.state.accessReady) {\r\n          if (response.data.passwordValidity >= 0) {\r\n            Auth.authenticate(response => {\r\n              this.setState({ redirectToReferrer: \"dashboard\" });\r\n            });\r\n          } else {\r\n            Auth.authenticate(response => {\r\n              this.setState({ redirectToReferrer: \"changePassword\" });\r\n            });\r\n          }\r\n        }\r\n      });\r\n  };\r\n\r\n  handleSubmit = event => {\r\n    event.preventDefault();\r\n  };\r\n\r\n  render() {\r\n    const {\r\n      redirectToReferrer,\r\n      translations,\r\n      notValidTenant,\r\n      branding\r\n    } = this.state;\r\n    if (redirectToReferrer === \"dashboard\") {\r\n      return (\r\n        <Switch>\r\n          <Route\r\n            render={() => <Redirect to={`/dashboard/${Auth.customerId}`} />}\r\n          />\r\n        </Switch>\r\n      );\r\n    } else if (redirectToReferrer === \"changePassword\") {\r\n      return (\r\n        <Switch>\r\n          <Route\r\n            render={() => (\r\n              <Redirect to={`/change_password/${Auth.customerId}`} />\r\n            )}\r\n          />\r\n        </Switch>\r\n      );\r\n    }\r\n  }\r\n}\r\n```\r\n\r\nindex.js\r\n\r\n```jsx\r\nimport \"react-app-polyfill/ie9\";\r\nimport \"react-app-polyfill/ie11\";\r\nimport \"react-app-polyfill/jsdom\";\r\n\r\nimport React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport App from \"./App\";\r\nimport { BrowserRouter } from \"react-router-dom\";\r\n\r\nReactDOM.render(\r\n  <BrowserRouter>\r\n    <App />\r\n  </BrowserRouter>,\r\n  document.getElementById(\"root\")\r\n);\r\n```\r\n\r\nAlso i marked that i cannot import `'react-app-polyfill/stable'` i think this should work , but i am not sure .\r\n\r\n**UPDATE**\r\nI have deleted the `node_modules` and installed again `react-app-polyfill` . Now the `'react-app-polyfill/stable'` is recognized , but i ran into another error .\r\n`SCRIPT438: Object doesn't support property or method 'repeat'` ... This IE is making me crazy ...\r\n\r\n**UPDATE**\r\nOkey so i was able to delete my private routes and make every route after the login visible `<Route/>` . If i hardcode the URL path and disable the security i can get access to my dashboard page . So that gives me thinking that the problem is coming from the `<Redirect/>` component . Because he is the only one standing between the login and the dashboard . Any suggestion why is this conflict between `IE` and `<Redirect/>` ???\r\n",
  "closed_by": {
    "login": "threepointone",
    "id": 18808,
    "node_id": "MDQ6VXNlcjE4ODA4",
    "avatar_url": "https://avatars2.githubusercontent.com/u/18808?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/threepointone",
    "html_url": "https://github.com/threepointone",
    "followers_url": "https://api.github.com/users/threepointone/followers",
    "following_url": "https://api.github.com/users/threepointone/following{/other_user}",
    "gists_url": "https://api.github.com/users/threepointone/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/threepointone/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/threepointone/subscriptions",
    "organizations_url": "https://api.github.com/users/threepointone/orgs",
    "repos_url": "https://api.github.com/users/threepointone/repos",
    "events_url": "https://api.github.com/users/threepointone/events{/privacy}",
    "received_events_url": "https://api.github.com/users/threepointone/received_events",
    "type": "User",
    "site_admin": false
  }
}

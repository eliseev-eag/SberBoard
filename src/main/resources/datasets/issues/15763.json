{
  "url": "https://api.github.com/repos/facebook/react/issues/15763",
  "repository_url": "https://api.github.com/repos/facebook/react",
  "labels_url": "https://api.github.com/repos/facebook/react/issues/15763/labels{/name}",
  "comments_url": "https://api.github.com/repos/facebook/react/issues/15763/comments",
  "events_url": "https://api.github.com/repos/facebook/react/issues/15763/events",
  "html_url": "https://github.com/facebook/react/pull/15763",
  "id": 449929907,
  "node_id": "MDExOlB1bGxSZXF1ZXN0MjgzMzU5MzY1",
  "number": 15763,
  "title": "warn if passive effects get queued outside of an act() call.",
  "user": {
    "login": "threepointone",
    "id": 18808,
    "node_id": "MDQ6VXNlcjE4ODA4",
    "avatar_url": "https://avatars2.githubusercontent.com/u/18808?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/threepointone",
    "html_url": "https://github.com/threepointone",
    "followers_url": "https://api.github.com/users/threepointone/followers",
    "following_url": "https://api.github.com/users/threepointone/following{/other_user}",
    "gists_url": "https://api.github.com/users/threepointone/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/threepointone/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/threepointone/subscriptions",
    "organizations_url": "https://api.github.com/users/threepointone/orgs",
    "repos_url": "https://api.github.com/users/threepointone/repos",
    "events_url": "https://api.github.com/users/threepointone/events{/privacy}",
    "received_events_url": "https://api.github.com/users/threepointone/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 196858374,
      "node_id": "MDU6TGFiZWwxOTY4NTgzNzQ=",
      "url": "https://api.github.com/repos/facebook/react/labels/CLA%20Signed",
      "name": "CLA Signed",
      "color": "e7e7e7",
      "default": false
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 3,
  "created_at": "2019-05-29T17:24:04Z",
  "updated_at": "2019-06-24T10:18:25Z",
  "closed_at": "2019-06-24T10:18:25Z",
  "author_association": "CONTRIBUTOR",
  "pull_request": {
    "url": "https://api.github.com/repos/facebook/react/pulls/15763",
    "html_url": "https://github.com/facebook/react/pull/15763",
    "diff_url": "https://github.com/facebook/react/pull/15763.diff",
    "patch_url": "https://github.com/facebook/react/pull/15763.patch"
  },
  "body": "This adds a warning when effects are queued outside of an act() scope. Please see this diff with whitespace off (add `?w=1` to your url)\r\n\r\nWhile the code itself isn't much (it adds the warning to `mountEffect()` and `updateEffect()` in `ReactFiberHooks`), it does change a lot of our tests. We follow a bad-ish pattern here, which is doing asserts inside `act()` scopes, but it makes sense for *us* because we're testing intermediate states, and we're manually flush/yield what we need in these tests.\r\n\r\nThis commit has *one* last failing test. Working on it, might reach out to one of you for help.\r\n\r\nPlease *please* look closely at the tests I've changed; I went about it with a rough-ish hand, wrapping whatever started warning with `act()` calls. For bits that seemed a bit hard to wrap with `act()` without drastically changing the test, I explicitly caught the missing `act()` warnings with `expect(...).toWarnDev([...])` statements.\r\n\r\nAn important question - Is this worth it? Consider an app built with both classical, and functional components. Assume that the class ones are parents to functional children. As we add hooks and effects to children, tests that used to pass for class components will start failing, meaning people will have to update tests for older components they might not be interested in touching. ",
  "closed_by": {
    "login": "threepointone",
    "id": 18808,
    "node_id": "MDQ6VXNlcjE4ODA4",
    "avatar_url": "https://avatars2.githubusercontent.com/u/18808?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/threepointone",
    "html_url": "https://github.com/threepointone",
    "followers_url": "https://api.github.com/users/threepointone/followers",
    "following_url": "https://api.github.com/users/threepointone/following{/other_user}",
    "gists_url": "https://api.github.com/users/threepointone/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/threepointone/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/threepointone/subscriptions",
    "organizations_url": "https://api.github.com/users/threepointone/orgs",
    "repos_url": "https://api.github.com/users/threepointone/repos",
    "events_url": "https://api.github.com/users/threepointone/events{/privacy}",
    "received_events_url": "https://api.github.com/users/threepointone/received_events",
    "type": "User",
    "site_admin": false
  }
}

{
  "url": "https://api.github.com/repos/facebook/react/issues/15865",
  "repository_url": "https://api.github.com/repos/facebook/react",
  "labels_url": "https://api.github.com/repos/facebook/react/issues/15865/labels{/name}",
  "comments_url": "https://api.github.com/repos/facebook/react/issues/15865/comments",
  "events_url": "https://api.github.com/repos/facebook/react/issues/15865/events",
  "html_url": "https://github.com/facebook/react/issues/15865",
  "id": 455115854,
  "node_id": "MDU6SXNzdWU0NTUxMTU4NTQ=",
  "number": 15865,
  "title": "React Hook useEffect has a missing dependency: 'xxx' ?",
  "user": {
    "login": "luojinghui",
    "id": 12367406,
    "node_id": "MDQ6VXNlcjEyMzY3NDA2",
    "avatar_url": "https://avatars1.githubusercontent.com/u/12367406?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/luojinghui",
    "html_url": "https://github.com/luojinghui",
    "followers_url": "https://api.github.com/users/luojinghui/followers",
    "following_url": "https://api.github.com/users/luojinghui/following{/other_user}",
    "gists_url": "https://api.github.com/users/luojinghui/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/luojinghui/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/luojinghui/subscriptions",
    "organizations_url": "https://api.github.com/users/luojinghui/orgs",
    "repos_url": "https://api.github.com/users/luojinghui/repos",
    "events_url": "https://api.github.com/users/luojinghui/events{/privacy}",
    "received_events_url": "https://api.github.com/users/luojinghui/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 23,
  "created_at": "2019-06-12T09:48:16Z",
  "updated_at": "2019-10-10T18:36:51Z",
  "closed_at": "2019-06-14T09:48:45Z",
  "author_association": "NONE",
  "body": "<!--\r\n  Note: if the issue is about documentation or the website, please file it at:\r\n  https://github.com/reactjs/reactjs.org/issues/new\r\n-->\r\n\r\nHi, I am researching React Hook recently, it's great.\r\n\r\nBut I have a problem, I did not find a suitable answer in the React Hook documentation and google to solve my problem.\r\n\r\nWhen I used a function in useEffect and function component together, I encountered a warning that I did not specify a dependency in useEffect, as shown below:\r\n\r\n![image](https://user-images.githubusercontent.com/12367406/59340801-4910c980-8d39-11e9-9c6d-41a7b95e06cb.png)\r\n\r\nIs there any way to solve my problem? I have thought about it for a long time.\r\n\r\n**What is the current behavior?**\r\n```\r\nReact Hook useEffect has a missing dependency: 'setCenterPosition'. Either include it or remove the dependency array. (react-hooks/exhaustive-deps)\r\n```\r\n\r\n**Mini repro in codesandbox:**\r\nhttps://codesandbox.io/s/trusting-kowalevski-oet4b\r\n\r\nAny solution, thanks.\r\n\r\n**Code**\r\n```jsx\r\nfunction App() {\r\n  const [elePositionArr, setElePositionArr] = useState([\r\n    { left: 0, top: 0 },\r\n    { left: 0, top: 0 },\r\n    { left: 0, top: 0 }\r\n  ]);\r\n  const stageRef = useRef(null);\r\n  const Stage = useRef({ w: 0, h: 0 });\r\n  const currentIndex = useRef(0);\r\n\r\n  useEffect(() => {\r\n    // Record the size of the stage\r\n    const stageW = stageRef.current.scrollWidth;\r\n    const stageH = stageRef.current.scrollHeight;\r\n\r\n    Stage.current = { w: stageW, h: stageH };\r\n\r\n    const index = Math.floor(Math.random() * 3);\r\n    currentIndex.current = index;\r\n    setCenterPosition(index);\r\n  }, []);\r\n\r\n  // Centering a block element\r\n  function setCenterPosition(index) {\r\n    let cacheEle = elePositionArr;\r\n    // calc center postion\r\n    const centerOfLeft = Stage.current.w / 2 - 25;\r\n    const centerOfTop = Stage.current.h / 2 - 25;\r\n\r\n    cacheEle = cacheEle.map((item, i) => {\r\n      const randomWNum = Math.floor(Math.random() * Stage.current.w) - 50;\r\n      const randomHNum = Math.floor(Math.random() * Stage.current.h) - 50;\r\n      const randomLeft = randomWNum <= 50 ? 50 : randomWNum;\r\n      const randomTop = randomHNum <= 50 ? 50 : randomHNum;\r\n      let newItem;\r\n\r\n      if (index === i) {\r\n        newItem = { left: centerOfLeft, top: centerOfTop };\r\n      } else {\r\n        newItem = { left: randomLeft, top: randomTop };\r\n      }\r\n\r\n      return newItem;\r\n    });\r\n\r\n    setElePositionArr(cacheEle);\r\n  }\r\n\r\n  function handleClickLi(index) {\r\n    if (currentIndex.current !== index) {\r\n      setCenterPosition(index);\r\n      currentIndex.current = index;\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div className=\"container\">\r\n      <div className=\"stage\" ref={stageRef}>\r\n        {elePositionArr.map((item, index) => (\r\n          <div className=\"ele\" key={index} style={item}>\r\n            {index}\r\n          </div>\r\n        ))}\r\n      </div>\r\n      <ul className=\"nav\">\r\n        {elePositionArr.map((item, index) => (\r\n          <li\r\n            className={currentIndex.current === index ? \"active-li\" : \"\"}\r\n            onClick={() => {\r\n              handleClickLi(index);\r\n            }}\r\n            key={\"li\" + index}\r\n          >\r\n            {index}\r\n          </li>\r\n        ))}\r\n      </ul>\r\n    </div>\r\n  );\r\n}\r\n```\r\n",
  "closed_by": {
    "login": "luojinghui",
    "id": 12367406,
    "node_id": "MDQ6VXNlcjEyMzY3NDA2",
    "avatar_url": "https://avatars1.githubusercontent.com/u/12367406?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/luojinghui",
    "html_url": "https://github.com/luojinghui",
    "followers_url": "https://api.github.com/users/luojinghui/followers",
    "following_url": "https://api.github.com/users/luojinghui/following{/other_user}",
    "gists_url": "https://api.github.com/users/luojinghui/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/luojinghui/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/luojinghui/subscriptions",
    "organizations_url": "https://api.github.com/users/luojinghui/orgs",
    "repos_url": "https://api.github.com/users/luojinghui/repos",
    "events_url": "https://api.github.com/users/luojinghui/events{/privacy}",
    "received_events_url": "https://api.github.com/users/luojinghui/received_events",
    "type": "User",
    "site_admin": false
  }
}

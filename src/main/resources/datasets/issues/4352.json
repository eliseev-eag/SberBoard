{
  "url": "https://api.github.com/repos/facebook/react/issues/4352",
  "repository_url": "https://api.github.com/repos/facebook/react",
  "labels_url": "https://api.github.com/repos/facebook/react/issues/4352/labels{/name}",
  "comments_url": "https://api.github.com/repos/facebook/react/issues/4352/comments",
  "events_url": "https://api.github.com/repos/facebook/react/issues/4352/events",
  "html_url": "https://github.com/facebook/react/issues/4352",
  "id": 94490749,
  "node_id": "MDU6SXNzdWU5NDQ5MDc0OQ==",
  "number": 4352,
  "title": "Cannot access lower leaves in object loaded with JSON and put in `this.state`",
  "user": {
    "login": "Mark-L6n",
    "id": 2693524,
    "node_id": "MDQ6VXNlcjI2OTM1MjQ=",
    "avatar_url": "https://avatars1.githubusercontent.com/u/2693524?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/Mark-L6n",
    "html_url": "https://github.com/Mark-L6n",
    "followers_url": "https://api.github.com/users/Mark-L6n/followers",
    "following_url": "https://api.github.com/users/Mark-L6n/following{/other_user}",
    "gists_url": "https://api.github.com/users/Mark-L6n/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/Mark-L6n/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/Mark-L6n/subscriptions",
    "organizations_url": "https://api.github.com/users/Mark-L6n/orgs",
    "repos_url": "https://api.github.com/users/Mark-L6n/repos",
    "events_url": "https://api.github.com/users/Mark-L6n/events{/privacy}",
    "received_events_url": "https://api.github.com/users/Mark-L6n/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 7,
  "created_at": "2015-07-11T16:56:57Z",
  "updated_at": "2015-07-12T02:50:21Z",
  "closed_at": "2015-07-11T18:50:02Z",
  "author_association": "NONE",
  "body": "After loading a JSON object and adding it to `this.state` in the manner shown in the [React Tutorial](https://facebook.github.io/react/docs/tutorial.html), I am not able to access leaves below the first level.  Given this JSON file:\n\n``` json\n{\n    \"simple\": \"A simple key-value\",\n    \"dag1\": {\"key\" : \"A key pointing to a key-value\" },\n    \"dag2\": { \"firstkey\": { \"secondkey\": \"A key pointing to a key pointing to a key-value\" } }\n}\n```\n\nthe following results:\n1. `{this.state.data.simple}`     works: \"A simple key-value\"\n2. `{this.state.data.dag1.key}`    \"Uncaught TypeError: Cannot read property 'key' of undefined\"\n3. `{this.state.data.dag.firstkey.secondkey}`    \"Uncaught TypeError: Cannot read property 'firstkey' of undefined\"\n\nBy putting debug variables in function `loadJSONFromServer`, one can see that that we can reference data fine from the JSON data structure itself, but not through `this.state` after `this.setState` adds it:\n\n``` javascript\n    this.secondkey = data.dag2.firstkey.secondkey;  // Works here!\n    this.setState({data: data});\n    this.secondkey2 = this.state.data.dag2.firstkey.secondkey;  // But doesn't work here!\n```\n\nHere is the full test file, loading the JSON above in file `test-data.json`.  In the output, 1) and 4) work; 2) and 3) invoke the above error messages; and 5) returns nothing.\n\n``` html\n<!DOCTYPE html>\n<html>\n<head>\n  <title>Test referencing JSON object in React state</title>\n  <script src=\"https://cdnjs.cloudflare.com/ajax/libs/react/0.13.3/react.js\"></script>\n  <script src=\"https://cdnjs.cloudflare.com/ajax/libs/react/0.13.3/JSXTransformer.js\"></script>\n  <script src=\"https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.1/jquery.min.js\"></script>\n</head>\n<body>\n\n<h2>JSON Test</h2>\n<div id=\"content\"></div>\n\n<script type=\"text/jsx\">\n\nvar ContentBox = React.createClass({\n  loadJSONFromServer: function() {\n    $.ajax({\n      url: this.props.url,\n      dataType: 'json',\n      cache: false,\n      success: function(data) {\n                this.secondkey = data.dag2.firstkey.secondkey;  // Works here!\n        this.setState({data: data});\n                this.secondkey2 = this.state.data.dag2.firstkey.secondkey;  // But doesn't work here!\n      }.bind(this),\n      error: function(xhr, status, err) {\n        console.error(this.props.url, status, err.toString());\n      }.bind(this)\n    });\n  },\n    getInitialState: function() {\n    return {data: ''};\n  },\n  componentDidMount: function() {\n    this.loadJSONFromServer();\n  },\n  render: function() {\n        // var testValue = {this.state.data.junk};\n    return (\n      <div>\n        <h2>Test</h2>\n                <p>1. {this.state.data.simple}</p>\n                <p>4. {this.secondkey}</p>\n                <p>5. {this.secondkey2}</p>\n      </div>\n    );\n  }\n});\n\nReact.render(\n  <ContentBox url=\"test-data.json\" />,\n  document.getElementById('content')\n);\n\n</script>\n\n</body>\n</html>\n```\n",
  "closed_by": {
    "login": "jimfb",
    "id": 9595985,
    "node_id": "MDQ6VXNlcjk1OTU5ODU=",
    "avatar_url": "https://avatars3.githubusercontent.com/u/9595985?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/jimfb",
    "html_url": "https://github.com/jimfb",
    "followers_url": "https://api.github.com/users/jimfb/followers",
    "following_url": "https://api.github.com/users/jimfb/following{/other_user}",
    "gists_url": "https://api.github.com/users/jimfb/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/jimfb/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/jimfb/subscriptions",
    "organizations_url": "https://api.github.com/users/jimfb/orgs",
    "repos_url": "https://api.github.com/users/jimfb/repos",
    "events_url": "https://api.github.com/users/jimfb/events{/privacy}",
    "received_events_url": "https://api.github.com/users/jimfb/received_events",
    "type": "User",
    "site_admin": false
  }
}

{
  "url": "https://api.github.com/repos/facebook/react/issues/14577",
  "repository_url": "https://api.github.com/repos/facebook/react",
  "labels_url": "https://api.github.com/repos/facebook/react/issues/14577/labels{/name}",
  "comments_url": "https://api.github.com/repos/facebook/react/issues/14577/comments",
  "events_url": "https://api.github.com/repos/facebook/react/issues/14577/events",
  "html_url": "https://github.com/facebook/react/issues/14577",
  "id": 398512867,
  "node_id": "MDU6SXNzdWUzOTg1MTI4Njc=",
  "number": 14577,
  "title": "Question: How to know if the loading status of Suspense resolved",
  "user": {
    "login": "chenesan",
    "id": 7620906,
    "node_id": "MDQ6VXNlcjc2MjA5MDY=",
    "avatar_url": "https://avatars2.githubusercontent.com/u/7620906?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/chenesan",
    "html_url": "https://github.com/chenesan",
    "followers_url": "https://api.github.com/users/chenesan/followers",
    "following_url": "https://api.github.com/users/chenesan/following{/other_user}",
    "gists_url": "https://api.github.com/users/chenesan/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/chenesan/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/chenesan/subscriptions",
    "organizations_url": "https://api.github.com/users/chenesan/orgs",
    "repos_url": "https://api.github.com/users/chenesan/repos",
    "events_url": "https://api.github.com/users/chenesan/events{/privacy}",
    "received_events_url": "https://api.github.com/users/chenesan/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 710375792,
      "node_id": "MDU6TGFiZWw3MTAzNzU3OTI=",
      "url": "https://api.github.com/repos/facebook/react/labels/Type:%20Discussion",
      "name": "Type: Discussion",
      "color": "fef2c0",
      "default": false
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 9,
  "created_at": "2019-01-12T02:40:45Z",
  "updated_at": "2019-09-12T12:02:58Z",
  "closed_at": "2019-01-20T03:48:10Z",
  "author_association": "CONTRIBUTOR",
  "body": "<!--\r\n  Note: if the issue is about documentation or the website, please file it at:\r\n  https://github.com/reactjs/reactjs.org/issues/new\r\n-->\r\n\r\n**Do you want to request a *feature* or report a *bug*?**\r\n\r\nQuestion\r\n\r\n**What is the current behavior?**\r\n\r\nI'm trying to implement supports of `React.lazy` and `React.Suspense` in enzyme (airbnb/enzyme#1975). I'd like to have something like `waitUntilLazyLoaded` so we can write such test:\r\n\r\n```js\r\n// in DynamicComponent.js\r\n\r\nclass DynamicComponent extends React.Component {\r\n  render() {\r\n    // render something\r\n  }\r\n}\r\n\r\n// in test.js\r\n\r\nconst LazyComponent = lazy(() => import('./DynamicComponent'));\r\nconst Fallback = () => <div />;\r\nconst SuspenseComponent = () => (\r\n  <Suspense fallback={<Fallback />}>\r\n    <LazyComponent />\r\n  </Suspense>\r\n);\r\n\r\n// mount the react element\r\nconst wrapper = mount(<SuspenseComponent />)\r\n\r\n// On starter this should render Fallback\r\nexpect(wrapper.find('Fallback')).to.have.lengthOf(1)\r\nexpect(wrapper.find('DynamicComponent')).to.have.lenghtOf(0)\r\n\r\n// wait for LazyComponent loading DynamicComponent and update of rendering\r\nawait wrapper.waitUntilLazyLoaded()\r\n\r\n// render loaded component now\r\nexpect(wrapper.find('Fallback')).to.have.lengthOf(0)\r\nexpect(wrapper.find('DynamicComponent')).to.have.lengthOf(1)\r\n\r\n```\r\n\r\nInside the `mount` implementation we call the `ReactDOM.render` to render it and get the root fiber node. Now my problem is: Given a Fiber node of `Suspense`, how could we know the loading status of `Suspense` so I can make sure whether (1) the module is loaded successfully loaded (or failed) and (2) React has rendered (or not rendered) the new component tree?\r\n\r\nI'm not familiar with the implementation detail of Fiber and I'm still trying to investigate into this. That would be great if someone familiar with this could answer. Thanks!\r\n\r\n**Which versions of React, and which browser / OS are affected by this issue? Did this work in previous versions of React?**\r\n\r\n^16.6\r\n",
  "closed_by": {
    "login": "chenesan",
    "id": 7620906,
    "node_id": "MDQ6VXNlcjc2MjA5MDY=",
    "avatar_url": "https://avatars2.githubusercontent.com/u/7620906?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/chenesan",
    "html_url": "https://github.com/chenesan",
    "followers_url": "https://api.github.com/users/chenesan/followers",
    "following_url": "https://api.github.com/users/chenesan/following{/other_user}",
    "gists_url": "https://api.github.com/users/chenesan/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/chenesan/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/chenesan/subscriptions",
    "organizations_url": "https://api.github.com/users/chenesan/orgs",
    "repos_url": "https://api.github.com/users/chenesan/repos",
    "events_url": "https://api.github.com/users/chenesan/events{/privacy}",
    "received_events_url": "https://api.github.com/users/chenesan/received_events",
    "type": "User",
    "site_admin": false
  }
}

{
  "url": "https://api.github.com/repos/facebook/react/issues/13783",
  "repository_url": "https://api.github.com/repos/facebook/react",
  "labels_url": "https://api.github.com/repos/facebook/react/issues/13783/labels{/name}",
  "comments_url": "https://api.github.com/repos/facebook/react/issues/13783/comments",
  "events_url": "https://api.github.com/repos/facebook/react/issues/13783/events",
  "html_url": "https://github.com/facebook/react/pull/13783",
  "id": 367313198,
  "node_id": "MDExOlB1bGxSZXF1ZXN0MjIwNzgxMTE0",
  "number": 13783,
  "title": "Omit optional close tags in ReactDOMServerRenderer",
  "user": {
    "login": "tvler",
    "id": 4934193,
    "node_id": "MDQ6VXNlcjQ5MzQxOTM=",
    "avatar_url": "https://avatars0.githubusercontent.com/u/4934193?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/tvler",
    "html_url": "https://github.com/tvler",
    "followers_url": "https://api.github.com/users/tvler/followers",
    "following_url": "https://api.github.com/users/tvler/following{/other_user}",
    "gists_url": "https://api.github.com/users/tvler/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/tvler/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/tvler/subscriptions",
    "organizations_url": "https://api.github.com/users/tvler/orgs",
    "repos_url": "https://api.github.com/users/tvler/repos",
    "events_url": "https://api.github.com/users/tvler/events{/privacy}",
    "received_events_url": "https://api.github.com/users/tvler/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 196858374,
      "node_id": "MDU6TGFiZWwxOTY4NTgzNzQ=",
      "url": "https://api.github.com/repos/facebook/react/labels/CLA%20Signed",
      "name": "CLA Signed",
      "color": "e7e7e7",
      "default": false
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 2,
  "created_at": "2018-10-05T18:05:48Z",
  "updated_at": "2019-04-10T16:43:57Z",
  "closed_at": "2019-04-10T16:43:57Z",
  "author_association": "CONTRIBUTOR",
  "pull_request": {
    "url": "https://api.github.com/repos/facebook/react/pulls/13783",
    "html_url": "https://github.com/facebook/react/pull/13783",
    "diff_url": "https://github.com/facebook/react/pull/13783.diff",
    "patch_url": "https://github.com/facebook/react/pull/13783.patch"
  },
  "body": "Closes #13342\r\n\r\n# Changes\r\n\r\n## High level\r\n\r\nSSR rendered html goes from this\r\n\r\n```html\r\n<div>\r\n  <p>one</p>\r\n  <p>two</p>\r\n</div>\r\n```\r\n\r\nto this\r\n\r\n```html\r\n<div>\r\n  <p>one\r\n  <p>two\r\n</div>\r\n```\r\n\r\nwhich complies to the Optional tags html spec https://www.w3.org/TR/html5/syntax.html#optional-tags\r\n\r\n## ReactDOMServerRenderer\r\n\r\n- Removes `footer` property from `Frame`\r\n- Creates `createCloseTagMarkup`, which computes the footer value\r\n- Creates `parentTagStack`, which tracks the current frame's html parent\r\n- Creates `previousSiblingTag`, which tracks the current frame's previous html sibling\r\n- Omits close tags for html elements that don't require them following the W3C Optional tags spec https://www.w3.org/TR/html5/syntax.html#optional-tags\r\n- Moves the close tag rendering logic so that we have access to the next html sibling value before rendering (we need to know the next sibling value to implement the optional tags spec)\r\n\r\n## canOmitCloseTag\r\n\r\n- Function that implements the W3C Optional tags spec https://www.w3.org/TR/html5/syntax.html#optional-tags\r\n- Returns either true or false if a given html element can omit its close tag, given the parent and next sibling values\r\n- If an html element doesn't have a parent, that means it's at the root where the actual html parent and sibling values are unknown. In that case, always render close tags to be safe.\r\n\r\n## REACT_TEXT_TYPE\r\n\r\n- Symbol that denotes a text node\r\n\r\n## isAutonomousCustomComponent\r\n\r\nReturns true if an html element is an autonomous custom element https://html.spec.whatwg.org/multipage/custom-elements.html#autonomous-custom-element, false otherwise\r\n\r\n# Review\r\n\r\n- [ ] canOmitCloseTag correctly implements the Optional tags spec\r\n- [ ] Tests cover all instances of optional close tags occurring\r\n\r\n# Related issues about XML compatability\r\n\r\n- #11799 Consider removing XML compatibility from SSR or hiding it behind an option\r\n- #2278 Generate XML compatible markup",
  "closed_by": {
    "login": "tvler",
    "id": 4934193,
    "node_id": "MDQ6VXNlcjQ5MzQxOTM=",
    "avatar_url": "https://avatars0.githubusercontent.com/u/4934193?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/tvler",
    "html_url": "https://github.com/tvler",
    "followers_url": "https://api.github.com/users/tvler/followers",
    "following_url": "https://api.github.com/users/tvler/following{/other_user}",
    "gists_url": "https://api.github.com/users/tvler/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/tvler/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/tvler/subscriptions",
    "organizations_url": "https://api.github.com/users/tvler/orgs",
    "repos_url": "https://api.github.com/users/tvler/repos",
    "events_url": "https://api.github.com/users/tvler/events{/privacy}",
    "received_events_url": "https://api.github.com/users/tvler/received_events",
    "type": "User",
    "site_admin": false
  }
}

{
  "url": "https://api.github.com/repos/facebook/react/issues/10591",
  "repository_url": "https://api.github.com/repos/facebook/react",
  "labels_url": "https://api.github.com/repos/facebook/react/issues/10591/labels{/name}",
  "comments_url": "https://api.github.com/repos/facebook/react/issues/10591/comments",
  "events_url": "https://api.github.com/repos/facebook/react/issues/10591/events",
  "html_url": "https://github.com/facebook/react/issues/10591",
  "id": 254609905,
  "node_id": "MDU6SXNzdWUyNTQ2MDk5MDU=",
  "number": 10591,
  "title": "Document that you can't rely on React 16 SSR patching up differences",
  "user": {
    "login": "Tarnadas",
    "id": 5855071,
    "node_id": "MDQ6VXNlcjU4NTUwNzE=",
    "avatar_url": "https://avatars2.githubusercontent.com/u/5855071?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/Tarnadas",
    "html_url": "https://github.com/Tarnadas",
    "followers_url": "https://api.github.com/users/Tarnadas/followers",
    "following_url": "https://api.github.com/users/Tarnadas/following{/other_user}",
    "gists_url": "https://api.github.com/users/Tarnadas/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/Tarnadas/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/Tarnadas/subscriptions",
    "organizations_url": "https://api.github.com/users/Tarnadas/orgs",
    "repos_url": "https://api.github.com/users/Tarnadas/repos",
    "events_url": "https://api.github.com/users/Tarnadas/events{/privacy}",
    "received_events_url": "https://api.github.com/users/Tarnadas/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 710375792,
      "node_id": "MDU6TGFiZWw3MTAzNzU3OTI=",
      "url": "https://api.github.com/repos/facebook/react/labels/Type:%20Discussion",
      "name": "Type: Discussion",
      "color": "fef2c0",
      "default": false
    }
  ],
  "state": "closed",
  "locked": true,
  "assignee": {
    "login": "gaearon",
    "id": 810438,
    "node_id": "MDQ6VXNlcjgxMDQzOA==",
    "avatar_url": "https://avatars0.githubusercontent.com/u/810438?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/gaearon",
    "html_url": "https://github.com/gaearon",
    "followers_url": "https://api.github.com/users/gaearon/followers",
    "following_url": "https://api.github.com/users/gaearon/following{/other_user}",
    "gists_url": "https://api.github.com/users/gaearon/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/gaearon/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/gaearon/subscriptions",
    "organizations_url": "https://api.github.com/users/gaearon/orgs",
    "repos_url": "https://api.github.com/users/gaearon/repos",
    "events_url": "https://api.github.com/users/gaearon/events{/privacy}",
    "received_events_url": "https://api.github.com/users/gaearon/received_events",
    "type": "User",
    "site_admin": false
  },
  "assignees": [
    {
      "login": "gaearon",
      "id": 810438,
      "node_id": "MDQ6VXNlcjgxMDQzOA==",
      "avatar_url": "https://avatars0.githubusercontent.com/u/810438?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/gaearon",
      "html_url": "https://github.com/gaearon",
      "followers_url": "https://api.github.com/users/gaearon/followers",
      "following_url": "https://api.github.com/users/gaearon/following{/other_user}",
      "gists_url": "https://api.github.com/users/gaearon/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/gaearon/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/gaearon/subscriptions",
      "organizations_url": "https://api.github.com/users/gaearon/orgs",
      "repos_url": "https://api.github.com/users/gaearon/repos",
      "events_url": "https://api.github.com/users/gaearon/events{/privacy}",
      "received_events_url": "https://api.github.com/users/gaearon/received_events",
      "type": "User",
      "site_admin": false
    },
    {
      "login": "flarnie",
      "id": 1114467,
      "node_id": "MDQ6VXNlcjExMTQ0Njc=",
      "avatar_url": "https://avatars2.githubusercontent.com/u/1114467?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/flarnie",
      "html_url": "https://github.com/flarnie",
      "followers_url": "https://api.github.com/users/flarnie/followers",
      "following_url": "https://api.github.com/users/flarnie/following{/other_user}",
      "gists_url": "https://api.github.com/users/flarnie/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/flarnie/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/flarnie/subscriptions",
      "organizations_url": "https://api.github.com/users/flarnie/orgs",
      "repos_url": "https://api.github.com/users/flarnie/repos",
      "events_url": "https://api.github.com/users/flarnie/events{/privacy}",
      "received_events_url": "https://api.github.com/users/flarnie/received_events",
      "type": "User",
      "site_admin": false
    },
    {
      "login": "trueadm",
      "id": 1519870,
      "node_id": "MDQ6VXNlcjE1MTk4NzA=",
      "avatar_url": "https://avatars0.githubusercontent.com/u/1519870?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/trueadm",
      "html_url": "https://github.com/trueadm",
      "followers_url": "https://api.github.com/users/trueadm/followers",
      "following_url": "https://api.github.com/users/trueadm/following{/other_user}",
      "gists_url": "https://api.github.com/users/trueadm/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/trueadm/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/trueadm/subscriptions",
      "organizations_url": "https://api.github.com/users/trueadm/orgs",
      "repos_url": "https://api.github.com/users/trueadm/repos",
      "events_url": "https://api.github.com/users/trueadm/events{/privacy}",
      "received_events_url": "https://api.github.com/users/trueadm/received_events",
      "type": "User",
      "site_admin": false
    }
  ],
  "milestone": null,
  "comments": 19,
  "created_at": "2017-09-01T11:12:06Z",
  "updated_at": "2017-11-15T11:25:04Z",
  "closed_at": "2017-10-06T18:09:55Z",
  "author_association": "NONE",
  "body": "With SSR being loaded on client side, there are various wrong behaviors if the server's HTML differs from the client's HTML.\r\n\r\nFor a minimal example, I created [this repository](https://github.com/Tarnadas/react16-ssr-bug).\r\nHere is a code snippet:\r\n```js\r\nclass AppView extends React.Component {\r\n  render () {\r\n    const isServer = this.props.isServer\r\n    const styles = {\r\n      server: {\r\n        backgroundColor: 'red'\r\n      },\r\n      client: {\r\n        backgroundColor: 'green'\r\n      }\r\n    }\r\n    return (\r\n      <div>\r\n        {\r\n          isServer ?\r\n            <div style={styles.server}>isServer</div> :\r\n            <div style={styles.client}>isClient</div>\r\n        }\r\n      </div>\r\n    )\r\n  }\r\n}\r\n```\r\n\r\nIn the example I render a CSS background color of red for the server and green for the client. I force a difference by the server's and client's HTML with the `isServer` property.\r\n\r\nWith React 15, everything works as expected: the server renders a red background, but the client corrects it to green. With React 16 however the background stays the same, but the text changes as expected.\r\n\r\nThere are probably other similar behaviors. For example I found out about this bug, because I was conditionally rendering a complete component like so:\r\n\r\n```js\r\nreturn someCondition && <MyComponent />\r\n```\r\n\r\nIt becomes even more weird, because if there is additional JSX after that conditional rendering, it would render that additional JSX as if it is inside that `MyComponent`\r\n```js\r\nreturn (\r\n  <div>\r\n    { someCondition && <MyComponent /> }\r\n    <SomeOtherComponent />\r\n  </div>\r\n)\r\n```\r\nbecomes\r\n```js\r\nreturn (\r\n  <div>\r\n    <MyComponent>\r\n      <SomeOtherComponent />\r\n    </MyComponent>\r\n  </div>\r\n)\r\n```\r\nif `someCondition === true` on server side and `someCondition === false` on client side.\r\n\r\nYou can see this behavior on my website: http://smmdb.ddns.net/courses\r\nOpen Chrome Dev Tools and lower the width until you get the mobile view, then reload the page and see how the list is wrapped inside another Component.",
  "closed_by": {
    "login": "bvaughn",
    "id": 29597,
    "node_id": "MDQ6VXNlcjI5NTk3",
    "avatar_url": "https://avatars0.githubusercontent.com/u/29597?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/bvaughn",
    "html_url": "https://github.com/bvaughn",
    "followers_url": "https://api.github.com/users/bvaughn/followers",
    "following_url": "https://api.github.com/users/bvaughn/following{/other_user}",
    "gists_url": "https://api.github.com/users/bvaughn/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/bvaughn/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/bvaughn/subscriptions",
    "organizations_url": "https://api.github.com/users/bvaughn/orgs",
    "repos_url": "https://api.github.com/users/bvaughn/repos",
    "events_url": "https://api.github.com/users/bvaughn/events{/privacy}",
    "received_events_url": "https://api.github.com/users/bvaughn/received_events",
    "type": "User",
    "site_admin": false
  }
}

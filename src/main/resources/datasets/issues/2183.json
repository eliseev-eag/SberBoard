{
  "url": "https://api.github.com/repos/facebook/react/issues/2183",
  "repository_url": "https://api.github.com/repos/facebook/react",
  "labels_url": "https://api.github.com/repos/facebook/react/issues/2183/labels{/name}",
  "comments_url": "https://api.github.com/repos/facebook/react/issues/2183/comments",
  "events_url": "https://api.github.com/repos/facebook/react/issues/2183/events",
  "html_url": "https://github.com/facebook/react/issues/2183",
  "id": 42587553,
  "node_id": "MDU6SXNzdWU0MjU4NzU1Mw==",
  "number": 2183,
  "title": "Improper 'this' context during createClass(): 0.11.1",
  "user": {
    "login": "lwhorton",
    "id": 2663599,
    "node_id": "MDQ6VXNlcjI2NjM1OTk=",
    "avatar_url": "https://avatars2.githubusercontent.com/u/2663599?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/lwhorton",
    "html_url": "https://github.com/lwhorton",
    "followers_url": "https://api.github.com/users/lwhorton/followers",
    "following_url": "https://api.github.com/users/lwhorton/following{/other_user}",
    "gists_url": "https://api.github.com/users/lwhorton/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/lwhorton/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/lwhorton/subscriptions",
    "organizations_url": "https://api.github.com/users/lwhorton/orgs",
    "repos_url": "https://api.github.com/users/lwhorton/repos",
    "events_url": "https://api.github.com/users/lwhorton/events{/privacy}",
    "received_events_url": "https://api.github.com/users/lwhorton/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 3,
  "created_at": "2014-09-12T01:10:11Z",
  "updated_at": "2014-09-13T14:10:11Z",
  "closed_at": "2014-09-13T00:14:00Z",
  "author_association": "NONE",
  "body": "In React 0.10, I am able to decorate the render method with a static render that returns a promise, as opposed to React's own callback implementation.\n\n``` javascript\nmixinRender = function(spec) {\n    var statics\n    spec.statics = statics = (spec.statics || {})\n    // spot weld a static 'render' method with a .then()\n    statics.render = statics.render || staticRenderFactory.call(this,spec)\n    return spec\n}\n\nfunction staticRenderFactory(spec) {\n    return function staticRender(model, node) {\n        var promisified = Promise.promisify(React.renderComponent, React)\n\n        var node = (node || spec.node(model))\n        var Ctor = this(model) // <- this during runtime refers to the createClass() function\n        return promisified(Ctor, node)\n    }\n}\n```\n\nThis semi-decoration worked well enough for my purposes. It returns to the caller a descriptor as I would expect.\n\n``` javascript\ncreateClass: function(spec) {\n    var Constructor = function() {};\n    Constructor.prototype = new ReactCompositeComponentBase();\n    Constructor.prototype.constructor = Constructor;\n\n    var DescriptorConstructor = Constructor;\n\n    var ConvenienceConstructor = function(props, children) {\n      var descriptor = new DescriptorConstructor();\n      descriptor.construct.apply(descriptor, arguments);\n      return descriptor; // <- tada!\n    };\n```\n\nHowever, following the same pattern in 0.11.1  gives me a `no property 'construct` error during the internal createClass() call. \n\nDigging around in the codebase, it just looks like a forgotten context bind.\n\n``` javascript\n  createClass: function(spec) {\n    var Constructor = function(props, owner) {\n      this.construct(props, owner); // <- this is undefined, and hence construct is undefined\n    };\n    Constructor.prototype = new ReactCompositeComponentBase();\n    Constructor.prototype.constructor = Constructor;\n```\n",
  "closed_by": {
    "login": "zpao",
    "id": 8445,
    "node_id": "MDQ6VXNlcjg0NDU=",
    "avatar_url": "https://avatars1.githubusercontent.com/u/8445?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/zpao",
    "html_url": "https://github.com/zpao",
    "followers_url": "https://api.github.com/users/zpao/followers",
    "following_url": "https://api.github.com/users/zpao/following{/other_user}",
    "gists_url": "https://api.github.com/users/zpao/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/zpao/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/zpao/subscriptions",
    "organizations_url": "https://api.github.com/users/zpao/orgs",
    "repos_url": "https://api.github.com/users/zpao/repos",
    "events_url": "https://api.github.com/users/zpao/events{/privacy}",
    "received_events_url": "https://api.github.com/users/zpao/received_events",
    "type": "User",
    "site_admin": false
  }
}

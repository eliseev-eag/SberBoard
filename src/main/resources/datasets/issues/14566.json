{
  "url": "https://api.github.com/repos/facebook/react/issues/14566",
  "repository_url": "https://api.github.com/repos/facebook/react",
  "labels_url": "https://api.github.com/repos/facebook/react/issues/14566/labels{/name}",
  "comments_url": "https://api.github.com/repos/facebook/react/issues/14566/comments",
  "events_url": "https://api.github.com/repos/facebook/react/issues/14566/events",
  "html_url": "https://github.com/facebook/react/pull/14566",
  "id": 397854602,
  "node_id": "MDExOlB1bGxSZXF1ZXN0MjQzNzA1NjYy",
  "number": 14566,
  "title": "Use default reducer state value as initial state when using useReducer hook",
  "user": {
    "login": "carlosrberto",
    "id": 679481,
    "node_id": "MDQ6VXNlcjY3OTQ4MQ==",
    "avatar_url": "https://avatars0.githubusercontent.com/u/679481?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/carlosrberto",
    "html_url": "https://github.com/carlosrberto",
    "followers_url": "https://api.github.com/users/carlosrberto/followers",
    "following_url": "https://api.github.com/users/carlosrberto/following{/other_user}",
    "gists_url": "https://api.github.com/users/carlosrberto/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/carlosrberto/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/carlosrberto/subscriptions",
    "organizations_url": "https://api.github.com/users/carlosrberto/orgs",
    "repos_url": "https://api.github.com/users/carlosrberto/repos",
    "events_url": "https://api.github.com/users/carlosrberto/events{/privacy}",
    "received_events_url": "https://api.github.com/users/carlosrberto/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 196858374,
      "node_id": "MDU6TGFiZWwxOTY4NTgzNzQ=",
      "url": "https://api.github.com/repos/facebook/react/labels/CLA%20Signed",
      "name": "CLA Signed",
      "color": "e7e7e7",
      "default": false
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 1,
  "created_at": "2019-01-10T14:26:52Z",
  "updated_at": "2019-02-08T20:15:25Z",
  "closed_at": "2019-02-08T20:15:07Z",
  "author_association": "NONE",
  "pull_request": {
    "url": "https://api.github.com/repos/facebook/react/pulls/14566",
    "html_url": "https://github.com/facebook/react/pull/14566",
    "diff_url": "https://github.com/facebook/react/pull/14566.diff",
    "patch_url": "https://github.com/facebook/react/pull/14566.patch"
  },
  "body": "## Use default reducer state value as initial state when using useReducer hook\r\n\r\nBased on discussion from issue #14542.\r\n\r\nIf we provide the following reducer:\r\n\r\n```js\r\nfunction reducer(state = 5, { type }) {\r\n  switch (type) {\r\n    case 'INCREMENT':\r\n      return state + 1;\r\n    case 'DECREMENT':\r\n      return state - 1;\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n```\r\n\r\nThen in the component:\r\n\r\n```js\r\nfunction Counter() {\r\n  const [count] = useReducer(reducer);\r\n  return <span>{count}</span>;\r\n}\r\n```\r\n\r\nWe don't get count equal `5` in the initial render.\r\n\r\nIt works if we provide the `initialState` as second argument for `useReducer`:\r\n\r\n```js\r\nconst [count] = useReducer(reducer, 5);\r\n``` \r\n\r\nor like @ckknight mentioned if we call an initialization action:\r\n\r\n```js\r\nuseReducer(reducer, undefined, { type: 'INIT' });\r\n```\r\n\r\nHowever I think it's a little redundant because we already set the default state value in the reducer function.\r\n\r\nThis pull request add some changes to use the default state value from the reducer function if no `initialState` was provided to `useReducer`.\r\n\r\nI don't know if this behaviour was discussed during the implementation of `useReducer`, but if this is not the desired behaviour for `useReducer` feel free to close this pull request.",
  "closed_by": {
    "login": "carlosrberto",
    "id": 679481,
    "node_id": "MDQ6VXNlcjY3OTQ4MQ==",
    "avatar_url": "https://avatars0.githubusercontent.com/u/679481?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/carlosrberto",
    "html_url": "https://github.com/carlosrberto",
    "followers_url": "https://api.github.com/users/carlosrberto/followers",
    "following_url": "https://api.github.com/users/carlosrberto/following{/other_user}",
    "gists_url": "https://api.github.com/users/carlosrberto/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/carlosrberto/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/carlosrberto/subscriptions",
    "organizations_url": "https://api.github.com/users/carlosrberto/orgs",
    "repos_url": "https://api.github.com/users/carlosrberto/repos",
    "events_url": "https://api.github.com/users/carlosrberto/events{/privacy}",
    "received_events_url": "https://api.github.com/users/carlosrberto/received_events",
    "type": "User",
    "site_admin": false
  }
}

{
  "url": "https://api.github.com/repos/facebook/react/issues/8576",
  "repository_url": "https://api.github.com/repos/facebook/react",
  "labels_url": "https://api.github.com/repos/facebook/react/issues/8576/labels{/name}",
  "comments_url": "https://api.github.com/repos/facebook/react/issues/8576/comments",
  "events_url": "https://api.github.com/repos/facebook/react/issues/8576/events",
  "html_url": "https://github.com/facebook/react/issues/8576",
  "id": 195654640,
  "node_id": "MDU6SXNzdWUxOTU2NTQ2NDA=",
  "number": 8576,
  "title": "15.4 breaks default param behavior on componentDidMount in production build",
  "user": {
    "login": "kentor",
    "id": 240493,
    "node_id": "MDQ6VXNlcjI0MDQ5Mw==",
    "avatar_url": "https://avatars1.githubusercontent.com/u/240493?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/kentor",
    "html_url": "https://github.com/kentor",
    "followers_url": "https://api.github.com/users/kentor/followers",
    "following_url": "https://api.github.com/users/kentor/following{/other_user}",
    "gists_url": "https://api.github.com/users/kentor/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/kentor/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/kentor/subscriptions",
    "organizations_url": "https://api.github.com/users/kentor/orgs",
    "repos_url": "https://api.github.com/users/kentor/repos",
    "events_url": "https://api.github.com/users/kentor/events{/privacy}",
    "received_events_url": "https://api.github.com/users/kentor/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 40929151,
      "node_id": "MDU6TGFiZWw0MDkyOTE1MQ==",
      "url": "https://api.github.com/repos/facebook/react/labels/Type:%20Bug",
      "name": "Type: Bug",
      "color": "b60205",
      "default": false
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": {
    "login": "aweary",
    "id": 6886061,
    "node_id": "MDQ6VXNlcjY4ODYwNjE=",
    "avatar_url": "https://avatars2.githubusercontent.com/u/6886061?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/aweary",
    "html_url": "https://github.com/aweary",
    "followers_url": "https://api.github.com/users/aweary/followers",
    "following_url": "https://api.github.com/users/aweary/following{/other_user}",
    "gists_url": "https://api.github.com/users/aweary/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/aweary/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/aweary/subscriptions",
    "organizations_url": "https://api.github.com/users/aweary/orgs",
    "repos_url": "https://api.github.com/users/aweary/repos",
    "events_url": "https://api.github.com/users/aweary/events{/privacy}",
    "received_events_url": "https://api.github.com/users/aweary/received_events",
    "type": "User",
    "site_admin": false
  },
  "assignees": [
    {
      "login": "aweary",
      "id": 6886061,
      "node_id": "MDQ6VXNlcjY4ODYwNjE=",
      "avatar_url": "https://avatars2.githubusercontent.com/u/6886061?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/aweary",
      "html_url": "https://github.com/aweary",
      "followers_url": "https://api.github.com/users/aweary/followers",
      "following_url": "https://api.github.com/users/aweary/following{/other_user}",
      "gists_url": "https://api.github.com/users/aweary/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/aweary/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/aweary/subscriptions",
      "organizations_url": "https://api.github.com/users/aweary/orgs",
      "repos_url": "https://api.github.com/users/aweary/repos",
      "events_url": "https://api.github.com/users/aweary/events{/privacy}",
      "received_events_url": "https://api.github.com/users/aweary/received_events",
      "type": "User",
      "site_admin": false
    }
  ],
  "milestone": null,
  "comments": 5,
  "created_at": "2016-12-14T21:46:00Z",
  "updated_at": "2017-10-04T16:03:23Z",
  "closed_at": "2017-10-04T16:03:22Z",
  "author_association": "NONE",
  "body": "**Do you want to request a *feature* or report a *bug*?**\r\nbug\r\n\r\n**What is the current behavior?**\r\nonly when `NODE_ENV=production`: `null` is being passed as first argument to `componentDidMount`. this becomes an issue when a default param is specified for `componentDidMount`.\r\n\r\nfrom the backtrace from the componentDidMount call it seems like the difference between 15.3 and 15.4 is the extra `arg` argument in this line:\r\n\r\nhttps://github.com/facebook/react/blob/308e0b77863071f31cff7aec74e359603526274e/src/renderers/shared/stack/reconciler/CallbackQueue.js#L73\r\n\r\n**Repro**\r\nhttps://github.com/kentor/throwaway/tree/master/react-15.4-breaks-default-param\r\nclone the project then cd into it\r\n```\r\ncd react-15.4-breaks-default-param\r\nyarn\r\nnpm run dev\r\n```\r\nopen  localhost:9966 (with an es6 supported browser) and open the console, it should log a message. kill the wzrd process\r\n\r\nthen run\r\n```\r\nnpm run prod\r\n```\r\nthen refresh localhost:9966, the console should log null\r\n\r\n**What is the expected behavior?**\r\nthey should either both log `this should be logged` or they should both log `null`. development build and production build shouldn't differ in this regard\r\n\r\n**Which versions of React, and which browser / OS are affected by this issue? Did this work in previous versions of React?**\r\n15.4. Everything was OK in 15.3",
  "closed_by": {
    "login": "gaearon",
    "id": 810438,
    "node_id": "MDQ6VXNlcjgxMDQzOA==",
    "avatar_url": "https://avatars0.githubusercontent.com/u/810438?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/gaearon",
    "html_url": "https://github.com/gaearon",
    "followers_url": "https://api.github.com/users/gaearon/followers",
    "following_url": "https://api.github.com/users/gaearon/following{/other_user}",
    "gists_url": "https://api.github.com/users/gaearon/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/gaearon/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/gaearon/subscriptions",
    "organizations_url": "https://api.github.com/users/gaearon/orgs",
    "repos_url": "https://api.github.com/users/gaearon/repos",
    "events_url": "https://api.github.com/users/gaearon/events{/privacy}",
    "received_events_url": "https://api.github.com/users/gaearon/received_events",
    "type": "User",
    "site_admin": false
  }
}

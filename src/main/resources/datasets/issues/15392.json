{
  "url": "https://api.github.com/repos/facebook/react/issues/15392",
  "repository_url": "https://api.github.com/repos/facebook/react",
  "labels_url": "https://api.github.com/repos/facebook/react/issues/15392/labels{/name}",
  "comments_url": "https://api.github.com/repos/facebook/react/issues/15392/comments",
  "events_url": "https://api.github.com/repos/facebook/react/issues/15392/events",
  "html_url": "https://github.com/facebook/react/issues/15392",
  "id": 432315511,
  "node_id": "MDU6SXNzdWU0MzIzMTU1MTE=",
  "number": 15392,
  "title": "Provide withHooks HOC to decouple hooks and components",
  "user": {
    "login": "malerba118",
    "id": 5760059,
    "node_id": "MDQ6VXNlcjU3NjAwNTk=",
    "avatar_url": "https://avatars0.githubusercontent.com/u/5760059?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/malerba118",
    "html_url": "https://github.com/malerba118",
    "followers_url": "https://api.github.com/users/malerba118/followers",
    "following_url": "https://api.github.com/users/malerba118/following{/other_user}",
    "gists_url": "https://api.github.com/users/malerba118/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/malerba118/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/malerba118/subscriptions",
    "organizations_url": "https://api.github.com/users/malerba118/orgs",
    "repos_url": "https://api.github.com/users/malerba118/repos",
    "events_url": "https://api.github.com/users/malerba118/events{/privacy}",
    "received_events_url": "https://api.github.com/users/malerba118/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 121709921,
      "node_id": "MDU6TGFiZWwxMjE3MDk5MjE=",
      "url": "https://api.github.com/repos/facebook/react/labels/Type:%20Feature%20Request",
      "name": "Type: Feature Request",
      "color": "c7def8",
      "default": false
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 2,
  "created_at": "2019-04-11T23:18:44Z",
  "updated_at": "2019-04-12T21:56:37Z",
  "closed_at": "2019-04-12T21:56:37Z",
  "author_association": "NONE",
  "body": "<!--\r\n  Note: if the issue is about documentation or the website, please file it at:\r\n  https://github.com/reactjs/reactjs.org/issues/new\r\n-->\r\n\r\n**Do you want to request a *feature* or report a *bug*?**\r\nFeature\r\n\r\n**What is the current behavior?**\r\nCurrently the recommended way to use hooks involves coupling them with components. By this I mean that components are aware of the hooks they consume and depend on them explicitly.\r\nThis [issue thread on the recompose repo](https://github.com/acdlite/recompose/issues/756) discusses this issue in some detail and how recompose favored keeping components dumb, but wraps them in HOC's to make them smart. Hooks promote baking the smartness right into the component itself.\r\n\r\n**What is the expected behavior?**\r\nReact should offer a way to decouple components from the hooks they consume. I suggest a `withHooks` HOC that maps hooks to props. This will be a familiar model for those who have used redux with react.\r\n\r\n```jsx\r\nconst withHooks = mapHooksToProps => WrappedComponent => {\r\n  return props => {\r\n    let hookProps = mapHooksToProps(props);\r\n    return <WrappedComponent {...hookProps} {...props} />;\r\n  };\r\n};\r\n\r\nconst Counter = props => {\r\n  return (\r\n    <div>\r\n      <div>Counter: {props.counter}</div>\r\n      <button onClick={props.increment}>Increment</button>\r\n      <button onClick={props.decrement}>Decrement</button>\r\n    </div>\r\n  );\r\n};\r\n\r\nconst mapHooksToProps = props => {\r\n  let [counter, setCounter] = useState(0);\r\n\r\n  return {\r\n    counter,\r\n    increment: () => setCounter(prev => prev + 1),\r\n    decrement: () => setCounter(prev => prev - 1)\r\n  };\r\n};\r\n\r\nconst EnhancedCounter = withHooks(mapHooksToProps)(Counter);\r\n```\r\n\r\nDemo:\r\nhttps://codesandbox.io/s/ympq0rlv79\r\n\r\nSome reasons why this is nice:\r\n\r\n1) It decouples components from the things that make them smart. Some examples of things that could make dumb components smart include hooks, redux, and good ol' parent components. By mapping hooks to props, we make it very easy to swap a dumb component's hook-powered 'brain' for a new 'brain', say a redux-powered 'brain'.\r\n\r\n2) Not sure if it's a good idea, but i know several people trying to replace redux with hooks in their applications. For these people, migrations from redux to hooks would be dead simple because they could replace `mapStateToProps` and `mapDispatchToProps` with `mapHooksToProps` and wouldn't have to worry about touching the underlying component.\r\n \r\n3) Testing is also easier because we can test the component in isolation without the hooks baked in.\r\n\r\n4) It makes prop overrides possible. In the case of our EnhancedCounter, we could override the counter prop by doing `<EnhancedCounter counter={10} />`. A real world example of hooks making things harder to override includes material-ui's [new styling approach via hooks](https://material-ui.com/css-in-js/basics/#hook-api). Because classes are provided via hook and no longer via props, we would need custom logic to override classes via props with the new hook-based approach:\r\n```jsx\r\nexport default function Hook(props) {\r\n  let classes = useStyles();\r\n  classes = {...classes, ...props.classes};\r\n  return <Button className={classes.root}>Hook</Button>;\r\n}\r\n```\r\n**Which versions of React, and which browser / OS are affected by this issue? Did this work in previous versions of React?**\r\nFor versions of react >= 16.8",
  "closed_by": {
    "login": "threepointone",
    "id": 18808,
    "node_id": "MDQ6VXNlcjE4ODA4",
    "avatar_url": "https://avatars2.githubusercontent.com/u/18808?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/threepointone",
    "html_url": "https://github.com/threepointone",
    "followers_url": "https://api.github.com/users/threepointone/followers",
    "following_url": "https://api.github.com/users/threepointone/following{/other_user}",
    "gists_url": "https://api.github.com/users/threepointone/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/threepointone/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/threepointone/subscriptions",
    "organizations_url": "https://api.github.com/users/threepointone/orgs",
    "repos_url": "https://api.github.com/users/threepointone/repos",
    "events_url": "https://api.github.com/users/threepointone/events{/privacy}",
    "received_events_url": "https://api.github.com/users/threepointone/received_events",
    "type": "User",
    "site_admin": false
  }
}

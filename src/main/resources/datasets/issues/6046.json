{
  "url": "https://api.github.com/repos/facebook/react/issues/6046",
  "repository_url": "https://api.github.com/repos/facebook/react",
  "labels_url": "https://api.github.com/repos/facebook/react/issues/6046/labels{/name}",
  "comments_url": "https://api.github.com/repos/facebook/react/issues/6046/comments",
  "events_url": "https://api.github.com/repos/facebook/react/issues/6046/events",
  "html_url": "https://github.com/facebook/react/pull/6046",
  "id": 134068777,
  "node_id": "MDExOlB1bGxSZXF1ZXN0NTk1Mzc0NDk=",
  "number": 6046,
  "title": "Add new ReactPerf",
  "user": {
    "login": "gaearon",
    "id": 810438,
    "node_id": "MDQ6VXNlcjgxMDQzOA==",
    "avatar_url": "https://avatars0.githubusercontent.com/u/810438?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/gaearon",
    "html_url": "https://github.com/gaearon",
    "followers_url": "https://api.github.com/users/gaearon/followers",
    "following_url": "https://api.github.com/users/gaearon/following{/other_user}",
    "gists_url": "https://api.github.com/users/gaearon/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/gaearon/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/gaearon/subscriptions",
    "organizations_url": "https://api.github.com/users/gaearon/orgs",
    "repos_url": "https://api.github.com/users/gaearon/repos",
    "events_url": "https://api.github.com/users/gaearon/events{/privacy}",
    "received_events_url": "https://api.github.com/users/gaearon/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 196858374,
      "node_id": "MDU6TGFiZWwxOTY4NTgzNzQ=",
      "url": "https://api.github.com/repos/facebook/react/labels/CLA%20Signed",
      "name": "CLA Signed",
      "color": "e7e7e7",
      "default": false
    },
    {
      "id": 40929153,
      "node_id": "MDU6TGFiZWw0MDkyOTE1Mw==",
      "url": "https://api.github.com/repos/facebook/react/labels/Type:%20Enhancement",
      "name": "Type: Enhancement",
      "color": "84b6eb",
      "default": false
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": {
    "url": "https://api.github.com/repos/facebook/react/milestones/28",
    "html_url": "https://github.com/facebook/react/milestone/28",
    "labels_url": "https://api.github.com/repos/facebook/react/milestones/28/labels",
    "id": 1756982,
    "node_id": "MDk6TWlsZXN0b25lMTc1Njk4Mg==",
    "number": 28,
    "title": "15.1.0",
    "description": "",
    "creator": {
      "login": "zpao",
      "id": 8445,
      "node_id": "MDQ6VXNlcjg0NDU=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/8445?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/zpao",
      "html_url": "https://github.com/zpao",
      "followers_url": "https://api.github.com/users/zpao/followers",
      "following_url": "https://api.github.com/users/zpao/following{/other_user}",
      "gists_url": "https://api.github.com/users/zpao/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/zpao/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/zpao/subscriptions",
      "organizations_url": "https://api.github.com/users/zpao/orgs",
      "repos_url": "https://api.github.com/users/zpao/repos",
      "events_url": "https://api.github.com/users/zpao/events{/privacy}",
      "received_events_url": "https://api.github.com/users/zpao/received_events",
      "type": "User",
      "site_admin": false
    },
    "open_issues": 0,
    "closed_issues": 26,
    "state": "closed",
    "created_at": "2016-05-10T05:01:33Z",
    "updated_at": "2016-06-01T19:35:05Z",
    "due_on": null,
    "closed_at": "2016-05-20T23:49:33Z"
  },
  "comments": 108,
  "created_at": "2016-02-16T19:03:28Z",
  "updated_at": "2016-05-20T23:48:10Z",
  "closed_at": "2016-04-29T14:35:53Z",
  "author_association": "MEMBER",
  "pull_request": {
    "url": "https://api.github.com/repos/facebook/react/pulls/6046",
    "html_url": "https://github.com/facebook/react/pull/6046",
    "diff_url": "https://github.com/facebook/react/pull/6046.diff",
    "patch_url": "https://github.com/facebook/react/pull/6046.patch"
  },
  "body": "This is a work in progress on implementing new ReactPerf as discussed in #6015.\n\nPer @sebmarkbage’s request, I decided to focus on removing dependencies on internal method names. Data will be explicitly passed to the perf tool from React methods, and we will attempt to not rely on the execution order.\n\nRather than refactor the existing code, I chose to create a new tool side by side so I can compare their output until I’m confident about correctness. I will later add `PROFILE` feature gates to the calls.\n- [x] Add barebones implementation of new ReactPerf\n- [x] It should count `totalTime` for flushes\n- [x] It should not count `totalTime` twice for nested flushes (fixes a minor bug in ReactPerf)\n- [x] It should not rely on the rendering and mounting stack matching parent hierarchy\n- [x] Decide how inclusive measurements work\n- [x] Add a safety mechanism to avoid accidentally forgetting `endMeasure()`\n- [x] It should count exclusive time for every lifecycle method\n- [x] It should include `displayNames` and other component information\n- [x] It should reconstruct the parent tree\n- [x] It should count `counts` and `created` for components\n- [x] It should count `exclusive` times for components\n- [x] It should count `inclusive` times for components based on parent tree\n- [x] Make it _the_ DebugTool\n- [x] Make sure teams that replaced ReactDefaultPerf with [wtf](https://google.github.io/tracing-framework/index.html) can keep doing so\n- [x] It should implement `printDOM()`\n- [x] It should implement `printWasted()`\n- [x] Treat stateless components correctly\n- [x] Expose the new `ReactPerf` as `react-addons-perf`\n- [x] Make sure wasted measurements are useful (something’s off right now)\n- [ ] Do we want to rely on owner?\n- [ ] TESTS\n- [ ] Remove the old ReactPerf code\n- [ ] Introduce the new `PROFILE` gate and put calls behind it\n- [x] Consider the implications of using `WeakMap` in `__PROFILE__` builds\n- [ ] Expose `React.unstable_Instrumentation`\n- [x] Make sure we have new `get*()` methods and deprecated `printDOM()` and `getMeasurementSummaryMap()` are still there\n- [ ] Expose whatever React Native needs for systrace integration and enabling `PROFILE`\n- [ ] Verify compatibility with React ART (e.g. add [stuff like this](https://github.com/facebook/react-devtools/blob/master/backend/getData.js#L87-L89))\n- [ ] Ensure we throw a meaningful error when [`start()` is called inside the lifecycle](http://stackoverflow.com/questions/27279488/react-js-performance-tool-addon-throws-cannot-read-property-counts-of-undefin) or, better, consider providing support for that. See also #2095, #3436, https://github.com/lostthetrail/react-ssr-perf\n- [ ] New ReactPerf is correct, tested, has no effect in production, is hard to break accidentally when refactoring, and does not rely on implementation details\n",
  "closed_by": {
    "login": "gaearon",
    "id": 810438,
    "node_id": "MDQ6VXNlcjgxMDQzOA==",
    "avatar_url": "https://avatars0.githubusercontent.com/u/810438?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/gaearon",
    "html_url": "https://github.com/gaearon",
    "followers_url": "https://api.github.com/users/gaearon/followers",
    "following_url": "https://api.github.com/users/gaearon/following{/other_user}",
    "gists_url": "https://api.github.com/users/gaearon/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/gaearon/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/gaearon/subscriptions",
    "organizations_url": "https://api.github.com/users/gaearon/orgs",
    "repos_url": "https://api.github.com/users/gaearon/repos",
    "events_url": "https://api.github.com/users/gaearon/events{/privacy}",
    "received_events_url": "https://api.github.com/users/gaearon/received_events",
    "type": "User",
    "site_admin": false
  }
}

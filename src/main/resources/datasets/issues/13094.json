{
  "url": "https://api.github.com/repos/facebook/react/issues/13094",
  "repository_url": "https://api.github.com/repos/facebook/react",
  "labels_url": "https://api.github.com/repos/facebook/react/issues/13094/labels{/name}",
  "comments_url": "https://api.github.com/repos/facebook/react/issues/13094/comments",
  "events_url": "https://api.github.com/repos/facebook/react/issues/13094/events",
  "html_url": "https://github.com/facebook/react/issues/13094",
  "id": 334780581,
  "node_id": "MDU6SXNzdWUzMzQ3ODA1ODE=",
  "number": 13094,
  "title": "Cannot specify a key for a Portal element",
  "user": {
    "login": "RoystonS",
    "id": 19773,
    "node_id": "MDQ6VXNlcjE5Nzcz",
    "avatar_url": "https://avatars0.githubusercontent.com/u/19773?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/RoystonS",
    "html_url": "https://github.com/RoystonS",
    "followers_url": "https://api.github.com/users/RoystonS/followers",
    "following_url": "https://api.github.com/users/RoystonS/following{/other_user}",
    "gists_url": "https://api.github.com/users/RoystonS/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/RoystonS/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/RoystonS/subscriptions",
    "organizations_url": "https://api.github.com/users/RoystonS/orgs",
    "repos_url": "https://api.github.com/users/RoystonS/repos",
    "events_url": "https://api.github.com/users/RoystonS/events{/privacy}",
    "received_events_url": "https://api.github.com/users/RoystonS/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 1,
  "created_at": "2018-06-22T07:51:59Z",
  "updated_at": "2018-06-22T10:44:57Z",
  "closed_at": "2018-06-22T10:44:57Z",
  "author_association": "NONE",
  "body": "<!--\r\n  Note: if the issue is about documentation or the website, please file it at:\r\n  https://github.com/reactjs/reactjs.org/issues/new\r\n-->\r\n\r\n**Do you want to request a *feature* or report a *bug*?**\r\nI'm either reporting an oversight in the documentation for a feature which is already implemented but not documented, which would be a bug, or a request for a supported way of adding keys on portal elements, which would be a feature.\r\n\r\n**What is the current behavior?**\r\nI can't see an existing way to add a key to a Portal element, at least using officially documented means.  This means that the reconciler is somewhat crippled when re-rendering a component that emits multiple portals, and will do bad things.\r\n\r\ne.g. if we render portals [A, B, C, D] but then remove B and the re-render emits [A, C, D], React ends up tearing down the original C and D component instance trees and creating new ones, because there's no way to hint to the reconciler that the new C and D are the same.  (I'm sufficiently unfamiliar with the implementation logic that I don't understand how it knows that A is unchanged, so I suspect I'm missing something here.)\r\n\r\nBeing able to specify `key` hints on Portals would enable React to avoid recreating the C and D instances in the above example.\r\n\r\n**If the current behavior is a bug, please provide the steps to reproduce and if possible a minimal demo of the problem. Your bug will get fixed much faster if we can run your code and it doesn't have dependencies other than React. Paste the link to your JSFiddle (https://jsfiddle.net/Luktwrdm/) or CodeSandbox (https://codesandbox.io/s/new) example below:**\r\n\r\nHere's a CodeSandbox that demonstrates that without keys, Portals suffer the expected reconciliation issues when they disappear:\r\n\r\nhttps://codesandbox.io/s/ppjkxqx8xm\r\n\r\nInterestingly, I can see that there's a (currently) undocumented third parameter to `createPortal` which does allow a key to be specified.\r\n\r\nhttps://github.com/facebook/react/blob/aeda7b745d9c080150704feb20ea576238a1b9a1/packages/react-dom/src/client/ReactDOM.js#L570\r\n\r\nUsing this fixes the problem (also demonstrated in the above CodeSandbox).  But it's not mentioned in the Portal documentation: https://reactjs.org/docs/portals.html.\r\n\r\nIs this an omission in the documentation or is it a deliberately hidden and unsupported feature?  (Right now I have to assume the latter.)\r\n\r\n**What is the expected behavior?**\r\nThere would be a supported way of adding keys to portal elements.\r\n\r\n**Which versions of React, and which browser / OS are affected by this issue? Did this work in previous versions of React?**\r\nReact 16.4",
  "closed_by": {
    "login": "gaearon",
    "id": 810438,
    "node_id": "MDQ6VXNlcjgxMDQzOA==",
    "avatar_url": "https://avatars0.githubusercontent.com/u/810438?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/gaearon",
    "html_url": "https://github.com/gaearon",
    "followers_url": "https://api.github.com/users/gaearon/followers",
    "following_url": "https://api.github.com/users/gaearon/following{/other_user}",
    "gists_url": "https://api.github.com/users/gaearon/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/gaearon/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/gaearon/subscriptions",
    "organizations_url": "https://api.github.com/users/gaearon/orgs",
    "repos_url": "https://api.github.com/users/gaearon/repos",
    "events_url": "https://api.github.com/users/gaearon/events{/privacy}",
    "received_events_url": "https://api.github.com/users/gaearon/received_events",
    "type": "User",
    "site_admin": false
  }
}

{
  "url": "https://api.github.com/repos/facebook/react/issues/2378",
  "repository_url": "https://api.github.com/repos/facebook/react",
  "labels_url": "https://api.github.com/repos/facebook/react/issues/2378/labels{/name}",
  "comments_url": "https://api.github.com/repos/facebook/react/issues/2378/comments",
  "events_url": "https://api.github.com/repos/facebook/react/issues/2378/events",
  "html_url": "https://github.com/facebook/react/issues/2378",
  "id": 46188530,
  "node_id": "MDU6SXNzdWU0NjE4ODUzMA==",
  "number": 2378,
  "title": "New method for implicit keys, traverseAllChildren",
  "user": {
    "login": "syranide",
    "id": 1714255,
    "node_id": "MDQ6VXNlcjE3MTQyNTU=",
    "avatar_url": "https://avatars1.githubusercontent.com/u/1714255?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/syranide",
    "html_url": "https://github.com/syranide",
    "followers_url": "https://api.github.com/users/syranide/followers",
    "following_url": "https://api.github.com/users/syranide/following{/other_user}",
    "gists_url": "https://api.github.com/users/syranide/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/syranide/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/syranide/subscriptions",
    "organizations_url": "https://api.github.com/users/syranide/orgs",
    "repos_url": "https://api.github.com/users/syranide/repos",
    "events_url": "https://api.github.com/users/syranide/events{/privacy}",
    "received_events_url": "https://api.github.com/users/syranide/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 40929153,
      "node_id": "MDU6TGFiZWw0MDkyOTE1Mw==",
      "url": "https://api.github.com/repos/facebook/react/labels/Type:%20Enhancement",
      "name": "Type: Enhancement",
      "color": "84b6eb",
      "default": false
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 3,
  "created_at": "2014-10-18T21:45:15Z",
  "updated_at": "2017-10-01T23:58:38Z",
  "closed_at": "2017-10-01T23:58:38Z",
  "author_association": "CONTRIBUTOR",
  "body": "The current state of implicit keys in React, psuedo-JSX:\n\n```\n1. <div .0><span .0.0 /></div>\n2. <div .0>[<span .0.0 />]</div> -- GOOD reconciles .0.0\n\n1. <div .0><span .0.0 /></div>\n2. <div .0>[<span .0.0 /><span .0.1 />]</div> -- GOOD reconciles .0.0\n\n1. <div .0><span .0.0 /><span .0.1 /></div>\n2. <div .0>[<span .0.0:0 />]<span .0.1 /></div> -- BAD destroys .0.0\n\n1. <div .0>[<span .0.0 />]</div>\n2. <div .0>[[<span .0.0:0 />]]</div> -- BAD destroys .0.0\n```\n\nI propose Array/Set should ignore tailing sub-array indices with value 0 and if the root is an only child then it has index 0 (this is currently the case, except it's broken for objects):\n\n```\n.0.0 => .0.0\n.0.0:0:1:0:0 => .0.0:0:1\n.0.0:0:1:0:0:1:0:0 => .0.0:0:1:0:0:1\n```\n\nThe first ReactNode in every Array now reconciles from and to any depth. If we want to improve Maps to reconcile in the same way then all previous indices should be discarded when a Map is encountered (possibly discarding the entire \"computed name so far\" even).\n\nPseudo-JSX showing how the new indices would be computed (`[...]` is discarded), all the examples at the top now reconcile correctly.\n\n```\n<div .0>\n  [\n    [\n      <span .0.0[:0:0] />\n        [\n          <span .0.0:0:1[:0] />\n            [\n              [\n                <span .0.0:0:1:1[:0:0] />\n                <span .0.0:0:1:1:0:1 />\n              ]\n            ]\n          <span .0.0:0:2 />\n        ]\n      <span .0.0:1 />\n    ]\n  <span .0.1 />\n</div>\n```\n\ncc @sebmarkbage \n",
  "closed_by": {
    "login": "gaearon",
    "id": 810438,
    "node_id": "MDQ6VXNlcjgxMDQzOA==",
    "avatar_url": "https://avatars0.githubusercontent.com/u/810438?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/gaearon",
    "html_url": "https://github.com/gaearon",
    "followers_url": "https://api.github.com/users/gaearon/followers",
    "following_url": "https://api.github.com/users/gaearon/following{/other_user}",
    "gists_url": "https://api.github.com/users/gaearon/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/gaearon/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/gaearon/subscriptions",
    "organizations_url": "https://api.github.com/users/gaearon/orgs",
    "repos_url": "https://api.github.com/users/gaearon/repos",
    "events_url": "https://api.github.com/users/gaearon/events{/privacy}",
    "received_events_url": "https://api.github.com/users/gaearon/received_events",
    "type": "User",
    "site_admin": false
  }
}

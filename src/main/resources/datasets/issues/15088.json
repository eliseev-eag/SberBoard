{
  "url": "https://api.github.com/repos/facebook/react/issues/15088",
  "repository_url": "https://api.github.com/repos/facebook/react",
  "labels_url": "https://api.github.com/repos/facebook/react/issues/15088/labels{/name}",
  "comments_url": "https://api.github.com/repos/facebook/react/issues/15088/comments",
  "events_url": "https://api.github.com/repos/facebook/react/issues/15088/events",
  "html_url": "https://github.com/facebook/react/issues/15088",
  "id": 419895148,
  "node_id": "MDU6SXNzdWU0MTk4OTUxNDg=",
  "number": 15088,
  "title": "useReducer - eagerReducer optimization discussion/questions",
  "user": {
    "login": "Andarist",
    "id": 9800850,
    "node_id": "MDQ6VXNlcjk4MDA4NTA=",
    "avatar_url": "https://avatars2.githubusercontent.com/u/9800850?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/Andarist",
    "html_url": "https://github.com/Andarist",
    "followers_url": "https://api.github.com/users/Andarist/followers",
    "following_url": "https://api.github.com/users/Andarist/following{/other_user}",
    "gists_url": "https://api.github.com/users/Andarist/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/Andarist/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/Andarist/subscriptions",
    "organizations_url": "https://api.github.com/users/Andarist/orgs",
    "repos_url": "https://api.github.com/users/Andarist/repos",
    "events_url": "https://api.github.com/users/Andarist/events{/privacy}",
    "received_events_url": "https://api.github.com/users/Andarist/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 1109410193,
      "node_id": "MDU6TGFiZWwxMTA5NDEwMTkz",
      "url": "https://api.github.com/repos/facebook/react/labels/Component:%20Hooks",
      "name": "Component: Hooks",
      "color": "c2f27b",
      "default": false
    },
    {
      "id": 40929151,
      "node_id": "MDU6TGFiZWw0MDkyOTE1MQ==",
      "url": "https://api.github.com/repos/facebook/react/labels/Type:%20Bug",
      "name": "Type: Bug",
      "color": "b60205",
      "default": false
    }
  ],
  "state": "open",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 2,
  "created_at": "2019-03-12T09:57:43Z",
  "updated_at": "2019-04-04T06:34:03Z",
  "closed_at": null,
  "author_association": "CONTRIBUTOR",
  "body": "I'd like to continue the discussion started by me under a recent blog post by Dan as encouraged by Dan ðŸ˜‰ https://github.com/gaearon/overreacted.io/commit/99bfdca459ff4094ee523c7419b58989d18bc594#r32694433\r\n\r\nJust to summarize what I've stumbled upon when experimenting with useReducer after reading that hoisted & declared in render reducers are treated differently (I've wanted to explore how they are handled by React):\r\n1. I have no idea how to reenter eagerReducer calculation after first scheduled work (& after render gets fully processed & committed). This might very well be just me not understanding how fibers work - but currently I'm confused by this. It doesn't enter this code branch because `fiber.expirationTime` is not 0 (NoWork) and the work gets scheduled right away. Any pointers regarding this? Is this valid? Might this be a bug somewhere?\r\n2. The logic around reducer bailouts is somewhat iffy for me - maybe it's just a matter of mentioning those in the documentation:\r\n- not every reducer update can bailout from rendering. If the action queue gets processed in the render phase then it's just not possible, we are already rendering after all. \r\n- action queue gets processed in the render phase for reducers declared inside render, this means that any new state computation might depend on the \"fresh\" props. This is not the case for the bailout mechanism though - it's only possible to perform a bailout when dispatching an action (so when we do not have access to the fresh props). Should this restriction be mentioned in the docs? IMHO this behaviour is inconsistent - for the greater good, so it's acceptable but I think it should be documented because it's slightly inconsistent & people might trip over this.\r\n\r\n**Note** I'm happy to provide documentation changes if needed, I'd like to discuss those points first to get a better understanding of things.",
  "closed_by": null
}

{
  "url": "https://api.github.com/repos/facebook/react/issues/6162",
  "repository_url": "https://api.github.com/repos/facebook/react",
  "labels_url": "https://api.github.com/repos/facebook/react/issues/6162/labels{/name}",
  "comments_url": "https://api.github.com/repos/facebook/react/issues/6162/comments",
  "events_url": "https://api.github.com/repos/facebook/react/issues/6162/events",
  "html_url": "https://github.com/facebook/react/issues/6162",
  "id": 137723982,
  "node_id": "MDU6SXNzdWUxMzc3MjM5ODI=",
  "number": 6162,
  "title": "[Bug?] componentWillUnmount() is overwritten, not extended, in inheritance chain",
  "user": {
    "login": "D1no",
    "id": 2397125,
    "node_id": "MDQ6VXNlcjIzOTcxMjU=",
    "avatar_url": "https://avatars0.githubusercontent.com/u/2397125?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/D1no",
    "html_url": "https://github.com/D1no",
    "followers_url": "https://api.github.com/users/D1no/followers",
    "following_url": "https://api.github.com/users/D1no/following{/other_user}",
    "gists_url": "https://api.github.com/users/D1no/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/D1no/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/D1no/subscriptions",
    "organizations_url": "https://api.github.com/users/D1no/orgs",
    "repos_url": "https://api.github.com/users/D1no/repos",
    "events_url": "https://api.github.com/users/D1no/events{/privacy}",
    "received_events_url": "https://api.github.com/users/D1no/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 3,
  "created_at": "2016-03-01T23:44:31Z",
  "updated_at": "2016-03-02T02:10:21Z",
  "closed_at": "2016-03-02T00:29:20Z",
  "author_association": "NONE",
  "body": "Hi, I happen to run into an odd issue regarding `componentWillUnmount()` which is only called by the top constructor and leaves me with an issue of how to do cleanups of extended component. I am not sure if it's a bug or if I'm just dumb.\n\nHere, the base components `componentWillUnmount()` method is only called, when the top level component does not have one. Small, 30 line, code-pen reproduction of my issue:\nhttp://codepen.io/anon/pen/grbJVq?editors=0010\n\n``` jsx\n/*\nExtending base Component\n*/\nlet ComposerFunction = function(Component) {\n  // do some stuff\n  class ComposerComponent extends Component {\n    constructor() {\n      super();\n    }\n\n    // This is not called\n    componentWillUnmount() {\n      // Do important clean up stuff!\n      console.log(\"ComposerComponent: componentWillUnmount()\");\n    }\n\n  }\n  return ComposerComponent;\n};\n\n/*\nTop-Level Component (constructor)\n*/\nclass MyComponent extends ComposerFunction(React.Component) {\n\n  // With this method defined, ComposerComponent is never called. Uncomment it, than\n  // ComposerComponent: componentWillUnmount() will be called. But never both.\n  componentWillUnmount() {\n    console.log(\"MyComponent: componentWillUnmount()\");\n  }\n\n\n  render() {\n    return(<div className=\"MyComponent\">Click to unmount MyComponent (check console for logs)</div>)\n  }\n}\n\n/*\nRender to a canvas to mount/un-mount by clicking. See logs, only one log message is shown.\n*/\nclass MyApp extends React.Component {\n  constructor() {\n    super();\n    this.state = {show: true};\n  }\n  handleShow() {\n    this.setState({show: !this.state.show})\n  }\n  render() {\n    return(<div className=\"MyApp\" onClick={this.handleShow.bind(this)}>\n      {this.state.show ? <MyComponent /> : \"Re-Mount\"}\n    </div>)\n  }\n}\n\nReact.render(<MyApp />, document.getElementById('app'));\n```\n\nConsole output on clicking (Re/Mounting)\n\n``` js\n> MyComponent: componentWillUnmount()\n// What happend to \"ComposerComponent: componentWillUnmount()\" ?\n```\n",
  "closed_by": {
    "login": "zpao",
    "id": 8445,
    "node_id": "MDQ6VXNlcjg0NDU=",
    "avatar_url": "https://avatars1.githubusercontent.com/u/8445?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/zpao",
    "html_url": "https://github.com/zpao",
    "followers_url": "https://api.github.com/users/zpao/followers",
    "following_url": "https://api.github.com/users/zpao/following{/other_user}",
    "gists_url": "https://api.github.com/users/zpao/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/zpao/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/zpao/subscriptions",
    "organizations_url": "https://api.github.com/users/zpao/orgs",
    "repos_url": "https://api.github.com/users/zpao/repos",
    "events_url": "https://api.github.com/users/zpao/events{/privacy}",
    "received_events_url": "https://api.github.com/users/zpao/received_events",
    "type": "User",
    "site_admin": false
  }
}

{
  "url": "https://api.github.com/repos/facebook/react/issues/9744",
  "repository_url": "https://api.github.com/repos/facebook/react",
  "labels_url": "https://api.github.com/repos/facebook/react/issues/9744/labels{/name}",
  "comments_url": "https://api.github.com/repos/facebook/react/issues/9744/comments",
  "events_url": "https://api.github.com/repos/facebook/react/issues/9744/events",
  "html_url": "https://github.com/facebook/react/issues/9744",
  "id": 230336700,
  "node_id": "MDU6SXNzdWUyMzAzMzY3MDA=",
  "number": 9744,
  "title": "Can react-proxy be served with a restrictive CSP policy from server without throwing error in Firefox??",
  "user": {
    "login": "OctopusGunner",
    "id": 28859178,
    "node_id": "MDQ6VXNlcjI4ODU5MTc4",
    "avatar_url": "https://avatars3.githubusercontent.com/u/28859178?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/OctopusGunner",
    "html_url": "https://github.com/OctopusGunner",
    "followers_url": "https://api.github.com/users/OctopusGunner/followers",
    "following_url": "https://api.github.com/users/OctopusGunner/following{/other_user}",
    "gists_url": "https://api.github.com/users/OctopusGunner/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/OctopusGunner/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/OctopusGunner/subscriptions",
    "organizations_url": "https://api.github.com/users/OctopusGunner/orgs",
    "repos_url": "https://api.github.com/users/OctopusGunner/repos",
    "events_url": "https://api.github.com/users/OctopusGunner/events{/privacy}",
    "received_events_url": "https://api.github.com/users/OctopusGunner/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 2,
  "created_at": "2017-05-22T09:31:21Z",
  "updated_at": "2017-05-23T11:29:22Z",
  "closed_at": "2017-05-22T11:27:33Z",
  "author_association": "NONE",
  "body": "**Do you want to request a *feature* or report a *bug*?**\r\n\r\nfeature\r\n\r\n**What is the current behavior?**\r\n\r\nFirefox throws error when running a react application and using a csp header with script-src set to 'self'. In my case the error looks like this:\r\n\r\n> Content Security Policy: The page’s settings blocked the loading of a\r\n> resource at self (“script-src http://localhost:8000”).\r\n\r\n(I set the 'self' keyword on script-src which in this error message is translated to localhost:8000)\r\n\r\nThe error message in FF links to the following row in my react bundle:\r\n\r\n    ProxyComponent = new Function('factory', 'instantiate', 'return function ' + displayName + '() {\\n         return instantiate(factory, this, arguments);\\n      }')(function () {\r\n\r\nfrom the file\r\n\r\n> react-proxy/modules/createClassProxy.js\r\n\r\nI can get rid of the error in FF by allowing unsafe-eval in my csp policy but I dont want to do that...\r\n\r\n**If the current behavior is a bug, please provide the steps to reproduce and if possible a minimal demo of the problem via https://jsfiddle.net or similar (template: https://jsfiddle.net/84v837e9/).**\r\n\r\nRun a react application in FF browser and with CSP policy for script-src set to 'self'. Check the console for errors.\r\n\r\n\r\n**What is the expected behavior?**\r\n\r\nThere is a error handling in the source code for the event that execution environment does not allow dynamic evaluation, but it still shows an error in FF\r\n\r\n`try {\r\n    // Create a proxy constructor with matching name\r\n    ProxyComponent = new Function('factory', 'instantiate', 'return function ' + displayName + '() {\\n         return instantiate(factory, this, arguments);\\n      }')(function () {\r\n      return CurrentComponent;\r\n    }, instantiate);\r\n  } catch (err) {\r\n    // Some environments may forbid dynamic evaluation\r\n    ProxyComponent = function ProxyComponent() {\r\n      return instantiate(function () {\r\n        return CurrentComponent;\r\n      }, this, arguments);\r\n    };\r\n  }`\r\n\r\n\r\n\r\n**Which versions of React, and which browser / OS are affected by this issue? Did this work in previous versions of React?**\r\n\r\n>   \"name\": \"react-proxy\",\r\n>   \"version\": \"3.0.0-alpha.1\",\r\n\r\nFirefox version 51.0.1 on Ubuntu.\r\n",
  "closed_by": {
    "login": "gaearon",
    "id": 810438,
    "node_id": "MDQ6VXNlcjgxMDQzOA==",
    "avatar_url": "https://avatars0.githubusercontent.com/u/810438?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/gaearon",
    "html_url": "https://github.com/gaearon",
    "followers_url": "https://api.github.com/users/gaearon/followers",
    "following_url": "https://api.github.com/users/gaearon/following{/other_user}",
    "gists_url": "https://api.github.com/users/gaearon/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/gaearon/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/gaearon/subscriptions",
    "organizations_url": "https://api.github.com/users/gaearon/orgs",
    "repos_url": "https://api.github.com/users/gaearon/repos",
    "events_url": "https://api.github.com/users/gaearon/events{/privacy}",
    "received_events_url": "https://api.github.com/users/gaearon/received_events",
    "type": "User",
    "site_admin": false
  }
}

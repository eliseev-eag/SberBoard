{
  "url": "https://api.github.com/repos/facebook/react/issues/15154",
  "repository_url": "https://api.github.com/repos/facebook/react",
  "labels_url": "https://api.github.com/repos/facebook/react/issues/15154/labels{/name}",
  "comments_url": "https://api.github.com/repos/facebook/react/issues/15154/comments",
  "events_url": "https://api.github.com/repos/facebook/react/issues/15154/events",
  "html_url": "https://github.com/facebook/react/issues/15154",
  "id": 422874408,
  "node_id": "MDU6SXNzdWU0MjI4NzQ0MDg=",
  "number": 15154,
  "title": "Effect memoization and immutable data structures",
  "user": {
    "login": "roman01la",
    "id": 1355501,
    "node_id": "MDQ6VXNlcjEzNTU1MDE=",
    "avatar_url": "https://avatars0.githubusercontent.com/u/1355501?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/roman01la",
    "html_url": "https://github.com/roman01la",
    "followers_url": "https://api.github.com/users/roman01la/followers",
    "following_url": "https://api.github.com/users/roman01la/following{/other_user}",
    "gists_url": "https://api.github.com/users/roman01la/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/roman01la/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/roman01la/subscriptions",
    "organizations_url": "https://api.github.com/users/roman01la/orgs",
    "repos_url": "https://api.github.com/users/roman01la/repos",
    "events_url": "https://api.github.com/users/roman01la/events{/privacy}",
    "received_events_url": "https://api.github.com/users/roman01la/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 710375792,
      "node_id": "MDU6TGFiZWw3MTAzNzU3OTI=",
      "url": "https://api.github.com/repos/facebook/react/labels/Type:%20Discussion",
      "name": "Type: Discussion",
      "color": "fef2c0",
      "default": false
    }
  ],
  "state": "open",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 16,
  "created_at": "2019-03-19T17:58:05Z",
  "updated_at": "2019-03-22T16:07:08Z",
  "closed_at": null,
  "author_association": "CONTRIBUTOR",
  "body": "Current design of `useEffect` requires dependencies to be either primitive values or references to the same object, because shallow equality check relies on `Object.is` which is an identity check for objects.\r\n\r\nThe above means that there's no way to perform structural comparison, which is needed for immutable data structures when identity check fails.\r\n\r\nTo maintain backwards compatibility a comparator function could be provided as the third argument to `useEffect`:\r\n```js\r\nuseEffect(fn, deps, depsComparator);\r\n```\r\n\r\nThe goal here is to preserve an ease of use of the API with immutable data structures in order to provide an idiomatic usage of `useEffect` in ClojureScript and other environments that rely on immutability e.g. Immutable.js\r\n\r\ncc @mhuebert @Lokeh @orestis",
  "closed_by": null
}

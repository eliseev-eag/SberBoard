{
  "url": "https://api.github.com/repos/facebook/react/issues/15065",
  "repository_url": "https://api.github.com/repos/facebook/react",
  "labels_url": "https://api.github.com/repos/facebook/react/issues/15065/labels{/name}",
  "comments_url": "https://api.github.com/repos/facebook/react/issues/15065/comments",
  "events_url": "https://api.github.com/repos/facebook/react/issues/15065/events",
  "html_url": "https://github.com/facebook/react/issues/15065",
  "id": 418804183,
  "node_id": "MDU6SXNzdWU0MTg4MDQxODM=",
  "number": 15065,
  "title": "Double-invoking the render function in StrictMode is somewhat too deterministic",
  "user": {
    "login": "dai-shi",
    "id": 490574,
    "node_id": "MDQ6VXNlcjQ5MDU3NA==",
    "avatar_url": "https://avatars1.githubusercontent.com/u/490574?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/dai-shi",
    "html_url": "https://github.com/dai-shi",
    "followers_url": "https://api.github.com/users/dai-shi/followers",
    "following_url": "https://api.github.com/users/dai-shi/following{/other_user}",
    "gists_url": "https://api.github.com/users/dai-shi/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/dai-shi/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/dai-shi/subscriptions",
    "organizations_url": "https://api.github.com/users/dai-shi/orgs",
    "repos_url": "https://api.github.com/users/dai-shi/repos",
    "events_url": "https://api.github.com/users/dai-shi/events{/privacy}",
    "received_events_url": "https://api.github.com/users/dai-shi/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 710375792,
      "node_id": "MDU6TGFiZWw3MTAzNzU3OTI=",
      "url": "https://api.github.com/repos/facebook/react/labels/Type:%20Discussion",
      "name": "Type: Discussion",
      "color": "fef2c0",
      "default": false
    }
  ],
  "state": "open",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 7,
  "created_at": "2019-03-08T14:15:26Z",
  "updated_at": "2019-04-24T13:47:31Z",
  "closed_at": null,
  "author_association": "NONE",
  "body": "<!--\r\n  Note: if the issue is about documentation or the website, please file it at:\r\n  https://github.com/reactjs/reactjs.org/issues/new\r\n-->\r\n\r\n**Do you want to request a *feature* or report a *bug*?**\r\n\r\nfeature in the development mode\r\n\r\n**What is the current behavior?**\r\n\r\nInside `<StrictMode>`, the render function is invoked twice, but always the second one is committed.\r\n\r\n**If the current behavior is a bug, please provide the steps to reproduce and if possible a minimal demo of the problem. Your bug will get fixed much faster if we can run your code and it doesn't have dependencies other than React. Paste the link to your JSFiddle (https://jsfiddle.net/Luktwrdm/) or CodeSandbox (https://codesandbox.io/s/new) example below:**\r\n\r\nhttps://codesandbox.io/s/k938koy8mv\r\nI made a tiny change in @gaearon 's code.\r\n```\r\n  // This may not work in concurrent mode.\r\n  savedCallback.current = callback;\r\n```\r\n\r\n**What is the expected behavior?**\r\n\r\nDevelopers can notice the wrong code (unintentionally mutating refs in the render function).\r\n\r\nOne idea is to occasionally (ex. `Math.random() < 0.25`) commit the first result from double-invoked render function.\r\nThe other could be to introduce `<StrictStrictMode>` which is to triple-invoke the render function and commit the second one.\r\n\r\n**Which versions of React, and which browser / OS are affected by this issue? Did this work in previous versions of React?**\r\n\r\nReact 16.8",
  "closed_by": null
}

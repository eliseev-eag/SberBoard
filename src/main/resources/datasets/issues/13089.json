{
  "url": "https://api.github.com/repos/facebook/react/issues/13089",
  "repository_url": "https://api.github.com/repos/facebook/react",
  "labels_url": "https://api.github.com/repos/facebook/react/issues/13089/labels{/name}",
  "comments_url": "https://api.github.com/repos/facebook/react/issues/13089/comments",
  "events_url": "https://api.github.com/repos/facebook/react/issues/13089/events",
  "html_url": "https://github.com/facebook/react/issues/13089",
  "id": 334653250,
  "node_id": "MDU6SXNzdWUzMzQ2NTMyNTA=",
  "number": 13089,
  "title": "React.Timeout inside a hidden element",
  "user": {
    "login": "pomber",
    "id": 1911623,
    "node_id": "MDQ6VXNlcjE5MTE2MjM=",
    "avatar_url": "https://avatars1.githubusercontent.com/u/1911623?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/pomber",
    "html_url": "https://github.com/pomber",
    "followers_url": "https://api.github.com/users/pomber/followers",
    "following_url": "https://api.github.com/users/pomber/following{/other_user}",
    "gists_url": "https://api.github.com/users/pomber/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/pomber/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/pomber/subscriptions",
    "organizations_url": "https://api.github.com/users/pomber/orgs",
    "repos_url": "https://api.github.com/users/pomber/repos",
    "events_url": "https://api.github.com/users/pomber/events{/privacy}",
    "received_events_url": "https://api.github.com/users/pomber/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 710722093,
      "node_id": "MDU6TGFiZWw3MTA3MjIwOTM=",
      "url": "https://api.github.com/repos/facebook/react/labels/Type:%20Needs%20Investigation",
      "name": "Type: Needs Investigation",
      "color": "fbca04",
      "default": false
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 5,
  "created_at": "2018-06-21T20:52:31Z",
  "updated_at": "2018-08-16T23:30:32Z",
  "closed_at": "2018-08-16T23:30:31Z",
  "author_association": "CONTRIBUTOR",
  "body": "**Do you want to request a *feature* or report a *bug*?**\r\nBug  \r\n\r\n**What is the current behavior?**\r\nWhen using `React.Timeout` inside a `hidden` element, React keeps rendering children every tick until the promise is resolved.\r\n\r\n**Minimal demo**\r\nhttps://romantic-joliot-14841e.netlify.com/ (look at the console)   \r\nRepo: https://github.com/pomber/suspense-hidden\r\n\r\n**What is the expected behavior?**\r\nRender should be called no more than 3 times (when I change `hidden={true}` to `hidden={false}` it works as expected)\r\n\r\n**Which versions of React, and which browser / OS are affected by this issue? Did this work in previous versions of React?**\r\nTested in Chrome Version 67.0.3396.87 (Official Build) (64-bit)  \r\nReact built from commit 36546b5 (June 1) with flag `enableSuspense = true`\r\n\r\n\r\n```jsx\r\nlet done = false;\r\nlet promise = null;\r\n\r\nconst waitFor = text => {\r\n  console.log(\"waitFor\");\r\n  if (done) return text;\r\n  if (!promise) {\r\n    promise = new Promise(resolve =>\r\n      setTimeout(() => {\r\n        done = true;\r\n        resolve();\r\n      }, 5000)\r\n    );\r\n  }\r\n  throw promise;\r\n};\r\n\r\nconst AsyncText = ({ text }) => <h1>{waitFor(text)}</h1>;\r\n\r\nconst App = () => (\r\n  <div hidden={true}>\r\n    <React.Timeout ms={0}>\r\n      {didTimeout =>\r\n        didTimeout ? <h1>Loading...</h1> : <AsyncText text=\"foo\" />\r\n      }\r\n    </React.Timeout>\r\n  </div>\r\n);\r\n\r\nReactDOM.render(\r\n  <React.unstable_AsyncMode>\r\n    <App />\r\n  </React.unstable_AsyncMode>,\r\n  document.getElementById(\"root\")\r\n);\r\n```\r\n",
  "closed_by": {
    "login": "gaearon",
    "id": 810438,
    "node_id": "MDQ6VXNlcjgxMDQzOA==",
    "avatar_url": "https://avatars0.githubusercontent.com/u/810438?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/gaearon",
    "html_url": "https://github.com/gaearon",
    "followers_url": "https://api.github.com/users/gaearon/followers",
    "following_url": "https://api.github.com/users/gaearon/following{/other_user}",
    "gists_url": "https://api.github.com/users/gaearon/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/gaearon/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/gaearon/subscriptions",
    "organizations_url": "https://api.github.com/users/gaearon/orgs",
    "repos_url": "https://api.github.com/users/gaearon/repos",
    "events_url": "https://api.github.com/users/gaearon/events{/privacy}",
    "received_events_url": "https://api.github.com/users/gaearon/received_events",
    "type": "User",
    "site_admin": false
  }
}

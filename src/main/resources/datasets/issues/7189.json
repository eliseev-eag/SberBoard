{
  "url": "https://api.github.com/repos/facebook/react/issues/7189",
  "repository_url": "https://api.github.com/repos/facebook/react",
  "labels_url": "https://api.github.com/repos/facebook/react/issues/7189/labels{/name}",
  "comments_url": "https://api.github.com/repos/facebook/react/issues/7189/comments",
  "events_url": "https://api.github.com/repos/facebook/react/issues/7189/events",
  "html_url": "https://github.com/facebook/react/pull/7189",
  "id": 163910225,
  "node_id": "MDExOlB1bGxSZXF1ZXN0NzYzMTYzODM=",
  "number": 7189,
  "title": "Don’t bundle DebugTool in production",
  "user": {
    "login": "gaearon",
    "id": 810438,
    "node_id": "MDQ6VXNlcjgxMDQzOA==",
    "avatar_url": "https://avatars0.githubusercontent.com/u/810438?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/gaearon",
    "html_url": "https://github.com/gaearon",
    "followers_url": "https://api.github.com/users/gaearon/followers",
    "following_url": "https://api.github.com/users/gaearon/following{/other_user}",
    "gists_url": "https://api.github.com/users/gaearon/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/gaearon/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/gaearon/subscriptions",
    "organizations_url": "https://api.github.com/users/gaearon/orgs",
    "repos_url": "https://api.github.com/users/gaearon/repos",
    "events_url": "https://api.github.com/users/gaearon/events{/privacy}",
    "received_events_url": "https://api.github.com/users/gaearon/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 196858374,
      "node_id": "MDU6TGFiZWwxOTY4NTgzNzQ=",
      "url": "https://api.github.com/repos/facebook/react/labels/CLA%20Signed",
      "name": "CLA Signed",
      "color": "e7e7e7",
      "default": false
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": {
    "url": "https://api.github.com/repos/facebook/react/milestones/30",
    "html_url": "https://github.com/facebook/react/milestone/30",
    "labels_url": "https://api.github.com/repos/facebook/react/milestones/30/labels",
    "id": 1871306,
    "node_id": "MDk6TWlsZXN0b25lMTg3MTMwNg==",
    "number": 30,
    "title": "15.2.1",
    "description": "",
    "creator": {
      "login": "zpao",
      "id": 8445,
      "node_id": "MDQ6VXNlcjg0NDU=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/8445?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/zpao",
      "html_url": "https://github.com/zpao",
      "followers_url": "https://api.github.com/users/zpao/followers",
      "following_url": "https://api.github.com/users/zpao/following{/other_user}",
      "gists_url": "https://api.github.com/users/zpao/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/zpao/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/zpao/subscriptions",
      "organizations_url": "https://api.github.com/users/zpao/orgs",
      "repos_url": "https://api.github.com/users/zpao/repos",
      "events_url": "https://api.github.com/users/zpao/events{/privacy}",
      "received_events_url": "https://api.github.com/users/zpao/received_events",
      "type": "User",
      "site_admin": false
    },
    "open_issues": 0,
    "closed_issues": 32,
    "state": "closed",
    "created_at": "2016-07-08T00:06:15Z",
    "updated_at": "2016-07-13T19:56:10Z",
    "due_on": null,
    "closed_at": "2016-07-08T22:40:09Z"
  },
  "comments": 0,
  "created_at": "2016-07-05T18:02:24Z",
  "updated_at": "2016-07-08T18:51:26Z",
  "closed_at": "2016-07-05T18:41:45Z",
  "author_association": "MEMBER",
  "pull_request": {
    "url": "https://api.github.com/repos/facebook/react/pulls/7189",
    "html_url": "https://github.com/facebook/react/pull/7189",
    "diff_url": "https://github.com/facebook/react/pull/7189.diff",
    "patch_url": "https://github.com/facebook/react/pull/7189.patch"
  },
  "body": "Most of this diff is indentation.\n\nI am removing all `__DEV__` checks from `ReactDebugTool` and `ReactDOMDebugTool` code. Instead, I am conditionally requiring them—**in production, `ReactInstrumentation.debugTool` and `ReactDOMInstrumentation.debugTool` would now be `null` after this change.**\n\nWhy I am doing this:\n1. Debug tools are not currently used in production at all. All calls to `.debugTool.*` are guarded by `__DEV__`.\n2. When we add a `__PROFILE__` build, we can change the same condition to include `__PROFILE__`. There’s nothing here that would make it harder in the future.\n3. We are currently bundling unnecessary noops with method names and strings in production, and as we add more events, they will keep growing:\n\n<img width=\"1280\" alt=\"screen shot 2016-07-05 at 18 40 10\" src=\"https://cloud.githubusercontent.com/assets/810438/16593990/faaa169e-42df-11e6-93c3-d8b51494757d.png\">\n\nIn the future, we _might_ allow attaching devtools in production. Let’s do it when we actually have a use case for it. Right now it’s weird because we have these constraints that don’t actually end up getting used. This makes debug tool architecture more confusing to whoever who will be adding the `__PROFILE__` build.\n\nEven when we allow this, it is likely that the actual DebugTool would be external code. There is no need for it to live inside React. The default “broadcasting” DebugTools are good for development but I don’t see why they are useful in prod.\n\nLet’s just keep it simple for now and let the code reflect our real usage. Debug tools are only called in development environment now.\n\nThis reduces build size a bit:\n\n```\n     =      = build/react-dom-server.js                                        \n     =      = build/react-dom-server.min.js                                    \n     =      = build/react-dom.js                                               \n     =      = build/react-dom.min.js                                           \n  -471     -4 build/react-with-addons.js                                       \n -2732   -620 build/react-with-addons.min.js                                   \n  -471     -9 build/react.js                                                   \n -2733   -583 build/react.min.js \n```\n\nIf we are concerned about stray `.debugTool.*` calls that would blow up in production, we can lint against using `.debugTool.` outside a `__DEV__` block. We don’t add new calls very often though so I’m not sure if it’s worth it.\n",
  "closed_by": {
    "login": "gaearon",
    "id": 810438,
    "node_id": "MDQ6VXNlcjgxMDQzOA==",
    "avatar_url": "https://avatars0.githubusercontent.com/u/810438?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/gaearon",
    "html_url": "https://github.com/gaearon",
    "followers_url": "https://api.github.com/users/gaearon/followers",
    "following_url": "https://api.github.com/users/gaearon/following{/other_user}",
    "gists_url": "https://api.github.com/users/gaearon/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/gaearon/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/gaearon/subscriptions",
    "organizations_url": "https://api.github.com/users/gaearon/orgs",
    "repos_url": "https://api.github.com/users/gaearon/repos",
    "events_url": "https://api.github.com/users/gaearon/events{/privacy}",
    "received_events_url": "https://api.github.com/users/gaearon/received_events",
    "type": "User",
    "site_admin": false
  }
}

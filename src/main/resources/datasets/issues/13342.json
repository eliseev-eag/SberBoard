{
  "url": "https://api.github.com/repos/facebook/react/issues/13342",
  "repository_url": "https://api.github.com/repos/facebook/react",
  "labels_url": "https://api.github.com/repos/facebook/react/issues/13342/labels{/name}",
  "comments_url": "https://api.github.com/repos/facebook/react/issues/13342/comments",
  "events_url": "https://api.github.com/repos/facebook/react/issues/13342/events",
  "html_url": "https://github.com/facebook/react/issues/13342",
  "id": 348420896,
  "node_id": "MDU6SXNzdWUzNDg0MjA4OTY=",
  "number": 13342,
  "title": "RFC: Omit end tags when possible in ReactDOMServerRenderer",
  "user": {
    "login": "tvler",
    "id": 4934193,
    "node_id": "MDQ6VXNlcjQ5MzQxOTM=",
    "avatar_url": "https://avatars0.githubusercontent.com/u/4934193?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/tvler",
    "html_url": "https://github.com/tvler",
    "followers_url": "https://api.github.com/users/tvler/followers",
    "following_url": "https://api.github.com/users/tvler/following{/other_user}",
    "gists_url": "https://api.github.com/users/tvler/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/tvler/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/tvler/subscriptions",
    "organizations_url": "https://api.github.com/users/tvler/orgs",
    "repos_url": "https://api.github.com/users/tvler/repos",
    "events_url": "https://api.github.com/users/tvler/events{/privacy}",
    "received_events_url": "https://api.github.com/users/tvler/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 710332294,
      "node_id": "MDU6TGFiZWw3MTAzMzIyOTQ=",
      "url": "https://api.github.com/repos/facebook/react/labels/Component:%20Server%20Rendering",
      "name": "Component: Server Rendering",
      "color": "d4c5f9",
      "default": false
    },
    {
      "id": 710375792,
      "node_id": "MDU6TGFiZWw3MTAzNzU3OTI=",
      "url": "https://api.github.com/repos/facebook/react/labels/Type:%20Discussion",
      "name": "Type: Discussion",
      "color": "fef2c0",
      "default": false
    }
  ],
  "state": "open",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 4,
  "created_at": "2018-08-07T17:41:53Z",
  "updated_at": "2018-10-05T20:56:08Z",
  "closed_at": null,
  "author_association": "CONTRIBUTOR",
  "body": "# Background\r\n\r\nThere are a lot of instances defined in the HTML spec where end tags can be omitted while still maintaining valid markup.\r\n\r\nSome examples:\r\n\r\n> An li element’s end tag may be omitted if the li element is immediately followed by another li element or if there is no more content in the parent element.\r\n\r\n> A p element’s end tag may be omitted if the p element is immediately followed by an address, article, aside, blockquote, details, div, dl, fieldset, figcaption, figure, footer, form, h1, h2, h3, h4, h5, h6, header, hr, main, nav, ol, p, pre, section, table, or ul element, or if there is no more content in the parent element and the parent element is an HTML element that is not an a, audio, del, ins, map, noscript, or video element, or an autonomous custom element.\r\n\r\nYou can see all of them over at https://www.w3.org/TR/html5/syntax.html#optional-tags\r\n\r\nUtilizing these rules, I think it may be possible to reduce the amount of html needed to be initially downloaded by the user for serverside rendering.\r\n\r\nDepending on what's being rendered, there could be a significant decrease in html size. Here's an example I pulled from the W3C of a table element utilizing these rules. The difference is 464 bytes compared to 629 – about a **26% decrease** in size.\r\n\r\n```html\r\n<table>\r\n<caption>37547 TEE Electric Powered Rail Car Train Functions (Abbreviated)\r\n<colgroup><col><col><col>\r\n<thead>\r\n<tr>\r\n  <th>Function\r\n  <th>Control Unit\r\n  <th>Central Station\r\n<tbody>\r\n<tr>\r\n  <td>Headlights\r\n  <td>✔\r\n  <td>✔\r\n<tr>\r\n  <td>Interior Lights\r\n  <td>✔\r\n  <td>✔\r\n<tr>\r\n  <td>Electric locomotive operating sounds\r\n  <td>✔\r\n  <td>✔\r\n<tr>\r\n  <td>Engineer’s cab lighting\r\n  <td>\r\n  <td>✔\r\n<tr>\r\n  <td>Station Announcements - Swiss\r\n  <td>\r\n  <td>✔\r\n</table>\r\n```\r\n\r\n# Caveats\r\n\r\n- Even though these rules are in the spec, they still feel like quirks to me. There probably are some browser-to-browser differences in how these are handled.\r\n- Should this even be handled by React? I could see a babel plugin or something like that being a good fit for an optimization like this too.\r\n\r\n# Possible roadmap\r\n\r\n- Research what end tags would be stable to omit (https://www.w3.org/TR/html5/syntax.html#optional-tags)\r\n- Roll out this optimization for a subset of tags\r\n- Gauge real-world load time improvements and continue adding omission cases if everything is looking good",
  "closed_by": null
}

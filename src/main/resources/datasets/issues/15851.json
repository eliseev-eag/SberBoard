{
  "url": "https://api.github.com/repos/facebook/react/issues/15851",
  "repository_url": "https://api.github.com/repos/facebook/react",
  "labels_url": "https://api.github.com/repos/facebook/react/issues/15851/labels{/name}",
  "comments_url": "https://api.github.com/repos/facebook/react/issues/15851/comments",
  "events_url": "https://api.github.com/repos/facebook/react/issues/15851/events",
  "html_url": "https://github.com/facebook/react/issues/15851",
  "id": 454150729,
  "node_id": "MDU6SXNzdWU0NTQxNTA3Mjk=",
  "number": 15851,
  "title": "Memory leak using withRouter ",
  "user": {
    "login": "IgorShpyrko",
    "id": 35155953,
    "node_id": "MDQ6VXNlcjM1MTU1OTUz",
    "avatar_url": "https://avatars3.githubusercontent.com/u/35155953?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/IgorShpyrko",
    "html_url": "https://github.com/IgorShpyrko",
    "followers_url": "https://api.github.com/users/IgorShpyrko/followers",
    "following_url": "https://api.github.com/users/IgorShpyrko/following{/other_user}",
    "gists_url": "https://api.github.com/users/IgorShpyrko/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/IgorShpyrko/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/IgorShpyrko/subscriptions",
    "organizations_url": "https://api.github.com/users/IgorShpyrko/orgs",
    "repos_url": "https://api.github.com/users/IgorShpyrko/repos",
    "events_url": "https://api.github.com/users/IgorShpyrko/events{/privacy}",
    "received_events_url": "https://api.github.com/users/IgorShpyrko/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 1,
  "created_at": "2019-06-10T12:40:46Z",
  "updated_at": "2019-06-11T07:08:44Z",
  "closed_at": "2019-06-10T17:52:13Z",
  "author_association": "NONE",
  "body": "### Memory leak using withRouter.\r\n\r\n**Do you want to request a *feature* or report a *bug*?**\r\nLooks like a bug. Not sure.\r\n\r\n**What is the current behavior?**\r\nWhen using native events working on modal close everything is ok. When adding event with `window.addEventListener` for `keydown` event every second call is twice longer then previous. EventListener is deleted on `unmount`.\r\n\r\n**If the current behavior is a bug, please provide the steps to reproduce and if possible a minimal demo of the problem. Your bug will get fixed much faster if we can run your code and it doesn't have dependencies other than React. Paste the link to your JSFiddle (https://jsfiddle.net/Luktwrdm/) or CodeSandbox (https://codesandbox.io/s/new) example below:**\r\n\r\n[https://codesandbox.io/s/fragrant-wind-oywme](https://codesandbox.io/s/fragrant-wind-oywme)\r\nproblem is seen only in full-screen mode.\r\n\r\nwhen going on private route mock modal is active. To escape I need to press `Esc`. Now it shows `console.time()`. Every next `keypress` load time increments till the page stops responding.\r\n\r\nOn the other hand - when we click close btn everything is fine. Close function is the same from props. Clicking it doesn`t cause bugs.\r\n\r\nGeneral reproduce: Go to link [https://codesandbox.io/s/fragrant-wind-oywme](https://codesandbox.io/s/fragrant-wind-oywme). Switch to full-screen. Open console. Click on `private` link. Press `Esc` button several times.\r\n\r\n**What is the expected behavior?**\r\nprevent page response time growing.\r\n\r\n**Which versions of React, and which browser / OS are affected by this issue? Did this work in previous versions of React?**\r\nUsing: React 16.8.6 Hooks, ReactDOM 16.8.6, React-Router 5.0.1, React-Router-DOM 5.0.1.\r\n\r\nBrowsers: Mozilla FireFox Quantum 67.0, Google Chrome 74.0, Chromium 74.0\r\n",
  "closed_by": {
    "login": "aweary",
    "id": 6886061,
    "node_id": "MDQ6VXNlcjY4ODYwNjE=",
    "avatar_url": "https://avatars2.githubusercontent.com/u/6886061?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/aweary",
    "html_url": "https://github.com/aweary",
    "followers_url": "https://api.github.com/users/aweary/followers",
    "following_url": "https://api.github.com/users/aweary/following{/other_user}",
    "gists_url": "https://api.github.com/users/aweary/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/aweary/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/aweary/subscriptions",
    "organizations_url": "https://api.github.com/users/aweary/orgs",
    "repos_url": "https://api.github.com/users/aweary/repos",
    "events_url": "https://api.github.com/users/aweary/events{/privacy}",
    "received_events_url": "https://api.github.com/users/aweary/received_events",
    "type": "User",
    "site_admin": false
  }
}

{
  "url": "https://api.github.com/repos/facebook/react/issues/8117",
  "repository_url": "https://api.github.com/repos/facebook/react",
  "labels_url": "https://api.github.com/repos/facebook/react/issues/8117/labels{/name}",
  "comments_url": "https://api.github.com/repos/facebook/react/issues/8117/comments",
  "events_url": "https://api.github.com/repos/facebook/react/issues/8117/events",
  "html_url": "https://github.com/facebook/react/pull/8117",
  "id": 185523197,
  "node_id": "MDExOlB1bGxSZXF1ZXN0OTEwOTgwNTA=",
  "number": 8117,
  "title": "Attach event listeners at the root of the tree instead of document",
  "user": {
    "login": "vjeux",
    "id": 197597,
    "node_id": "MDQ6VXNlcjE5NzU5Nw==",
    "avatar_url": "https://avatars0.githubusercontent.com/u/197597?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/vjeux",
    "html_url": "https://github.com/vjeux",
    "followers_url": "https://api.github.com/users/vjeux/followers",
    "following_url": "https://api.github.com/users/vjeux/following{/other_user}",
    "gists_url": "https://api.github.com/users/vjeux/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/vjeux/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/vjeux/subscriptions",
    "organizations_url": "https://api.github.com/users/vjeux/orgs",
    "repos_url": "https://api.github.com/users/vjeux/repos",
    "events_url": "https://api.github.com/users/vjeux/events{/privacy}",
    "received_events_url": "https://api.github.com/users/vjeux/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 196858374,
      "node_id": "MDU6TGFiZWwxOTY4NTgzNzQ=",
      "url": "https://api.github.com/repos/facebook/react/labels/CLA%20Signed",
      "name": "CLA Signed",
      "color": "e7e7e7",
      "default": false
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": {
    "login": "sebmarkbage",
    "id": 63648,
    "node_id": "MDQ6VXNlcjYzNjQ4",
    "avatar_url": "https://avatars2.githubusercontent.com/u/63648?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/sebmarkbage",
    "html_url": "https://github.com/sebmarkbage",
    "followers_url": "https://api.github.com/users/sebmarkbage/followers",
    "following_url": "https://api.github.com/users/sebmarkbage/following{/other_user}",
    "gists_url": "https://api.github.com/users/sebmarkbage/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/sebmarkbage/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/sebmarkbage/subscriptions",
    "organizations_url": "https://api.github.com/users/sebmarkbage/orgs",
    "repos_url": "https://api.github.com/users/sebmarkbage/repos",
    "events_url": "https://api.github.com/users/sebmarkbage/events{/privacy}",
    "received_events_url": "https://api.github.com/users/sebmarkbage/received_events",
    "type": "User",
    "site_admin": false
  },
  "assignees": [
    {
      "login": "sebmarkbage",
      "id": 63648,
      "node_id": "MDQ6VXNlcjYzNjQ4",
      "avatar_url": "https://avatars2.githubusercontent.com/u/63648?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sebmarkbage",
      "html_url": "https://github.com/sebmarkbage",
      "followers_url": "https://api.github.com/users/sebmarkbage/followers",
      "following_url": "https://api.github.com/users/sebmarkbage/following{/other_user}",
      "gists_url": "https://api.github.com/users/sebmarkbage/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sebmarkbage/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sebmarkbage/subscriptions",
      "organizations_url": "https://api.github.com/users/sebmarkbage/orgs",
      "repos_url": "https://api.github.com/users/sebmarkbage/repos",
      "events_url": "https://api.github.com/users/sebmarkbage/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sebmarkbage/received_events",
      "type": "User",
      "site_admin": false
    }
  ],
  "milestone": null,
  "comments": 31,
  "created_at": "2016-10-26T22:06:14Z",
  "updated_at": "2017-11-21T14:18:32Z",
  "closed_at": "2017-11-21T14:18:32Z",
  "author_association": "CONTRIBUTOR",
  "pull_request": {
    "url": "https://api.github.com/repos/facebook/react/pulls/8117",
    "html_url": "https://github.com/facebook/react/pull/8117",
    "diff_url": "https://github.com/facebook/react/pull/8117.diff",
    "patch_url": "https://github.com/facebook/react/pull/8117.patch"
  },
  "body": "Context: we are investigating using React in order to build both Atom core components and Atom plugins. Work have been done last year to make sure that multiple React instances in the same app and this is working well. The only remaining issue is the fact that e.stopPropagation doesn't work as intended when there's two React trees that are nested. The reason is that both event listeners are added to the root of the tree and therefore do not cancel each others. The suggested solution is to attach event listeners at the root of the React tree.\n\nTo understand how this solves the problem, let's assume that we have OuterComponent which is running React version A and InnerComponent that is running version 2. The inner component attaches the event listener at the top of the inner tree using bubble phase and the outer component at the root of the outer component.\n\nWhen there's a click event on the innerComponent, the inner version of React will be notified first because it's deeper in the tree, which will dispatch the event through the innerComponent hierarchy and eventually something will call React e.stopPropagation(), which will call the DOM e.stopPropagation(), so that the outer version of React will never be notified.\n\nTest Plan:\n- Have the changes of this revision\n- `yarn build` to generate react.js and react-dom.js\n- Copy react.js and react-dom.js into react2.js and react-dom2.js\n- Change the global assignation of React and ReactDOM inside of *2.js to React2 and ReactDOM2\n- Build a test case with two nested components and the inner one calling e.stopPropagation\n- http://fooo.fr/~vjeux/fb/vjeux-test/test-event-boundary.html\n- Make sure it doesn't trigger the outer one.\n- Revert the changes and make sure that clicking on the inner one triggers both events to fire\n\nImportant Note:\nI don't fully understand the implication of this changes around performance and potential side-effects that could happen. I'm going to spend time right now investigating this. Would love ideas on what to check :)\n",
  "closed_by": {
    "login": "gaearon",
    "id": 810438,
    "node_id": "MDQ6VXNlcjgxMDQzOA==",
    "avatar_url": "https://avatars0.githubusercontent.com/u/810438?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/gaearon",
    "html_url": "https://github.com/gaearon",
    "followers_url": "https://api.github.com/users/gaearon/followers",
    "following_url": "https://api.github.com/users/gaearon/following{/other_user}",
    "gists_url": "https://api.github.com/users/gaearon/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/gaearon/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/gaearon/subscriptions",
    "organizations_url": "https://api.github.com/users/gaearon/orgs",
    "repos_url": "https://api.github.com/users/gaearon/repos",
    "events_url": "https://api.github.com/users/gaearon/events{/privacy}",
    "received_events_url": "https://api.github.com/users/gaearon/received_events",
    "type": "User",
    "site_admin": false
  }
}

{
  "url": "https://api.github.com/repos/facebook/react/issues/13690",
  "repository_url": "https://api.github.com/repos/facebook/react",
  "labels_url": "https://api.github.com/repos/facebook/react/issues/13690/labels{/name}",
  "comments_url": "https://api.github.com/repos/facebook/react/issues/13690/comments",
  "events_url": "https://api.github.com/repos/facebook/react/issues/13690/events",
  "html_url": "https://github.com/facebook/react/issues/13690",
  "id": 361835663,
  "node_id": "MDU6SXNzdWUzNjE4MzU2NjM=",
  "number": 13690,
  "title": "unmountComponentAtNode works async ?",
  "user": {
    "login": "qhxin",
    "id": 8831920,
    "node_id": "MDQ6VXNlcjg4MzE5MjA=",
    "avatar_url": "https://avatars1.githubusercontent.com/u/8831920?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/qhxin",
    "html_url": "https://github.com/qhxin",
    "followers_url": "https://api.github.com/users/qhxin/followers",
    "following_url": "https://api.github.com/users/qhxin/following{/other_user}",
    "gists_url": "https://api.github.com/users/qhxin/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/qhxin/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/qhxin/subscriptions",
    "organizations_url": "https://api.github.com/users/qhxin/orgs",
    "repos_url": "https://api.github.com/users/qhxin/repos",
    "events_url": "https://api.github.com/users/qhxin/events{/privacy}",
    "received_events_url": "https://api.github.com/users/qhxin/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 620368407,
      "node_id": "MDU6TGFiZWw2MjAzNjg0MDc=",
      "url": "https://api.github.com/repos/facebook/react/labels/Resolution:%20Needs%20More%20Information",
      "name": "Resolution: Needs More Information",
      "color": "fffde7",
      "default": false
    }
  ],
  "state": "open",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 10,
  "created_at": "2018-09-19T16:46:54Z",
  "updated_at": "2019-07-10T01:59:41Z",
  "closed_at": null,
  "author_association": "NONE",
  "body": "<!--\r\n  Note: if the issue is about documentation or the website, please file it at:\r\n  https://github.com/reactjs/reactjs.org/issues/new\r\n-->\r\n\r\n**Do you want to request a *feature* or report a *bug*?**\r\n\r\nbug\r\n\r\n**What is the current behavior?**\r\n\r\ni tried to use `ReactDOM.unmountComponentAtNode` and `ReactDOM.render` to manage my multi roots. i found that if i use them in sync code, i get an error just like this when i change route pages:\r\n```\r\nWarning: unmountComponentAtNode(): The node you're attempting to unmount was rendered by React and is not a top-level container. Instead, have the parent component update its state and rerender in order to remove this component.\r\n```\r\n\r\n```\r\nWarning: render(...): Replacing React-rendered children with a new root component. If you intended to update the children of this node, you should instead have the existing children update their state and render the new components instead of calling ReactDOM.render.\r\n```\r\n\r\ni use browserHistory to change route.\r\nmy code is written in componentDidMount method of a root React component:\r\n\r\nPage1.js\r\n```\r\n  componentDidMount() {\r\n    const a = document.getElementById('root2');\r\n    ReactDOM.unmountComponentAtNode(a);\r\n    ReactDOM.render(\r\n      <A />,\r\n      a\r\n    );\r\n    ReactDOM.render(\r\n      <B />,\r\n      document.getElementById('root3')\r\n    );\r\n  }\r\n```\r\n\r\nPage2.js\r\n```\r\n  componentDidMount() {\r\n    const a = document.getElementById('root2');\r\n    ReactDOM.unmountComponentAtNode(a);\r\n    ReactDOM.render(\r\n      <C />,\r\n      a\r\n    );\r\n    ReactDOM.render(\r\n      <B />,\r\n      document.getElementById('root3')\r\n    );\r\n  }\r\n```\r\n\r\nAnd then, if i use `setTimeout` to wrap `ReactDOM.render` after `ReactDOM.unmountComponentAtNode(a);`, the result can be success.\r\n\r\n**What is the expected behavior?**\r\n\r\n**Which versions of React, and which browser / OS are affected by this issue? Did this work in previous versions of React?**\r\n\r\nreact 16.5.2\r\nreact-dom 16.5.2",
  "closed_by": null
}

{
  "url": "https://api.github.com/repos/facebook/react/issues/16106",
  "repository_url": "https://api.github.com/repos/facebook/react",
  "labels_url": "https://api.github.com/repos/facebook/react/issues/16106/labels{/name}",
  "comments_url": "https://api.github.com/repos/facebook/react/issues/16106/comments",
  "events_url": "https://api.github.com/repos/facebook/react/issues/16106/events",
  "html_url": "https://github.com/facebook/react/issues/16106",
  "id": 466580338,
  "node_id": "MDU6SXNzdWU0NjY1ODAzMzg=",
  "number": 16106,
  "title": "Airbnb sees ~1-2s TTI regression going from React 16.2 -> 16.5",
  "user": {
    "login": "etripier",
    "id": 7219423,
    "node_id": "MDQ6VXNlcjcyMTk0MjM=",
    "avatar_url": "https://avatars1.githubusercontent.com/u/7219423?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/etripier",
    "html_url": "https://github.com/etripier",
    "followers_url": "https://api.github.com/users/etripier/followers",
    "following_url": "https://api.github.com/users/etripier/following{/other_user}",
    "gists_url": "https://api.github.com/users/etripier/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/etripier/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/etripier/subscriptions",
    "organizations_url": "https://api.github.com/users/etripier/orgs",
    "repos_url": "https://api.github.com/users/etripier/repos",
    "events_url": "https://api.github.com/users/etripier/events{/privacy}",
    "received_events_url": "https://api.github.com/users/etripier/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 5,
  "created_at": "2019-07-10T23:49:23Z",
  "updated_at": "2019-07-19T00:48:05Z",
  "closed_at": "2019-07-19T00:48:05Z",
  "author_association": "NONE",
  "body": "**Do you want to request a *feature* or report a *bug*?**\r\nBug.\r\n\r\n**What is the current behavior?**\r\nWe have one of the larger production React apps and recently we upgraded our version of React from 16.2.0 to 16.8.6. Immediately after the upgrade, with no other changes except bumping our `react` and `react-dom` packages, we saw a 1-2s TTI increase on many of our pages for users browsing with Chrome and Firefox (specifically, not Safari). This represents a ~15-50% increase in TTI for a few of our pages.\r\n\r\nIt's difficult to tell exactly what the issue is given the size and complexity of our app. We noticed that React spends a lot of time instantiating `FiberNode` classes, but haven't really found anything that stands out. We also noticed the TTI increase going from 16.2 to 16.5. 16.3 does not increase our TTI.\r\n\r\nFor some additional context: The TTI metric we use is a custom metric, defined per page. The default definition is wait until mount of the root container, fire a 0ms `setTimeout`, and mark when that resolves. Some pages wait until a certain API response arrives or an async component mounts, then fire a 0ms `setTimeout` and mark when that resolves. \r\n\r\nWe'll keep updating this thread as we collect more information, but wanted to see if anyone had run into a similar issue.\r\n\r\n**If the current behavior is a bug, please provide the steps to reproduce and if possible a minimal demo of the problem. Your bug will get fixed much faster if we can run your code and it doesn't have dependencies other than React. Paste the link to your JSFiddle (https://jsfiddle.net/Luktwrdm/) or CodeSandbox (https://codesandbox.io/s/new) example below:**\r\nWe can't reproduce this issue outside of the context of our app for now, and we don't want to copy/paste our source code here.\r\n\r\n**What is the expected behavior?**\r\nWe experience no regression in performance on React 16.8.\r\n\r\n**Which versions of React, and which browser / OS are affected by this issue? Did this work in previous versions of React?**\r\nThis issue appears on React >=16.5 (potentially 16.4, but we haven't tried that yet).",
  "closed_by": {
    "login": "etripier",
    "id": 7219423,
    "node_id": "MDQ6VXNlcjcyMTk0MjM=",
    "avatar_url": "https://avatars1.githubusercontent.com/u/7219423?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/etripier",
    "html_url": "https://github.com/etripier",
    "followers_url": "https://api.github.com/users/etripier/followers",
    "following_url": "https://api.github.com/users/etripier/following{/other_user}",
    "gists_url": "https://api.github.com/users/etripier/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/etripier/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/etripier/subscriptions",
    "organizations_url": "https://api.github.com/users/etripier/orgs",
    "repos_url": "https://api.github.com/users/etripier/repos",
    "events_url": "https://api.github.com/users/etripier/events{/privacy}",
    "received_events_url": "https://api.github.com/users/etripier/received_events",
    "type": "User",
    "site_admin": false
  }
}

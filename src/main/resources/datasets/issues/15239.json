{
  "url": "https://api.github.com/repos/facebook/react/issues/15239",
  "repository_url": "https://api.github.com/repos/facebook/react",
  "labels_url": "https://api.github.com/repos/facebook/react/issues/15239/labels{/name}",
  "comments_url": "https://api.github.com/repos/facebook/react/issues/15239/comments",
  "events_url": "https://api.github.com/repos/facebook/react/issues/15239/events",
  "html_url": "https://github.com/facebook/react/issues/15239",
  "id": 426587497,
  "node_id": "MDU6SXNzdWU0MjY1ODc0OTc=",
  "number": 15239,
  "title": "child state duplication in another child using map function",
  "user": {
    "login": "troptop",
    "id": 16471920,
    "node_id": "MDQ6VXNlcjE2NDcxOTIw",
    "avatar_url": "https://avatars1.githubusercontent.com/u/16471920?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/troptop",
    "html_url": "https://github.com/troptop",
    "followers_url": "https://api.github.com/users/troptop/followers",
    "following_url": "https://api.github.com/users/troptop/following{/other_user}",
    "gists_url": "https://api.github.com/users/troptop/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/troptop/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/troptop/subscriptions",
    "organizations_url": "https://api.github.com/users/troptop/orgs",
    "repos_url": "https://api.github.com/users/troptop/repos",
    "events_url": "https://api.github.com/users/troptop/events{/privacy}",
    "received_events_url": "https://api.github.com/users/troptop/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 3,
  "created_at": "2019-03-28T16:22:04Z",
  "updated_at": "2019-03-29T10:44:28Z",
  "closed_at": "2019-03-29T10:44:28Z",
  "author_association": "NONE",
  "body": "### **bug**\r\n\r\nYou can find the code : https://codesandbox.io/s/j3233w91xw\r\n**Code explanation :**\r\n- The Parent component called \"ManageEvents\" make an API call to get a list of Events from the backend.\r\n - Once the events get fetch, I use the function \"map\" to create the child components called \"EventCard\" that takes in arguments the events parameters that i fetched. (eventName, eventLocation... and EventPictureIDs)\r\n-  In the EventCard component, I fetch the pictures url using the EventPictureIDs parameter and store the urls in the state called \"picture\" (  state = { picture: [] }; ) \r\n- Then I display the pictures in the component call \"CarouselComponent\"\r\n\r\n**Note : **\r\nI just added a button \"delete\" to delete the cards that you will create. You will get an error on the deletion ( in the javascript console) but if you refresh the page the card will be deleted.\r\n\r\n**PLEASE DO NOT DELETE THE CARD THAT ALREADY EXIST OTHERWISE YOU WONT BE ABLE TO REPRODUCE THE ERROR**\r\n\r\n### **What is the current behavior?**\r\n\r\n**Issue :** \r\nWhen I create a new Event, I click on the button \"Create Event\" that triggers the action to create a default event as follow : \r\nlet postData = {\r\n      name: \"New Event\",\r\n      location_name: \"Paris\",\r\n      location_lat: 34.12345,\r\n      location_lng: -14.12345,\r\n      description: \"Add the Event's Description\",\r\n      date: moment().format(\"YYYY-MM-DDThh:mm\"),\r\n      participant: 20,\r\n      **picture: []**\r\n    };\r\n\r\nand once the event is created in the backend, I use the function \"val.unshift(res.data); setstate(....);\" to add the event to the ManageEvent State (I use unshift to have the new event being shown as the first Card)\r\nAnd then I re-render the component.\r\nThe issue is that even if the new event does not have any pictures ( picture: [] ),\r\nReactjs render the component \"EventCard\" showing pictures for this new event.\r\nReactjs uses the pictures from the previous card for this new card\r\nIf you refresh the page, the new card will appear correctly without pictures. but it should appear like that without to refresh the page.\r\n\r\nThe state of EventCard ( (  state = { picture: [] }; ) ) is not re-init to empty at the each component creation.\r\n\r\n**Note :** \r\nwhen using \"unshift\" the new card appears at the first place with picture (should not appears with pictures)\r\nwhen using \"push\" instead of \"unshift\" the new card appears at the last place without pictures (expected)\r\n\r\n\r\n\r\n### **What is the expected behavior?**\r\n\r\nI want to use \"unshift\" to have the new card at the first place without pictures\r\n \r\n\r\n\r\n### **Which versions of React, and which browser / OS are affected by this issue? **\r\n\"react\": \"^16.5.2\"\r\nChrome - Firefox\r\n",
  "closed_by": {
    "login": "gaearon",
    "id": 810438,
    "node_id": "MDQ6VXNlcjgxMDQzOA==",
    "avatar_url": "https://avatars0.githubusercontent.com/u/810438?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/gaearon",
    "html_url": "https://github.com/gaearon",
    "followers_url": "https://api.github.com/users/gaearon/followers",
    "following_url": "https://api.github.com/users/gaearon/following{/other_user}",
    "gists_url": "https://api.github.com/users/gaearon/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/gaearon/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/gaearon/subscriptions",
    "organizations_url": "https://api.github.com/users/gaearon/orgs",
    "repos_url": "https://api.github.com/users/gaearon/repos",
    "events_url": "https://api.github.com/users/gaearon/events{/privacy}",
    "received_events_url": "https://api.github.com/users/gaearon/received_events",
    "type": "User",
    "site_admin": false
  }
}

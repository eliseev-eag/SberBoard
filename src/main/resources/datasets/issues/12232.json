{
  "url": "https://api.github.com/repos/facebook/react/issues/12232",
  "repository_url": "https://api.github.com/repos/facebook/react",
  "labels_url": "https://api.github.com/repos/facebook/react/issues/12232/labels{/name}",
  "comments_url": "https://api.github.com/repos/facebook/react/issues/12232/comments",
  "events_url": "https://api.github.com/repos/facebook/react/issues/12232/events",
  "html_url": "https://github.com/facebook/react/issues/12232",
  "id": 297500223,
  "node_id": "MDU6SXNzdWUyOTc1MDAyMjM=",
  "number": 12232,
  "title": "There should be a way to hint hydration on how to reuse DOM nodes.",
  "user": {
    "login": "oalexandersson",
    "id": 1852095,
    "node_id": "MDQ6VXNlcjE4NTIwOTU=",
    "avatar_url": "https://avatars1.githubusercontent.com/u/1852095?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/oalexandersson",
    "html_url": "https://github.com/oalexandersson",
    "followers_url": "https://api.github.com/users/oalexandersson/followers",
    "following_url": "https://api.github.com/users/oalexandersson/following{/other_user}",
    "gists_url": "https://api.github.com/users/oalexandersson/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/oalexandersson/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/oalexandersson/subscriptions",
    "organizations_url": "https://api.github.com/users/oalexandersson/orgs",
    "repos_url": "https://api.github.com/users/oalexandersson/repos",
    "events_url": "https://api.github.com/users/oalexandersson/events{/privacy}",
    "received_events_url": "https://api.github.com/users/oalexandersson/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 1,
  "created_at": "2018-02-15T16:03:07Z",
  "updated_at": "2018-08-09T00:43:41Z",
  "closed_at": "2018-08-09T00:43:40Z",
  "author_association": "NONE",
  "body": "<!--\r\n  Note: if the issue is about documentation or the website, please file it at:\r\n  https://github.com/reactjs/reactjs.org/issues/new\r\n-->\r\n\r\n**Do you want to request a *feature* or report a *bug*?**\r\nFeature Request (since the current, in my opinion rather weird, behaviour is WAI).\r\n\r\n**What is the current behavior?**\r\nhttps://github.com/oalexandersson/react-16-server-client-diff\r\n\r\nIf I render additional DOM on the client, when hydrating, it works partially, but my new DOM nodes get confused with the ones rendered by the server even though they are an obvious addition. Server rendered elements get reused with css classes and all. I would argue that this behavior would be acceptable if the component's state matched with the server-side state, but in my example above I use a state change in componentWillMount to drive the diff.\r\n\r\n**If the current behavior is a bug, please provide the steps to reproduce and if possible a minimal demo of the problem. Your bug will get fixed much faster if we can run your code and it doesn't have dependencies other than React. Paste the link to your JSFiddle (https://jsfiddle.net/Luktwrdm/) or CodeSandbox (https://codesandbox.io/s/new) example below:**\r\n1. Clone https://github.com/oalexandersson/react-16-server-client-diff\r\n2. Run `yarn start` or `npm start`\r\n\r\n**What is the expected behavior?**\r\nIf the current behavior is truly what was intended, I would like a way to explicitly hint React on how to hydrate specific nodes. My suggestion is that if nodes have a `key` property, reuse only if its value matches, similar to how React knows how to handle changes in arrays. I have very limited knowledge about how the hydration works (maybe that shows), but afaik this would have virtually no performance impact, and still allow for the client to do pure additions to the DOM.\r\n\r\n**Which versions of React, and which browser / OS are affected by this issue? Did this work in previous versions of React?**\r\nUsing React 16.2. Well, yes, it worked in React 15 :)\r\n",
  "closed_by": {
    "login": "gaearon",
    "id": 810438,
    "node_id": "MDQ6VXNlcjgxMDQzOA==",
    "avatar_url": "https://avatars0.githubusercontent.com/u/810438?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/gaearon",
    "html_url": "https://github.com/gaearon",
    "followers_url": "https://api.github.com/users/gaearon/followers",
    "following_url": "https://api.github.com/users/gaearon/following{/other_user}",
    "gists_url": "https://api.github.com/users/gaearon/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/gaearon/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/gaearon/subscriptions",
    "organizations_url": "https://api.github.com/users/gaearon/orgs",
    "repos_url": "https://api.github.com/users/gaearon/repos",
    "events_url": "https://api.github.com/users/gaearon/events{/privacy}",
    "received_events_url": "https://api.github.com/users/gaearon/received_events",
    "type": "User",
    "site_admin": false
  }
}

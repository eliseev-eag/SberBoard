{
  "url": "https://api.github.com/repos/facebook/react/issues/11336",
  "repository_url": "https://api.github.com/repos/facebook/react",
  "labels_url": "https://api.github.com/repos/facebook/react/issues/11336/labels{/name}",
  "comments_url": "https://api.github.com/repos/facebook/react/issues/11336/comments",
  "events_url": "https://api.github.com/repos/facebook/react/issues/11336/events",
  "html_url": "https://github.com/facebook/react/issues/11336",
  "id": 267605077,
  "node_id": "MDU6SXNzdWUyNjc2MDUwNzc=",
  "number": 11336,
  "title": "Hydration breaks the HTML (class)",
  "user": {
    "login": "SamyPesse",
    "id": 845425,
    "node_id": "MDQ6VXNlcjg0NTQyNQ==",
    "avatar_url": "https://avatars3.githubusercontent.com/u/845425?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/SamyPesse",
    "html_url": "https://github.com/SamyPesse",
    "followers_url": "https://api.github.com/users/SamyPesse/followers",
    "following_url": "https://api.github.com/users/SamyPesse/following{/other_user}",
    "gists_url": "https://api.github.com/users/SamyPesse/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/SamyPesse/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/SamyPesse/subscriptions",
    "organizations_url": "https://api.github.com/users/SamyPesse/orgs",
    "repos_url": "https://api.github.com/users/SamyPesse/repos",
    "events_url": "https://api.github.com/users/SamyPesse/events{/privacy}",
    "received_events_url": "https://api.github.com/users/SamyPesse/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 7,
  "created_at": "2017-10-23T09:47:32Z",
  "updated_at": "2019-01-28T11:37:25Z",
  "closed_at": "2017-10-23T10:34:40Z",
  "author_association": "NONE",
  "body": "We've updated an application to React 16, this app is using [`react-responsive`](https://github.com/contra/react-responsive).\r\n\r\nSince we've updated to React 16, we have bugs related to invalid HTML being outputted by React hydration.\r\n\r\nOur server generates an HTML for the desktop, but if the client has a mobile, the rendering mismatch. Previously it was causing a full re-render by `ReactDOM.render`, it was not perfect, but it worked.\r\n\r\nWith React 16, `ReactDOM.hydrate` is supposed to not-rerender everything but only the mismatching parts. But after we run `ReactDOM.hydrate`, the HTML is an invalid mix of both (`class` are sliced).\r\n\r\n### 1) HTML generated by the server (desktop mode)\r\n\r\nThis is the HTML being served by the server (before hydration):\r\n\r\n![screen shot 2017-10-23 at 11 35 11](https://user-images.githubusercontent.com/845425/31882324-acb45a12-b7e6-11e7-99c9-134addf414ad.png)\r\n\r\n### 2) HTML generated by the client without SSR (normal mobile mode)\r\n\r\nThis is the HTML being rendered by React, when we disable SSR:\r\n\r\n![screen shot 2017-10-23 at 11 39 07](https://user-images.githubusercontent.com/845425/31882360-d484c6bc-b7e6-11e7-9a9f-1ea44e0a6fcf.png)\r\n\r\n\r\n### 3) Wrong HTML generated by hydration of 1) in client (mobile mode)\r\n\r\nThis is the invalid HTML being rendered by React when it tries to hydrate 1) with 2). The expected HTML is 2).\r\n\r\n![screen shot 2017-10-23 at 11 36 46](https://user-images.githubusercontent.com/845425/31882323-ac926c90-b7e6-11e7-8147-1c723e51e0a6.png)\r\n\r\n# Versions\r\n\r\nChrome 61.0.3163.100\r\nReact v16.0.0\r\n\r\n\r\n",
  "closed_by": {
    "login": "gaearon",
    "id": 810438,
    "node_id": "MDQ6VXNlcjgxMDQzOA==",
    "avatar_url": "https://avatars0.githubusercontent.com/u/810438?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/gaearon",
    "html_url": "https://github.com/gaearon",
    "followers_url": "https://api.github.com/users/gaearon/followers",
    "following_url": "https://api.github.com/users/gaearon/following{/other_user}",
    "gists_url": "https://api.github.com/users/gaearon/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/gaearon/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/gaearon/subscriptions",
    "organizations_url": "https://api.github.com/users/gaearon/orgs",
    "repos_url": "https://api.github.com/users/gaearon/repos",
    "events_url": "https://api.github.com/users/gaearon/events{/privacy}",
    "received_events_url": "https://api.github.com/users/gaearon/received_events",
    "type": "User",
    "site_admin": false
  }
}

{
  "url": "https://api.github.com/repos/facebook/react/issues/5487",
  "repository_url": "https://api.github.com/repos/facebook/react",
  "labels_url": "https://api.github.com/repos/facebook/react/issues/5487/labels{/name}",
  "comments_url": "https://api.github.com/repos/facebook/react/issues/5487/comments",
  "events_url": "https://api.github.com/repos/facebook/react/issues/5487/events",
  "html_url": "https://github.com/facebook/react/issues/5487",
  "id": 117284765,
  "node_id": "MDU6SXNzdWUxMTcyODQ3NjU=",
  "number": 5487,
  "title": "Issue with Simulate.Click invoking a function that I am spying on.",
  "user": {
    "login": "andrewheppner",
    "id": 12014696,
    "node_id": "MDQ6VXNlcjEyMDE0Njk2",
    "avatar_url": "https://avatars1.githubusercontent.com/u/12014696?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/andrewheppner",
    "html_url": "https://github.com/andrewheppner",
    "followers_url": "https://api.github.com/users/andrewheppner/followers",
    "following_url": "https://api.github.com/users/andrewheppner/following{/other_user}",
    "gists_url": "https://api.github.com/users/andrewheppner/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/andrewheppner/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/andrewheppner/subscriptions",
    "organizations_url": "https://api.github.com/users/andrewheppner/orgs",
    "repos_url": "https://api.github.com/users/andrewheppner/repos",
    "events_url": "https://api.github.com/users/andrewheppner/events{/privacy}",
    "received_events_url": "https://api.github.com/users/andrewheppner/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 40929155,
      "node_id": "MDU6TGFiZWw0MDkyOTE1NQ==",
      "url": "https://api.github.com/repos/facebook/react/labels/Type:%20Question",
      "name": "Type: Question",
      "color": "cc317c",
      "default": false
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 4,
  "created_at": "2015-11-17T05:17:20Z",
  "updated_at": "2016-01-08T01:14:50Z",
  "closed_at": "2016-01-08T01:14:50Z",
  "author_association": "NONE",
  "body": "I am having lots of trouble testing out whether clicking on my rendered button element is invoking the onClick handler.\n\nHere is my code for the Component to be tested...\n\n```\n'use strict';\n\n//Library Dependencies\nconst React = require('react');\n\nconst CategoryClearButton = React.createClass({\n\n  render() {\n    return (\n      <button type=\"reset\" className=\"btn btn-primary btn-sm\" onClick={this._clearAllSelectedCategories}>\n        Clear\n      </button>\n    );\n  },\n\n   _clearAllSelectedCategories() {\n    this.props.handleClick();\n  }\n\n});\n\nmodule.exports = CategoryClearButton;\n```\n\nHere is my test case using Jasmine...\n\n```\n'use strict';\n\nconst React = require('react');\nconst ReactDOM = require('react-dom');\nconst TestUtils = require('react-addons-test-utils');\n\nconst CategoryClearButton = require('./CategoryClearButton.jsx');\nconst Actions = require('../../../actions/DashboardActions');\n\nlet element;\n\ndescribe('CategoryClearButton', () => {\n\n  beforeEach(() =>{\n    element = TestUtils.renderIntoDocument(<CategoryClearButton />);\n  });\n\n it('will call the _clearAllSelectedCategories method when clicked', () => {\n    let renderedButton = TestUtils.findRenderedDOMComponentWithTag(element, 'button');\n    spyOn(element, '_clearAllSelectedCategories');\n    TestUtils.Simulate.click(renderedButton);\n    expect(element._clearAllSelectedCategories).toHaveBeenCalled();\n })\n\n})\n```\n\nHere is the error message i'm getting in my console...\n\n```\nPhantomJS 1.9.8 (Mac OS X 0.0.0) CategoryClearButton will call the _clearAllSelectedCategories method when clicked FAILED\n    TypeError: 'undefined' is not a funtion....\n\nPhantomJS 1.9.8 (Mac OS X 0.0.0): Executed 70 of 70 (1 FAILED) (0.069 secs / 0.101 secs).\n```\n\nI am pretty sure the issue here is with the simulate click event not firing, because I can make this test pass by doing the following, which leads me to believe that the spy is doing its job...\n\n```\nit('will call the _clearAllSelectedCategories method when clicked', () => {\n    let renderedButton = TestUtils.findRenderedDOMComponentWithTag(element, 'button');\n    spyOn(element, '_clearAllSelectedCategories');\n    element._clearAllSelectedCategories();\n    expect(element._clearAllSelectedCategories).toHaveBeenCalled();\n  })\n```\n\nCan anybuddy give a newbie some guidance?\nThanks,\nAndrew\n",
  "closed_by": {
    "login": "jimfb",
    "id": 9595985,
    "node_id": "MDQ6VXNlcjk1OTU5ODU=",
    "avatar_url": "https://avatars3.githubusercontent.com/u/9595985?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/jimfb",
    "html_url": "https://github.com/jimfb",
    "followers_url": "https://api.github.com/users/jimfb/followers",
    "following_url": "https://api.github.com/users/jimfb/following{/other_user}",
    "gists_url": "https://api.github.com/users/jimfb/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/jimfb/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/jimfb/subscriptions",
    "organizations_url": "https://api.github.com/users/jimfb/orgs",
    "repos_url": "https://api.github.com/users/jimfb/repos",
    "events_url": "https://api.github.com/users/jimfb/events{/privacy}",
    "received_events_url": "https://api.github.com/users/jimfb/received_events",
    "type": "User",
    "site_admin": false
  }
}

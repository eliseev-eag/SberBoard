{
  "url": "https://api.github.com/repos/facebook/react/issues/9069",
  "repository_url": "https://api.github.com/repos/facebook/react",
  "labels_url": "https://api.github.com/repos/facebook/react/issues/9069/labels{/name}",
  "comments_url": "https://api.github.com/repos/facebook/react/issues/9069/comments",
  "events_url": "https://api.github.com/repos/facebook/react/issues/9069/events",
  "html_url": "https://github.com/facebook/react/issues/9069",
  "id": 210501487,
  "node_id": "MDU6SXNzdWUyMTA1MDE0ODc=",
  "number": 9069,
  "title": "[Fiber] Investigation: what internals have direct dependencies on Stack modules?",
  "user": {
    "login": "trueadm",
    "id": 1519870,
    "node_id": "MDQ6VXNlcjE1MTk4NzA=",
    "avatar_url": "https://avatars0.githubusercontent.com/u/1519870?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/trueadm",
    "html_url": "https://github.com/trueadm",
    "followers_url": "https://api.github.com/users/trueadm/followers",
    "following_url": "https://api.github.com/users/trueadm/following{/other_user}",
    "gists_url": "https://api.github.com/users/trueadm/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/trueadm/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/trueadm/subscriptions",
    "organizations_url": "https://api.github.com/users/trueadm/orgs",
    "repos_url": "https://api.github.com/users/trueadm/repos",
    "events_url": "https://api.github.com/users/trueadm/events{/privacy}",
    "received_events_url": "https://api.github.com/users/trueadm/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 40929155,
      "node_id": "MDU6TGFiZWw0MDkyOTE1NQ==",
      "url": "https://api.github.com/repos/facebook/react/labels/Type:%20Question",
      "name": "Type: Question",
      "color": "cc317c",
      "default": false
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": {
    "login": "sophiebits",
    "id": 6820,
    "node_id": "MDQ6VXNlcjY4MjA=",
    "avatar_url": "https://avatars2.githubusercontent.com/u/6820?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/sophiebits",
    "html_url": "https://github.com/sophiebits",
    "followers_url": "https://api.github.com/users/sophiebits/followers",
    "following_url": "https://api.github.com/users/sophiebits/following{/other_user}",
    "gists_url": "https://api.github.com/users/sophiebits/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/sophiebits/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/sophiebits/subscriptions",
    "organizations_url": "https://api.github.com/users/sophiebits/orgs",
    "repos_url": "https://api.github.com/users/sophiebits/repos",
    "events_url": "https://api.github.com/users/sophiebits/events{/privacy}",
    "received_events_url": "https://api.github.com/users/sophiebits/received_events",
    "type": "User",
    "site_admin": false
  },
  "assignees": [
    {
      "login": "sophiebits",
      "id": 6820,
      "node_id": "MDQ6VXNlcjY4MjA=",
      "avatar_url": "https://avatars2.githubusercontent.com/u/6820?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sophiebits",
      "html_url": "https://github.com/sophiebits",
      "followers_url": "https://api.github.com/users/sophiebits/followers",
      "following_url": "https://api.github.com/users/sophiebits/following{/other_user}",
      "gists_url": "https://api.github.com/users/sophiebits/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sophiebits/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sophiebits/subscriptions",
      "organizations_url": "https://api.github.com/users/sophiebits/orgs",
      "repos_url": "https://api.github.com/users/sophiebits/repos",
      "events_url": "https://api.github.com/users/sophiebits/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sophiebits/received_events",
      "type": "User",
      "site_admin": false
    }
  ],
  "milestone": null,
  "comments": 1,
  "created_at": "2017-02-27T14:36:58Z",
  "updated_at": "2017-10-04T18:13:57Z",
  "closed_at": "2017-10-04T18:13:57Z",
  "author_association": "MEMBER",
  "body": "After some research, the following modules in the React codebase have some form of direct dependency on a React Stack module. Ideally, we want to move away form using internal module requires and use public API requires where possible.\r\n\r\nReactTestUtils:\r\n- `src/test/ReactShallowRenderer.js` \r\n  * There is a PR already open that should resolve this @lelandrichardson #8982\r\n  @spicyj says: üëç\r\n\r\nRenderers:\r\n- `src/renderers/__tests__/ReactUpdates-test.js`\r\n  * Only one test makes use of `ReactUpdates` directly. Move the `require` to be inline within the test itself?\r\n  @spicyj says: this one just tests internals and doesn't test anything observable (originally was added as a part of a very minor perf improvement), can be deleted\r\n\r\nRenderers - ReactDOM:\r\n- `src/renderers/dom/shared/__tests__/ReactMount-test.js`\r\n  * A test in this suite uses `ReactMount._instancesByReactRootID`.\r\n  @spicyj says: this test was added because the old devtools relied on this and it was important to not break them -- but Dan rewrote the integration so the Fiber devtools don't need this and this test is fine to delete\r\n- `src/renderers/dom/shared/__tests__/ReactDOMComponent-test.js`\r\n  * Two tests: `createOpenTagMarkup` and `createContentMarkup` require Stack modules.\r\n  @spicyj says: these tests should be rewritten in terms of public APIs\r\n- `src/renderers/dom/shared/__tests__/ReactServerRendering-test.js`\r\n  * Re-visit once we have SSR working?\r\n  @spicyj says: üëç\r\n- `src/renderers/dom/shared/__tests__/ReactDOMIDOperations-test.js`\r\n  * Only has a single `innerHTML` whitespace test.\r\n  @spicyj says: let's rewrite this one in terms of public APIs (though it can probably move into ReactDOMComponent-test) -- let's ensure that both initial render and updates work properly (since those historically used different codepaths and might also diverge in the future)\r\n\r\nRenderers - ReactDOM SSR:\r\n- `src/renderers/dom/ReactDOMServer.js`\r\n  * Re-visit once we have SSR working?\r\n  @spicyj says: üëç\r\n\r\nRenderers - ReactART:\r\n- `src/renderers/art/ReactARTStack.js`\r\n  * A couple of Stack modules are required by ART.\r\n  @spicyj says: No need to worry about these, we'll delete these when we delete stack\r\n  @bvaughn says: üëç\r\n\r\nRenderers - Native:\r\n- `src/renderers/native/ReactNativeReconcileTransaction.js`\r\n- `src/renderers/native/ReactNativeMount.js`\r\n- `src/renderers/native/ReactNativeStackInjection.js`\r\n- `src/renderers/native/ReactNativeBaseComponent.js`\r\n- `src/renderers/native/ReactNativeStack.js`\r\n\r\n@spicyj says: No need to worry about these, we'll delete these when we delete stack\r\n  @bvaughn says: üëç\r\n\r\nScripts:\r\n- `scripts/bench/extract-component.js`\r\n  * Should we refactor to use the public API instead?\r\n  @spicyj says: We don't really have a public API for reflecting on/inspecting React trees which is what this script (almost a bookmarklet) does so we will need to rewrite this on top of Fiber if we want to use it again ‚Äì but this isn't super important so for now this is okay to leave using Stack modules and it will only work with Stack until someone wants to use it and upgrades it to Fiber.",
  "closed_by": {
    "login": "gaearon",
    "id": 810438,
    "node_id": "MDQ6VXNlcjgxMDQzOA==",
    "avatar_url": "https://avatars0.githubusercontent.com/u/810438?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/gaearon",
    "html_url": "https://github.com/gaearon",
    "followers_url": "https://api.github.com/users/gaearon/followers",
    "following_url": "https://api.github.com/users/gaearon/following{/other_user}",
    "gists_url": "https://api.github.com/users/gaearon/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/gaearon/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/gaearon/subscriptions",
    "organizations_url": "https://api.github.com/users/gaearon/orgs",
    "repos_url": "https://api.github.com/users/gaearon/repos",
    "events_url": "https://api.github.com/users/gaearon/events{/privacy}",
    "received_events_url": "https://api.github.com/users/gaearon/received_events",
    "type": "User",
    "site_admin": false
  }
}

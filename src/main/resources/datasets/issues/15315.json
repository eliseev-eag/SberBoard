{
  "url": "https://api.github.com/repos/facebook/react/issues/15315",
  "repository_url": "https://api.github.com/repos/facebook/react",
  "labels_url": "https://api.github.com/repos/facebook/react/issues/15315/labels{/name}",
  "comments_url": "https://api.github.com/repos/facebook/react/issues/15315/comments",
  "events_url": "https://api.github.com/repos/facebook/react/issues/15315/events",
  "html_url": "https://github.com/facebook/react/issues/15315",
  "id": 429028691,
  "node_id": "MDU6SXNzdWU0MjkwMjg2OTE=",
  "number": 15315,
  "title": "Invalid hook call. Hooks can only be called inside of the body of a function component. This could happen for one of the following reasons:",
  "user": {
    "login": "sethandleah",
    "id": 26250567,
    "node_id": "MDQ6VXNlcjI2MjUwNTY3",
    "avatar_url": "https://avatars0.githubusercontent.com/u/26250567?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/sethandleah",
    "html_url": "https://github.com/sethandleah",
    "followers_url": "https://api.github.com/users/sethandleah/followers",
    "following_url": "https://api.github.com/users/sethandleah/following{/other_user}",
    "gists_url": "https://api.github.com/users/sethandleah/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/sethandleah/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/sethandleah/subscriptions",
    "organizations_url": "https://api.github.com/users/sethandleah/orgs",
    "repos_url": "https://api.github.com/users/sethandleah/repos",
    "events_url": "https://api.github.com/users/sethandleah/events{/privacy}",
    "received_events_url": "https://api.github.com/users/sethandleah/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 710722093,
      "node_id": "MDU6TGFiZWw3MTA3MjIwOTM=",
      "url": "https://api.github.com/repos/facebook/react/labels/Type:%20Needs%20Investigation",
      "name": "Type: Needs Investigation",
      "color": "fbca04",
      "default": false
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 36,
  "created_at": "2019-04-04T00:20:29Z",
  "updated_at": "2019-10-13T15:50:38Z",
  "closed_at": "2019-04-11T16:18:39Z",
  "author_association": "NONE",
  "body": "Hi all, I am new to react and  I am trying to create a react library of components and I came across this problem because one of the components I am creating uses [REACT HOOKS](https://reactjs.org/docs/hooks-intro.html).\r\n\r\n**Disclaimer: this is my first time creating an issue, so please bear with me.**\r\n\r\nSo I am trying to create an accordion component which toggles between these classes ```accordion__item--open``` and ```accordion__item``` to open and close.\r\n\r\n**package.json**\r\n\r\n```\r\n{\r\n  \"name\": \"react-lib\",\r\n  \"version\": \"0.3.0\",\r\n  \"description\": \"A simple UI library of react components\",\r\n  \"main\": \"dist/index.js\",\r\n  \"publishConfig\": {\r\n    \"registry\": \"\"\r\n  },\r\n  \"scripts\": {\r\n    \"login\": \"\",\r\n    \"build\": \"webpack --mode=production\",\r\n    \"develop\": \"webpack --mode=development --watch\"\r\n  },\r\n  \"repository\": {\r\n    \"type\": \"git\",\r\n    \"url\": \"\"\r\n  },\r\n  \"keywords\": [],\r\n  \"author\": \"\",\r\n  \"license\": \"ISC\",\r\n  \"homepage\": \"\",\r\n  \"dependencies\": {\r\n    \"@babel/core\": \"^7.3.4\",\r\n    \"@babel/preset-env\": \"^7.3.4\",\r\n    \"@babel/preset-react\": \"^7.0.0\",\r\n    \"babel-loader\": \"^8.0.5\",\r\n    \"eslint\": \"^5.15.1\",\r\n    \"eslint-loader\": \"^2.1.2\",\r\n    \"webpack\": \"^4.29.6\",\r\n    \"webpack-cli\": \"^3.2.3\",\r\n    \"webpack-node-externals\": \"^1.7.2\"\r\n  },\r\n  \"devDependencies\": {\r\n    \"eslint-config-airbnb\": \"^17.1.0\",\r\n    \"eslint-plugin-import\": \"^2.16.0\",\r\n    \"eslint-plugin-jsx-a11y\": \"^6.2.1\",\r\n    \"eslint-plugin-react\": \"^7.12.4\",\r\n    \"eslint-plugin-react-hooks\": \"^1.6.0\"\r\n  }\r\n}\r\n```\r\n\r\n**webpack.config.js**\r\n\r\n```\r\nconst path = require('path');\r\nconst webpack = require('webpack');\r\n\r\nmodule.exports =  {\r\n\r\n  mode: 'development',\r\n  optimization: {\r\n    minimize: true,\r\n  },\r\n  entry: './index.js',\r\n  output: {\r\n    path: path.resolve(__dirname, './dist'),\r\n    filename: 'index.js',\r\n    library: '',\r\n    libraryTarget: 'commonjs'\r\n  },\r\n  target: 'node',\r\n  module: {\r\n    rules: [\r\n      {\r\n        test: /\\.js$/,\r\n        exclude: /(node_modules)/,\r\n        loader: 'babel-loader',\r\n        options: {\r\n          presets: ['@babel/preset-env', '@babel/react']\r\n        }\r\n      }\r\n    ]\r\n  } \r\n};\r\n```\r\n\r\n**This is the accordion container:**\r\n\r\n ```\r\nimport React from 'react'; \r\n\r\nfunction Accordion({ children }) {\r\n\r\n  return (\r\n    <div className=\"accordion\">\r\n      { children }\r\n    </div>\r\n  ); \r\n\r\n}\r\n \r\nexport default Accordion;\r\n\r\n```\r\n**This is the accordion item that will live inside the container:** \r\n\r\n```\r\nimport React, { useState } from 'react'; \r\n\r\nfunction AccordionItem({header, content}) { \r\n\r\nconst [ isActive, toggleActive ] = useState(false);\r\n  \r\nreturn (\r\n    <div className={ `accordion__item ${ isActive ? 'accordion__item--open' : '' }` }>\r\n\r\n      <button\r\n        className=\"accordion__item-header\"\r\n        onClick={ () => isActive ? toggleActive(false) : toggleActive(true) }\r\n      >\r\n       { header }\r\n       <svg className=\"icon icon--debit\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 50 50\">\r\n         <path className=\"icon__path\" d=\"M22.37,22.33V2.67a2.63,2.63,0,0,1,5.26,0V47.24a2.63,2.63,0,0,1-5.26.09V27.58H2.71a2.63,2.63,0,0,1,0-5.25Zm11.92,5.25a2.63,2.63,0,0,1,0-5.25h13a2.63,2.63,0,0,1,0,5.25Z\">\r\n         </path>\r\n       </svg>\r\n     </button>\r\n\r\n     <div className=\"accordion__item-content\">\r\n       { children }\r\n     </div>\r\n\r\n   </div>\r\n )\r\n\r\n};\r\n\r\nexport default AccordionItem;\r\n\r\n```\r\n\r\nNow inside of a [create-react-app](https://github.com/sethandleah/myapp) I import these components\r\n\r\nMy [library](https://github.com/sethandleah/react-lib) and the [create-react-app](https://github.com/sethandleah/myapp) are relative to each other and I am using ```npm link```\r\n\r\n```\r\nimport React from 'react'; \r\n\r\nimport {AccordionItem} from 'react-lib'\r\nimport {Accordion} from 'react-lib';\r\n\r\nfunction App ({props}) {\r\n\r\n  return (\r\n    \r\n      <Accordion>\r\n        <AccordionItem header={\"Hello\"} content={\"World\"}/>\r\n      </Accordion> \r\n  )\r\n\r\n}\r\n\r\nexport default App;\r\n```\r\nI have followed all of these [instructions](https://reactjs.org/warnings/invalid-hook-call-warning.html) and I still get the same error.\r\n\r\n\r\n**Current behavior?**\r\n\r\n```\r\nInvalid hook call. Hooks can only be called inside of the body of a function component. This could happen for one of the following reasons:\r\n1. You might have mismatching versions of React and the renderer (such as React DOM)\r\n2. You might be breaking the Rules of Hooks\r\n3. You might have more than one copy of React in the same app\r\nSee https://fb.me/react-invalid-hook-call for tips about how to debug and fix this problem.\r\n```\r\n\r\n**Steps to reproduce**\r\n\r\n- clone [https://github.com/sethandleah/react-lib](https://github.com/sethandleah/react-lib)\r\n- clone [https://github.com/sethandleah/myapp](https://github.com/sethandleah/myapp)\r\n- ```cd react-lib```\r\n- ```npm install```\r\n- ```npm link```\r\n- ```cd ../myapp```\r\n- ```npm i```\r\n- ```npm link react-lib```\r\n- ```npm start```\r\n\r\n**Expected behavior**\r\n\r\n- It should show a button with a \"plus\" svg sign and the words \"Hello\" and \"World\" respectively\r\n- Open devtools and go to elements\r\n- When clicking on the button the class ```accordion_item--open``` should toggle\r\n\r\n**To see the above, do the following:**\r\n\r\n- Uncomment these lines at ```myapp/src/App.js```\r\n```\r\nimport Accordion  from './Accordion';\r\nimport AccordionItem from './AccordionItem';\r\n```\r\n\r\n- The comment out these line, alse at ```myapp/src/App.js```:\r\n\r\n```\r\nimport { Accordion } from 'react-lib';\r\nimport { AccordionItem } from 'react-lib';\r\n```\r\n\r\n**Versions of React, Browser / OS are affected by this issue:**\r\n\r\n- React and React-Dom: both are ```^16.8.6``` on  both [react-lib](https://github.com/sethandleah/react-lib) and the [myapp](https://github.com/sethandleah/myapp)\r\n- Browser: Brave ```Version 0.61.52 Chromium: 73.0.3683.86 (Official Build) (64-bit)```\r\n- OS: MacOS High Siera ``` Version 10.13.6 (17G5019)```\r\n\r\n\r\n\r\n\r\n",
  "closed_by": {
    "login": "threepointone",
    "id": 18808,
    "node_id": "MDQ6VXNlcjE4ODA4",
    "avatar_url": "https://avatars2.githubusercontent.com/u/18808?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/threepointone",
    "html_url": "https://github.com/threepointone",
    "followers_url": "https://api.github.com/users/threepointone/followers",
    "following_url": "https://api.github.com/users/threepointone/following{/other_user}",
    "gists_url": "https://api.github.com/users/threepointone/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/threepointone/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/threepointone/subscriptions",
    "organizations_url": "https://api.github.com/users/threepointone/orgs",
    "repos_url": "https://api.github.com/users/threepointone/repos",
    "events_url": "https://api.github.com/users/threepointone/events{/privacy}",
    "received_events_url": "https://api.github.com/users/threepointone/received_events",
    "type": "User",
    "site_admin": false
  }
}

{
  "url": "https://api.github.com/repos/facebook/react/issues/15786",
  "repository_url": "https://api.github.com/repos/facebook/react",
  "labels_url": "https://api.github.com/repos/facebook/react/issues/15786/labels{/name}",
  "comments_url": "https://api.github.com/repos/facebook/react/issues/15786/comments",
  "events_url": "https://api.github.com/repos/facebook/react/issues/15786/events",
  "html_url": "https://github.com/facebook/react/pull/15786",
  "id": 450596166,
  "node_id": "MDExOlB1bGxSZXF1ZXN0MjgzODgyNTMy",
  "number": 15786,
  "title": "[react-native] Rewrite Haste imports in RN shims and add .fb.js extension",
  "user": {
    "login": "ide",
    "id": 379606,
    "node_id": "MDQ6VXNlcjM3OTYwNg==",
    "avatar_url": "https://avatars0.githubusercontent.com/u/379606?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/ide",
    "html_url": "https://github.com/ide",
    "followers_url": "https://api.github.com/users/ide/followers",
    "following_url": "https://api.github.com/users/ide/following{/other_user}",
    "gists_url": "https://api.github.com/users/ide/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/ide/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/ide/subscriptions",
    "organizations_url": "https://api.github.com/users/ide/orgs",
    "repos_url": "https://api.github.com/users/ide/repos",
    "events_url": "https://api.github.com/users/ide/events{/privacy}",
    "received_events_url": "https://api.github.com/users/ide/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 196858374,
      "node_id": "MDU6TGFiZWwxOTY4NTgzNzQ=",
      "url": "https://api.github.com/repos/facebook/react/labels/CLA%20Signed",
      "name": "CLA Signed",
      "color": "e7e7e7",
      "default": false
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 1,
  "created_at": "2019-05-31T03:18:19Z",
  "updated_at": "2019-06-03T16:49:18Z",
  "closed_at": "2019-06-03T14:58:32Z",
  "author_association": "CONTRIBUTOR",
  "pull_request": {
    "url": "https://api.github.com/repos/facebook/react/pulls/15786",
    "html_url": "https://github.com/facebook/react/pull/15786",
    "diff_url": "https://github.com/facebook/react/pull/15786.diff",
    "patch_url": "https://github.com/facebook/react/pull/15786.patch"
  },
  "body": "This commit is a follow-up to https://github.com/facebook/react/pull/15604, which explains more of the rationale behind moving React Native to path-based imports and the work needed in the React repository. In that linked PR, the generated renderers were updated but not the shims; this commit updates the shims.\r\n\r\nThe problem is that FB needs a different copy of the built renderers than the OSS versions so we need a way for FB code to import different modules than in OSS. This was previously done with Haste, but with the removal of Haste from RN, we need another mechanism. Talking with cpojer, we are using a `.fb.js` extension that Metro can be configured to prioritize over `.js`.\r\n\r\nThis commit generates FB's renderers with the `.fb.js` extension and OSS renderers with just `.js`. This way, FB can internally configure Metro to use the `.fb.js` implementations and OSS will use the `.js` ones, letting us swap out which implementation gets bundled.\r\n\r\nTest Plan: Generated the renderers and shims with `yarn build` and then verified that the generated shims don't contain any Haste-style imports. Copied the renderers and shims into RN manually and launched the RNTester app to verify it loads end-to-end. Added `.fb.js` to the extensions in `metro.config.js` and verified that the FB-specific bundles loaded.",
  "closed_by": {
    "login": "cpojer",
    "id": 13352,
    "node_id": "MDQ6VXNlcjEzMzUy",
    "avatar_url": "https://avatars0.githubusercontent.com/u/13352?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/cpojer",
    "html_url": "https://github.com/cpojer",
    "followers_url": "https://api.github.com/users/cpojer/followers",
    "following_url": "https://api.github.com/users/cpojer/following{/other_user}",
    "gists_url": "https://api.github.com/users/cpojer/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/cpojer/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/cpojer/subscriptions",
    "organizations_url": "https://api.github.com/users/cpojer/orgs",
    "repos_url": "https://api.github.com/users/cpojer/repos",
    "events_url": "https://api.github.com/users/cpojer/events{/privacy}",
    "received_events_url": "https://api.github.com/users/cpojer/received_events",
    "type": "User",
    "site_admin": false
  }
}

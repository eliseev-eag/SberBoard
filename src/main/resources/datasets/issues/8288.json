{
  "url": "https://api.github.com/repos/facebook/react/issues/8288",
  "repository_url": "https://api.github.com/repos/facebook/react",
  "labels_url": "https://api.github.com/repos/facebook/react/issues/8288/labels{/name}",
  "comments_url": "https://api.github.com/repos/facebook/react/issues/8288/comments",
  "events_url": "https://api.github.com/repos/facebook/react/issues/8288/events",
  "html_url": "https://github.com/facebook/react/issues/8288",
  "id": 189148131,
  "node_id": "MDU6SXNzdWUxODkxNDgxMzE=",
  "number": 8288,
  "title": "Immutable HTML elements and react",
  "user": {
    "login": "ragebiswas",
    "id": 4769627,
    "node_id": "MDQ6VXNlcjQ3Njk2Mjc=",
    "avatar_url": "https://avatars0.githubusercontent.com/u/4769627?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/ragebiswas",
    "html_url": "https://github.com/ragebiswas",
    "followers_url": "https://api.github.com/users/ragebiswas/followers",
    "following_url": "https://api.github.com/users/ragebiswas/following{/other_user}",
    "gists_url": "https://api.github.com/users/ragebiswas/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/ragebiswas/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/ragebiswas/subscriptions",
    "organizations_url": "https://api.github.com/users/ragebiswas/orgs",
    "repos_url": "https://api.github.com/users/ragebiswas/repos",
    "events_url": "https://api.github.com/users/ragebiswas/events{/privacy}",
    "received_events_url": "https://api.github.com/users/ragebiswas/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 7,
  "created_at": "2016-11-14T15:52:56Z",
  "updated_at": "2017-10-04T14:25:30Z",
  "closed_at": "2017-10-04T14:25:30Z",
  "author_association": "NONE",
  "body": "Hi everyone! This is my first report here, please bear with me if I don't make much sense :-)\r\n\r\nI am facing an issue with interoperability with web-components. I have to work with a proprietary library where the dom nodes (of the custom web-component element) are frozen (i.e. not extensible), and I get this error in console:\r\n\r\n`ReactDOMComponentTree.js: Uncaught TypeError: Can't add property __reactInternalInstance$xxxx object is not extensible(â€¦)`\r\n\r\nUpon inspecting further, this seems to be thrown from the following snippet:\r\n\r\n```javascript\r\n/**\r\n * Populate `_hostNode` on the rendered host/text component with the given\r\n * DOM node. The passed `inst` can be a composite.\r\n */\r\nfunction precacheNode(inst, node) {\r\n  var hostInst = getRenderedHostOrTextFromComponent(inst);\r\n  hostInst._hostNode = node;\r\n  node[internalInstanceKey] = hostInst;\r\n}\r\n```\r\n\r\nReact seems to be adding a new property to a dom node (for precaching) - and that's where things fail. In case it helps, I've also pasted the entire stack trace below.\r\n\r\nMy question: is it valid for react to assume that a dom node is mutable? If not, can the precaching omit such nodes? I'm not able to attach a reproducible test case due to the proprietary nature of the custom webcomponent - and I don't seem to be able to reproduce the issue with my simple webcomponents. I can try again if that is really required, however!\r\n\r\nStacktrace:\r\n\r\n```\r\nprecacheNode\t@\tReactDOMComponentTree.js?1a2c:48\r\nmountComponent\t@\tReactDOMComponent.js?1302:517\r\nmountComponent\t@\tReactReconciler.js?6bfa:47\r\n_updateRenderedComponent\t@\tReactCompositeComponent.js?cd59:762\r\n_performComponentUpdate\t@\tReactCompositeComponent.js?cd59:721\r\nupdateComponent\t@\tReactCompositeComponent.js?cd59:642\r\nperformUpdateIfNecessary\t@\tReactCompositeComponent.js?cd59:558\r\nperformUpdateIfNecessary\t@\tReactReconciler.js?6bfa:158\r\nrunBatchedUpdates\t@\tReactUpdates.js?ce09:151\r\nperform\t@\tTransaction.js?6dff:138\r\nperform\t@\tTransaction.js?6dff:138\r\nperform\t@\tReactUpdates.js?ce09:90\r\nflushBatchedUpdates\t@\tReactUpdates.js?ce09:173\r\ncloseAll\t@\tTransaction.js?6dff:204\r\nperform\t@\tTransaction.js?6dff:151\r\nbatchedUpdates\t@\tReactDefaultBatchingStrategy.js?ef70:63\r\nenqueueUpdate\t@\tReactUpdates.js?ce09:201\r\nenqueueUpdate\t@\tReactUpdateQueue.js?fd2c:25\r\nenqueueForceUpdate\t@\tReactUpdateQueue.js?fd2c:158\r\nReactComponent.forceUpdate\t@\tReactComponent.js?702a:85\r\nforceUpdateIfPending\t@\tindex.js?d5ed:28\r\ntraverseRenderedChildren\t@\tindex.js?d5ed:6\r\n(anonymous function)\t@\tindex.js?d5ed:36\r\n(anonymous function)\t@\tindex.js?c80a:84\r\n```\r\n\r\nDo let me know if there's something obvious that I'm missing!",
  "closed_by": {
    "login": "gaearon",
    "id": 810438,
    "node_id": "MDQ6VXNlcjgxMDQzOA==",
    "avatar_url": "https://avatars0.githubusercontent.com/u/810438?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/gaearon",
    "html_url": "https://github.com/gaearon",
    "followers_url": "https://api.github.com/users/gaearon/followers",
    "following_url": "https://api.github.com/users/gaearon/following{/other_user}",
    "gists_url": "https://api.github.com/users/gaearon/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/gaearon/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/gaearon/subscriptions",
    "organizations_url": "https://api.github.com/users/gaearon/orgs",
    "repos_url": "https://api.github.com/users/gaearon/repos",
    "events_url": "https://api.github.com/users/gaearon/events{/privacy}",
    "received_events_url": "https://api.github.com/users/gaearon/received_events",
    "type": "User",
    "site_admin": false
  }
}

{
  "url": "https://api.github.com/repos/facebook/react/issues/8854",
  "repository_url": "https://api.github.com/repos/facebook/react",
  "labels_url": "https://api.github.com/repos/facebook/react/issues/8854/labels{/name}",
  "comments_url": "https://api.github.com/repos/facebook/react/issues/8854/comments",
  "events_url": "https://api.github.com/repos/facebook/react/issues/8854/events",
  "html_url": "https://github.com/facebook/react/issues/8854",
  "id": 202694221,
  "node_id": "MDU6SXNzdWUyMDI2OTQyMjE=",
  "number": 8854,
  "title": "React 16 Umbrella ☂️ (and 15.5)",
  "user": {
    "login": "gaearon",
    "id": 810438,
    "node_id": "MDQ6VXNlcjgxMDQzOA==",
    "avatar_url": "https://avatars0.githubusercontent.com/u/810438?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/gaearon",
    "html_url": "https://github.com/gaearon",
    "followers_url": "https://api.github.com/users/gaearon/followers",
    "following_url": "https://api.github.com/users/gaearon/following{/other_user}",
    "gists_url": "https://api.github.com/users/gaearon/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/gaearon/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/gaearon/subscriptions",
    "organizations_url": "https://api.github.com/users/gaearon/orgs",
    "repos_url": "https://api.github.com/users/gaearon/repos",
    "events_url": "https://api.github.com/users/gaearon/events{/privacy}",
    "received_events_url": "https://api.github.com/users/gaearon/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 74359453,
      "node_id": "MDU6TGFiZWw3NDM1OTQ1Mw==",
      "url": "https://api.github.com/repos/facebook/react/labels/Type:%20Release",
      "name": "Type: Release",
      "color": "00D8EA",
      "default": false
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 110,
  "created_at": "2017-01-24T00:46:38Z",
  "updated_at": "2017-10-04T16:35:56Z",
  "closed_at": "2017-10-04T16:35:55Z",
  "author_association": "MEMBER",
  "body": "This list might change, just putting it out there as the first draft.\r\nPosting these together since they're related, and we don't plan more 15.x releases after 15.5 anyway.\r\n\r\nTo put these changes in context, we have a few goals:\r\n\r\n(Click to show)\r\n<details>\r\n\r\n * For the past several months, we have been working on a [rewrite of React codenamed “Fiber”](https://www.youtube.com/watch?v=aV1271hd9ew&feature=youtu.be). Initially, it won’t affect public API, but it brings several new features (like https://github.com/facebook/react/issues/2127 and https://github.com/facebook/react/issues/2461). Fiber gives us a solid foundation to improve React core in numerous ways. We’ll be talking more about it soon, and we intend to ship it with React 16 by default.\r\n\r\n * To reduce the bundle size, we need to remove the APIs that we don't recommend, such as `createClass` and `React.DOM.*` helpers. We intend to warn once about their usage so that you can start removing dependencies on them. They will still be available as separate packages, but we will exclude them from the default build of React 16.\r\n\r\n* We would like to have more control over the bundles so that we can better optimize them. This is why we are considering switching to flat bundles (and thus removing access to React internals in `react/lib/*` and `react-dom/lib/*`) in React 16. This will also mean faster compile times by default for users of Webpack and other bundlers, and faster server-side rendering performance.\r\n\r\n</details>\r\n\r\nHere’s a speculative list of changes we think of doing in these releases:\r\n\r\n# Past Releases\r\n\r\nI’ve moved these to the end of this post.\r\n\r\n# 16 Final\r\n\r\n- [x] https://github.com/facebook/react/issues/10625 (@flarnie & @sophiebits)\r\n- [x] Check if https://github.com/facebook/react/pull/10142 is a real regression (@nhunzaker, @aweary)\r\n- [x] Check Google issue (<s>still exists after RC2</s> turns out to be polyfill.io bug, https://github.com/Financial-Times/polyfill-service/issues/1299) https://www.reddit.com/r/javascript/comments/6pqrz5/comment/dmrl0nh\r\n- [x] Figure out what we want to do regarding https://github.com/facebook/react/pull/10612 and https://github.com/facebook/react/issues/10672 @gaearon\r\n- [x] Ensure Enzyme isn't blocked on anything from our side for 16 compat. (@flarnie)\r\n- [x] Remove `unstable_` prefix from `unstable_createPortal` and alias it @gaearon https://github.com/facebook/react/pull/10675\r\n- [x] Ensure we show a sensible warning for this case https://github.com/facebook/react/pull/10673 @gaearon\r\n- [x] Preparing for the Final Release: (React team in general)\r\n  - [x] Write blog post adapted from #10294 (@acdlite)\r\n    - [x] Add attribute info to big changes section\r\n    - [x] Consolidate/remove \"Updates\" section at the end\r\n    - [x] Server hydration: make hydration changes more prominent in breaking changes section, maybe write a full blog post later (https://github.com/facebook/react/issues/10591)\r\n- [x] Release an update to DevTools with https://github.com/facebook/react-devtools/pull/892\r\n- [x] Website (@bvaughn and @flarnie)\r\n- [x] Docs \r\n  - [x] Document ability to return strings and arrays from `render`\r\n  - [x] Document `createPortal()` \r\n  - [x] Merge [server streaming](https://github.com/facebook/react/blob/master/docs/docs/reference-react-dom-node-stream.md) doc into regular dom server doc and fix imports to match new unified entry point\r\n  - [x] Test renderer https://github.com/facebook/react/pull/10692\r\n- [x] Right after release:\r\n  - [x] Update CDN URLs on website and official fiddle to reference new paths (`/umd/*` rather than `sebmt/*`)\r\n  - [x] Update doc snippets (such as all codepens on the website!) to use 16.\r\n\r\n*TODO: Add any bugs discovered while testing RC.*\r\n\r\n# 16 Wishlist\r\n\r\n- [x] Fix hot reloading in RN (probably needs `unstable_forceUpdateDeep()` and then change https://github.com/gaearon/react-deep-force-update to use it)\r\n- [x] Show a better message for missing React (https://github.com/facebook/react/issues/10406)\r\n- [x] Make sure we offer a way of canceling `setState` updater form (https://twitter.com/nishb1/status/852542873803345920) (@gaearon will follow up)\r\n- [x] Remove Stack and compat code\r\n- [x] Add support to Enzyme for Fiber (airbnb/enzyme#1007)\r\n\r\n----\r\n\r\n## Past Releases\r\n\r\n<details>\r\n\r\n# 15.5\r\n\r\n(Click to show)\r\n\r\n<details>\r\n\r\n- [x] ReactDOM fixes, if @jquense @nhunzaker @aweary want to release any.\r\n- [x] We should probably ship a fix for https://github.com/facebook/react/issues/8487 (https://github.com/facebook/react/pull/9005)\r\n- [x] New warning: callback refs on stateless functional components (https://github.com/facebook/react/pull/8635, https://github.com/facebook/react/pull/8739)\r\n- [x] New API deprecations:\r\n  - [x] `React.createClass` (will be moved to a separate package, [and we provide a codemod](https://github.com/reactjs/react-codemod#explanation-of-the-new-es2015-class-transform-with-property-initializers) if you want to update to ES classes)\r\n  - [ ] ~~`React.createFactory` (will be moved to a separate package or removed, it's a [one-liner](https://github.com/facebook/react/blob/eb89bc4c301c5970b1ec88d3fdfa2202d4dca4f8/src/isomorphic/classic/element/ReactElement.js#L271-L272))~~\r\n  - [ ] <s>`React.DOM.*` factories (will be moved to a separate package, https://github.com/facebook/react/pull/8356)</s> **We forgot to do it. Moving to 15.6**\r\n  - [ ] <s>`React.createMixin` (will be removed, https://github.com/facebook/react/pull/8853)</s> **We forgot to do it. Moving to 15.6**\r\n  - [x] `React.propTypes` (will be moved to a separate package)\r\n  - [x] Deprecate React addons https://github.com/facebook/react/issues/9207\r\n  - [x] Decide how to handle all of this with the UMD addons build\r\n  - [x] Fix this bug https://github.com/facebook/react/issues/9351\r\n\r\n</details>\r\n\r\n# 15.6\r\n\r\nSee https://github.com/facebook/react/issues/9398.\r\n\r\n# 16 Alpha\r\n\r\n(Click to show)\r\n\r\n<details>\r\n\r\n- [x] Remove deprecations added in 15\r\n  - [x] Stop appending `px` to strings (https://github.com/facebook/react/pull/6899)\r\n  - [x] Remove `LinkedStateMixin`, `valueLink` and `checkedLink` (https://github.com/facebook/react/pull/8165)\r\n  - [x] Remove `React.__spread` and `React.createMixin`\r\n  - [x] Move `React.createClass` to a separate package\r\n  - [x] Move `PropTypes` to a separate package.\r\n  - [x] Move `React.DOM.*` factories to a separate package\r\n  - [x] Decide what to do with the addons build\r\n  - [x] If we keep any addons, they need to work regardless of whether React is aliased to a flat bundle or not (which is not the case now)\r\n- [x] Strip PropTypes checkers in production build (https://github.com/facebook/react/pull/8066)\r\n- [x] Re-add warning about calling PropTypes directly (https://github.com/facebook/react/issues/8080)\r\n- [X] More ReactDOM fixes, if @jquense @nhunzaker @aweary want to release any.\r\n- [x] Make a decision on the input fix by @jquense (for now accepted, but follow up work will change this. @flarnie link to issue on related follow up work)\r\n\r\n</details>\r\n\r\n# 16 Beta\r\n\r\n(Click to show)\r\n\r\n<details>\r\n\r\n- [x] Actually enable fragments (@flarnie verified this)\r\n- [x] Make error boundaries official (@bvaughn)\r\n  - [x] Choose lifecycle naming\r\n  - [x] Codemod stuff\r\n  - [x] Decide whether to runtime warn for the old name (decided: let's not do it)\r\n- [x] Fix the issue with `invokeGuardedCallback` (tracking in https://github.com/facebook/react/issues/9577, @acdlite is working on this)\r\n- [x] (This came up internally) Set a hard limit for recursion https://github.com/facebook/react/issues/9193. (@acdlite)\r\n- [x] Duplicate React + string refs results in very confusing error (ref is not a function). We should provide a good invariant for that. (https://github.com/facebook/react/issues/9962, @spicyj @flarnie and @gaearon) (is this Draft issue also about this? https://github.com/facebook/draft-js/issues/296)\r\n  - [x] Is there a test for this? (@flarnie)\r\n- [x] Warn (throw?) when doing an update on a container that was manually emptied outside of React (in stack, this mounted a brand-new tree; in fiber, it tries to apply an update and usually fails) (@flarnie in https://github.com/facebook/react/pull/10210)\r\n  - [x] Is there a test for this? (@flarnie)\r\n- [x] Additional APIs we need in order to start experimenting with async. (@acdlite)\r\n  - [x] `React.unstable_AsyncComponent`\r\n  - [x] `ReactDOM.flushSync(batch)`\r\n- [x] sanity test - use in a CRA app, and check fixtures\r\n- [x] Messaging\r\n  - [x] Update isfiberreadyyet.com\r\n  - [x] Compose a Tweet\r\n\r\n</details>\r\n\r\n# 16 RC\r\n\r\n(Click to show)\r\n<details>\r\n\r\n- [x] [m-l] Pass DOM props through (https://github.com/facebook/react/issues/10399, latest is: https://github.com/facebook/react/pull/10416) (@gaearon, @spicyj, @sebmarkbage, @flarnie, @acdlite)\r\n- [x] Regression: we should warn if object is passed to an event listener prop #10407 (@aweary) (fixed? in https://github.com/facebook/react/pull/10453 but needs <s>review</s> updated and merged)\r\n- [x] Make sure input variables (props, state) point to the correct values for each lifecycle. Example where this isn't the case for `componentWillMount`: https://jsfiddle.net/m3pL3yaj/ (@acdlite) (fixed in #10481)\r\n- [x] `select`'s onChange event fires with incorrect selectedIndex, value (https://github.com/facebook/react/issues/10420 @sebmarkbage)\r\n- [x] How do we ensure weak minifiers don't ship the bundle twice? https://github.com/facebook/react/issues/9589 (@flarnie, @trueadm) (fixed in https://github.com/facebook/react/pull/10446)\r\n- [x] Bug: SSR has false positive warnings for SVG tags #10415 (@spicyj) (fixed in https://github.com/facebook/react/pull/10452)\r\n- [x] Bug: Unexpected cross-domain error passed to `componentDidCatch` #10441 (@bvaughn) (fixed in https://github.com/facebook/react/pull/10447)\r\n- [x] Warn when nesting a 15 tree inside 16 (@spicyj https://github.com/facebook/react/pull/10434) (fixed in https://github.com/facebook/react/pull/10434)\r\n- [x] undefined is not a function (evaluating 'owner.getName()') https://github.com/facebook/react/issues/10443\r\n- [x] Regressions reported in beta\r\n  - [x] The server renderer crashes in production with inline styles. (https://github.com/facebook/react/issues/10299, fixed by https://github.com/facebook/react/pull/10300)\r\n  - [x] The server renderer doesn't yet support returning arrays and strings from components (fixed by #10221)\r\n  - [x] The server renderer still renders `data-reactid` somewhat unnecessarily. (https://github.com/facebook/react/issues/10306) (@gaearon)\r\n    - [x] Potentially fixed by https://github.com/facebook/react/pull/10339 (@gaearon)\r\n  - [x] In some cases `Error: null` is reported instead of the real error. (https://github.com/facebook/react/issues/10321) [decision: update the error message] (@acdlite)\r\n  - [x] Shallow renderer doesn't implement `unstable_batchedUpdates`. [decision: team seems to be leaning away from doing this; discussion in #10355]\r\n- [x] [s-m] `shouldComponentUpdate` with functional components [decision: delete it for now, add it in a minor] (@sebmarkbage) https://github.com/facebook/react/pull/10371\r\n- [x] There is a report that Google crawler can’t render the page using 16 ([link](https://www.reddit.com/r/javascript/comments/6pqrz5/react_16_beta/dkrgvzj/?utm_content=permalink&utm_medium=front&utm_source=reddit&utm_name=javascript)). (@flarnie)\r\n- [x] <s>Check if https://github.com/facebook/react/issues/10405 is a real regression</s> (No, it's been fixed looks like.)\r\n- [x] [s-m] Ensure type validation didn't regress when we enabled new features https://github.com/facebook/react/issues/9577 (@gaearon)\r\n- [x] <s>Decide if we want to break value attribute syncing behavior (https://github.com/facebook/react/pull/10150)</s> [decided to postpone until 17]\r\n- [x] [s-m] Decide if we want to stop calling `componentDidUpdate` from shallow renderer (https://github.com/facebook/react/pull/10372)\r\n- [x] Decide: what do we do about polyfills?\r\n  - [x] Map/Set (need to throw early, @gaearon) https://github.com/facebook/react/pull/10356\r\n  - [x] Object.assign (keep or assume it's there?) https://github.com/facebook/react/pull/10280 [decision: keep it bundled for now]\r\n  - [x] rAF [decision: keep it required]\r\n(Maybe use the same approach/standard as Relay? https://facebook.github.io/relay/docs/relay-modern.html#javascript-environment-requirements)\r\n- [x] Big missing pieces\r\n  - [x] Add server rendering and reviving\r\n  - [x] Add shallow renderer\r\n    - [x] We seem to be decoupling shallow renderer from ReactDOM. However in 15 `findDOMNode()` works inside of shallow renderer because it contains ReactDOM injections. Is this going to be a breaking change? (@gaearon) [decision: let's not support this]\r\n- [x] Decide on whether to include warning whitelisting/blacklisting (@bvaughn) [decision: not in 16.0]\r\n- [x] Maybe: Switch to flat bundles (no more `react-dom/lib/*`, internals are truly private)\r\n  - [x] Decide: plan forward for popular projects depending on internals (`react-native-web`, `react-tap-event-plugin`) (might not block final)\r\n     - [x] `EventPluginHub` is \"dangerously\" exported from flat bundle for tap event plugin\r\n     - [x] `react-native-web` probably needs more internals, coordinate with @necolas (done in https://github.com/facebook/react/pull/10138)\r\n- [x] <s>Support `class` and `for` https://github.com/facebook/react/pull/10169 (@gaearon)</s> [decision: not gonna do this now]\r\n- [x] Feature parity for renderers\r\n  - [x] Shallow renderer supports strings and arrays\r\n  - [x] Server renderer supports strings and arrays\r\n  - [x] <s>Server renderer supports error boundaries</s> [doesn't make sense conceptually right now]\r\n- [x] Decide on whether to put `react-current-owner` in its own package to reduce issues caused by npm duplication [not now]\r\n- [x] Decide on DOMServer entry points (`react-dom/server` and `react-dom/node-stream` seem inconsistent with each other. Why is only one of them `server`?) (@gaearon) https://github.com/facebook/react/pull/10362\r\n  * These were configured separately for Prepack. One target includes both the pure JS APIs and the Node APIs and the other only includes the pure JS APIs. We could combine them into a single `react-dom/server` entry point and add a new `renderToString` method on it.\r\n- [x] Decide: Do we care about catching errors in events in the initial release? [no]\r\n- [x] Error messages (@flarnie) (Dan: I moved this back to blockers because I don't think we can release with unclear messages. Error boundaries are a huge change in open source and we must have documentation and a link before we start unmounting roots.)\r\n  - [x] \"You can add an error boundary\" message should link to docs\r\n  - [x] duplicate key warning for children with same keys is out of date; claims child will be ignored but now we will only render second one. (easy to add to 16 final or sooner) (@sebmarkbage)\r\n- [x] Verify that the bundles produced are valid in strict mode. https://github.com/facebook/react/issues/10294#issuecomment-319490960 (@bvaughn)\r\n- [x] Testing the Beta: (React team in general)\r\n  - [x] Share the beta and proposed release date with library authors several weeks in advance\r\n  - [x] Triage any issues reported with beta.\r\n</details>\r\n</details>",
  "closed_by": {
    "login": "gaearon",
    "id": 810438,
    "node_id": "MDQ6VXNlcjgxMDQzOA==",
    "avatar_url": "https://avatars0.githubusercontent.com/u/810438?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/gaearon",
    "html_url": "https://github.com/gaearon",
    "followers_url": "https://api.github.com/users/gaearon/followers",
    "following_url": "https://api.github.com/users/gaearon/following{/other_user}",
    "gists_url": "https://api.github.com/users/gaearon/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/gaearon/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/gaearon/subscriptions",
    "organizations_url": "https://api.github.com/users/gaearon/orgs",
    "repos_url": "https://api.github.com/users/gaearon/repos",
    "events_url": "https://api.github.com/users/gaearon/events{/privacy}",
    "received_events_url": "https://api.github.com/users/gaearon/received_events",
    "type": "User",
    "site_admin": false
  }
}

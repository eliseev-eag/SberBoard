{
  "url": "https://api.github.com/repos/facebook/react/issues/5682",
  "repository_url": "https://api.github.com/repos/facebook/react",
  "labels_url": "https://api.github.com/repos/facebook/react/issues/5682/labels{/name}",
  "comments_url": "https://api.github.com/repos/facebook/react/issues/5682/comments",
  "events_url": "https://api.github.com/repos/facebook/react/issues/5682/events",
  "html_url": "https://github.com/facebook/react/issues/5682",
  "id": 122639089,
  "node_id": "MDU6SXNzdWUxMjI2MzkwODk=",
  "number": 5682,
  "title": "Click events delayed until after render, causing clicks on incorrect nodes",
  "user": {
    "login": "zachhale",
    "id": 3869,
    "node_id": "MDQ6VXNlcjM4Njk=",
    "avatar_url": "https://avatars1.githubusercontent.com/u/3869?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/zachhale",
    "html_url": "https://github.com/zachhale",
    "followers_url": "https://api.github.com/users/zachhale/followers",
    "following_url": "https://api.github.com/users/zachhale/following{/other_user}",
    "gists_url": "https://api.github.com/users/zachhale/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/zachhale/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/zachhale/subscriptions",
    "organizations_url": "https://api.github.com/users/zachhale/orgs",
    "repos_url": "https://api.github.com/users/zachhale/repos",
    "events_url": "https://api.github.com/users/zachhale/events{/privacy}",
    "received_events_url": "https://api.github.com/users/zachhale/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 4,
  "created_at": "2015-12-17T01:04:01Z",
  "updated_at": "2019-07-05T00:31:57Z",
  "closed_at": "2015-12-17T02:10:09Z",
  "author_association": "NONE",
  "body": "I've got a weird one here which will take a bit to explain. In my app we have a filter drop down menu which when opened, shows options which appears over a large chunk of content which is composed of a number of clickable tiles, one of which appears underneath the filter menu.\n\nWhen the filter menu is opened and clicked, react is watching an onClick event which responds by doing `event.preventDefault()` and `event.stopPropagation()` then does a `setState()` triggering the URL to update and all of the tiles to re-render in a blocking manner as per React's way of life. This works just fine with a single click.\n\nThe tricky part comes when two or more clicks happen on this \"dead\" dropdown menu element while all of the rest of the page is re-rendering. Since the tiles are numerous and all contain complex graphs, the page takes upwards 2 seconds to render on my new Macbook Pro, blocking the UI for that entire time while React executes a gigantic amount of pure javascript to re-calculate render these graphs.\n\n![image](https://cloud.githubusercontent.com/assets/3869/11858373/d40de362-a415-11e5-977b-909b5f2fa41e.png)\n(Oof!)\n\nOnce all of those graphs are re-calculated and that gigantic blocking function completes, all additional clicks on that menu all then execute, but not in the way I would expect. Instead of clicking on the menu some more, they now seem to click on whatever appeared as a result of the re-rendering, which in this case are clickable tiles and the double click now causes the app to switch pages again to view details for that tile. It seems as though React is keeping track of the X/Y coordinates of the click and applying them to whatever is there after the re-render happens.\n\nThings I have tried but haven't helped\n- tried capturing the click on many levels of the filter drop down menu to try to prevent event propogation (but realized it wasn't even clicking on the menu)\n- deferred executing the `setState` so that hopefully the clicks could pile up before rendering. All this solved was making the menu go away and then you'd just keep clicking on the tiles that are there before the re-render, but then once it re-rendered it actually clicked on the new tiles. So confusing!\n\n**Is this expected behavior?** I understand that the events are being queued until later, but I would expect the click events to apply to the elements that were there when the events happened, not on whatever shows up after the render.\n\nIf this is expected, why and do you have suggestions for working around this?\n",
  "closed_by": {
    "login": "jimfb",
    "id": 9595985,
    "node_id": "MDQ6VXNlcjk1OTU5ODU=",
    "avatar_url": "https://avatars3.githubusercontent.com/u/9595985?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/jimfb",
    "html_url": "https://github.com/jimfb",
    "followers_url": "https://api.github.com/users/jimfb/followers",
    "following_url": "https://api.github.com/users/jimfb/following{/other_user}",
    "gists_url": "https://api.github.com/users/jimfb/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/jimfb/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/jimfb/subscriptions",
    "organizations_url": "https://api.github.com/users/jimfb/orgs",
    "repos_url": "https://api.github.com/users/jimfb/repos",
    "events_url": "https://api.github.com/users/jimfb/events{/privacy}",
    "received_events_url": "https://api.github.com/users/jimfb/received_events",
    "type": "User",
    "site_admin": false
  }
}

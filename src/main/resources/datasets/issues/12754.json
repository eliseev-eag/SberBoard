{
  "url": "https://api.github.com/repos/facebook/react/issues/12754",
  "repository_url": "https://api.github.com/repos/facebook/react",
  "labels_url": "https://api.github.com/repos/facebook/react/issues/12754/labels{/name}",
  "comments_url": "https://api.github.com/repos/facebook/react/issues/12754/comments",
  "events_url": "https://api.github.com/repos/facebook/react/issues/12754/events",
  "html_url": "https://github.com/facebook/react/issues/12754",
  "id": 320729350,
  "node_id": "MDU6SXNzdWUzMjA3MjkzNTA=",
  "number": 12754,
  "title": "Give a `ssrReconciliation={true}` attribute for the developer to ask React to patch up the rendered content if they are not identical between the server and the client",
  "user": {
    "login": "benpptung",
    "id": 364314,
    "node_id": "MDQ6VXNlcjM2NDMxNA==",
    "avatar_url": "https://avatars0.githubusercontent.com/u/364314?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/benpptung",
    "html_url": "https://github.com/benpptung",
    "followers_url": "https://api.github.com/users/benpptung/followers",
    "following_url": "https://api.github.com/users/benpptung/following{/other_user}",
    "gists_url": "https://api.github.com/users/benpptung/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/benpptung/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/benpptung/subscriptions",
    "organizations_url": "https://api.github.com/users/benpptung/orgs",
    "repos_url": "https://api.github.com/users/benpptung/repos",
    "events_url": "https://api.github.com/users/benpptung/events{/privacy}",
    "received_events_url": "https://api.github.com/users/benpptung/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 1,
  "created_at": "2018-05-07T09:06:25Z",
  "updated_at": "2018-05-07T12:59:22Z",
  "closed_at": "2018-05-07T12:59:22Z",
  "author_association": "NONE",
  "body": "<!--\r\n  Note: if the issue is about documentation or the website, please file it at:\r\n  https://github.com/reactjs/reactjs.org/issues/new\r\n-->\r\n\r\n**Do you want to request a *feature* or report a *bug*?**\r\n\r\nfeature\r\n\r\n**What is the current behavior?**\r\n\r\nReact expects that the rendered content is identical between the server and the client. If you intentionally need to render something different on the server and the client, you have to do a two-pass rendering like https://github.com/facebook/react/issues/8017#issuecomment-256351955\r\n\r\nIf an attribute is derived from screen size, since we don't know the real screen size in the server side, we might do a 2 pass rendering like following:\r\n\r\n```\r\n\r\nconstructor(props) {\r\n  super(props)\r\n  this.state = { hasMounted: false }\r\n  \r\n  this.styles = Object.defineProperties({}, {\r\n    'container': { get: _=> {\r\n       if (typeof window == 'undefined') return { height: 300 }\r\n       let height = this.props.viewsize.height * 0.67\r\n       return this.state.hasMounted ? { height } : { height: height - 1 }\r\n    }}\r\n  })\r\n}\r\n\r\ncomponentDidMount() {\r\n    this.setState({ hasMounted: true })\r\n}\r\n\r\nrender() {\r\n  let s = this.styles\r\n  return (\r\n    <div  style={s['container']}>\r\n  </div>\r\n  )\r\n}\r\n```\r\nIn the above code, I demonstrate that I have to intentionally render a wrong height initially in the browser so I can update it in the second run. Or, the DOM will keep inconsistent with the vDOM, because the 2 pass renderings keep un-changed, React won't update the DOM. \r\n\r\n**What is the expected behavior?**\r\n\r\nGive a `ssrReconciliation={true}` attribute for the developer to ask React to patch up if a single element's attribute or text content is unavoidably different between the server and the client when hydrating. \r\n\r\nAnd if it is lucky the rendered content is identical between the server and the client, it will do nothing.\r\n\r\n",
  "closed_by": {
    "login": "gaearon",
    "id": 810438,
    "node_id": "MDQ6VXNlcjgxMDQzOA==",
    "avatar_url": "https://avatars0.githubusercontent.com/u/810438?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/gaearon",
    "html_url": "https://github.com/gaearon",
    "followers_url": "https://api.github.com/users/gaearon/followers",
    "following_url": "https://api.github.com/users/gaearon/following{/other_user}",
    "gists_url": "https://api.github.com/users/gaearon/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/gaearon/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/gaearon/subscriptions",
    "organizations_url": "https://api.github.com/users/gaearon/orgs",
    "repos_url": "https://api.github.com/users/gaearon/repos",
    "events_url": "https://api.github.com/users/gaearon/events{/privacy}",
    "received_events_url": "https://api.github.com/users/gaearon/received_events",
    "type": "User",
    "site_admin": false
  }
}

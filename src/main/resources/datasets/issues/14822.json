{
  "url": "https://api.github.com/repos/facebook/react/issues/14822",
  "repository_url": "https://api.github.com/repos/facebook/react",
  "labels_url": "https://api.github.com/repos/facebook/react/issues/14822/labels{/name}",
  "comments_url": "https://api.github.com/repos/facebook/react/issues/14822/comments",
  "events_url": "https://api.github.com/repos/facebook/react/issues/14822/events",
  "html_url": "https://github.com/facebook/react/issues/14822",
  "id": 408893299,
  "node_id": "MDU6SXNzdWU0MDg4OTMyOTk=",
  "number": 14822,
  "title": "XSS is doubly escaping when using SSR and `ReactDOM.hydrate`",
  "user": {
    "login": "akoumjian",
    "id": 733988,
    "node_id": "MDQ6VXNlcjczMzk4OA==",
    "avatar_url": "https://avatars3.githubusercontent.com/u/733988?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/akoumjian",
    "html_url": "https://github.com/akoumjian",
    "followers_url": "https://api.github.com/users/akoumjian/followers",
    "following_url": "https://api.github.com/users/akoumjian/following{/other_user}",
    "gists_url": "https://api.github.com/users/akoumjian/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/akoumjian/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/akoumjian/subscriptions",
    "organizations_url": "https://api.github.com/users/akoumjian/orgs",
    "repos_url": "https://api.github.com/users/akoumjian/repos",
    "events_url": "https://api.github.com/users/akoumjian/events{/privacy}",
    "received_events_url": "https://api.github.com/users/akoumjian/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 5,
  "created_at": "2019-02-11T17:29:05Z",
  "updated_at": "2019-02-12T17:26:12Z",
  "closed_at": "2019-02-12T17:10:06Z",
  "author_association": "NONE",
  "body": "**Do you want to request a *feature* or report a *bug*?**\r\nbug\r\n\r\n**What is the current behavior?**\r\nI'd like to preface this by saying I have read all of the existing documentation on XSS and methods to avoid strings being escaped. The behavior here cannot be adequately addressed with the current suggestions.\r\n\r\nHTML that is escaped in SSR using `ReactDOMServer.renderToString` are escaped a second time on the client using `ReactDOM.hydrate`. This results in entities like `&` being displayed as `&amp;` after being escaped once on the server and a second time on the client.\r\n\r\n**If the current behavior is a bug, please provide the steps to reproduce and if possible a minimal demo of the problem. Your bug will get fixed much faster if we can run your code and it doesn't have dependencies other than React. Paste the link to your JSFiddle (https://jsfiddle.net/Luktwrdm/) or CodeSandbox (https://codesandbox.io/s/new) example below:**\r\n1. Have a component that renders a string containing `&`, such as inside a span or p.\r\n2. Render the page using ReactDOMServer in node.js, and then use `ReactDOM.hydrate` on the client. Do NOT do anything that will trigger a re-render of the page.\r\n3. See that the ampersand has been doubly escaped and appears to the user like `&amp;`.\r\n\r\nDifficult to set up a live example with SSR. I am happy to send a private link to a live site that is experiencing the issue.\r\n\r\n**What is the expected behavior?**\r\nIdeally I would expect the `ReactDOM.hydrate` method to detect when entities like `&` are already escape and not do it again.\r\n\r\n**Which versions of React, and which browser / OS are affected by this issue? Did this work in previous versions of React?**\r\nReact 16.7.0\r\nOS: OSX Chrome\r\n",
  "closed_by": {
    "login": "akoumjian",
    "id": 733988,
    "node_id": "MDQ6VXNlcjczMzk4OA==",
    "avatar_url": "https://avatars3.githubusercontent.com/u/733988?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/akoumjian",
    "html_url": "https://github.com/akoumjian",
    "followers_url": "https://api.github.com/users/akoumjian/followers",
    "following_url": "https://api.github.com/users/akoumjian/following{/other_user}",
    "gists_url": "https://api.github.com/users/akoumjian/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/akoumjian/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/akoumjian/subscriptions",
    "organizations_url": "https://api.github.com/users/akoumjian/orgs",
    "repos_url": "https://api.github.com/users/akoumjian/repos",
    "events_url": "https://api.github.com/users/akoumjian/events{/privacy}",
    "received_events_url": "https://api.github.com/users/akoumjian/received_events",
    "type": "User",
    "site_admin": false
  }
}

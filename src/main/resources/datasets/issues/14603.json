{
  "url": "https://api.github.com/repos/facebook/react/issues/14603",
  "repository_url": "https://api.github.com/repos/facebook/react",
  "labels_url": "https://api.github.com/repos/facebook/react/issues/14603/labels{/name}",
  "comments_url": "https://api.github.com/repos/facebook/react/issues/14603/comments",
  "events_url": "https://api.github.com/repos/facebook/react/issues/14603/events",
  "html_url": "https://github.com/facebook/react/issues/14603",
  "id": 399614997,
  "node_id": "MDU6SXNzdWUzOTk2MTQ5OTc=",
  "number": 14603,
  "title": "Allow for named imports in React.lazy",
  "user": {
    "login": "gnestor",
    "id": 512354,
    "node_id": "MDQ6VXNlcjUxMjM1NA==",
    "avatar_url": "https://avatars3.githubusercontent.com/u/512354?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/gnestor",
    "html_url": "https://github.com/gnestor",
    "followers_url": "https://api.github.com/users/gnestor/followers",
    "following_url": "https://api.github.com/users/gnestor/following{/other_user}",
    "gists_url": "https://api.github.com/users/gnestor/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/gnestor/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/gnestor/subscriptions",
    "organizations_url": "https://api.github.com/users/gnestor/orgs",
    "repos_url": "https://api.github.com/users/gnestor/repos",
    "events_url": "https://api.github.com/users/gnestor/events{/privacy}",
    "received_events_url": "https://api.github.com/users/gnestor/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 5,
  "created_at": "2019-01-16T02:01:38Z",
  "updated_at": "2019-06-27T06:47:18Z",
  "closed_at": "2019-01-16T16:49:28Z",
  "author_association": "NONE",
  "body": "**Do you want to request a *feature* or report a *bug*?**\r\n\r\nFeature\r\n\r\n**What is the current behavior?**\r\n\r\nCurrently, React.lazy only accepts an anonymous function that returns a dynamic import object. `readLazyComponentType` then [pulls the default export off of that import object](https://github.com/facebook/react/blob/f777d196e0943b3975c762e15e35b319a9b85902/packages/react-reconciler/src/ReactFiberLazyComponent.js#L53). This does not allow for importing named imports from a module. \r\n\r\nThe official workaround, according to [the React docs](https://reactjs.org/docs/code-splitting.html#named-exports):\r\n\r\n> If the module you want to import uses named exports, you can create an intermediate module that reexports it as the default.\r\n\r\nAnother, [more concise workaround](https://github.com/facebook/react/issues/14390#issuecomment-444494386):\r\n\r\n```js\r\nconst Contacts = React.lazy(() =>\r\n  import('./Contacts.js').then(module => ({ default: module.Contacts }))\r\n);\r\n```\r\n\r\n**What is the proposed behavior?**\r\n\r\nI'd be willing to submit a PR that optionally accepts named imports but defaults to importing the default import. It would look like:\r\n\r\n```diff\r\nthenable.then(\r\n-  moduleObject => {\r\n+  resolvedComponent => {\r\n    if (lazyComponent._status === Pending) {\r\n-      const defaultExport = moduleObject.default;\r\n+      if (resolvedComponent.default) {\r\n+        resolvedComponent = resolvedComponent.default\r\n+      }\r\n      if (__DEV__) {\r\n-        if (defaultExport === undefined) {\r\n+        if (resolvedComponent === undefined) {\r\n          warning(\r\n            false,\r\n-            'lazy: Expected the result of a dynamic import() call. ' +\r\n+            'lazy: Expected a promise that resolves to a React component. ' +\r\n              'Instead received: %s\\n\\nYour code should look like: \\n  ' +\r\n              \"const MyComponent = lazy(() => import('./MyComponent'))\",\r\n-            moduleObject,\r\n+            resolvedComponent,\r\n          );\r\n        }\r\n      }\r\n      lazyComponent._status = Resolved;\r\n-      lazyComponent._result = defaultExport;\r\n+      lazyComponent._result = resolvedComponent;\r\n    }\r\n  },\r\n  error => {\r\n    if (lazyComponent._status === Pending) {\r\n      lazyComponent._status = Rejected;\r\n      lazyComponent._result = error;\r\n    }\r\n  },\r\n);\r\n```\r\n\r\nThis will also require some updates to the docs.\r\n\r\nLet me know your thoughts before I start...\r\n\r\n**Which versions of React, and which browser / OS are affected by this issue? Did this work in previous versions of React?**\r\n\r\nreact@16.7.0, Chrome 71, macOS 10.14\r\n\r\ncc @acdlite @gaearon \r\n",
  "closed_by": {
    "login": "gaearon",
    "id": 810438,
    "node_id": "MDQ6VXNlcjgxMDQzOA==",
    "avatar_url": "https://avatars0.githubusercontent.com/u/810438?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/gaearon",
    "html_url": "https://github.com/gaearon",
    "followers_url": "https://api.github.com/users/gaearon/followers",
    "following_url": "https://api.github.com/users/gaearon/following{/other_user}",
    "gists_url": "https://api.github.com/users/gaearon/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/gaearon/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/gaearon/subscriptions",
    "organizations_url": "https://api.github.com/users/gaearon/orgs",
    "repos_url": "https://api.github.com/users/gaearon/repos",
    "events_url": "https://api.github.com/users/gaearon/events{/privacy}",
    "received_events_url": "https://api.github.com/users/gaearon/received_events",
    "type": "User",
    "site_admin": false
  }
}

{
  "url": "https://api.github.com/repos/facebook/react/issues/7107",
  "repository_url": "https://api.github.com/repos/facebook/react",
  "labels_url": "https://api.github.com/repos/facebook/react/issues/7107/labels{/name}",
  "comments_url": "https://api.github.com/repos/facebook/react/issues/7107/comments",
  "events_url": "https://api.github.com/repos/facebook/react/issues/7107/events",
  "html_url": "https://github.com/facebook/react/pull/7107",
  "id": 161966787,
  "node_id": "MDExOlB1bGxSZXF1ZXN0NzQ5ODYwODM=",
  "number": 7107,
  "title": "BeforeInput is fired with a wrong text at a wrong time on IE",
  "user": {
    "login": "msmania",
    "id": 1780142,
    "node_id": "MDQ6VXNlcjE3ODAxNDI=",
    "avatar_url": "https://avatars0.githubusercontent.com/u/1780142?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/msmania",
    "html_url": "https://github.com/msmania",
    "followers_url": "https://api.github.com/users/msmania/followers",
    "following_url": "https://api.github.com/users/msmania/following{/other_user}",
    "gists_url": "https://api.github.com/users/msmania/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/msmania/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/msmania/subscriptions",
    "organizations_url": "https://api.github.com/users/msmania/orgs",
    "repos_url": "https://api.github.com/users/msmania/repos",
    "events_url": "https://api.github.com/users/msmania/events{/privacy}",
    "received_events_url": "https://api.github.com/users/msmania/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 196858374,
      "node_id": "MDU6TGFiZWwxOTY4NTgzNzQ=",
      "url": "https://api.github.com/repos/facebook/react/labels/CLA%20Signed",
      "name": "CLA Signed",
      "color": "e7e7e7",
      "default": false
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": {
    "login": "sophiebits",
    "id": 6820,
    "node_id": "MDQ6VXNlcjY4MjA=",
    "avatar_url": "https://avatars2.githubusercontent.com/u/6820?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/sophiebits",
    "html_url": "https://github.com/sophiebits",
    "followers_url": "https://api.github.com/users/sophiebits/followers",
    "following_url": "https://api.github.com/users/sophiebits/following{/other_user}",
    "gists_url": "https://api.github.com/users/sophiebits/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/sophiebits/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/sophiebits/subscriptions",
    "organizations_url": "https://api.github.com/users/sophiebits/orgs",
    "repos_url": "https://api.github.com/users/sophiebits/repos",
    "events_url": "https://api.github.com/users/sophiebits/events{/privacy}",
    "received_events_url": "https://api.github.com/users/sophiebits/received_events",
    "type": "User",
    "site_admin": false
  },
  "assignees": [
    {
      "login": "sophiebits",
      "id": 6820,
      "node_id": "MDQ6VXNlcjY4MjA=",
      "avatar_url": "https://avatars2.githubusercontent.com/u/6820?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sophiebits",
      "html_url": "https://github.com/sophiebits",
      "followers_url": "https://api.github.com/users/sophiebits/followers",
      "following_url": "https://api.github.com/users/sophiebits/following{/other_user}",
      "gists_url": "https://api.github.com/users/sophiebits/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sophiebits/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sophiebits/subscriptions",
      "organizations_url": "https://api.github.com/users/sophiebits/orgs",
      "repos_url": "https://api.github.com/users/sophiebits/repos",
      "events_url": "https://api.github.com/users/sophiebits/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sophiebits/received_events",
      "type": "User",
      "site_admin": false
    },
    {
      "login": "hellendag",
      "id": 2823852,
      "node_id": "MDQ6VXNlcjI4MjM4NTI=",
      "avatar_url": "https://avatars3.githubusercontent.com/u/2823852?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/hellendag",
      "html_url": "https://github.com/hellendag",
      "followers_url": "https://api.github.com/users/hellendag/followers",
      "following_url": "https://api.github.com/users/hellendag/following{/other_user}",
      "gists_url": "https://api.github.com/users/hellendag/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/hellendag/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/hellendag/subscriptions",
      "organizations_url": "https://api.github.com/users/hellendag/orgs",
      "repos_url": "https://api.github.com/users/hellendag/repos",
      "events_url": "https://api.github.com/users/hellendag/events{/privacy}",
      "received_events_url": "https://api.github.com/users/hellendag/received_events",
      "type": "User",
      "site_admin": false
    }
  ],
  "milestone": {
    "url": "https://api.github.com/repos/facebook/react/milestones/33",
    "html_url": "https://github.com/facebook/react/milestone/33",
    "labels_url": "https://api.github.com/repos/facebook/react/milestones/33/labels",
    "id": 1991793,
    "node_id": "MDk6TWlsZXN0b25lMTk5MTc5Mw==",
    "number": 33,
    "title": "15.3.2",
    "description": "",
    "creator": {
      "login": "zpao",
      "id": 8445,
      "node_id": "MDQ6VXNlcjg0NDU=",
      "avatar_url": "https://avatars1.githubusercontent.com/u/8445?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/zpao",
      "html_url": "https://github.com/zpao",
      "followers_url": "https://api.github.com/users/zpao/followers",
      "following_url": "https://api.github.com/users/zpao/following{/other_user}",
      "gists_url": "https://api.github.com/users/zpao/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/zpao/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/zpao/subscriptions",
      "organizations_url": "https://api.github.com/users/zpao/orgs",
      "repos_url": "https://api.github.com/users/zpao/repos",
      "events_url": "https://api.github.com/users/zpao/events{/privacy}",
      "received_events_url": "https://api.github.com/users/zpao/received_events",
      "type": "User",
      "site_admin": false
    },
    "open_issues": 0,
    "closed_issues": 17,
    "state": "closed",
    "created_at": "2016-09-08T18:32:16Z",
    "updated_at": "2016-09-19T17:53:29Z",
    "due_on": null,
    "closed_at": "2016-09-19T17:53:29Z"
  },
  "comments": 4,
  "created_at": "2016-06-23T16:30:52Z",
  "updated_at": "2016-09-15T23:07:18Z",
  "closed_at": "2016-09-13T18:15:18Z",
  "author_association": "CONTRIBUTOR",
  "pull_request": {
    "url": "https://api.github.com/repos/facebook/react/pulls/7107",
    "html_url": "https://github.com/facebook/react/pull/7107",
    "diff_url": "https://github.com/facebook/react/pull/7107.diff",
    "patch_url": "https://github.com/facebook/react/pull/7107.patch"
  },
  "body": "This patch addresses a typing issue with Japanese IME on Internet Explorer.\nThe issue is related to the known issue about Korean IME documented in draft.js,\nbut different.   Korean issue is not addressed by this patch.\nThis patch also adds a new testcase to cover BeforeInputEventPlugin.\n### Repro steps:\n1. Open IE11 and navigate to https://facebook.github.io/draft-js/\n2. Turn on Japanese IME and type Japanese text on the 'Tell a story' box\n### Issue description:\n\nThe 1st candaidate is always committed even when we try to commit the 2nd\nor later candidate.  Since facebook.com is using draft.js, this issue can\nbe reproed on the NewsFeed Post box of facebook.com.\n### Root cause/Fix:\n\nReact creates a browser-independent `beforeInput` event to match W3C spec\nfrom the combination of the existing events (e.g. compositionstart, keyup,\ntextnput, and etc.).  The problem is that in IE, onBeforeInput is fired with\na wrong text at a wrong time.\n\nBasically React uses `textInput` events to create beforeInput.  However, IE\nfires an event named `textinput` (all lowercases), that is not useful due to\na couple of IE's incorrect behaviors as below.\n1. With Japanese IME, after one or more implicit commits, when a user ends\n   composition, a `textinput` is fired, but it contains only the last composition\n   text.\n2. With Japanese IME, a `textinput` event does not contain an ideographic\n   character (U+3000) when a user hits a space key not in composition state.\n\nAs a fallback, React stores a text of a target element at compositionend or\nadditional keyboard/mouse events, and fires `beforeinput` at compositionend\nwith the stored text.  One of the additional events is keyUp with keyCode=32.\n\nWith Korean and Chinese IME, a space key is one of keys to end composition.\nWith Japanese IME, however, a space key does not mean the end of composition\nbut just switching candidates.  As a result, the first candidate is stored as\na fallback text, and it is displayed even if a user selects the 2nd or\na subsequent candidate.\n\nThe fix is that we don't use additional keyboard/mouse events if composition\nevent is available.  IE9-11 fires composition events even though its event data\nis not correct.  It's good enough to use as a time to store a fallback text.\n",
  "closed_by": {
    "login": "sophiebits",
    "id": 6820,
    "node_id": "MDQ6VXNlcjY4MjA=",
    "avatar_url": "https://avatars2.githubusercontent.com/u/6820?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/sophiebits",
    "html_url": "https://github.com/sophiebits",
    "followers_url": "https://api.github.com/users/sophiebits/followers",
    "following_url": "https://api.github.com/users/sophiebits/following{/other_user}",
    "gists_url": "https://api.github.com/users/sophiebits/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/sophiebits/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/sophiebits/subscriptions",
    "organizations_url": "https://api.github.com/users/sophiebits/orgs",
    "repos_url": "https://api.github.com/users/sophiebits/repos",
    "events_url": "https://api.github.com/users/sophiebits/events{/privacy}",
    "received_events_url": "https://api.github.com/users/sophiebits/received_events",
    "type": "User",
    "site_admin": false
  }
}

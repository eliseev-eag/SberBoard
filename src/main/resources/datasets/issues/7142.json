{
  "url": "https://api.github.com/repos/facebook/react/issues/7142",
  "repository_url": "https://api.github.com/repos/facebook/react",
  "labels_url": "https://api.github.com/repos/facebook/react/issues/7142/labels{/name}",
  "comments_url": "https://api.github.com/repos/facebook/react/issues/7142/comments",
  "events_url": "https://api.github.com/repos/facebook/react/issues/7142/events",
  "html_url": "https://github.com/facebook/react/issues/7142",
  "id": 162816030,
  "node_id": "MDU6SXNzdWUxNjI4MTYwMzA=",
  "number": 7142,
  "title": "Quick removal and addition of animated CSS class results in no animation",
  "user": {
    "login": "olalonde",
    "id": 416585,
    "node_id": "MDQ6VXNlcjQxNjU4NQ==",
    "avatar_url": "https://avatars3.githubusercontent.com/u/416585?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/olalonde",
    "html_url": "https://github.com/olalonde",
    "followers_url": "https://api.github.com/users/olalonde/followers",
    "following_url": "https://api.github.com/users/olalonde/following{/other_user}",
    "gists_url": "https://api.github.com/users/olalonde/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/olalonde/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/olalonde/subscriptions",
    "organizations_url": "https://api.github.com/users/olalonde/orgs",
    "repos_url": "https://api.github.com/users/olalonde/repos",
    "events_url": "https://api.github.com/users/olalonde/events{/privacy}",
    "received_events_url": "https://api.github.com/users/olalonde/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 21,
  "created_at": "2016-06-29T00:22:30Z",
  "updated_at": "2018-09-21T08:47:45Z",
  "closed_at": "2016-06-29T21:08:13Z",
  "author_association": "NONE",
  "body": "I am trying to call `setState({ flash: false })` followed by `setState({ flash: 'up' })` which should remove the flash class from the DOM element and add it again, therefore triggering the css animation defined on that class (it only works the first time). \n\nThis is not working as expected, unless I introduce some timeouts. The first time the class is added, the animation is triggered. But subsequent calls to `componentWillReceiveProps` fail to trigger the animation. I'm not sure if this is an issue with the way React updates the DOM or an inherent limitation of CSS animations. I know React has some specialised utilities for animations but I'd rather keep the code below if there's any way to fix it.\n\nStat.js\n\n``` javascript\nimport React, { Component } from 'react'\nimport { Link } from 'react-router'\nimport styles from './Stat.scss'\n\nexport default class Stat extends Component {\n  constructor(props) {\n    super(props)\n    this.state = {\n      flash: false,\n    }\n  }\n  componentWillReceiveProps(nextProps) {\n    if (nextProps.count !== this.props.count) {\n      const flash = nextProps.count > this.props.count\n        ? 'Up'\n        : 'Down'\n      this.setState({ flash: false }, () => {\n        this.setState({ flash })\n      })\n    }\n  }\n  render() {\n    const { count, name, href } = this.props\n    const { flash } = this.state\n    const flashClass = flash ? styles[`flash${flash}`] : ''\n    return (\n      <Link to={href} className=\"stat-link\">\n        <div className={`stat-number ${flashClass}`}>\n          {count}\n        </div>\n        <div className=\"stat-label\">{name}</div>\n      </Link>\n    )\n  }\n}\n\n```\n\nStat.scss\n\n``` scss\n$highlight-up-color: green;\n$highlight-down-color: red;\n\n@keyframes highlight-up {\n  0% {\n    color: $highlight-up-color;\n  }\n  100% {\n    color: default;\n  }\n}\n\n@keyframes highlight-down {\n  0% {\n    color: $highlight-down-color;\n  }\n  100% {\n    color: default;\n  }\n}\n\n.flashUp {\n  animation: highlight-up 2s;\n}\n.flashDown {\n  animation: highlight-down 2s;\n}\n\n```\n",
  "closed_by": {
    "login": "gaearon",
    "id": 810438,
    "node_id": "MDQ6VXNlcjgxMDQzOA==",
    "avatar_url": "https://avatars0.githubusercontent.com/u/810438?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/gaearon",
    "html_url": "https://github.com/gaearon",
    "followers_url": "https://api.github.com/users/gaearon/followers",
    "following_url": "https://api.github.com/users/gaearon/following{/other_user}",
    "gists_url": "https://api.github.com/users/gaearon/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/gaearon/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/gaearon/subscriptions",
    "organizations_url": "https://api.github.com/users/gaearon/orgs",
    "repos_url": "https://api.github.com/users/gaearon/repos",
    "events_url": "https://api.github.com/users/gaearon/events{/privacy}",
    "received_events_url": "https://api.github.com/users/gaearon/received_events",
    "type": "User",
    "site_admin": false
  }
}

{
  "url": "https://api.github.com/repos/facebook/react/issues/9959",
  "repository_url": "https://api.github.com/repos/facebook/react",
  "labels_url": "https://api.github.com/repos/facebook/react/issues/9959/labels{/name}",
  "comments_url": "https://api.github.com/repos/facebook/react/issues/9959/comments",
  "events_url": "https://api.github.com/repos/facebook/react/issues/9959/events",
  "html_url": "https://github.com/facebook/react/issues/9959",
  "id": 235896239,
  "node_id": "MDU6SXNzdWUyMzU4OTYyMzk=",
  "number": 9959,
  "title": "BUG: version 15.6 is not working on iOS 9.3 and below (inputValueTracking.js)",
  "user": {
    "login": "morten-olsen",
    "id": 970042,
    "node_id": "MDQ6VXNlcjk3MDA0Mg==",
    "avatar_url": "https://avatars2.githubusercontent.com/u/970042?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/morten-olsen",
    "html_url": "https://github.com/morten-olsen",
    "followers_url": "https://api.github.com/users/morten-olsen/followers",
    "following_url": "https://api.github.com/users/morten-olsen/following{/other_user}",
    "gists_url": "https://api.github.com/users/morten-olsen/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/morten-olsen/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/morten-olsen/subscriptions",
    "organizations_url": "https://api.github.com/users/morten-olsen/orgs",
    "repos_url": "https://api.github.com/users/morten-olsen/repos",
    "events_url": "https://api.github.com/users/morten-olsen/events{/privacy}",
    "received_events_url": "https://api.github.com/users/morten-olsen/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 2,
  "created_at": "2017-06-14T14:21:30Z",
  "updated_at": "2017-06-15T00:11:34Z",
  "closed_at": "2017-06-14T14:24:14Z",
  "author_association": "NONE",
  "body": "It appears that version 15.6 does not work on older iOS devices (iOS 9.2 and 9.3 tested to be affected)\r\n\r\nThe root cause appears to be that `Object.getOwnPropertyDescriptor` is broken on these versions (it simply return `undefined`)\r\nThis method is used inside `src/renderers/dom/shared/inputValueTracking.js`, which causes React to break on `ReactDOM.render` causing nothing to be rendered\r\n\r\n**Error message:**\r\n```TypeError: undefined is not an object (evaluating 's.get.call')```\r\n\r\n**Stack trace:**\r\n```\r\nget — inputValueTracking.js:70\r\npostMountWrapper — ReactDOMInput.js:217\r\ns — ReactDOMComponent.js:182\r\nnotifyAll — CallbackQueue.js:76\r\nclose — ReactReconcileTransaction.js:80\r\ncloseAll — Transaction.js:209\r\nperform — Transaction.js:156\r\ns — ReactMount.js:126\r\nperform — Transaction.js:143\r\nbatchedUpdates — ReactDefaultBatchingStrategy.js:62\r\ni — ReactUpdates.js:97\r\n_renderNewRootComponent — ReactMount.js:319\r\n_renderSubtreeIntoContainer — 1497445420246.mobile.js:37:84724\r\nrender — ReactMount.js:422\r\n(anonymous function) — mobile.js:103\r\n(anonymous function) — es6.promise.js:87\r\n(anonymous function) — es6.promise.js:100\r\nl — _microtask.js:18\r\n```\r\n\r\nAffected code:\r\n```javascript\r\ntrack: function (inst) {\r\n  if (getTracker(inst)) {\r\n    return;\r\n  }\r\n  var node = ReactDOMComponentTree.getNodeFromInstance(inst);\r\n  var valueField = isCheckable(node) ? 'checked' : 'value';\r\n  var descriptor = Object.getOwnPropertyDescriptor(node.constructor.prototype, valueField);\r\n\r\n  var currentValue = '' + node[valueField];\r\n\r\n  // if someone has already defined a value bail and don't track value\r\n  // will cause over reporting of changes, but it's better then a hard failure\r\n  // (needed for certain tests that spyOn input values)\r\n  if (node.hasOwnProperty(valueField)) {\r\n    return;\r\n  }\r\n\r\n  Object.defineProperty(node, valueField, {\r\n    enumerable: descriptor.enumerable,\r\n    configurable: true,\r\n    get: function () {\r\n      return descriptor.get.call(this);\r\n    },\r\n    set: function (value) {\r\n      currentValue = '' + value;\r\n      descriptor.set.call(this, value);\r\n    }\r\n  });\r\n```",
  "closed_by": {
    "login": "gaearon",
    "id": 810438,
    "node_id": "MDQ6VXNlcjgxMDQzOA==",
    "avatar_url": "https://avatars0.githubusercontent.com/u/810438?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/gaearon",
    "html_url": "https://github.com/gaearon",
    "followers_url": "https://api.github.com/users/gaearon/followers",
    "following_url": "https://api.github.com/users/gaearon/following{/other_user}",
    "gists_url": "https://api.github.com/users/gaearon/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/gaearon/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/gaearon/subscriptions",
    "organizations_url": "https://api.github.com/users/gaearon/orgs",
    "repos_url": "https://api.github.com/users/gaearon/repos",
    "events_url": "https://api.github.com/users/gaearon/events{/privacy}",
    "received_events_url": "https://api.github.com/users/gaearon/received_events",
    "type": "User",
    "site_admin": false
  }
}

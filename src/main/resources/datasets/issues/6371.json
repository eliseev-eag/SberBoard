{
  "url": "https://api.github.com/repos/facebook/react/issues/6371",
  "repository_url": "https://api.github.com/repos/facebook/react",
  "labels_url": "https://api.github.com/repos/facebook/react/issues/6371/labels{/name}",
  "comments_url": "https://api.github.com/repos/facebook/react/issues/6371/comments",
  "events_url": "https://api.github.com/repos/facebook/react/issues/6371/events",
  "html_url": "https://github.com/facebook/react/issues/6371",
  "id": 144319010,
  "node_id": "MDU6SXNzdWUxNDQzMTkwMTA=",
  "number": 6371,
  "title": "Uncaught Invariant Violation: Must be mounted to trap events when replacing an image with a link to an image",
  "user": {
    "login": "aaronjensen",
    "id": 8588,
    "node_id": "MDQ6VXNlcjg1ODg=",
    "avatar_url": "https://avatars3.githubusercontent.com/u/8588?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/aaronjensen",
    "html_url": "https://github.com/aaronjensen",
    "followers_url": "https://api.github.com/users/aaronjensen/followers",
    "following_url": "https://api.github.com/users/aaronjensen/following{/other_user}",
    "gists_url": "https://api.github.com/users/aaronjensen/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/aaronjensen/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/aaronjensen/subscriptions",
    "organizations_url": "https://api.github.com/users/aaronjensen/orgs",
    "repos_url": "https://api.github.com/users/aaronjensen/repos",
    "events_url": "https://api.github.com/users/aaronjensen/events{/privacy}",
    "received_events_url": "https://api.github.com/users/aaronjensen/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 127893911,
      "node_id": "MDU6TGFiZWwxMjc4OTM5MTE=",
      "url": "https://api.github.com/repos/facebook/react/labels/Component:%20DOM",
      "name": "Component: DOM",
      "color": "fef2c0",
      "default": false
    },
    {
      "id": 40929151,
      "node_id": "MDU6TGFiZWw0MDkyOTE1MQ==",
      "url": "https://api.github.com/repos/facebook/react/labels/Type:%20Bug",
      "name": "Type: Bug",
      "color": "b60205",
      "default": false
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 28,
  "created_at": "2016-03-29T16:35:37Z",
  "updated_at": "2016-08-03T00:47:45Z",
  "closed_at": "2016-04-29T21:02:51Z",
  "author_association": "NONE",
  "body": "I'm having a hard time narrowing a repro down for this and there seem to be a lot of required moving parts, so I'll try to give as much information as I can.\n\nRelevant snippet of package.json:\n\n```\n    \"react\": \"15.0.0-rc.2\", // repros w/ 0.14.7 as well\n    \"react-dom\": \"15.0.0-rc.2\",\n    \"react-redux\": \"4.0.6\",\n    \"react-router\": \"2.0.0-rc5\",\n    \"react-router-redux\": \"4.0.0-rc.1\",\n    \"redux\": \"3.2.1\",\n```\n\nOur routes look something like this:\n\n```\n      <Route component={App}>\n        <Route component={LayoutNoFooter}>\n          <Route component={Page2} />\n        </Route>\n        <Route component={Layout}>\n          <Route component={Page1} />\n        </Route>\n      </Route>\n```\n\n`LayoutNoFooter` simply wraps `Layout` and passes an additional prop in.\n\nI have this component in the `Header`, which is rendered by `Layout`: https://gist.github.com/aaronjensen/86c9643ecc53ad4e9006\n\n`Header` is a react-redux connected component.\n\n`Page1` has a `componentWillUnmount` that dispatches an action that ultimately toggles `searchMode` in `HeaderLogo`. \n\nWhen I go from `Page1` to `Page2` the invariant violation fires.\n\nIf I `setTimeout` the action dispatch in `componentWillUnmount` it appears to work fine. If I replace `LayoutNoFooter` with `Layout` it appears to work fine.\n\nThe invariant violation is on the `img` tag of the `HeaderLogo`\n\n![stack](https://screenshots-dx37.s3.amazonaws.com/monosnap/Integration_Test__Hotel_Results_2016-03-28_22-35-14.png)\n\nI've tried building a repro in codepen, with a similar structure `setState` calls to simulate react-router and redux, but I suspect they are doing more that would require me to actually build a repro w/ those technologies. If that would be helpful, I can work on it over time and hopefully repro it. Maybe there's enough info here, however. Thanks!\n",
  "closed_by": {
    "login": "sophiebits",
    "id": 6820,
    "node_id": "MDQ6VXNlcjY4MjA=",
    "avatar_url": "https://avatars2.githubusercontent.com/u/6820?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/sophiebits",
    "html_url": "https://github.com/sophiebits",
    "followers_url": "https://api.github.com/users/sophiebits/followers",
    "following_url": "https://api.github.com/users/sophiebits/following{/other_user}",
    "gists_url": "https://api.github.com/users/sophiebits/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/sophiebits/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/sophiebits/subscriptions",
    "organizations_url": "https://api.github.com/users/sophiebits/orgs",
    "repos_url": "https://api.github.com/users/sophiebits/repos",
    "events_url": "https://api.github.com/users/sophiebits/events{/privacy}",
    "received_events_url": "https://api.github.com/users/sophiebits/received_events",
    "type": "User",
    "site_admin": false
  }
}

{
  "url": "https://api.github.com/repos/facebook/react/issues/14294",
  "repository_url": "https://api.github.com/repos/facebook/react",
  "labels_url": "https://api.github.com/repos/facebook/react/issues/14294/labels{/name}",
  "comments_url": "https://api.github.com/repos/facebook/react/issues/14294/comments",
  "events_url": "https://api.github.com/repos/facebook/react/issues/14294/events",
  "html_url": "https://github.com/facebook/react/issues/14294",
  "id": 382901125,
  "node_id": "MDU6SXNzdWUzODI5MDExMjU=",
  "number": 14294,
  "title": "Hooks: useEffect() more intuitive approach",
  "user": {
    "login": "demil",
    "id": 1875008,
    "node_id": "MDQ6VXNlcjE4NzUwMDg=",
    "avatar_url": "https://avatars3.githubusercontent.com/u/1875008?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/demil",
    "html_url": "https://github.com/demil",
    "followers_url": "https://api.github.com/users/demil/followers",
    "following_url": "https://api.github.com/users/demil/following{/other_user}",
    "gists_url": "https://api.github.com/users/demil/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/demil/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/demil/subscriptions",
    "organizations_url": "https://api.github.com/users/demil/orgs",
    "repos_url": "https://api.github.com/users/demil/repos",
    "events_url": "https://api.github.com/users/demil/events{/privacy}",
    "received_events_url": "https://api.github.com/users/demil/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 2,
  "created_at": "2018-11-21T00:12:15Z",
  "updated_at": "2018-11-21T18:12:09Z",
  "closed_at": "2018-11-21T18:12:09Z",
  "author_association": "NONE",
  "body": "When we have \r\n\r\n    useEffect(() => { \r\n            // this function seems to be called on initial and all subsequent renders\r\n            subscribe()\r\n            return () => { unsubscribe () } // and it is creating new function which is not even intended to be used on every render\r\n   })\r\n\r\nisn't react creating a new function on every render and function not which is not even intended to be used because it should be used only when component unmounts, and isn't this subscribe function called on every render which is not intended ( it needs to be called only on initial mount ) and then calling clean up function also on every render, or in some cases we need to wrap in to condition to handle if we need to subscribe or unsubscribe? And besides that this paradigm isn't really intuitive and semantic - subscribe in function and unsubscribe in return function. \r\n\r\nMaybe this seems to be better aproach?\r\n\r\n    useEffect(() => { \r\n                // called only once on component init, create function only once\r\n                // return object with functions for initial mount, render and unmount\r\n                mount: () => { subscribe() }, // this is called on mount\r\n                render: () => { consle.log(\"rerender\")  }, // this is called on every render \r\n                unmount: () => { unsubscribe() } // this is called on unmount\r\n            }\r\n   );\r\n\r\nAnd this is clearly more intuitive and semantic. \r\n\r\nI completely understand that in some cases destroying subscriptions on every render is good because it makes component more robust and bug resistful but it also may impact on performance and if we know what are we doing performance is most important thing.\r\n\r\nWhat are your thoughts about this idea?\r\n\r\n\r\n",
  "closed_by": {
    "login": "gaearon",
    "id": 810438,
    "node_id": "MDQ6VXNlcjgxMDQzOA==",
    "avatar_url": "https://avatars0.githubusercontent.com/u/810438?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/gaearon",
    "html_url": "https://github.com/gaearon",
    "followers_url": "https://api.github.com/users/gaearon/followers",
    "following_url": "https://api.github.com/users/gaearon/following{/other_user}",
    "gists_url": "https://api.github.com/users/gaearon/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/gaearon/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/gaearon/subscriptions",
    "organizations_url": "https://api.github.com/users/gaearon/orgs",
    "repos_url": "https://api.github.com/users/gaearon/repos",
    "events_url": "https://api.github.com/users/gaearon/events{/privacy}",
    "received_events_url": "https://api.github.com/users/gaearon/received_events",
    "type": "User",
    "site_admin": false
  }
}

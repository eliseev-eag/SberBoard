{
  "url": "https://api.github.com/repos/facebook/react/issues/6641",
  "repository_url": "https://api.github.com/repos/facebook/react",
  "labels_url": "https://api.github.com/repos/facebook/react/issues/6641/labels{/name}",
  "comments_url": "https://api.github.com/repos/facebook/react/issues/6641/comments",
  "events_url": "https://api.github.com/repos/facebook/react/issues/6641/events",
  "html_url": "https://github.com/facebook/react/issues/6641",
  "id": 151602458,
  "node_id": "MDU6SXNzdWUxNTE2MDI0NTg=",
  "number": 6641,
  "title": "d3.event is null in a ReactJS + d3JS component",
  "user": {
    "login": "varghesep",
    "id": 12233474,
    "node_id": "MDQ6VXNlcjEyMjMzNDc0",
    "avatar_url": "https://avatars2.githubusercontent.com/u/12233474?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/varghesep",
    "html_url": "https://github.com/varghesep",
    "followers_url": "https://api.github.com/users/varghesep/followers",
    "following_url": "https://api.github.com/users/varghesep/following{/other_user}",
    "gists_url": "https://api.github.com/users/varghesep/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/varghesep/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/varghesep/subscriptions",
    "organizations_url": "https://api.github.com/users/varghesep/orgs",
    "repos_url": "https://api.github.com/users/varghesep/repos",
    "events_url": "https://api.github.com/users/varghesep/events{/privacy}",
    "received_events_url": "https://api.github.com/users/varghesep/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 3,
  "created_at": "2016-04-28T10:23:52Z",
  "updated_at": "2016-12-15T16:04:20Z",
  "closed_at": "2016-04-28T15:34:42Z",
  "author_association": "NONE",
  "body": "I'm using **ReactJS, d3JS and ES6** to create an org chart. I can create the chart and see it. But I want to add the zoom and drag behavior to the chart, so I used **d3.behavior.zoom**. I can see the method **zoomed** is called, but the **d3.event** is null.\n\nI tried attaching the zoom behavior to the **div, svg and g** but nothing helps. The **zoomed** behavior is called but the **event** is null. \n\nIn my ASP.NET project I made sure that I don't have any reference to d3.js other than in the systemJS configuration which many stackoverflow answers mentioned as the issue related to why d3.event is null.\n\nMy code is very similar to what is in an example like this https://github.com/Swizec/candidate-bucket-chart/blob/169779e110c8825f4545c71ae5845ff7bad4f1f4/src/BubbleChart.jsx which uses the old version of ReactJS.\n\nThis is my systemJS configuration:\n\n``` javascript\n<script>\n    System.defaultJSExtensions = true;\n    System.config({\n        map: {\n            'rx': \"https://cdnjs.cloudflare.com/ajax/libs/rxjs/4.0.7/rx.all.min.js\",\n            'react': 'https://cdnjs.cloudflare.com/ajax/libs/react/15.0.1/react.js',\n            'react-dom': 'https://cdnjs.cloudflare.com/ajax/libs/react/15.0.1/react-dom.js',\n            'd3': 'https://cdnjs.cloudflare.com/ajax/libs/d3/3.5.16/d3.js'\n        }\n    });\n    System.import('../app/app.js');\n</script>\n```\n\n``` javascript\nimport React, { Component } from 'react';\nimport * as Rx from 'rx';\nimport * as d3 from 'd3';\nimport Person from './person';\n\nclass OrgChart extends Component {\n\n    constructor(props) {\n        super(props);\n\n        this.state = { persons: [] };\n    }\n\n    componentWillMount() {\n        // Just read a JSON file\n        var source = Rx.Observable.fromPromise($.getJSON(\"/js/org-persons.json\"));\n\n        source.subscribe(\n            function(chart) {\n                var tree = d3.layout.tree()\n                    .nodeSize([110, 50])\n                    .separation(function() {\n                        return 1;\n                    });\n\n                var nodes = tree.nodes(chart[0]).reverse();\n\n                var links = tree.links(nodes);\n\n                var p = [];\n\n                nodes.forEach(function(node) {\n                    fs.push((<Person x={node.x} y={node.y}></Person>));\n                }.bind(this));\n\n                this.setState({ person: p });\n\n            }.bind(this)\n        );\n    }\n\n    componentDidMount() {\n        var rootX = document.body.clientWidth / 4;\n        var rootY = 300;\n\n       // A standard setup with d3 to use it's zoom/drag behavior\n        var zoom = d3.behavior.zoom()\n            .scaleExtent([1, 10])\n            .on(\"zoom\", this.zoomed)\n            .translate([rootX, rootY]);\n\n       // Attach zoom behavior to the first group in the svg.\n        d3.select(\"#viewport\")\n            .call(zoom);\n    }\n\n    // When I drag the svg, this function gets called but the event is null. d3 is a global object.\n    zoomed() {\n        d3.select(\"#viewport\").attr(\"transform\", \"translate(\" + d3.event.translate + \")scale(\" + d3.event.scale + \")\");\n    }\n\n   // renders an org chart\n    render() {\n\n        return (\n            <div id='treeContainer'><svg id='fullTree' width='100%'>\n                <g id='viewport'>\n                    { this.state.persons }\n                </g>\n            </svg></div>\n        );\n    }\n}\n\nexport default OrgChart;\n```\n",
  "closed_by": {
    "login": "jimfb",
    "id": 9595985,
    "node_id": "MDQ6VXNlcjk1OTU5ODU=",
    "avatar_url": "https://avatars3.githubusercontent.com/u/9595985?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/jimfb",
    "html_url": "https://github.com/jimfb",
    "followers_url": "https://api.github.com/users/jimfb/followers",
    "following_url": "https://api.github.com/users/jimfb/following{/other_user}",
    "gists_url": "https://api.github.com/users/jimfb/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/jimfb/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/jimfb/subscriptions",
    "organizations_url": "https://api.github.com/users/jimfb/orgs",
    "repos_url": "https://api.github.com/users/jimfb/repos",
    "events_url": "https://api.github.com/users/jimfb/events{/privacy}",
    "received_events_url": "https://api.github.com/users/jimfb/received_events",
    "type": "User",
    "site_admin": false
  }
}

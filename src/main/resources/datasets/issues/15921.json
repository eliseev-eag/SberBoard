{
  "url": "https://api.github.com/repos/facebook/react/issues/15921",
  "repository_url": "https://api.github.com/repos/facebook/react",
  "labels_url": "https://api.github.com/repos/facebook/react/issues/15921/labels{/name}",
  "comments_url": "https://api.github.com/repos/facebook/react/issues/15921/comments",
  "events_url": "https://api.github.com/repos/facebook/react/issues/15921/events",
  "html_url": "https://github.com/facebook/react/issues/15921",
  "id": 457920346,
  "node_id": "MDU6SXNzdWU0NTc5MjAzNDY=",
  "number": 15921,
  "title": "Suspense unmounts children and fallback even they have the same type and key",
  "user": {
    "login": "otakustay",
    "id": 639549,
    "node_id": "MDQ6VXNlcjYzOTU0OQ==",
    "avatar_url": "https://avatars2.githubusercontent.com/u/639549?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/otakustay",
    "html_url": "https://github.com/otakustay",
    "followers_url": "https://api.github.com/users/otakustay/followers",
    "following_url": "https://api.github.com/users/otakustay/following{/other_user}",
    "gists_url": "https://api.github.com/users/otakustay/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/otakustay/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/otakustay/subscriptions",
    "organizations_url": "https://api.github.com/users/otakustay/orgs",
    "repos_url": "https://api.github.com/users/otakustay/repos",
    "events_url": "https://api.github.com/users/otakustay/events{/privacy}",
    "received_events_url": "https://api.github.com/users/otakustay/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 2,
  "created_at": "2019-06-19T10:01:47Z",
  "updated_at": "2019-09-06T12:14:59Z",
  "closed_at": "2019-09-06T12:14:59Z",
  "author_association": "NONE",
  "body": "<!--\r\n  Note: if the issue is about documentation or the website, please file it at:\r\n  https://github.com/reactjs/reactjs.org/issues/new\r\n-->\r\n\r\n**Do you want to request a *feature* or report a *bug*?**\r\n\r\nI think it is a bug.\r\n\r\n**What is the current behavior?**\r\n\r\nWhen a `Suspense` is given `fallback` and `children` with same type and key, suspense still unmount and remount them when its state changes between pending and resolved.\r\n\r\n**If the current behavior is a bug, please provide the steps to reproduce and if possible a minimal demo of the problem. Your bug will get fixed much faster if we can run your code and it doesn't have dependencies other than React. Paste the link to your JSFiddle (https://jsfiddle.net/Luktwrdm/) or CodeSandbox (https://codesandbox.io/s/new) example below:**\r\n\r\nhttps://codesandbox.io/s/sleepy-cannon-47291\r\n\r\n**What is the expected behavior?**\r\n\r\nIn console, it should be only 1 \"system suspense mounted\" message, suspense should update the `SystemContent` component instead of remount it.\r\n\r\nWhen use error boundary to \"simulate\" a suspense, we can make sure the `CustomContent` is only mounted once, we'd like the native suspense to behave the same.\r\n\r\nAs a real world case, we rely on the content component to live across promise's life in order to \"keep previous data visible when loading new data\", when content is unmounted on pending, it loses a `useRef` stored previous data snapshot.\r\n\r\n**Which versions of React, and which browser / OS are affected by this issue? Did this work in previous versions of React?**\r\n\r\n16.8.6",
  "closed_by": {
    "login": "threepointone",
    "id": 18808,
    "node_id": "MDQ6VXNlcjE4ODA4",
    "avatar_url": "https://avatars2.githubusercontent.com/u/18808?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/threepointone",
    "html_url": "https://github.com/threepointone",
    "followers_url": "https://api.github.com/users/threepointone/followers",
    "following_url": "https://api.github.com/users/threepointone/following{/other_user}",
    "gists_url": "https://api.github.com/users/threepointone/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/threepointone/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/threepointone/subscriptions",
    "organizations_url": "https://api.github.com/users/threepointone/orgs",
    "repos_url": "https://api.github.com/users/threepointone/repos",
    "events_url": "https://api.github.com/users/threepointone/events{/privacy}",
    "received_events_url": "https://api.github.com/users/threepointone/received_events",
    "type": "User",
    "site_admin": false
  }
}

{
  "url": "https://api.github.com/repos/facebook/react/issues/3335",
  "repository_url": "https://api.github.com/repos/facebook/react",
  "labels_url": "https://api.github.com/repos/facebook/react/issues/3335/labels{/name}",
  "comments_url": "https://api.github.com/repos/facebook/react/issues/3335/comments",
  "events_url": "https://api.github.com/repos/facebook/react/issues/3335/events",
  "html_url": "https://github.com/facebook/react/issues/3335",
  "id": 60078040,
  "node_id": "MDU6SXNzdWU2MDA3ODA0MA==",
  "number": 3335,
  "title": "optimize the procedure to render component to body",
  "user": {
    "login": "jiyinyiyong",
    "id": 449224,
    "node_id": "MDQ6VXNlcjQ0OTIyNA==",
    "avatar_url": "https://avatars0.githubusercontent.com/u/449224?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/jiyinyiyong",
    "html_url": "https://github.com/jiyinyiyong",
    "followers_url": "https://api.github.com/users/jiyinyiyong/followers",
    "following_url": "https://api.github.com/users/jiyinyiyong/following{/other_user}",
    "gists_url": "https://api.github.com/users/jiyinyiyong/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/jiyinyiyong/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/jiyinyiyong/subscriptions",
    "organizations_url": "https://api.github.com/users/jiyinyiyong/orgs",
    "repos_url": "https://api.github.com/users/jiyinyiyong/repos",
    "events_url": "https://api.github.com/users/jiyinyiyong/events{/privacy}",
    "received_events_url": "https://api.github.com/users/jiyinyiyong/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 3,
  "created_at": "2015-03-06T09:24:53Z",
  "updated_at": "2016-10-27T14:35:57Z",
  "closed_at": "2016-10-27T14:35:57Z",
  "author_association": "NONE",
  "body": "To create a modal, we have to create an element under `<body>` manually and remove that element when no longer used.\nhttp://stackoverflow.com/a/26789089/883571\n\n(updated at Mar 20, add timeout, so it looks better at this moment)\n\n``` coffee\n# Code mostly done at:\n# http://stackoverflow.com/a/26789089/883571\n\nReact = require 'react/addons'\n\nutil = require '../util/util'\ntime = require '../util/time'\nTransition = React.createFactory (require '../module/transition')\n\n$ = React.DOM\n\nmodule.exports =\n\n  # needs to implement\n  # renderLayer: ->\n\n  componentWillUnmount: ->\n    return unless @_target?\n    @_unrenderLayer()\n    document.body.removeChild @_target\n\n  componentDidUpdate: ->\n    @_renderLayer()\n\n  _renderLayer: ->\n    if @_target?\n      @_renderChildren()\n      return\n    if (not @props.show) and (not @_target?)\n      return\n    # so show but found no target\n    @_target = document.createElement 'div'\n    document.body.appendChild @_target\n    tree = Transition transitionName: 'fade', enterTimeout: 200, leaveTimeout: 350\n    React.render tree, @_target\n\n    # use delay to create transition\n    # more delay to fix in safari\n    browser = util.parseUA().browser\n    time.delay (if browser is 'safari' then 20 else 0), =>\n      @_renderChildren()\n\n  _renderChildren: ->\n    tree = Transition transitionName: 'fade', enterTimeout: 200, leaveTimeout: 350,\n      if @props.show\n        @renderLayer()\n    React.render tree, @_target\n\n  _unrenderLayer: ->\n    React.unmountComponentAtNode @_target\n```\n\nThe bad part is that those operations are not optimized, they can be really slow when there are plenty of components are ready to show modals. React's components hierarchy makes it difficult when people create menus and modals which are appended under `<body>` and we can only do that by hand.\n\nCan we add this feature in React?\n\n---\n\nin my case that's can be very slow:\n\n![dom](https://cloud.githubusercontent.com/assets/449224/6523035/c6024e90-c426-11e4-954f-635054518eb6.png)\n",
  "closed_by": {
    "login": "gaearon",
    "id": 810438,
    "node_id": "MDQ6VXNlcjgxMDQzOA==",
    "avatar_url": "https://avatars0.githubusercontent.com/u/810438?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/gaearon",
    "html_url": "https://github.com/gaearon",
    "followers_url": "https://api.github.com/users/gaearon/followers",
    "following_url": "https://api.github.com/users/gaearon/following{/other_user}",
    "gists_url": "https://api.github.com/users/gaearon/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/gaearon/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/gaearon/subscriptions",
    "organizations_url": "https://api.github.com/users/gaearon/orgs",
    "repos_url": "https://api.github.com/users/gaearon/repos",
    "events_url": "https://api.github.com/users/gaearon/events{/privacy}",
    "received_events_url": "https://api.github.com/users/gaearon/received_events",
    "type": "User",
    "site_admin": false
  }
}

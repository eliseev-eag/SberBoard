{
  "url": "https://api.github.com/repos/facebook/react/issues/16814",
  "repository_url": "https://api.github.com/repos/facebook/react",
  "labels_url": "https://api.github.com/repos/facebook/react/issues/16814/labels{/name}",
  "comments_url": "https://api.github.com/repos/facebook/react/issues/16814/comments",
  "events_url": "https://api.github.com/repos/facebook/react/issues/16814/events",
  "html_url": "https://github.com/facebook/react/issues/16814",
  "id": 494896874,
  "node_id": "MDU6SXNzdWU0OTQ4OTY4NzQ=",
  "number": 16814,
  "title": "[Flare] Focus has too limited a set of keys that set isGlobalFocusVisible",
  "user": {
    "login": "majornista",
    "id": 154077,
    "node_id": "MDQ6VXNlcjE1NDA3Nw==",
    "avatar_url": "https://avatars0.githubusercontent.com/u/154077?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/majornista",
    "html_url": "https://github.com/majornista",
    "followers_url": "https://api.github.com/users/majornista/followers",
    "following_url": "https://api.github.com/users/majornista/following{/other_user}",
    "gists_url": "https://api.github.com/users/majornista/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/majornista/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/majornista/subscriptions",
    "organizations_url": "https://api.github.com/users/majornista/orgs",
    "repos_url": "https://api.github.com/users/majornista/repos",
    "events_url": "https://api.github.com/users/majornista/events{/privacy}",
    "received_events_url": "https://api.github.com/users/majornista/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 1296748300,
      "node_id": "MDU6TGFiZWwxMjk2NzQ4MzAw",
      "url": "https://api.github.com/repos/facebook/react/labels/React%20Flare",
      "name": "React Flare",
      "color": "63f2ff",
      "default": false
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 5,
  "created_at": "2019-09-17T23:07:21Z",
  "updated_at": "2019-09-27T17:43:00Z",
  "closed_at": "2019-09-27T17:35:36Z",
  "author_association": "NONE",
  "body": "At [/packages/react-ui/events/src/dom/Focus.js#L140](https://github.com/facebook/react/blob/3af05de1aaed309f8146bc53f9a4b4d785abdd3f/packages/react-ui/events/src/dom/Focus.js#L140), only `'Enter'`, `' '` and `Tab`, with no modifier keys, will set `isGlobalFocusVisible = true` so that the next element to receive focus will update to display its `isFocusVisible` state. \r\n\r\n```jsx\r\n/* ... */\r\n    case 'keydown':\r\n    case 'keyup': {\r\n      const nativeEvent = event.nativeEvent;\r\n      const focusTarget = state.focusTarget;\r\n      const {key, metaKey, altKey, ctrlKey} = (nativeEvent: any);\r\n      const validKey =\r\n        key === 'Enter' ||\r\n        key === ' ' ||\r\n        (key === 'Tab' && !(metaKey || (!isMac && altKey) || ctrlKey));\r\n\r\n      if (validKey) {\r\n        state.pointerType = 'keyboard';\r\n        isGlobalFocusVisible = true;\r\n        if (\r\n          focusTarget !== null &&\r\n          context.isTargetWithinResponderScope(focusTarget)\r\n        ) {\r\n          callback(true);\r\n        }\r\n      }\r\n      break;\r\n    }\r\n/* ... */\r\n```\r\n\r\nThis ignores a number of other keys that commonly trigger focus changes like Arrow keys, Home, End, for navigating radio buttons, toolbars, tab lists, list boxes, and Escape, for closing a dialog or popover. \r\n\r\nThe [WICG/focus-visible polyfill](https://github.com/WICG/focus-visible/blob/master/src/focus-visible.js#L109) treats any keyboard event as valid. This may be going a bit too far, because any keyboard interaction, regardless of whether focus changed will render the `:focus-visible` style. \r\n\r\nA somewhat better approach may be to treat form elements that take text input, like `textarea`, `input[type=text]`, `input[type=number]`, etc., as a special case, where keys that input text or change the cursor position do not change the `isGlobalFocusVisible` state.",
  "closed_by": {
    "login": "necolas",
    "id": 239676,
    "node_id": "MDQ6VXNlcjIzOTY3Ng==",
    "avatar_url": "https://avatars2.githubusercontent.com/u/239676?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/necolas",
    "html_url": "https://github.com/necolas",
    "followers_url": "https://api.github.com/users/necolas/followers",
    "following_url": "https://api.github.com/users/necolas/following{/other_user}",
    "gists_url": "https://api.github.com/users/necolas/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/necolas/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/necolas/subscriptions",
    "organizations_url": "https://api.github.com/users/necolas/orgs",
    "repos_url": "https://api.github.com/users/necolas/repos",
    "events_url": "https://api.github.com/users/necolas/events{/privacy}",
    "received_events_url": "https://api.github.com/users/necolas/received_events",
    "type": "User",
    "site_admin": false
  }
}

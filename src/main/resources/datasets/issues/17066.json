{
  "url": "https://api.github.com/repos/facebook/react/issues/17066",
  "repository_url": "https://api.github.com/repos/facebook/react",
  "labels_url": "https://api.github.com/repos/facebook/react/issues/17066/labels{/name}",
  "comments_url": "https://api.github.com/repos/facebook/react/issues/17066/comments",
  "events_url": "https://api.github.com/repos/facebook/react/issues/17066/events",
  "html_url": "https://github.com/facebook/react/issues/17066",
  "id": 505800009,
  "node_id": "MDU6SXNzdWU1MDU4MDAwMDk=",
  "number": 17066,
  "title": "useEffect callback never called",
  "user": {
    "login": "pschiffmann",
    "id": 8018681,
    "node_id": "MDQ6VXNlcjgwMTg2ODE=",
    "avatar_url": "https://avatars3.githubusercontent.com/u/8018681?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/pschiffmann",
    "html_url": "https://github.com/pschiffmann",
    "followers_url": "https://api.github.com/users/pschiffmann/followers",
    "following_url": "https://api.github.com/users/pschiffmann/following{/other_user}",
    "gists_url": "https://api.github.com/users/pschiffmann/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/pschiffmann/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/pschiffmann/subscriptions",
    "organizations_url": "https://api.github.com/users/pschiffmann/orgs",
    "repos_url": "https://api.github.com/users/pschiffmann/repos",
    "events_url": "https://api.github.com/users/pschiffmann/events{/privacy}",
    "received_events_url": "https://api.github.com/users/pschiffmann/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "open",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 3,
  "created_at": "2019-10-11T11:36:40Z",
  "updated_at": "2019-10-11T21:32:56Z",
  "closed_at": null,
  "author_association": "NONE",
  "body": "I want to report a bug. My problem is that the callback function I pass to `useEffect()` is never called in my app. I uploaded a minimal app [here](https://github.com/pschiffmann/react-useeffect-issue) that reproduces the issue.\r\n\r\nAs you can see, I render a couple of nested components. After the initial render, I update the component state inside a `useEffect()` callback. However, this callback is only executed for the first two components, not for the third level component. The result is that the third and subsequent levels are not rendered at all.\r\n\r\nI suspect that this is a bug in React and not a misuse on my side because doing any of the following changes will let the component tree render correctly in all levels:\r\n- Don't use multiple React roots. If I remove the last (yellow) `ReactDOM.render()` call, then the second (red) component tree will render correctly.\r\n- Don't conditionally render child components. Removing the `message !== DEFAULT_MESSAGE` check (`main.tsx`, line 20) causes the component trees to render correctly.\r\n- Use `useLayoutEffect()` instead of `useEffect()`.\r\n\r\nIf you need additional information to reproduce the issue or have any questions, let me know. I'd like provide any help I can!",
  "closed_by": null
}

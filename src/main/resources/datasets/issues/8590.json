{
  "url": "https://api.github.com/repos/facebook/react/issues/8590",
  "repository_url": "https://api.github.com/repos/facebook/react",
  "labels_url": "https://api.github.com/repos/facebook/react/issues/8590/labels{/name}",
  "comments_url": "https://api.github.com/repos/facebook/react/issues/8590/comments",
  "events_url": "https://api.github.com/repos/facebook/react/issues/8590/events",
  "html_url": "https://github.com/facebook/react/pull/8590",
  "id": 196128075,
  "node_id": "MDExOlB1bGxSZXF1ZXN0OTgzODM1MzU=",
  "number": 8590,
  "title": "`bailoutOnLowPriority` pushes context to mirror complete phase context pop",
  "user": {
    "login": "bvaughn",
    "id": 29597,
    "node_id": "MDQ6VXNlcjI5NTk3",
    "avatar_url": "https://avatars0.githubusercontent.com/u/29597?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/bvaughn",
    "html_url": "https://github.com/bvaughn",
    "followers_url": "https://api.github.com/users/bvaughn/followers",
    "following_url": "https://api.github.com/users/bvaughn/following{/other_user}",
    "gists_url": "https://api.github.com/users/bvaughn/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/bvaughn/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/bvaughn/subscriptions",
    "organizations_url": "https://api.github.com/users/bvaughn/orgs",
    "repos_url": "https://api.github.com/users/bvaughn/repos",
    "events_url": "https://api.github.com/users/bvaughn/events{/privacy}",
    "received_events_url": "https://api.github.com/users/bvaughn/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 25,
  "created_at": "2016-12-16T18:45:01Z",
  "updated_at": "2016-12-17T18:24:41Z",
  "closed_at": "2016-12-17T15:41:26Z",
  "author_association": "CONTRIBUTOR",
  "pull_request": {
    "url": "https://api.github.com/repos/facebook/react/pulls/8590",
    "html_url": "https://github.com/facebook/react/pull/8590",
    "diff_url": "https://github.com/facebook/react/pull/8590.diff",
    "patch_url": "https://github.com/facebook/react/pull/8590.patch"
  },
  "body": "While testing the new `ReactNativeFiber` renderer on internal apps, I discovered that the Ads Manager app as well as the \"_App - UIExplorer Browser_\" component inside of Catalyst both threw the an \"_Unexpected context pop_\" error. I traced the root cause of this error to the fact that in the _complete_ phase we always pop context for context providers _but_ in the begin phase we don't always push. (Specially if we bailout on low priority we don't push.) This causes us to pop too many times in certain cases.\r\n\r\nThis PR corrects the behavior, making push/pop mirror each other, and adds a unit test that verifies the fix. Both Ads Manager and \"_App - UIExplorer Browser_\" function correctly once this fix is in place.\r\n\r\ncc @acdlite to review since we spoke about this briefly and you have some context (heh) about the problem.\r\ncc @gaearon as well since I think you implemented this stuff initially?",
  "closed_by": {
    "login": "bvaughn",
    "id": 29597,
    "node_id": "MDQ6VXNlcjI5NTk3",
    "avatar_url": "https://avatars0.githubusercontent.com/u/29597?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/bvaughn",
    "html_url": "https://github.com/bvaughn",
    "followers_url": "https://api.github.com/users/bvaughn/followers",
    "following_url": "https://api.github.com/users/bvaughn/following{/other_user}",
    "gists_url": "https://api.github.com/users/bvaughn/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/bvaughn/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/bvaughn/subscriptions",
    "organizations_url": "https://api.github.com/users/bvaughn/orgs",
    "repos_url": "https://api.github.com/users/bvaughn/repos",
    "events_url": "https://api.github.com/users/bvaughn/events{/privacy}",
    "received_events_url": "https://api.github.com/users/bvaughn/received_events",
    "type": "User",
    "site_admin": false
  }
}

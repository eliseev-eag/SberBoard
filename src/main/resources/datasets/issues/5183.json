{
  "url": "https://api.github.com/repos/facebook/react/issues/5183",
  "repository_url": "https://api.github.com/repos/facebook/react",
  "labels_url": "https://api.github.com/repos/facebook/react/issues/5183/labels{/name}",
  "comments_url": "https://api.github.com/repos/facebook/react/issues/5183/comments",
  "events_url": "https://api.github.com/repos/facebook/react/issues/5183/events",
  "html_url": "https://github.com/facebook/react/issues/5183",
  "id": 111633619,
  "node_id": "MDU6SXNzdWUxMTE2MzM2MTk=",
  "number": 5183,
  "title": "React/Jest Mocking issue with keymirror",
  "user": {
    "login": "blainekasten",
    "id": 2916023,
    "node_id": "MDQ6VXNlcjI5MTYwMjM=",
    "avatar_url": "https://avatars3.githubusercontent.com/u/2916023?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/blainekasten",
    "html_url": "https://github.com/blainekasten",
    "followers_url": "https://api.github.com/users/blainekasten/followers",
    "following_url": "https://api.github.com/users/blainekasten/following{/other_user}",
    "gists_url": "https://api.github.com/users/blainekasten/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/blainekasten/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/blainekasten/subscriptions",
    "organizations_url": "https://api.github.com/users/blainekasten/orgs",
    "repos_url": "https://api.github.com/users/blainekasten/repos",
    "events_url": "https://api.github.com/users/blainekasten/events{/privacy}",
    "received_events_url": "https://api.github.com/users/blainekasten/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 15,
  "created_at": "2015-10-15T14:50:38Z",
  "updated_at": "2016-03-06T20:14:55Z",
  "closed_at": "2016-02-22T02:17:14Z",
  "author_association": "CONTRIBUTOR",
  "body": "I've ran into an issue with 0.14 when testing with jest & npm 3. Ultimately I've realized that since npm 3 installs everything as siblings, packages that react depends on will still get automatically mocked and therefore break.\n\nMy example was an error like this:\n\n```\n‚óè Runtime Error\nTypeError: /Users/blaine.kasten/Sites/videochrome/src/ProgressBar/ProgressBarBackground/__tests__/ProgressBarBackground--tests.js: /Users/blaine.kasten/Sites/videochrome/node_modules/react/react.js: /Users/blaine.kasten/Sites/videochrome/node_modules/react/lib/React.js: /Users/blaine.kasten/Sites/videochrome/node_modules/react/lib/ReactDOM.js: /Users/blaine.kasten/Sites/videochrome/node_modules/react/lib/ReactDefaultInjection.js: /Users/blaine.kasten/Sites/videochrome/node_modules/react/lib/BeforeInputEventPlugin.js: Cannot read property 'topCompositionEnd' of undefined\n```\n\nLooking into it, in the `lib/BeforeInputEventPlugin.js` file, it referenced `./EventConstants`, in that file it was using `fbjs/lib/keymirror` to create it's EventConstants. Since that was being mocked, the return from `./EventConstants.js` was undefined. Thus causing an error.\n\nThis might be part of a bigger problem with jest and supporting npm3. I'm not sure if this issue should live in their repo. Or more immediately react could not depend on fbjs and just use it's own keymirror implementation.\n",
  "closed_by": {
    "login": "cpojer",
    "id": 13352,
    "node_id": "MDQ6VXNlcjEzMzUy",
    "avatar_url": "https://avatars0.githubusercontent.com/u/13352?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/cpojer",
    "html_url": "https://github.com/cpojer",
    "followers_url": "https://api.github.com/users/cpojer/followers",
    "following_url": "https://api.github.com/users/cpojer/following{/other_user}",
    "gists_url": "https://api.github.com/users/cpojer/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/cpojer/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/cpojer/subscriptions",
    "organizations_url": "https://api.github.com/users/cpojer/orgs",
    "repos_url": "https://api.github.com/users/cpojer/repos",
    "events_url": "https://api.github.com/users/cpojer/events{/privacy}",
    "received_events_url": "https://api.github.com/users/cpojer/received_events",
    "type": "User",
    "site_admin": false
  }
}

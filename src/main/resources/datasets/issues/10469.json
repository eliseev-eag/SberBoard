{
  "url": "https://api.github.com/repos/facebook/react/issues/10469",
  "repository_url": "https://api.github.com/repos/facebook/react",
  "labels_url": "https://api.github.com/repos/facebook/react/issues/10469/labels{/name}",
  "comments_url": "https://api.github.com/repos/facebook/react/issues/10469/comments",
  "events_url": "https://api.github.com/repos/facebook/react/issues/10469/events",
  "html_url": "https://github.com/facebook/react/issues/10469",
  "id": 250609923,
  "node_id": "MDU6SXNzdWUyNTA2MDk5MjM=",
  "number": 10469,
  "title": "Excessive, duplicative variable assignments in CommonJS build",
  "user": {
    "login": "nhunzaker",
    "id": 590904,
    "node_id": "MDQ6VXNlcjU5MDkwNA==",
    "avatar_url": "https://avatars3.githubusercontent.com/u/590904?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/nhunzaker",
    "html_url": "https://github.com/nhunzaker",
    "followers_url": "https://api.github.com/users/nhunzaker/followers",
    "following_url": "https://api.github.com/users/nhunzaker/following{/other_user}",
    "gists_url": "https://api.github.com/users/nhunzaker/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/nhunzaker/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/nhunzaker/subscriptions",
    "organizations_url": "https://api.github.com/users/nhunzaker/orgs",
    "repos_url": "https://api.github.com/users/nhunzaker/repos",
    "events_url": "https://api.github.com/users/nhunzaker/events{/privacy}",
    "received_events_url": "https://api.github.com/users/nhunzaker/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 1,
  "created_at": "2017-08-16T12:30:16Z",
  "updated_at": "2017-10-04T21:01:50Z",
  "closed_at": "2017-10-04T21:01:50Z",
  "author_association": "COLLABORATOR",
  "body": "Followup from #10385, it looks like the CommonJS build is saving short variable name references to long property names, however it does this in a bunch of places. The net output is a larger build because the referenced names (like `IndeterminateComponent`) are duplicated quite a bit:\r\n\r\nFor example:\r\n\r\n```javascript\r\n D = {\r\n        IndeterminateComponent: 0,\r\n        FunctionalComponent: 1,\r\n        ClassComponent: 2,\r\n        HostRoot: 3,\r\n        HostPortal: 4,\r\n        HostComponent: 5,\r\n        HostText: 6,\r\n        CoroutineComponent: 7,\r\n        CoroutineHandlerPhase: 8,\r\n        YieldComponent: 9,\r\n        Fragment: 10\r\n    },\r\n    F = {\r\n        ELEMENT_NODE: 1,\r\n        TEXT_NODE: 3,\r\n        COMMENT_NODE: 8,\r\n        DOCUMENT_NODE: 9,\r\n        DOCUMENT_FRAGMENT_NODE: 11\r\n    },\r\n    xa = D.HostComponent,\r\n    ya = D.HostText,\r\n    za = F.ELEMENT_NODE,\r\n    Aa = F.COMMENT_NODE,\r\n    Ba = z.ID_ATTRIBUTE_NAME,\r\n```\r\n\r\nThe UMD build does not have any of these tokens. The CJS build doesn't crush the names either. Later in the build there are things like this:\r\n\r\n```javascript\r\nvar Mf = Qe.reconcileChildFibers,\r\n    Nf = S.popContextProvider,\r\n    Of = D.IndeterminateComponent,\r\n    Pf = D.FunctionalComponent,\r\n    Qf = D.ClassComponent,\r\n    Rf = D.HostRoot,\r\n    Sf = D.HostComponent,\r\n    Tf = D.HostText,\r\n    Uf = D.HostPortal,\r\n    Vf = D.CoroutineComponent,\r\n    Wf = D.CoroutineHandlerPhase,\r\n    Xf = D.YieldComponent,\r\n    Yf = D.Fragment,\r\n    Zf = L.Placement,\r\n    $f = L.Ref,\r\n    ag = L.Update,\r\n    bg = R.OffscreenPriority;\r\n```\r\n\r\nThis duplicates a lot: If you look in the CJS build, something along the lines of a = d.HostNode shows up in like 10 places. This is true of all of these tokens.\r\n\r\nHere's a beautified version for reference:\r\nhttps://gist.github.com/nhunzaker/69ede0d4014d9c590908398ac6bc6c13",
  "closed_by": {
    "login": "gaearon",
    "id": 810438,
    "node_id": "MDQ6VXNlcjgxMDQzOA==",
    "avatar_url": "https://avatars0.githubusercontent.com/u/810438?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/gaearon",
    "html_url": "https://github.com/gaearon",
    "followers_url": "https://api.github.com/users/gaearon/followers",
    "following_url": "https://api.github.com/users/gaearon/following{/other_user}",
    "gists_url": "https://api.github.com/users/gaearon/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/gaearon/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/gaearon/subscriptions",
    "organizations_url": "https://api.github.com/users/gaearon/orgs",
    "repos_url": "https://api.github.com/users/gaearon/repos",
    "events_url": "https://api.github.com/users/gaearon/events{/privacy}",
    "received_events_url": "https://api.github.com/users/gaearon/received_events",
    "type": "User",
    "site_admin": false
  }
}

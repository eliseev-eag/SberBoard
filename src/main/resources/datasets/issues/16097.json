{
  "url": "https://api.github.com/repos/facebook/react/issues/16097",
  "repository_url": "https://api.github.com/repos/facebook/react",
  "labels_url": "https://api.github.com/repos/facebook/react/issues/16097/labels{/name}",
  "comments_url": "https://api.github.com/repos/facebook/react/issues/16097/comments",
  "events_url": "https://api.github.com/repos/facebook/react/issues/16097/events",
  "html_url": "https://github.com/facebook/react/issues/16097",
  "id": 466202577,
  "node_id": "MDU6SXNzdWU0NjYyMDI1Nzc=",
  "number": 16097,
  "title": "`yarn build --watch` throwing \"JavaScript heap out of memory\".",
  "user": {
    "login": "hk-skit",
    "id": 9606660,
    "node_id": "MDQ6VXNlcjk2MDY2NjA=",
    "avatar_url": "https://avatars1.githubusercontent.com/u/9606660?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/hk-skit",
    "html_url": "https://github.com/hk-skit",
    "followers_url": "https://api.github.com/users/hk-skit/followers",
    "following_url": "https://api.github.com/users/hk-skit/following{/other_user}",
    "gists_url": "https://api.github.com/users/hk-skit/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/hk-skit/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/hk-skit/subscriptions",
    "organizations_url": "https://api.github.com/users/hk-skit/orgs",
    "repos_url": "https://api.github.com/users/hk-skit/repos",
    "events_url": "https://api.github.com/users/hk-skit/events{/privacy}",
    "received_events_url": "https://api.github.com/users/hk-skit/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 2,
  "created_at": "2019-07-10T09:29:50Z",
  "updated_at": "2019-08-05T06:14:44Z",
  "closed_at": "2019-08-05T06:14:44Z",
  "author_association": "NONE",
  "body": "<!--\r\n  Note: if the issue is about documentation or the website, please file it at:\r\n  https://github.com/reactjs/reactjs.org/issues/new\r\n-->\r\n\r\n**Do you want to request a *feature* or report a *bug*?**\r\nReporting a bug regarding the yarn build.\r\n\r\n**What is the current behavior?**\r\nRunning `yarn build --watch` is throwing `JavaScript heap out of memory`.\r\n\r\nHere's the complete log:\r\n\r\n```\r\n<--- Last few GCs --->\r\n\r\n[74510:0x103800000]    84468 ms: Mark-sweep 1317.9 (1442.4) -> 1306.5 (1443.9) MB, 589.0 / 0.0 ms  (average mu = 0.251, current mu = 0.114) allocation failure scavenge might not succeed\r\n[74510:0x103800000]    85163 ms: Mark-sweep 1321.0 (1443.9) -> 1309.3 (1444.4) MB, 596.7 / 0.0 ms  (average mu = 0.210, current mu = 0.142) allocation failure scavenge might not succeed\r\n\r\n\r\n<--- JS stacktrace --->\r\n\r\n==== JS stack trace =========================================\r\n\r\n    0: ExitFrame [pc: 0x51a72adbe3d]\r\nSecurity context: 0x176d9701e6e1 <JSObject>\r\n    1: decode$$1(aka decode$$1) [0x176dffbe8169] [/Users/300067056/playground/random/react/node_modules/rollup/dist/rollup.js:~297] [pc=0x51a739966b9](this=0x176d9f8026f1 <undefined>,mappings=0x176d325aa201 <Very long string[26873]>)\r\n    2: /* anonymous */(aka /* anonymous */) [0x176d325a76b1] [/Users/300067056/playground/random/react/node_modules/rollup/dist...\r\n\r\nFATAL ERROR: Ineffective mark-compacts near heap limit Allocation failed - JavaScript heap out of memory\r\n 1: 0x10003b1db node::Abort() [/usr/local/bin/node]\r\n 2: 0x10003b3e5 node::OnFatalError(char const*, char const*) [/usr/local/bin/node]\r\n 3: 0x1001a86b5 v8::internal::V8::FatalProcessOutOfMemory(v8::internal::Isolate*, char const*, bool) [/usr/local/bin/node]\r\n 4: 0x100573ad2 v8::internal::Heap::FatalProcessOutOfMemory(char const*) [/usr/local/bin/node]\r\n 5: 0x1005765a5 v8::internal::Heap::CheckIneffectiveMarkCompact(unsigned long, double) [/usr/local/bin/node]\r\n 6: 0x10057244f v8::internal::Heap::PerformGarbageCollection(v8::internal::GarbageCollector, v8::GCCallbackFlags) [/usr/local/bin/node]\r\n 7: 0x100570624 v8::internal::Heap::CollectGarbage(v8::internal::AllocationSpace, v8::internal::GarbageCollectionReason, v8::GCCallbackFlags) [/usr/local/bin/node]\r\n 8: 0x10057cebc v8::internal::Heap::AllocateRawWithLigthRetry(int, v8::internal::AllocationSpace, v8::internal::AllocationAlignment) [/usr/local/bin/node]\r\n 9: 0x10057cf3f v8::internal::Heap::AllocateRawWithRetryOrFail(int, v8::internal::AllocationSpace, v8::internal::AllocationAlignment) [/usr/local/bin/node]\r\n10: 0x10054c884 v8::internal::Factory::NewFillerObject(int, bool, v8::internal::AllocationSpace) [/usr/local/bin/node]\r\n11: 0x1007d4894 v8::internal::Runtime_AllocateInNewSpace(int, v8::internal::Object**, v8::internal::Isolate*) [/usr/local/bin/node]\r\n12: 0x51a72adbe3d\r\n13: 0x51a739966b9\r\nerror Command failed with signal \"SIGABRT\".\r\ninfo Visit https://yarnpkg.com/en/docs/cli/run for documentation about this command.\r\n```\r\n\r\n**If the current behavior is a bug, please provide the steps to reproduce and if possible a minimal demo of the problem. Your bug will get fixed much faster if we can run your code and it doesn't have dependencies other than React. Paste the link to your JSFiddle (https://jsfiddle.net/Luktwrdm/) or CodeSandbox (https://codesandbox.io/s/new) example below:**\r\nThe bug is related to `yarn build`. If we run yarn build with watch mode enabled, then it's throwing out of memory exception.\r\n\r\n**What is the expected behavior?**\r\nIt should not throw an exception.\r\n\r\n**Which versions of React, and which browser / OS are affected by this issue? Did this work in previous versions of React?**\r\nNot sure about the previous versions. I am exploring the code base of React for learning.\r\n\r\nOS:\r\nmacOs Mojave\r\nVersion: 10.14.3(18D109)\r\nMacBook Pro (Retina, 15-inch, Mid 2015)\r\nProcessor: 2.2 GHz Intel Core i7\r\nMemory: 16 GB 1600 MHz DDR3\r\n\r\nNodeJs: v10.15.1\r\nnpm: 6.9.0\r\n\r\n",
  "closed_by": {
    "login": "hk-skit",
    "id": 9606660,
    "node_id": "MDQ6VXNlcjk2MDY2NjA=",
    "avatar_url": "https://avatars1.githubusercontent.com/u/9606660?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/hk-skit",
    "html_url": "https://github.com/hk-skit",
    "followers_url": "https://api.github.com/users/hk-skit/followers",
    "following_url": "https://api.github.com/users/hk-skit/following{/other_user}",
    "gists_url": "https://api.github.com/users/hk-skit/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/hk-skit/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/hk-skit/subscriptions",
    "organizations_url": "https://api.github.com/users/hk-skit/orgs",
    "repos_url": "https://api.github.com/users/hk-skit/repos",
    "events_url": "https://api.github.com/users/hk-skit/events{/privacy}",
    "received_events_url": "https://api.github.com/users/hk-skit/received_events",
    "type": "User",
    "site_admin": false
  }
}

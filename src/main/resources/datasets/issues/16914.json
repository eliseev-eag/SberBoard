{
  "url": "https://api.github.com/repos/facebook/react/issues/16914",
  "repository_url": "https://api.github.com/repos/facebook/react",
  "labels_url": "https://api.github.com/repos/facebook/react/issues/16914/labels{/name}",
  "comments_url": "https://api.github.com/repos/facebook/react/issues/16914/comments",
  "events_url": "https://api.github.com/repos/facebook/react/issues/16914/events",
  "html_url": "https://github.com/facebook/react/pull/16914",
  "id": 499137506,
  "node_id": "MDExOlB1bGxSZXF1ZXN0MzIxOTI1MjA1",
  "number": 16914,
  "title": "Remove canonical check in fiber host component",
  "user": {
    "login": "TheSavior",
    "id": 249164,
    "node_id": "MDQ6VXNlcjI0OTE2NA==",
    "avatar_url": "https://avatars0.githubusercontent.com/u/249164?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/TheSavior",
    "html_url": "https://github.com/TheSavior",
    "followers_url": "https://api.github.com/users/TheSavior/followers",
    "following_url": "https://api.github.com/users/TheSavior/following{/other_user}",
    "gists_url": "https://api.github.com/users/TheSavior/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/TheSavior/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/TheSavior/subscriptions",
    "organizations_url": "https://api.github.com/users/TheSavior/orgs",
    "repos_url": "https://api.github.com/users/TheSavior/repos",
    "events_url": "https://api.github.com/users/TheSavior/events{/privacy}",
    "received_events_url": "https://api.github.com/users/TheSavior/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 196858374,
      "node_id": "MDU6TGFiZWwxOTY4NTgzNzQ=",
      "url": "https://api.github.com/repos/facebook/react/labels/CLA%20Signed",
      "name": "CLA Signed",
      "color": "e7e7e7",
      "default": false
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 4,
  "created_at": "2019-09-26T22:02:59Z",
  "updated_at": "2019-10-02T18:07:21Z",
  "closed_at": "2019-10-02T18:07:21Z",
  "author_association": "MEMBER",
  "pull_request": {
    "url": "https://api.github.com/repos/facebook/react/pulls/16914",
    "html_url": "https://github.com/facebook/react/pull/16914",
    "diff_url": "https://github.com/facebook/react/pull/16914.diff",
    "patch_url": "https://github.com/facebook/react/pull/16914.patch"
  },
  "body": "I believe this is a dead branch.\r\n\r\nI added this code in https://github.com/facebook/react/pull/15126 and I *think* it has always been wrong. At least, I'm not sure what could trigger it.\r\n\r\nI think I was pattern matching from this code in NativeMethodsMixin  https://github.com/facebook/react/blob/master/packages/react-native-renderer/src/NativeMethodsMixin.js#L166-L182\r\n\r\nSimplified: \r\n```\r\nconst maybeInstance = findHostInstance(this);\r\nif (maybeInstance == null) {\r\n  return;\r\n}\r\n\r\nif (maybeInstance.canonical) {\r\n```\r\n\r\nThe only thing in the codebase that creates an object with a canonical key is [createInstance in ReactFabricHostConfig](https://github.com/facebook/react/blob/master/packages/react-native-renderer/src/ReactFabricHostConfig.js#L238-L241). `canonical` is only set on Fabric host components, not paper ones.\r\n\r\nIn order to get that instance, you must call `findHostInstance`. NativeMethodsMixin and ReactNativeComponent both use `findHostInstance` in order to detect whether an instance is created with the paper renderer or the fabric renderer to know which API to call. \r\n\r\nFiberHostComponent only needs to deal with paper components and the FabricHostComponent only needs to deal with the fabric components, so this check for canonical in paper is unnecessary.\r\n\r\nWhen I wrote this code I also added tests for calling this function passing an argument created with all three `NativeMethodsMixin`, `ReactNativeComponent`, and a host component. If I add a `throw` to this if statement, none of the tests fail.\r\n",
  "closed_by": {
    "login": "TheSavior",
    "id": 249164,
    "node_id": "MDQ6VXNlcjI0OTE2NA==",
    "avatar_url": "https://avatars0.githubusercontent.com/u/249164?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/TheSavior",
    "html_url": "https://github.com/TheSavior",
    "followers_url": "https://api.github.com/users/TheSavior/followers",
    "following_url": "https://api.github.com/users/TheSavior/following{/other_user}",
    "gists_url": "https://api.github.com/users/TheSavior/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/TheSavior/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/TheSavior/subscriptions",
    "organizations_url": "https://api.github.com/users/TheSavior/orgs",
    "repos_url": "https://api.github.com/users/TheSavior/repos",
    "events_url": "https://api.github.com/users/TheSavior/events{/privacy}",
    "received_events_url": "https://api.github.com/users/TheSavior/received_events",
    "type": "User",
    "site_admin": false
  }
}

{
  "url": "https://api.github.com/repos/facebook/react/issues/16147",
  "repository_url": "https://api.github.com/repos/facebook/react",
  "labels_url": "https://api.github.com/repos/facebook/react/issues/16147/labels{/name}",
  "comments_url": "https://api.github.com/repos/facebook/react/issues/16147/comments",
  "events_url": "https://api.github.com/repos/facebook/react/issues/16147/events",
  "html_url": "https://github.com/facebook/react/issues/16147",
  "id": 469168858,
  "node_id": "MDU6SXNzdWU0NjkxNjg4NTg=",
  "number": 16147,
  "title": "Increase `NESTED_UPDATE_LIMIT`",
  "user": {
    "login": "Asday",
    "id": 340276,
    "node_id": "MDQ6VXNlcjM0MDI3Ng==",
    "avatar_url": "https://avatars1.githubusercontent.com/u/340276?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/Asday",
    "html_url": "https://github.com/Asday",
    "followers_url": "https://api.github.com/users/Asday/followers",
    "following_url": "https://api.github.com/users/Asday/following{/other_user}",
    "gists_url": "https://api.github.com/users/Asday/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/Asday/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/Asday/subscriptions",
    "organizations_url": "https://api.github.com/users/Asday/orgs",
    "repos_url": "https://api.github.com/users/Asday/repos",
    "events_url": "https://api.github.com/users/Asday/events{/privacy}",
    "received_events_url": "https://api.github.com/users/Asday/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 1,
  "created_at": "2019-07-17T12:38:29Z",
  "updated_at": "2019-07-17T14:28:34Z",
  "closed_at": "2019-07-17T14:24:00Z",
  "author_association": "NONE",
  "body": "<!--\r\n  Note: if the issue is about documentation or the website, please file it at:\r\n  https://github.com/reactjs/reactjs.org/issues/new\r\n-->\r\n\r\n**Do you want to request a *feature* or report a *bug*?**\r\n\r\n*bug*\r\n\r\n**What is the current behavior?**\r\n\r\nI am creating a mobile app using Expo (SDK33).  I'm using redux, redux-form, react-navigation, and redux-persist, amongst other things.  Without doing anything ridiculous, I have hit the `NESTED_UPDATE_LIMIT` just by having a reasonably deep component tree.\r\n\r\n```\r\n    in ConnectFunction (created by Connect(Form(Connect(BaseQuestionnairePage))))\r\n    in Connect(Form(Connect(BaseQuestionnairePage))) (created by ReduxForm)\r\n    in ReduxForm (created by Context.Consumer)\r\n    in Hoc (created by ReduxForm)\r\n    in ReduxForm (created by ConnectFunction)\r\n    in ConnectFunction (created by Connect(ReduxForm))\r\n    in Connect(ReduxForm) (at QuestionnaireScreen.jsx:17)\r\n    in RCTScrollContentView (at ScrollView.js:976)\r\n    in RCTScrollView (at ScrollView.js:1115)\r\n    in ScrollView (at Wizard.jsx:84)\r\n    in RCTView (at View.js:45)\r\n    in View (at Wizard.jsx:83)\r\n    in BaseWizardInterface (created by ConnectFunction)\r\n    in ConnectFunction (at Wizard.jsx:173)\r\n    in BaseWizard (created by ConnectFunction)\r\n    in ConnectFunction (at QuestionnaireScreen.jsx:12)\r\n    in _default (created by SceneView)\r\n    in SceneView (at StackViewLayout.tsx:899)\r\n    in RCTView (at View.js:45)\r\n    in View (at createAnimatedComponent.js:151)\r\n    in AnimatedComponent (at StackViewCard.tsx:93)\r\n    in RCTView (at View.js:45)\r\n    in View (at createAnimatedComponent.js:151)\r\n    in AnimatedComponent (at screens.native.js:59)\r\n    in Screen (at StackViewCard.tsx:80)\r\n    in Card (at createPointerEventsContainer.tsx:95)\r\n    in Container (at StackViewLayout.tsx:971)\r\n    in RCTView (at View.js:45)\r\n    in View (at screens.native.js:83)\r\n    in ScreenContainer (at StackViewLayout.tsx:383)\r\n    in RCTView (at View.js:45)\r\n    in View (at createAnimatedComponent.js:151)\r\n    in AnimatedComponent (at StackViewLayout.tsx:379)\r\n    in PanGestureHandler (at StackViewLayout.tsx:372)\r\n    in StackViewLayout (at withOrientation.js:30)\r\n    in withOrientation (at StackView.tsx:103)\r\n    in RCTView (at View.js:45)\r\n    in View (at Transitioner.tsx:267)\r\n    in Transitioner (at StackView.tsx:40)\r\n    in StackView (created by Navigator)\r\n    in Navigator (at createKeyboardAwareNavigator.js:12)\r\n    in KeyboardAwareNavigator (at create-redux-container.js:72)\r\n    in NavigatorReduxWrapper (created by ConnectFunction)\r\n    in ConnectFunction (at App.jsx:36)\r\n    in RCTView (at View.js:45)\r\n    in View (at StatusBarWrapper.jsx:49)\r\n    in RCTView (at View.js:45)\r\n    in View (at StatusBarWrapper.jsx:48)\r\n    in BaseStatusBarWrapper (created by ConnectFunction)\r\n    in ConnectFunction (at App.jsx:35)\r\n    in BaseAuthGate (created by ConnectFunction)\r\n    in ConnectFunction (at App.jsx:34)\r\n    in PersistGate (at App.jsx:33)\r\n    in Provider (at App.jsx:32)\r\n    in _default (at withExpoRoot.js:20)\r\n    in RootErrorBoundary (at withExpoRoot.js:19)\r\n    in ExpoRootComponent (at renderApplication.js:35)\r\n    in RCTView (at View.js:45)\r\n    in View (at AppContainer.js:98)\r\n    in RCTView (at View.js:45)\r\n    in View (at AppContainer.js:115)\r\n    in AppContainer (at renderApplication.js:34)\r\n```\r\n\r\nFrom what I can tell, there are:\r\n\r\n* Eight layers for expo or react-native's bootstrapping;\r\n* A layer for the redux store `Provider`;\r\n* A layer for redux-persist's `PersistGate`;\r\n* Two layers for my `AuthGate` (as it's connected to the store with a HOC, `connect()`);\r\n* Two layers for my `StatusBarWrapper`;\r\n* Four layers for the `<View><View /></View>` in my `StatusBarWrapper`, (they come with `<RCTView />`s apparently);\r\n* Twenty-eight layers for `react-navigation`'s `StackNavigator`;\r\n* Nine layers for my `Wizard`, (two for the outer component, connected to the store, two for the inner component also connected to the store, two for a `<View />`, and three for a `<ScrollView />`);\r\n* Seven layers for my `QuestionnairePage`, (one redux `connect()` HOC to connect the redux-form to the store to load initial values, one redux `connect()` HOC that the `redux-form` connects _itself_ to the store with for its own purposes, one for the `ReduxForm` itself, one for the HOC it contains, one for a context consumer layer (I think?), then finally two more for my actual form.\r\n\r\nGiven that's 62 in total, I imagine that perhaps the eight expo/react-native bootstrapping layers aren't counted, meaning the final seven layers push it over the edge.\r\n\r\n**What is the expected behavior?**\r\n\r\n`NESTED_UPDATE_LIMIT` is there to provide oven mitts for infinite loops, right?  Every single question I found on Stack Overflow about this invariant was someone not understanding how JSX works and calling `.setState()` in `.render()`, which isn't at all what I'm doing.  I don't understand why the detection for _infinite_ loops is set to such a low threshold.\r\n\r\nIn my opinion, `NESTED_UPDATE_LIMIT` should be at least 10x higher.  It'll still catch infinite loops just fine, and won't take much longer to do so, but won't kick my ass for having the audacity to use several libraries and a reasonably deep structure.\r\n\r\nFailing that, it should be configurable.  As I said, I'm using expo, which I believe means there's no way for me to change this value when publishing my app.  I can edit it in `node_modules/` just fine on my local machine (and the error goes away of course), but with no way to do so on the build servers, I can't make this app.  Not with react, anyway.  I really don't want that to be the case, because I've been building this for months, at this point, and starting over in swift or whatever would be an awful cost to my employers just because someone thought \"50 is enough for anyone\".  :/\r\n\r\nAs it seems like the expo bootstrapping layers are being ignored, I'm going to start diving in to that code now to see if I can steal its ideas, but of course I shouldn't have to.\r\n\r\n**Which versions of React, and which browser / OS are affected by this issue? Did this work in previous versions of React?**\r\n\r\n```\r\n  \"dependencies\": {\r\n    \"@expo/browser-polyfill\": \"0.0.1-alpha.3\",\r\n    \"@expo/vector-icons\": \"10.0.1\",\r\n    \"@react-navigation/core\": \"3.3.1\",\r\n    \"airbnb-prop-types\": \"2.13.2\",\r\n    \"axios\": \"0.18.0\",\r\n    \"buffer\": \"5.2.1\",\r\n    \"expo\": \"33.0.0\",\r\n    \"expo-constants\": \"5.0.1\",\r\n    \"expo-gl\": \"5.0.1\",\r\n    \"expo-web-browser\": \"5.0.3\",\r\n    \"lodash\": \"4.17.11\",\r\n    \"moment\": \"2.24.0\",\r\n    \"path\": \"0.12.7\",\r\n    \"pixi.js\": \"4.7.0\",\r\n    \"prop-types\": \"15.7.2\",\r\n    \"react\": \"16.8.4\",\r\n    \"react-moment-proptypes\": \"1.6.0\",\r\n    \"react-native\": \"https://github.com/expo/react-native/archive/sdk-33.0.0.tar.gz\",\r\n    \"react-navigation\": \"3.11.0\",\r\n    \"react-navigation-redux-helpers\": \"3.0.2\",\r\n    \"react-redux\": \"7.1.0\",\r\n    \"react-switch-case\": \"1.0.6\",\r\n    \"redux\": \"4.0.1\",\r\n    \"redux-form\": \"8.2.1\",\r\n    \"redux-persist\": \"5.10.0\",\r\n    \"redux-persist-expo-securestore\": \"2.0.0\",\r\n    \"redux-thunk\": \"2.3.0\",\r\n    \"reselect\": \"4.0.0\",\r\n    \"whatwg-url\": \"7.0.0\"\r\n  },\r\n```\r\n\r\nLinux Mint 18, iOS 12.2.  Most likely didn't work in previous versions of react, but I haven't checked.",
  "closed_by": {
    "login": "Asday",
    "id": 340276,
    "node_id": "MDQ6VXNlcjM0MDI3Ng==",
    "avatar_url": "https://avatars1.githubusercontent.com/u/340276?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/Asday",
    "html_url": "https://github.com/Asday",
    "followers_url": "https://api.github.com/users/Asday/followers",
    "following_url": "https://api.github.com/users/Asday/following{/other_user}",
    "gists_url": "https://api.github.com/users/Asday/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/Asday/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/Asday/subscriptions",
    "organizations_url": "https://api.github.com/users/Asday/orgs",
    "repos_url": "https://api.github.com/users/Asday/repos",
    "events_url": "https://api.github.com/users/Asday/events{/privacy}",
    "received_events_url": "https://api.github.com/users/Asday/received_events",
    "type": "User",
    "site_admin": false
  }
}

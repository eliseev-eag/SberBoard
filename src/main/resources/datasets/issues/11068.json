{
  "url": "https://api.github.com/repos/facebook/react/issues/11068",
  "repository_url": "https://api.github.com/repos/facebook/react",
  "labels_url": "https://api.github.com/repos/facebook/react/issues/11068/labels{/name}",
  "comments_url": "https://api.github.com/repos/facebook/react/issues/11068/comments",
  "events_url": "https://api.github.com/repos/facebook/react/issues/11068/events",
  "html_url": "https://github.com/facebook/react/issues/11068",
  "id": 262494518,
  "node_id": "MDU6SXNzdWUyNjI0OTQ1MTg=",
  "number": 11068,
  "title": "Tests failing when using createPortal() with React 16",
  "user": {
    "login": "chevin99",
    "id": 7562346,
    "node_id": "MDQ6VXNlcjc1NjIzNDY=",
    "avatar_url": "https://avatars0.githubusercontent.com/u/7562346?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/chevin99",
    "html_url": "https://github.com/chevin99",
    "followers_url": "https://api.github.com/users/chevin99/followers",
    "following_url": "https://api.github.com/users/chevin99/following{/other_user}",
    "gists_url": "https://api.github.com/users/chevin99/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/chevin99/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/chevin99/subscriptions",
    "organizations_url": "https://api.github.com/users/chevin99/orgs",
    "repos_url": "https://api.github.com/users/chevin99/repos",
    "events_url": "https://api.github.com/users/chevin99/events{/privacy}",
    "received_events_url": "https://api.github.com/users/chevin99/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 3,
  "created_at": "2017-10-03T16:25:30Z",
  "updated_at": "2017-10-03T18:55:47Z",
  "closed_at": "2017-10-03T17:51:07Z",
  "author_association": "NONE",
  "body": "**Bug**:\r\n\r\nI have these two files:\r\n\r\n**index.js**\r\n```\r\nimport React, { Component } from 'react'\r\nimport ReactDOM from 'react-dom'\r\n\r\nexport default class SomethingCool extends Component {\r\n  render() {\r\n    return ReactDOM.createPortal(<div></div>, this.portal)\r\n  }\r\n}\r\n```\r\n\r\n**index.test.js**\r\n```\r\nimport React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport SomethingCool from './';\r\n\r\nit.only('renders without crashing', () => {\r\n  const div = document.createElement('div');\r\n  ReactDOM.render(<SomethingCool />, div);\r\n});\r\n```\r\n\r\nThe app was started with create-react-app, and when I run the test, I get this:\r\n\r\n`FAIL  src/components/SomethingCool/index.test.js`\r\n‚óè Console\r\n\r\n    console.error node_modules/react-dom/cjs/react-dom.development.js:8305\r\n      The above error occurred in the <SomethingCool> component:\r\n          in SomethingCool (at index.test.js:7)\r\n\r\n      Consider adding an error boundary to your tree to customize error handling behavior.\r\n      You can learn more about error boundaries at https://fb.me/react-error-boundaries.\r\n\r\n  ‚óè renders without crashing\r\n\r\n    An error was thrown inside one of your components, but React doesn't know what it was. This is likely due to browser flakiness. React does its best to preserve the \"Pause on exceptions\" behavior of the DevTools, which requires some DEV-mode only tricks. It's possible that these don't work in your browser. Try triggering the error in production mode, or switching to a modern browser. If you suspect that this is actually an issue with React, please file an issue.\r\n\r\n      at Object.invokeGuardedCallbackDev (node_modules/react-dom/cjs/react-dom.development.js:1343:19)\r\n      at invokeGuardedCallback (node_modules/react-dom/cjs/react-dom.development.js:1195:27)\r\n      at performWork (node_modules/react-dom/cjs/react-dom.development.js:12800:7)\r\n      at scheduleUpdateImpl (node_modules/react-dom/cjs/react-dom.development.js:13185:19)\r\n      at scheduleUpdate (node_modules/react-dom/cjs/react-dom.development.js:13124:12)\r\n      at scheduleTopLevelUpdate (node_modules/react-dom/cjs/react-dom.development.js:13395:5)\r\n      at Object.updateContainer (node_modules/react-dom/cjs/react-dom.development.js:13425:7)\r\n      at node_modules/react-dom/cjs/react-dom.development.js:17105:19\r\n      at Object.unbatchedUpdates (node_modules/react-dom/cjs/react-dom.development.js:13256:14)\r\n      at renderSubtreeIntoContainer (node_modules/react-dom/cjs/react-dom.development.js:17104:17)\r\n      at Object.render (node_modules/react-dom/cjs/react-dom.development.js:17129:12)\r\n      at Object.<anonymous>.it.only (src/components/Notification/index.test.js:7:22)\r\n      at Promise.resolve.then.el (node_modules/p-map/index.js:46:16)\r\n      at process._tickCallback (internal/process/next_tick.js:109:7)\r\n\r\n\r\n\r\nWhen I change the component to just render the empty div without `createPortal()`, it works fine.\r\n\r\nInfo:\r\n\r\ncreate-react-app: 1.3.0\r\nreact-scripts: 1.0.14\r\nreact: 16.0.0\r\nreact-dom: 16.0.0\r\nmacOS Sierra 10.12.6\r\n\r\n\r\nNote that I also used [this suggested workaround on #9102 for requestAnimationFrame](https://github.com/facebook/react/issues/9102#issuecomment-283873039) with the tests: \r\n\r\nPlease let me know if there's more info needed that will help figure out what's going on.  Thanks üòÑ ",
  "closed_by": {
    "login": "chevin99",
    "id": 7562346,
    "node_id": "MDQ6VXNlcjc1NjIzNDY=",
    "avatar_url": "https://avatars0.githubusercontent.com/u/7562346?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/chevin99",
    "html_url": "https://github.com/chevin99",
    "followers_url": "https://api.github.com/users/chevin99/followers",
    "following_url": "https://api.github.com/users/chevin99/following{/other_user}",
    "gists_url": "https://api.github.com/users/chevin99/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/chevin99/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/chevin99/subscriptions",
    "organizations_url": "https://api.github.com/users/chevin99/orgs",
    "repos_url": "https://api.github.com/users/chevin99/repos",
    "events_url": "https://api.github.com/users/chevin99/events{/privacy}",
    "received_events_url": "https://api.github.com/users/chevin99/received_events",
    "type": "User",
    "site_admin": false
  }
}

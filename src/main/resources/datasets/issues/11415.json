{
  "url": "https://api.github.com/repos/facebook/react/issues/11415",
  "repository_url": "https://api.github.com/repos/facebook/react",
  "labels_url": "https://api.github.com/repos/facebook/react/issues/11415/labels{/name}",
  "comments_url": "https://api.github.com/repos/facebook/react/issues/11415/comments",
  "events_url": "https://api.github.com/repos/facebook/react/issues/11415/events",
  "html_url": "https://github.com/facebook/react/issues/11415",
  "id": 270085702,
  "node_id": "MDU6SXNzdWUyNzAwODU3MDI=",
  "number": 11415,
  "title": "componentDidCatch not fired as expected",
  "user": {
    "login": "kgaregin",
    "id": 14559071,
    "node_id": "MDQ6VXNlcjE0NTU5MDcx",
    "avatar_url": "https://avatars1.githubusercontent.com/u/14559071?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/kgaregin",
    "html_url": "https://github.com/kgaregin",
    "followers_url": "https://api.github.com/users/kgaregin/followers",
    "following_url": "https://api.github.com/users/kgaregin/following{/other_user}",
    "gists_url": "https://api.github.com/users/kgaregin/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/kgaregin/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/kgaregin/subscriptions",
    "organizations_url": "https://api.github.com/users/kgaregin/orgs",
    "repos_url": "https://api.github.com/users/kgaregin/repos",
    "events_url": "https://api.github.com/users/kgaregin/events{/privacy}",
    "received_events_url": "https://api.github.com/users/kgaregin/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 10,
  "created_at": "2017-10-31T19:13:17Z",
  "updated_at": "2017-11-03T13:29:22Z",
  "closed_at": "2017-11-03T13:26:12Z",
  "author_association": "NONE",
  "body": "hello guys! I try to build custom blog app and [here is the branch](https://github.com/kgaregin/huckleberry-ogre/tree/feature-react-ui-error-handler) with below mentioned issue.\r\n\r\n## **The issue:**\r\n\r\ncan't bring to live my ErrorBoundary though, doing everything like it is described in react 16 docs... Debugging shows that componentDidCatch is never called on errors (not synthetic new Error, nor real ui errors). \r\n\r\nI use ErrorBoundary in my [Navigation component](https://github.com/kgaregin/huckleberry-ogre/blob/feature-react-ui-error-handler/src/frontSource/core/modules/Navigation.tsx)\r\n\r\n```jsx\r\n<Grid item xl={7} lg={9} md={11} sm={12} xs={12}>\r\n    <ErrorBoundary>\r\n        <Switch>\r\n            <Route exact path=\"/\" render={() => <h1>Main page under construction</h1>}/>\r\n            <Route path=\"/blog/:mode?/:postID?\" component={Blog}/>\r\n        </Switch>\r\n    </ErrorBoundary>\r\n</Grid>\r\n```\r\n\r\nHere's [ErrorBoundary component](https://github.com/kgaregin/huckleberry-ogre/blob/feature-react-ui-error-handler/src/frontSource/core/modules/ErrorBoundary.tsx):\r\n\r\n```jsx\r\nexport class ErrorBoundary extends React.Component<{ children: JSX.Element }, IErrorBoundaryState> {\r\n    state: IErrorBoundaryState = {hasError: false};\r\n\r\n    componentDidCatch(error: Error, errorInfo: ErrorInfo) {\r\n        // Display fallback UI\r\n        this.setState({\r\n                hasError: true,\r\n                error: error,\r\n                errorInfo: errorInfo\r\n            }\r\n        );\r\n        // You can also log the error to an error reporting service\r\n        console.log(error, errorInfo)\r\n    }\r\n\r\n    render() {\r\n        const {children} = this.props;\r\n        const {hasError, error, errorInfo} = this.state;\r\n        if (hasError) {\r\n            // You can render any custom fallback UI\r\n            return (\r\n                <div>\r\n                    <h1>Something went wrong.</h1>\r\n                    <Ghost/>\r\n                    <hr/>\r\n                    <h3>{error && error.toString()}</h3>\r\n                    <br/>\r\n                    <h3>{errorInfo && errorInfo.componentStack}</h3>\r\n                </div>\r\n            );\r\n        }\r\n        return children;\r\n    }\r\n}\r\n```\r\n\r\nAnd [Blog component that is bugged natural way ðŸ˜ƒ](https://github.com/kgaregin/huckleberry-ogre/blob/feature-react-ui-error-handler/src/frontSource/modules/blog/Blog.tsx). Here's code that cause render bug in runtime:\r\n\r\n```jsx\r\n// const Dropzone = require('react-dropzone').default; --- proper import that works\r\nimport * as Dropzone from 'react-dropzone'; // importing this way cause render error on runtime\r\n                                            // when Dropzone should be rendered (the case when\r\n                                            // we go on Route with mode === CREATE or EDIT)\r\n/*...*/\r\nrenderPostEdit = () => {\r\n    /*...*/\r\n    return (\r\n        <form ref={this.saveDropZoneContainerRef} className={classes.container} noValidate autoComplete=\"off\">\r\n           /*...*/\r\n            <Dropzone> //just rendering attempt enough to get exception if imported with import statement\r\n             /*...*/\r\n            </Dropzone>\r\n            /*...*/\r\n        </form>\r\n    );\r\n};\r\n```\r\n**Also i did try:**\r\n\r\n- with conditional throw Error inside Blog render method\r\n- wrap the very root application component with ErrorBoundary \r\n\r\nand every time exatly the same effect - componentDidCatch not fired ðŸ˜ž \r\n\r\n\r\n ## **Expected behavior:**\r\n\r\ncomponentDidCatch fired when any of child component can't render properly due to unhandled exception, like it described in [docs](https://reactjs.org/docs/error-boundaries.html).\r\n\r\n## **Project technology stack:**\r\nMy [package.json](https://github.com/kgaregin/huckleberry-ogre/blob/feature-react-ui-error-handler/package.json).\r\n- Windows, Chrome\r\n- React 16\r\n- TypeScript 2.5.3 config [here](https://github.com/kgaregin/huckleberry-ogre/blob/feature-react-ui-error-handler/tsconfig.json) and extended with [this file](https://github.com/kgaregin/huckleberry-ogre/blob/feature-react-ui-error-handler/src/frontSource/tsconfig.json).\r\n- Webpack v3.5.5 with webpack-dev-server. Here's [config](https://github.com/kgaregin/huckleberry-ogre/blob/feature-react-ui-error-handler/webpack.config.ts).\r\n- redux v3.7.2\r\n- react-redux v5.0.6\r\n- react-router-redux v5.0.0-alpha.8\r\n- material-ui v1.0.0-beta.8 as components repository",
  "closed_by": {
    "login": "kgaregin",
    "id": 14559071,
    "node_id": "MDQ6VXNlcjE0NTU5MDcx",
    "avatar_url": "https://avatars1.githubusercontent.com/u/14559071?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/kgaregin",
    "html_url": "https://github.com/kgaregin",
    "followers_url": "https://api.github.com/users/kgaregin/followers",
    "following_url": "https://api.github.com/users/kgaregin/following{/other_user}",
    "gists_url": "https://api.github.com/users/kgaregin/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/kgaregin/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/kgaregin/subscriptions",
    "organizations_url": "https://api.github.com/users/kgaregin/orgs",
    "repos_url": "https://api.github.com/users/kgaregin/repos",
    "events_url": "https://api.github.com/users/kgaregin/events{/privacy}",
    "received_events_url": "https://api.github.com/users/kgaregin/received_events",
    "type": "User",
    "site_admin": false
  }
}

{
  "url": "https://api.github.com/repos/facebook/react/issues/8838",
  "repository_url": "https://api.github.com/repos/facebook/react",
  "labels_url": "https://api.github.com/repos/facebook/react/issues/8838/labels{/name}",
  "comments_url": "https://api.github.com/repos/facebook/react/issues/8838/comments",
  "events_url": "https://api.github.com/repos/facebook/react/issues/8838/events",
  "html_url": "https://github.com/facebook/react/issues/8838",
  "id": 202280927,
  "node_id": "MDU6SXNzdWUyMDIyODA5Mjc=",
  "number": 8838,
  "title": "dangerouslySetInnerHTML should NOT remove script tag",
  "user": {
    "login": "rajaraodv",
    "id": 626337,
    "node_id": "MDQ6VXNlcjYyNjMzNw==",
    "avatar_url": "https://avatars2.githubusercontent.com/u/626337?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/rajaraodv",
    "html_url": "https://github.com/rajaraodv",
    "followers_url": "https://api.github.com/users/rajaraodv/followers",
    "following_url": "https://api.github.com/users/rajaraodv/following{/other_user}",
    "gists_url": "https://api.github.com/users/rajaraodv/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/rajaraodv/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/rajaraodv/subscriptions",
    "organizations_url": "https://api.github.com/users/rajaraodv/orgs",
    "repos_url": "https://api.github.com/users/rajaraodv/repos",
    "events_url": "https://api.github.com/users/rajaraodv/events{/privacy}",
    "received_events_url": "https://api.github.com/users/rajaraodv/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 10,
  "created_at": "2017-01-21T01:36:59Z",
  "updated_at": "2019-08-15T23:56:30Z",
  "closed_at": "2017-07-12T11:23:41Z",
  "author_association": "NONE",
  "body": "**Do you want to request a *feature* or report a *bug*?**\r\nBug\r\n**What is the current behavior?**\r\nThere are many cases in the real-world where we need to inject external 3rd party script. For example, adding google-analytics code, adding stripe button and so on. Currently dangerouslySetInnerHTML removes the script tag making it hard to simply inject JS code to the page.\r\nBecause of this issue, people are writing **bloated** components like [react-ga (google analytics)](https://github.com/react-ga/react-ga) that's 12KB(minimized) and all it does it to add a script tag! There are other similar libs like: [react-scripts](https://www.npmjs.com/package/react-scripts) and [stripe-checkout]( https://github.com/azmenak/react-stripe-checkout) (8KB minimized to add the script).\r\n\r\nI believe that at least when using dangerouslySetInnerHTML, we should not remove script tag and instead run the script.\r\n\r\nFor example, adding stripe's button is as follows.\r\nhttps://stripe.com/docs/checkout/tutorial#embedding\r\n```\r\n<form action=\"/your-server-side-code\" method=\"POST\">\r\n  <script\r\n    src=\"https://checkout.stripe.com/checkout.js\" class=\"stripe-button\"\r\n    data-key=\"pk_test_5qV78InO5XtnYvFRZ2VKnIjy\"\r\n    data-amount=\"999\"\r\n    data-name=\"Demo Site\"\r\n    data-description=\"Widget\"\r\n    data-image=\"https://stripe.com/img/documentation/checkout/marketplace.png\"\r\n    data-locale=\"auto\">\r\n  </script>\r\n</form>\r\n```\r\n**If the current behavior is a bug, please provide the steps to reproduce and if possible a minimal demo of the problem via https://jsfiddle.net or similar (template: https://jsfiddle.net/reactjs/69z2wepo/).**\r\n\r\n```\r\nvar StripeCheckout = React.createClass({\r\n  createMarkup: function() {\r\n    return {__html: \r\n      `Below script should create a Stripe button:\r\n      <form action=\"/your-server-side-code\" method=\"POST\">\r\n        <script\r\n          src=\"https://checkout.stripe.com/checkout.js\" class=\"stripe-button\"\r\n          data-key=\"pk_test_5qV78InO5XtnYvFRZ2VKnIjy\"\r\n          data-amount=\"999\"\r\n          data-name=\"Demo Site\"\r\n          data-description=\"Widget\"\r\n          data-image=\"https://stripe.com/img/documentation/checkout/marketplace.png\"\r\n          data-locale=\"auto\">\r\n        </script>\r\n      </form>`\r\n    };\r\n  },\r\n  render: function() {\r\n    return  <span dangerouslySetInnerHTML={this.createMarkup()} />;\r\n  }\r\n})\r\n\r\nReactDOM.render(\r\n  <StripeCheckout />,\r\n  document.getElementById('container')\r\n);\r\n```\r\n\r\n**What is the expected behavior?**\r\nIt should display a \"Stripe\" button button.\r\n\r\n**Which versions of React, and which browser / OS are affected by this issue? Did this work in previous versions of React?**\r\n15.4.2. I believe that this is how React worked for a long time.",
  "closed_by": {
    "login": "nhunzaker",
    "id": 590904,
    "node_id": "MDQ6VXNlcjU5MDkwNA==",
    "avatar_url": "https://avatars3.githubusercontent.com/u/590904?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/nhunzaker",
    "html_url": "https://github.com/nhunzaker",
    "followers_url": "https://api.github.com/users/nhunzaker/followers",
    "following_url": "https://api.github.com/users/nhunzaker/following{/other_user}",
    "gists_url": "https://api.github.com/users/nhunzaker/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/nhunzaker/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/nhunzaker/subscriptions",
    "organizations_url": "https://api.github.com/users/nhunzaker/orgs",
    "repos_url": "https://api.github.com/users/nhunzaker/repos",
    "events_url": "https://api.github.com/users/nhunzaker/events{/privacy}",
    "received_events_url": "https://api.github.com/users/nhunzaker/received_events",
    "type": "User",
    "site_admin": false
  }
}

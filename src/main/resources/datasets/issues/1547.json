{
  "url": "https://api.github.com/repos/facebook/react/issues/1547",
  "repository_url": "https://api.github.com/repos/facebook/react",
  "labels_url": "https://api.github.com/repos/facebook/react/issues/1547/labels{/name}",
  "comments_url": "https://api.github.com/repos/facebook/react/issues/1547/comments",
  "events_url": "https://api.github.com/repos/facebook/react/issues/1547/events",
  "html_url": "https://github.com/facebook/react/pull/1547",
  "id": 33733216,
  "node_id": "MDExOlB1bGxSZXF1ZXN0MTYwMjE0NTM=",
  "number": 1547,
  "title": "Proof-of-concept, relative react IDs",
  "user": {
    "login": "syranide",
    "id": 1714255,
    "node_id": "MDQ6VXNlcjE3MTQyNTU=",
    "avatar_url": "https://avatars1.githubusercontent.com/u/1714255?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/syranide",
    "html_url": "https://github.com/syranide",
    "followers_url": "https://api.github.com/users/syranide/followers",
    "following_url": "https://api.github.com/users/syranide/following{/other_user}",
    "gists_url": "https://api.github.com/users/syranide/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/syranide/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/syranide/subscriptions",
    "organizations_url": "https://api.github.com/users/syranide/orgs",
    "repos_url": "https://api.github.com/users/syranide/repos",
    "events_url": "https://api.github.com/users/syranide/events{/privacy}",
    "received_events_url": "https://api.github.com/users/syranide/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 2,
  "created_at": "2014-05-17T15:57:31Z",
  "updated_at": "2014-05-18T12:32:04Z",
  "closed_at": "2014-05-18T12:32:02Z",
  "author_association": "CONTRIBUTOR",
  "pull_request": {
    "url": "https://api.github.com/repos/facebook/react/pulls/1547",
    "html_url": "https://github.com/facebook/react/pull/1547",
    "diff_url": "https://github.com/facebook/react/pull/1547.diff",
    "patch_url": "https://github.com/facebook/react/pull/1547.patch"
  },
  "body": "cc @petehunt\n\nI did a quick take on it to see what the outcome was, so here it is, each node only has a relative ID. Having to traverse up the tree to reconstruct the key is significantly expensive though (not surprisingly). The only two ways out of that is to cache the reconstructed key in each node traversed (ick) or to use an absolute ID at say custom component roots, which would significantly limit the depth.\n\nResults: http://i.imgur.com/EzkzZkp.png\n\nAs you can see, two of the tests has taken a _significant_ hit, presumably from `ReactMount.getID` becoming significantly more expensive due to having to reconstruct the ID. Expectedly though, the brute renderComponent test shows a significant ~11% improvement, presumably from the significantly shorter HTML generated.\n\n---\n\nHaving run some basic performance tests on [mounting + unmounting], and [mounting + traversing + unmount], it doesn't seem like there's a significant cost to traverse all inserted nodes. Given that `data-reactid` actually seems to add a measurably significant cost during insertion into the DOM, I'm feeling confident that removing the `data-reactid` attribute and immediately traversing the DOM would compete in performance. It would also bring with it a bunch of other significant benefits; all DOM components already have a ref to its node, less DOM clutter, less bloat for server-rendered DOM, etc.\n\nI'm not familiar enough with the core, but intuitively it seems like traversing the inserted DOM and renderedComponents in sync should be fairly straight-forward. Additionally, since we're traversing the DOM, rather than invent a react ID at all, it seems like it should be enough to just put a \"hidden\" reference directly to each DOM component in each node. You now have a super cheap `DOM node <=> ReactDOMComponent`. Additionally, we would no longer need to maintain the `nodeCache` either.\n\nPerhaps there are technical issues standing in the way, but it would seem like the same information could also be used in `DOMChildrenOperations` to remove the dependency on `_mountIndex`, which would be a **very** good thing (but perhaps it's just wishful thinking).\n",
  "closed_by": {
    "login": "syranide",
    "id": 1714255,
    "node_id": "MDQ6VXNlcjE3MTQyNTU=",
    "avatar_url": "https://avatars1.githubusercontent.com/u/1714255?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/syranide",
    "html_url": "https://github.com/syranide",
    "followers_url": "https://api.github.com/users/syranide/followers",
    "following_url": "https://api.github.com/users/syranide/following{/other_user}",
    "gists_url": "https://api.github.com/users/syranide/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/syranide/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/syranide/subscriptions",
    "organizations_url": "https://api.github.com/users/syranide/orgs",
    "repos_url": "https://api.github.com/users/syranide/repos",
    "events_url": "https://api.github.com/users/syranide/events{/privacy}",
    "received_events_url": "https://api.github.com/users/syranide/received_events",
    "type": "User",
    "site_admin": false
  }
}

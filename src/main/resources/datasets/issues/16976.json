{
  "url": "https://api.github.com/repos/facebook/react/issues/16976",
  "repository_url": "https://api.github.com/repos/facebook/react",
  "labels_url": "https://api.github.com/repos/facebook/react/issues/16976/labels{/name}",
  "comments_url": "https://api.github.com/repos/facebook/react/issues/16976/comments",
  "events_url": "https://api.github.com/repos/facebook/react/issues/16976/events",
  "html_url": "https://github.com/facebook/react/issues/16976",
  "id": 501127860,
  "node_id": "MDU6SXNzdWU1MDExMjc4NjA=",
  "number": 16976,
  "title": "Bug: child.type no longer maintains function equality",
  "user": {
    "login": "selbekk",
    "id": 1307267,
    "node_id": "MDQ6VXNlcjEzMDcyNjc=",
    "avatar_url": "https://avatars1.githubusercontent.com/u/1307267?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/selbekk",
    "html_url": "https://github.com/selbekk",
    "followers_url": "https://api.github.com/users/selbekk/followers",
    "following_url": "https://api.github.com/users/selbekk/following{/other_user}",
    "gists_url": "https://api.github.com/users/selbekk/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/selbekk/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/selbekk/subscriptions",
    "organizations_url": "https://api.github.com/users/selbekk/orgs",
    "repos_url": "https://api.github.com/users/selbekk/repos",
    "events_url": "https://api.github.com/users/selbekk/events{/privacy}",
    "received_events_url": "https://api.github.com/users/selbekk/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "open",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 4,
  "created_at": "2019-10-01T20:28:24Z",
  "updated_at": "2019-10-03T13:39:09Z",
  "closed_at": null,
  "author_association": "CONTRIBUTOR",
  "body": "**Do you want to request a *feature* or report a *bug*?**\r\n\r\nBug\r\n\r\n**What is the current behavior?**\r\n\r\nWhen I map over `props.children` to figure out whether or not a child is of a particular type, the function reference is no longer the same.\r\n\r\nThis is a regression between 16.9.0 and 16.10.0, and it shows up at least when using Gatsby. It does not, however, show up on the client side. Perhaps it has something to do with the server renderer?\r\n\r\nHere's a reproduction of the code leading to the bug:\r\n\r\n[Demo where it's working in 16.9.0](https://codesandbox.io/s/gatsby-starter-default-bmf6y)\r\n[Demo where it's not working anymore in 16.10.0](https://codesandbox.io/s/gatsby-starter-default-3ypf0)\r\n\r\n**What is the expected behavior?**\r\n\r\nI'd expect the following to work the same in 16.9.x and 16.10.x\r\n\r\n```js\r\nfunction Menu(props) { return <div className=\"menu\">{props.children}</div>; }\r\nfunction MenuItem(props) {\r\n  const hasSubMenu = React.Children.toArray(props.children).some(\r\n    child => child.type === Menu // â¬…this check no longer works\r\n  );\r\n\r\n  // do some logic with hasSubMenu\r\n  \r\n  return props.children;\r\n}\r\n```\r\n\r\n**Which versions of React, and which browser / OS are affected by this issue? Did this work in previous versions of React?**\r\n\r\nBroken in 16.10.0 and 16.10.1 - works in 16.9.0 at least - haven't tried with lower versions.",
  "closed_by": null
}

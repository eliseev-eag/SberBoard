{
  "url": "https://api.github.com/repos/facebook/react/issues/14373",
  "repository_url": "https://api.github.com/repos/facebook/react",
  "labels_url": "https://api.github.com/repos/facebook/react/issues/14373/labels{/name}",
  "comments_url": "https://api.github.com/repos/facebook/react/issues/14373/comments",
  "events_url": "https://api.github.com/repos/facebook/react/issues/14373/events",
  "html_url": "https://github.com/facebook/react/issues/14373",
  "id": 386511978,
  "node_id": "MDU6SXNzdWUzODY1MTE5Nzg=",
  "number": 14373,
  "title": "Using reducer/state inside useEffect()",
  "user": {
    "login": "babloo80",
    "id": 3709328,
    "node_id": "MDQ6VXNlcjM3MDkzMjg=",
    "avatar_url": "https://avatars3.githubusercontent.com/u/3709328?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/babloo80",
    "html_url": "https://github.com/babloo80",
    "followers_url": "https://api.github.com/users/babloo80/followers",
    "following_url": "https://api.github.com/users/babloo80/following{/other_user}",
    "gists_url": "https://api.github.com/users/babloo80/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/babloo80/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/babloo80/subscriptions",
    "organizations_url": "https://api.github.com/users/babloo80/orgs",
    "repos_url": "https://api.github.com/users/babloo80/repos",
    "events_url": "https://api.github.com/users/babloo80/events{/privacy}",
    "received_events_url": "https://api.github.com/users/babloo80/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 3,
  "created_at": "2018-12-02T00:18:17Z",
  "updated_at": "2019-02-08T17:28:33Z",
  "closed_at": "2019-02-08T17:28:33Z",
  "author_association": "NONE",
  "body": "**Do you want to request a *feature* or report a *bug*?**\r\nThis may be a bug or the way useEffect() works.\r\n\r\n**What is the current behavior?**\r\nState values are not updated when used inside an effect (the effect is intended to be executed only once)\r\n\r\n```javascript\r\nimport React, {useEffect, useState} from 'react'\r\n\r\nconst App = (props) => {\r\n  const [count, setCount] = useState(0)\r\n\r\n  useEffect( () => {\r\n    const interval1 = setInterval(() => {\r\n      console.log('interval 1:', count) //output 'interval 1: 0'\r\n    }, 4000)\r\n\r\n    return () => {\r\n      clearInterval(interval1)\r\n    }\r\n  }, [])\r\n\r\n  return (\r\n    <div className=\"App\">\r\n      {count}\r\n      <button onClick={() => setCount(count+1)}>Count</button>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default App;\r\n```\r\nThe code would work as expected when `useEffect( () => {...})` is used without watching for `[]`, but then the interval would go thru new subscriptions cycles for every state change. Is this an expected behavior?\r\n\r\nI am sort of experimenting to use rxjs to subscribe to certain events that looks at state/reducer values. \r\n\r\n**Which versions of React, and which browser / OS are affected by this issue? **\r\n`\"react\": \"^16.7.0-alpha.2\"`",
  "closed_by": {
    "login": "gaearon",
    "id": 810438,
    "node_id": "MDQ6VXNlcjgxMDQzOA==",
    "avatar_url": "https://avatars0.githubusercontent.com/u/810438?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/gaearon",
    "html_url": "https://github.com/gaearon",
    "followers_url": "https://api.github.com/users/gaearon/followers",
    "following_url": "https://api.github.com/users/gaearon/following{/other_user}",
    "gists_url": "https://api.github.com/users/gaearon/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/gaearon/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/gaearon/subscriptions",
    "organizations_url": "https://api.github.com/users/gaearon/orgs",
    "repos_url": "https://api.github.com/users/gaearon/repos",
    "events_url": "https://api.github.com/users/gaearon/events{/privacy}",
    "received_events_url": "https://api.github.com/users/gaearon/received_events",
    "type": "User",
    "site_admin": false
  }
}

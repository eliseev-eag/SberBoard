{
  "url": "https://api.github.com/repos/facebook/react/issues/13881",
  "repository_url": "https://api.github.com/repos/facebook/react",
  "labels_url": "https://api.github.com/repos/facebook/react/issues/13881/labels{/name}",
  "comments_url": "https://api.github.com/repos/facebook/react/issues/13881/comments",
  "events_url": "https://api.github.com/repos/facebook/react/issues/13881/events",
  "html_url": "https://github.com/facebook/react/issues/13881",
  "id": 371653220,
  "node_id": "MDU6SXNzdWUzNzE2NTMyMjA=",
  "number": 13881,
  "title": "Unexpected PureComponent Behavior?",
  "user": {
    "login": "GarethSmall",
    "id": 32682373,
    "node_id": "MDQ6VXNlcjMyNjgyMzcz",
    "avatar_url": "https://avatars2.githubusercontent.com/u/32682373?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/GarethSmall",
    "html_url": "https://github.com/GarethSmall",
    "followers_url": "https://api.github.com/users/GarethSmall/followers",
    "following_url": "https://api.github.com/users/GarethSmall/following{/other_user}",
    "gists_url": "https://api.github.com/users/GarethSmall/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/GarethSmall/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/GarethSmall/subscriptions",
    "organizations_url": "https://api.github.com/users/GarethSmall/orgs",
    "repos_url": "https://api.github.com/users/GarethSmall/repos",
    "events_url": "https://api.github.com/users/GarethSmall/events{/privacy}",
    "received_events_url": "https://api.github.com/users/GarethSmall/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 1,
  "created_at": "2018-10-18T18:23:53Z",
  "updated_at": "2018-10-18T19:34:29Z",
  "closed_at": "2018-10-18T19:34:29Z",
  "author_association": "CONTRIBUTOR",
  "body": "<!--\r\n  Note: if the issue is about documentation or the website, please file it at:\r\n  https://github.com/reactjs/reactjs.org/issues/new\r\n-->\r\n\r\n**Do you want to request a *feature* or report a *bug*?**\r\n\r\nbug\r\n\r\n**What is the current behavior?**\r\n\r\nSetup: \r\n- A Component with a counter in it to track the number of renders.\r\n- A container Component with a counter in it\r\n- A container PureComponent with with a counter in it.\r\n\r\n_All three of the above components accept children._\r\n\r\n- A main component that has a button in it that updates the state of some string value once\r\n\r\nScenario 1:\r\n\r\n- I use the regular container component with a single child: the string value state\r\n- I click the button multiple times\r\n- It updates each time as expected\r\n\r\nScenario 2:\r\n\r\n- I use the PureComponentContainer with a single child: a static string\r\n- I click the button multiple times\r\n- it has only renders 1 times (it's initial render) as expected\r\n\r\nScenario 3:\r\n\r\n- I use the PureComponentContainer with a single child: the string value state\r\n- I click the button multiple times\r\n- it has only renders 2 times (it's initial render, and updated render) as expected\r\n\r\nScenario 4:\r\n\r\n- I use the PureComponentContainer with a two children: the string value state, and a static value\r\n- I click the button multiple times\r\n- it updates each time I click, although the state value has changed only once. This is not expected\r\n\r\nHere is an example where I implement each scenario as well as show a comparison using === and reacts shallowEquals\r\n\r\nhttps://codesandbox.io/s/w0vvkk92nl\r\n\r\n**If the current behavior is a bug, please provide the steps to reproduce and if possible a minimal demo of the problem. Your bug will get fixed much faster if we can run your code and it doesn't have dependencies other than React. Paste the link to your JSFiddle (https://jsfiddle.net/Luktwrdm/) or CodeSandbox (https://codesandbox.io/s/new) example below:**\r\n\r\n**What is the expected behavior?**\r\n\r\nI may not fully understand the expected behavior of a PureComponent. I would assume due to the nature of how shallowEqual works it would validate as expected, whether or not the props has the same reference. In my example I show what happens when I compare two example props that both have the same values, but difference references. When I use normal === it doesn't validate if the ref is different, in shallowEqual is validates as long as the values are the same even if the refs are different.\r\n\r\nIn my second example, the values are the same, and the reference to props doesn't change as expected\r\nIn my third example, the values are again the same and the reference to the props again doesn't change as expected\r\n\r\nIn my final example, the values are the same, but the reference changes.\r\n\r\nFrom this I am lead to believe it's not validating even before it gets to the shallowEqual check.\r\n\r\nMaybe my implementation is wrong?\r\n\r\n**Which versions of React, and which browser / OS are affected by this issue? Did this work in previous versions of React?**\r\n\r\nGoogle Chrome Version 70.0.3538.67 (Official Build) beta (64-bit)\r\n\r\n16.5.2, I also tested on 16.6.0 alpha.\r\n\r\nMac OS 10.12.6\r\n\r\nI haven't verified on previous versions",
  "closed_by": {
    "login": "GarethSmall",
    "id": 32682373,
    "node_id": "MDQ6VXNlcjMyNjgyMzcz",
    "avatar_url": "https://avatars2.githubusercontent.com/u/32682373?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/GarethSmall",
    "html_url": "https://github.com/GarethSmall",
    "followers_url": "https://api.github.com/users/GarethSmall/followers",
    "following_url": "https://api.github.com/users/GarethSmall/following{/other_user}",
    "gists_url": "https://api.github.com/users/GarethSmall/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/GarethSmall/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/GarethSmall/subscriptions",
    "organizations_url": "https://api.github.com/users/GarethSmall/orgs",
    "repos_url": "https://api.github.com/users/GarethSmall/repos",
    "events_url": "https://api.github.com/users/GarethSmall/events{/privacy}",
    "received_events_url": "https://api.github.com/users/GarethSmall/received_events",
    "type": "User",
    "site_admin": false
  }
}

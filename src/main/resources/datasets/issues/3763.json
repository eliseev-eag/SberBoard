{
  "url": "https://api.github.com/repos/facebook/react/issues/3763",
  "repository_url": "https://api.github.com/repos/facebook/react",
  "labels_url": "https://api.github.com/repos/facebook/react/issues/3763/labels{/name}",
  "comments_url": "https://api.github.com/repos/facebook/react/issues/3763/comments",
  "events_url": "https://api.github.com/repos/facebook/react/issues/3763/events",
  "html_url": "https://github.com/facebook/react/issues/3763",
  "id": 71463688,
  "node_id": "MDU6SXNzdWU3MTQ2MzY4OA==",
  "number": 3763,
  "title": "React renders children <image> as <img>",
  "user": {
    "login": "framp",
    "id": 611109,
    "node_id": "MDQ6VXNlcjYxMTEwOQ==",
    "avatar_url": "https://avatars0.githubusercontent.com/u/611109?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/framp",
    "html_url": "https://github.com/framp",
    "followers_url": "https://api.github.com/users/framp/followers",
    "following_url": "https://api.github.com/users/framp/following{/other_user}",
    "gists_url": "https://api.github.com/users/framp/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/framp/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/framp/subscriptions",
    "organizations_url": "https://api.github.com/users/framp/orgs",
    "repos_url": "https://api.github.com/users/framp/repos",
    "events_url": "https://api.github.com/users/framp/events{/privacy}",
    "received_events_url": "https://api.github.com/users/framp/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 126382236,
      "node_id": "MDU6TGFiZWwxMjYzODIyMzY=",
      "url": "https://api.github.com/repos/facebook/react/labels/SVG",
      "name": "SVG",
      "color": "f7c6c7",
      "default": false
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 3,
  "created_at": "2015-04-28T03:03:50Z",
  "updated_at": "2015-05-04T00:47:34Z",
  "closed_at": "2015-05-04T00:47:34Z",
  "author_association": "CONTRIBUTOR",
  "body": "As of now, `createNodesFromMarkup` is rendering React children dumping all the code in a `div` using `innerHTML` and then inserting/replacing the nodes back.\n\nUnfortunately with svg's `image` tag we get back `img`.\n\n```\n<g className=\"shadows\">\n  <image xmlns=\"http://www.w3.org/2000/svg\"\n               xmlnsXlink=\"http://www.w3.org/1999/xlink\"\n               xlinkHref={this.state.shadows}\n               x=\"0\" y=\"0\" width={this.state.width} height={this.state.height}>\n  </image>\n  <image xmlns=\"http://www.w3.org/2000/svg\"\n               xmlnsXlink=\"http://www.w3.org/1999/xlink\"\n               xlinkHref={this.state.shadows}\n               x=\"0\" y=\"0\" width={this.state.width} height={this.state.height}>\n  </image>\n</g>\n```\n\nCode like this works fine (because it's actually using `React.createElement()`)\n\n```\n{this.state.parts.map(function(part) {\n  return <pattern key={part.id} id={'pattern-' + part.id}\n                           patternUnits=\"userSpaceOnUse\" width=\"50\" height=\"50\">\n              <image xmlns=\"http://www.w3.org/2000/svg\"\n                           xmlnsXlink=\"http://www.w3.org/1999/xlink\"\n                           xlinkHref={part.image}\n                           x=\"0\" y=\"0\" width=\"50\" height=\"50\">\n              </image>\n            </pattern>\n```\n\nCode like this is actually generating useless `<img>` tags via `createNodesFromMarkup`.\n\nI see three broad solutions:\n- I coded up an ugly solution which keep track of whether a node is a `svg` child and append the markup to a `svg` tag instead. It adds a couple of checks to all the HTML children flow (which is something I'm not happy about) and doesn't work in Safari browsers out of the box as they don't have innerHTML/innerSVG ([polyfill](https://code.google.com/p/innersvg/))\n- The cleanest solution would be to just change `createNodesFromMarkup` to actually parse the markup and just use `createElement` for both HTML and SVG nodes (but I feel like this hasn't been done for performance reasons vs innerHTML - am I right?).\n- We can simply detect the `image` tag and deal with it after we used createNodesFromMarkup - hackish but doesn't break everything and sounds quite painless\n\nI'll be happy to work on a PR with the fix but I'm not that familiar with the philosophy of the project and what would be the direction you'd want.\n\nThanks\n",
  "closed_by": {
    "login": "framp",
    "id": 611109,
    "node_id": "MDQ6VXNlcjYxMTEwOQ==",
    "avatar_url": "https://avatars0.githubusercontent.com/u/611109?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/framp",
    "html_url": "https://github.com/framp",
    "followers_url": "https://api.github.com/users/framp/followers",
    "following_url": "https://api.github.com/users/framp/following{/other_user}",
    "gists_url": "https://api.github.com/users/framp/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/framp/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/framp/subscriptions",
    "organizations_url": "https://api.github.com/users/framp/orgs",
    "repos_url": "https://api.github.com/users/framp/repos",
    "events_url": "https://api.github.com/users/framp/events{/privacy}",
    "received_events_url": "https://api.github.com/users/framp/received_events",
    "type": "User",
    "site_admin": false
  }
}

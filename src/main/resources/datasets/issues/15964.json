{
  "url": "https://api.github.com/repos/facebook/react/issues/15964",
  "repository_url": "https://api.github.com/repos/facebook/react",
  "labels_url": "https://api.github.com/repos/facebook/react/issues/15964/labels{/name}",
  "comments_url": "https://api.github.com/repos/facebook/react/issues/15964/comments",
  "events_url": "https://api.github.com/repos/facebook/react/issues/15964/events",
  "html_url": "https://github.com/facebook/react/issues/15964",
  "id": 459517908,
  "node_id": "MDU6SXNzdWU0NTk1MTc5MDg=",
  "number": 15964,
  "title": "useState hook variable's value is always one step behind",
  "user": {
    "login": "marcosdipaolo",
    "id": 22824656,
    "node_id": "MDQ6VXNlcjIyODI0NjU2",
    "avatar_url": "https://avatars3.githubusercontent.com/u/22824656?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/marcosdipaolo",
    "html_url": "https://github.com/marcosdipaolo",
    "followers_url": "https://api.github.com/users/marcosdipaolo/followers",
    "following_url": "https://api.github.com/users/marcosdipaolo/following{/other_user}",
    "gists_url": "https://api.github.com/users/marcosdipaolo/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/marcosdipaolo/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/marcosdipaolo/subscriptions",
    "organizations_url": "https://api.github.com/users/marcosdipaolo/orgs",
    "repos_url": "https://api.github.com/users/marcosdipaolo/repos",
    "events_url": "https://api.github.com/users/marcosdipaolo/events{/privacy}",
    "received_events_url": "https://api.github.com/users/marcosdipaolo/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 1,
  "created_at": "2019-06-22T22:53:16Z",
  "updated_at": "2019-06-22T23:12:39Z",
  "closed_at": "2019-06-22T23:12:39Z",
  "author_association": "NONE",
  "body": "Here using React and Next.js. \r\n\r\nHere a summary of the code:\r\n\r\nI have this hook:\r\n```javascript\r\nimport { useState } from 'react';\r\nimport BigCalendar from 'react-big-calendar'\r\nimport moment from 'moment';\r\nimport CreateEventForm from './CreateEventForm';\r\n\r\nconst localizer = BigCalendar.momentLocalizer(moment);\r\n\r\nconst Calendar = props => {\r\n\r\n    const [newEvent, setNewEvent] = useState({\r\n        start: new Date(),\r\n        end: new Date(),\r\n    });\r\n\r\n    const onSelectHandler = info => {\r\n        // logging the new info\r\n        console.warn('New info: ', info);\r\n        // assigning the new info to the hooks variable\r\n        (setNewEvent(info));\r\n        // logging the hook variable's value \r\n        console.warn('Hook variable\\'s value: ', newEvent);\r\n    }\r\n\r\n}\r\n```\r\n\r\nThere's actually nothing else to be told, when the handler is fired by an event, the variable `info` comes with an object on new information. Inmediately I log the information to the console to see that it is actually the correct and new info, i set the info to the hook's variable and inmediately log to the console the value of the hook's variable and it doesn't match the new info i just tried to assign to it. It's actually logs the default values (the 2 dates).\r\nIf I do it again, it happens the same but the hooks variable this time doesn't log the default, but the new info of the first try, so basically it's coming one time late every time.   \r\n\r\nWhat could i have done to make this happen?\r\n\r\nThe event firing the handler is when i select a slot at the React Big Calendar\r\n```javascript\r\nconst myEvents = props.events.map(event => {\r\n        return {\r\n            ...event,\r\n            start: new Date(event.start),\r\n            end: new Date(event.end)\r\n        };\r\n    });\r\n\r\n            <BigCalendar\r\n                defaultView=\"week\"\r\n                localizer={localizer}\r\n                events={myEvents}\r\n                startAccessor=\"start\"\r\n                endAccessor=\"end\"\r\n                selectable={true}\r\n                onSelectSlot={onSelectHandler}\r\n            />\r\n```",
  "closed_by": {
    "login": "gaearon",
    "id": 810438,
    "node_id": "MDQ6VXNlcjgxMDQzOA==",
    "avatar_url": "https://avatars0.githubusercontent.com/u/810438?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/gaearon",
    "html_url": "https://github.com/gaearon",
    "followers_url": "https://api.github.com/users/gaearon/followers",
    "following_url": "https://api.github.com/users/gaearon/following{/other_user}",
    "gists_url": "https://api.github.com/users/gaearon/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/gaearon/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/gaearon/subscriptions",
    "organizations_url": "https://api.github.com/users/gaearon/orgs",
    "repos_url": "https://api.github.com/users/gaearon/repos",
    "events_url": "https://api.github.com/users/gaearon/events{/privacy}",
    "received_events_url": "https://api.github.com/users/gaearon/received_events",
    "type": "User",
    "site_admin": false
  }
}

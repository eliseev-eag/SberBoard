{
  "url": "https://api.github.com/repos/facebook/react/issues/10778",
  "repository_url": "https://api.github.com/repos/facebook/react",
  "labels_url": "https://api.github.com/repos/facebook/react/issues/10778/labels{/name}",
  "comments_url": "https://api.github.com/repos/facebook/react/issues/10778/comments",
  "events_url": "https://api.github.com/repos/facebook/react/issues/10778/events",
  "html_url": "https://github.com/facebook/react/issues/10778",
  "id": 259697367,
  "node_id": "MDU6SXNzdWUyNTk2OTczNjc=",
  "number": 10778,
  "title": "[React 15+] Cloudflare's HTML minification causes isomorphic React app to crash",
  "user": {
    "login": "gaulucky92",
    "id": 4153044,
    "node_id": "MDQ6VXNlcjQxNTMwNDQ=",
    "avatar_url": "https://avatars1.githubusercontent.com/u/4153044?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/gaulucky92",
    "html_url": "https://github.com/gaulucky92",
    "followers_url": "https://api.github.com/users/gaulucky92/followers",
    "following_url": "https://api.github.com/users/gaulucky92/following{/other_user}",
    "gists_url": "https://api.github.com/users/gaulucky92/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/gaulucky92/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/gaulucky92/subscriptions",
    "organizations_url": "https://api.github.com/users/gaulucky92/orgs",
    "repos_url": "https://api.github.com/users/gaulucky92/repos",
    "events_url": "https://api.github.com/users/gaulucky92/events{/privacy}",
    "received_events_url": "https://api.github.com/users/gaulucky92/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 3,
  "created_at": "2017-09-22T04:05:59Z",
  "updated_at": "2017-09-26T09:33:04Z",
  "closed_at": "2017-09-26T09:33:04Z",
  "author_association": "NONE",
  "body": "I think this is not a bug, it's a compatibility issue.\r\n\r\n[In React v15.x+](https://facebook.github.io/react/blog/2016/04/07/react-v15.html#rendering-null-now-uses-comment-nodes), the server-sided HTML rendered by `react-dom/server`'s function `renderToString()` contains some comment tags that represent null components (instead of `<noscript>` tags like React v0.14.x), which is really neat.\r\nUnfortunately, when the app is served by Cloudflare with HTML minification enabled, it automatically removes all the comment tags, including the ones generated by React.\r\nThis behavior causes the client app to crash, and throws an error:\r\n\r\n```\r\nUnable to find element with ID x.\r\n```\r\n\r\nWith x is a number, usually the null component's react-id.\r\n\r\nThe problem can be solved by [*disabling HTML minification on Cloudflare*](https://www.garysieling.com/blog/react-cloudflare-bundle-js38-uncaught-invariant-violation-unable-find-element-id-18), but the question is, is it possible to earn the benefit from HTML minification, while keep the app running well?\r\n\r\nReact/ReactDOM version: 15.6.1\r\nNode version: 6.10.0 / 6.10.3",
  "closed_by": {
    "login": "gaearon",
    "id": 810438,
    "node_id": "MDQ6VXNlcjgxMDQzOA==",
    "avatar_url": "https://avatars0.githubusercontent.com/u/810438?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/gaearon",
    "html_url": "https://github.com/gaearon",
    "followers_url": "https://api.github.com/users/gaearon/followers",
    "following_url": "https://api.github.com/users/gaearon/following{/other_user}",
    "gists_url": "https://api.github.com/users/gaearon/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/gaearon/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/gaearon/subscriptions",
    "organizations_url": "https://api.github.com/users/gaearon/orgs",
    "repos_url": "https://api.github.com/users/gaearon/repos",
    "events_url": "https://api.github.com/users/gaearon/events{/privacy}",
    "received_events_url": "https://api.github.com/users/gaearon/received_events",
    "type": "User",
    "site_admin": false
  }
}

{
  "url": "https://api.github.com/repos/facebook/react/issues/16348",
  "repository_url": "https://api.github.com/repos/facebook/react",
  "labels_url": "https://api.github.com/repos/facebook/react/issues/16348/labels{/name}",
  "comments_url": "https://api.github.com/repos/facebook/react/issues/16348/comments",
  "events_url": "https://api.github.com/repos/facebook/react/issues/16348/events",
  "html_url": "https://github.com/facebook/react/issues/16348",
  "id": 479246335,
  "node_id": "MDU6SXNzdWU0NzkyNDYzMzU=",
  "number": 16348,
  "title": "Line numbers in component stack of `act` warning in 16.9",
  "user": {
    "login": "FredyC",
    "id": 1096340,
    "node_id": "MDQ6VXNlcjEwOTYzNDA=",
    "avatar_url": "https://avatars0.githubusercontent.com/u/1096340?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/FredyC",
    "html_url": "https://github.com/FredyC",
    "followers_url": "https://api.github.com/users/FredyC/followers",
    "following_url": "https://api.github.com/users/FredyC/following{/other_user}",
    "gists_url": "https://api.github.com/users/FredyC/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/FredyC/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/FredyC/subscriptions",
    "organizations_url": "https://api.github.com/users/FredyC/orgs",
    "repos_url": "https://api.github.com/users/FredyC/repos",
    "events_url": "https://api.github.com/users/FredyC/events{/privacy}",
    "received_events_url": "https://api.github.com/users/FredyC/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 7,
  "created_at": "2019-08-10T08:59:37Z",
  "updated_at": "2019-08-13T09:41:01Z",
  "closed_at": "2019-08-12T12:09:08Z",
  "author_association": "NONE",
  "body": "<!--\r\n  Note: if the issue is about documentation or the website, please file it at:\r\n  https://github.com/reactjs/reactjs.org/issues/new\r\n-->\r\n\r\n**Do you want to request a *feature* or report a *bug*?**\r\n\r\nFeature\r\n\r\n**What is the current behavior?**\r\n\r\nWhen `act` is missing in a test, the warning contains information about the component tree _(see image below; without stack trace)_, but in a test file which might include the same components several times over it does not help finding the culprit. \r\n\r\nFurthermore, the warning does not fail a test (not a problem) and as such it's shown at the end of test run output (at least in case of Jest) so there is no colocation with test having a problem.\r\n\r\n**What is the expected behavior?**\r\n\r\nWe have used a somewhat ugly hack that allows us to see the full stack trace and the originating line of failure in actual test file is there, although buried rather deeply.\r\n\r\n```js\r\nError.stackTraceLimit = Infinity\r\nconst origError = console.error\r\nconsole.error = function(msg) {\r\n    if (/react-wrap-tests-with-act/.test(\"\" + msg)) throw new Error(\"missing act\")\r\n    return origError.apply(this, arguments)\r\n}\r\n```\r\n\r\nI have tweaked it a bit in the following Sandbox and I am able to extract the exact location of a failure (notice the console output). It's slightly off due to lack of source maps, but in a proper environment, it's really helpful.\r\n\r\n[![Edit patient-leftpad-houzz](https://codesandbox.io/static/img/play-codesandbox.svg)](https://codesandbox.io/s/patient-leftpad-houzz?expanddevtools=1&fontsize=14&module=%2Fsrc%2Ferror.test.tsx&previewwindow=tests)\r\n\r\n### Not to be confused, this is output AFTER my modification\r\n**Currently, the output is without a stack trace**\r\n\r\n![image](https://user-images.githubusercontent.com/1096340/62821857-daef5400-bb7b-11e9-8554-23a840a80184.png)\r\n\r\nSo I wonder why not include something like that in React?\r\n\r\n**Which versions of React, and which browser / OS are affected by this issue? Did this work in previous versions of React?**\r\n\r\nEverything is 16.9",
  "closed_by": {
    "login": "gaearon",
    "id": 810438,
    "node_id": "MDQ6VXNlcjgxMDQzOA==",
    "avatar_url": "https://avatars0.githubusercontent.com/u/810438?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/gaearon",
    "html_url": "https://github.com/gaearon",
    "followers_url": "https://api.github.com/users/gaearon/followers",
    "following_url": "https://api.github.com/users/gaearon/following{/other_user}",
    "gists_url": "https://api.github.com/users/gaearon/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/gaearon/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/gaearon/subscriptions",
    "organizations_url": "https://api.github.com/users/gaearon/orgs",
    "repos_url": "https://api.github.com/users/gaearon/repos",
    "events_url": "https://api.github.com/users/gaearon/events{/privacy}",
    "received_events_url": "https://api.github.com/users/gaearon/received_events",
    "type": "User",
    "site_admin": false
  }
}

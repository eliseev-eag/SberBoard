{
  "url": "https://api.github.com/repos/facebook/react/issues/16370",
  "repository_url": "https://api.github.com/repos/facebook/react",
  "labels_url": "https://api.github.com/repos/facebook/react/issues/16370/labels{/name}",
  "comments_url": "https://api.github.com/repos/facebook/react/issues/16370/comments",
  "events_url": "https://api.github.com/repos/facebook/react/issues/16370/events",
  "html_url": "https://github.com/facebook/react/issues/16370",
  "id": 479800265,
  "node_id": "MDU6SXNzdWU0Nzk4MDAyNjU=",
  "number": 16370,
  "title": "useEffect does not get executed again after 16.8.0-alpha1",
  "user": {
    "login": "Domino987",
    "id": 17567991,
    "node_id": "MDQ6VXNlcjE3NTY3OTkx",
    "avatar_url": "https://avatars0.githubusercontent.com/u/17567991?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/Domino987",
    "html_url": "https://github.com/Domino987",
    "followers_url": "https://api.github.com/users/Domino987/followers",
    "following_url": "https://api.github.com/users/Domino987/following{/other_user}",
    "gists_url": "https://api.github.com/users/Domino987/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/Domino987/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/Domino987/subscriptions",
    "organizations_url": "https://api.github.com/users/Domino987/orgs",
    "repos_url": "https://api.github.com/users/Domino987/repos",
    "events_url": "https://api.github.com/users/Domino987/events{/privacy}",
    "received_events_url": "https://api.github.com/users/Domino987/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 0,
  "created_at": "2019-08-12T19:00:06Z",
  "updated_at": "2019-08-12T19:04:10Z",
  "closed_at": "2019-08-12T19:04:10Z",
  "author_association": "NONE",
  "body": "**Do you want to request a *feature* or report a *bug*?**\r\nIt is a bug\r\n\r\n**What is the current behavior?**\r\nAs seen in this [codepen](https://codesandbox.io/s/react-hooks-playground-k8hxy), the useEffect gets updated every 500ms as expected and mentioned in the docs:  \r\n\r\n> Does useEffect run after every render? Yes! By default, it runs both after the first render and after every update.\r\n\r\nBut if the react version is updated to a newer version, the timeout is called, the setCounter is called with 1 again (after the second run) which leads to a rerender of the component, but the effect is not executed as expected (2 is not called again and there is no loop).  As mentioned in the docs, use Effect without a second parameter should create a loop by calling the setTimeout again after setCount. But this is not the case for versions above 16.8.0-alpha1. Is this intended or not?\r\n\r\n**If the current behavior is a bug, please provide the steps to reproduce and if possible a minimal demo of the problem. Your bug will get fixed much faster if we can run your code and it doesn't have dependencies other than React. Paste the link to your JSFiddle (https://jsfiddle.net/Luktwrdm/) or CodeSandbox (https://codesandbox.io/s/new) example below:**\r\nThis [codepen](https://codesandbox.io/s/react-hooks-playground-k8hxy) works by creating a infinity loop. But updating the react version here \r\n![image](https://user-images.githubusercontent.com/17567991/62890380-aa5a1680-bd43-11e9-8f6c-0e026510365a.png)\r\n\r\nwill break the functionality and will not loop again because the useEffect is note executed if the prevoiusState === currentState. But the component gets rerendered anyway.\r\n\r\nIf the intended behavior is not the rerender the component if the state is the same, console.log(1) should not be called. So either the useEffect does not work as intended, or it is not intended that  useState triggers a rerender, if the state is the same.\r\n\r\n\r\n**What is the expected behavior?**\r\nThe expected behavior is for the useEffect to be called in a loop even if the state is the same and the functional component is rendered.\r\n\r\n**Which versions of React, and which browser / OS are affected by this issue? Did this work in previous versions of React?**\r\n16.8.0-alpha1 works, version above it do not.\r\n\r\nThanks for your time and I really enjoy coding with React. Keep it up.",
  "closed_by": {
    "login": "Domino987",
    "id": 17567991,
    "node_id": "MDQ6VXNlcjE3NTY3OTkx",
    "avatar_url": "https://avatars0.githubusercontent.com/u/17567991?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/Domino987",
    "html_url": "https://github.com/Domino987",
    "followers_url": "https://api.github.com/users/Domino987/followers",
    "following_url": "https://api.github.com/users/Domino987/following{/other_user}",
    "gists_url": "https://api.github.com/users/Domino987/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/Domino987/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/Domino987/subscriptions",
    "organizations_url": "https://api.github.com/users/Domino987/orgs",
    "repos_url": "https://api.github.com/users/Domino987/repos",
    "events_url": "https://api.github.com/users/Domino987/events{/privacy}",
    "received_events_url": "https://api.github.com/users/Domino987/received_events",
    "type": "User",
    "site_admin": false
  }
}

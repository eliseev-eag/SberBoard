{
  "url": "https://api.github.com/repos/facebook/react/issues/15802",
  "repository_url": "https://api.github.com/repos/facebook/react",
  "labels_url": "https://api.github.com/repos/facebook/react/issues/15802/labels{/name}",
  "comments_url": "https://api.github.com/repos/facebook/react/issues/15802/comments",
  "events_url": "https://api.github.com/repos/facebook/react/issues/15802/events",
  "html_url": "https://github.com/facebook/react/pull/15802",
  "id": 451207775,
  "node_id": "MDExOlB1bGxSZXF1ZXN0Mjg0MzUzMDcz",
  "number": 15802,
  "title": "[React Native] Remove eventTypes from ReactNativeBridgeEventPlugin",
  "user": {
    "login": "rickhanlonii",
    "id": 2440089,
    "node_id": "MDQ6VXNlcjI0NDAwODk=",
    "avatar_url": "https://avatars0.githubusercontent.com/u/2440089?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/rickhanlonii",
    "html_url": "https://github.com/rickhanlonii",
    "followers_url": "https://api.github.com/users/rickhanlonii/followers",
    "following_url": "https://api.github.com/users/rickhanlonii/following{/other_user}",
    "gists_url": "https://api.github.com/users/rickhanlonii/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/rickhanlonii/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/rickhanlonii/subscriptions",
    "organizations_url": "https://api.github.com/users/rickhanlonii/orgs",
    "repos_url": "https://api.github.com/users/rickhanlonii/repos",
    "events_url": "https://api.github.com/users/rickhanlonii/events{/privacy}",
    "received_events_url": "https://api.github.com/users/rickhanlonii/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 196858374,
      "node_id": "MDU6TGFiZWwxOTY4NTgzNzQ=",
      "url": "https://api.github.com/repos/facebook/react/labels/CLA%20Signed",
      "name": "CLA Signed",
      "color": "e7e7e7",
      "default": false
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 3,
  "created_at": "2019-06-02T16:11:14Z",
  "updated_at": "2019-06-05T16:05:23Z",
  "closed_at": "2019-06-05T12:21:13Z",
  "author_association": "MEMBER",
  "pull_request": {
    "url": "https://api.github.com/repos/facebook/react/pulls/15802",
    "html_url": "https://github.com/facebook/react/pull/15802",
    "diff_url": "https://github.com/facebook/react/pull/15802.diff",
    "patch_url": "https://github.com/facebook/react/pull/15802.patch"
  },
  "body": "## Overview\r\nThis PR fixes an issue with switching between paper and fabric in React Native.\r\n\r\n## Explanation\r\nOn first initialization of React Native, `ReactNativeBridgeEventPlugin.eventTypes` is empty because view configs are lazily loaded. This means that the `EventPluginRegistry` does not run checks on events, and does not error when registering [here](https://github.com/facebook/react/blob/b87aabdfe1b7461e7331abb3601d9e6bb27544bc/packages/events/EventPluginRegistry.js#L134-L139).\r\n\r\nIf there is a second initialization (e.g. loading the fabric bundle after the paper bundle), then the `eventTypes` may be populated with host component events from view configs loaded at runtime.\r\n\r\nThis means that the `EventPluginRegistry` can error when registering the plugin if there are colliding registration names, even though these events were already in use.\r\n\r\nThis change allows the EventPluginRegistry to perform the same on initial load between all of the bundles by forcing the eventTypes to an empty object.\r\n\r\n## Justification\r\nFrom the [EventPluginHub doc comments](https://fburl.com/ctr48aew), eventTypes are optional:\r\n\r\n```\r\n`eventTypes` {object}\r\n      Optional, plugins that fire events must publish a mapping of registration\r\n      names that are used to register listeners. Values of this mapping must\r\n      be objects that contain `registrationName` or `phasedRegistrationNames`.\r\n```\r\n\r\nFor ReactNative, we register our own top level listeners in our native host components so there is no need to register them in the EventPluginHub.\r\n\r\n## Testing\r\n\r\nSee https://fburl.com/diff/5l6zql59 for test plan.\r\n",
  "closed_by": {
    "login": "cpojer",
    "id": 13352,
    "node_id": "MDQ6VXNlcjEzMzUy",
    "avatar_url": "https://avatars0.githubusercontent.com/u/13352?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/cpojer",
    "html_url": "https://github.com/cpojer",
    "followers_url": "https://api.github.com/users/cpojer/followers",
    "following_url": "https://api.github.com/users/cpojer/following{/other_user}",
    "gists_url": "https://api.github.com/users/cpojer/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/cpojer/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/cpojer/subscriptions",
    "organizations_url": "https://api.github.com/users/cpojer/orgs",
    "repos_url": "https://api.github.com/users/cpojer/repos",
    "events_url": "https://api.github.com/users/cpojer/events{/privacy}",
    "received_events_url": "https://api.github.com/users/cpojer/received_events",
    "type": "User",
    "site_admin": false
  }
}

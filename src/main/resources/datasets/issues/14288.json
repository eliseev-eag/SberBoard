{
  "url": "https://api.github.com/repos/facebook/react/issues/14288",
  "repository_url": "https://api.github.com/repos/facebook/react",
  "labels_url": "https://api.github.com/repos/facebook/react/issues/14288/labels{/name}",
  "comments_url": "https://api.github.com/repos/facebook/react/issues/14288/comments",
  "events_url": "https://api.github.com/repos/facebook/react/issues/14288/events",
  "html_url": "https://github.com/facebook/react/issues/14288",
  "id": 382549011,
  "node_id": "MDU6SXNzdWUzODI1NDkwMTE=",
  "number": 14288,
  "title": "Custom hooks: How to reset state when inputs are updated?",
  "user": {
    "login": "peterjuras",
    "id": 3640638,
    "node_id": "MDQ6VXNlcjM2NDA2Mzg=",
    "avatar_url": "https://avatars0.githubusercontent.com/u/3640638?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/peterjuras",
    "html_url": "https://github.com/peterjuras",
    "followers_url": "https://api.github.com/users/peterjuras/followers",
    "following_url": "https://api.github.com/users/peterjuras/following{/other_user}",
    "gists_url": "https://api.github.com/users/peterjuras/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/peterjuras/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/peterjuras/subscriptions",
    "organizations_url": "https://api.github.com/users/peterjuras/orgs",
    "repos_url": "https://api.github.com/users/peterjuras/repos",
    "events_url": "https://api.github.com/users/peterjuras/events{/privacy}",
    "received_events_url": "https://api.github.com/users/peterjuras/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 5,
  "created_at": "2018-11-20T08:23:16Z",
  "updated_at": "2018-11-20T13:49:07Z",
  "closed_at": "2018-11-20T13:35:03Z",
  "author_association": "NONE",
  "body": "<!--\r\n  Note: if the issue is about documentation or the website, please file it at:\r\n  https://github.com/reactjs/reactjs.org/issues/new\r\n-->\r\n\r\n**Do you want to request a *feature* or report a *bug*?**\r\n\r\nProbably a feature, I'd like to know why the `useState` hook does not have a second argument to compare inputs similar to other hooks.\r\n\r\n**What is the current behavior?**\r\n\r\nI'm trying to implement custom hooks for a [timer and countdown library](https://github.com/peterjuras/react-time-sync/tree/feature/hooks) that we use at work. However, for this example I would like to describe a more minimal example with a counter that counts up from a provided initial value.\r\n\r\nI created a [small fiddle](https://codesandbox.io/s/p3njq3w6vm) with a custom hook `useCountUp` that takes an initial value and increments it each second. The counter should reset itself, when the initialValue that is passed to the custom hook changes. As the fiddle demonstrates, it is currently not really possible to reset the state of the `useState` hook. As a hack, the hook compares the inputs in a `useMemo` function and updates the state in the next `useEffect` run. This however, leads to a duplicate render, which would not be necessary.\r\n\r\nMy question: Why did the `useState` hook API not receive a second argument to use reset the state to the provided initalValue when certain inputs change, similar to `useMemo`, `useEffect` and other hooks? Without this, we need to re-render twice with the same state in this example to ensure that the counter's state is consistent.\r\n\r\nAs a comparison, a Component with render props would have no problems with reseting the state when necessary: https://codesandbox.io/s/3vrpnxo2kq\r\n\r\n**Which versions of React, and which browser / OS are affected by this issue? Did this work in previous versions of React?**\r\n\r\nReact Version: 16.7.0-alpha.2-next",
  "closed_by": {
    "login": "gaearon",
    "id": 810438,
    "node_id": "MDQ6VXNlcjgxMDQzOA==",
    "avatar_url": "https://avatars0.githubusercontent.com/u/810438?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/gaearon",
    "html_url": "https://github.com/gaearon",
    "followers_url": "https://api.github.com/users/gaearon/followers",
    "following_url": "https://api.github.com/users/gaearon/following{/other_user}",
    "gists_url": "https://api.github.com/users/gaearon/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/gaearon/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/gaearon/subscriptions",
    "organizations_url": "https://api.github.com/users/gaearon/orgs",
    "repos_url": "https://api.github.com/users/gaearon/repos",
    "events_url": "https://api.github.com/users/gaearon/events{/privacy}",
    "received_events_url": "https://api.github.com/users/gaearon/received_events",
    "type": "User",
    "site_admin": false
  }
}

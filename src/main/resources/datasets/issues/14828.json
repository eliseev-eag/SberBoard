{
  "url": "https://api.github.com/repos/facebook/react/issues/14828",
  "repository_url": "https://api.github.com/repos/facebook/react",
  "labels_url": "https://api.github.com/repos/facebook/react/issues/14828/labels{/name}",
  "comments_url": "https://api.github.com/repos/facebook/react/issues/14828/comments",
  "events_url": "https://api.github.com/repos/facebook/react/issues/14828/events",
  "html_url": "https://github.com/facebook/react/issues/14828",
  "id": 408976744,
  "node_id": "MDU6SXNzdWU0MDg5NzY3NDQ=",
  "number": 14828,
  "title": "Hooks FAQ: possibly broken optimization",
  "user": {
    "login": "hnordt",
    "id": 1625399,
    "node_id": "MDQ6VXNlcjE2MjUzOTk=",
    "avatar_url": "https://avatars2.githubusercontent.com/u/1625399?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/hnordt",
    "html_url": "https://github.com/hnordt",
    "followers_url": "https://api.github.com/users/hnordt/followers",
    "following_url": "https://api.github.com/users/hnordt/following{/other_user}",
    "gists_url": "https://api.github.com/users/hnordt/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/hnordt/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/hnordt/subscriptions",
    "organizations_url": "https://api.github.com/users/hnordt/orgs",
    "repos_url": "https://api.github.com/users/hnordt/repos",
    "events_url": "https://api.github.com/users/hnordt/events{/privacy}",
    "received_events_url": "https://api.github.com/users/hnordt/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 2,
  "created_at": "2019-02-11T21:08:37Z",
  "updated_at": "2019-02-14T15:47:31Z",
  "closed_at": "2019-02-14T15:47:30Z",
  "author_association": "CONTRIBUTOR",
  "body": "In https://reactjs.org/docs/hooks-faq.html#how-to-read-an-often-changing-value-from-usecallback we have the following snippet:\r\n\r\n```js\r\nfunction Form() {\r\n  const [text, updateText] = useState('');\r\n  const handleSubmit = useEventCallback(() => {\r\n    alert(text);\r\n  }, [text]);\r\n\r\n  // ...\r\n}\r\n\r\nfunction useEventCallback(fn, dependencies) {\r\n  const ref = useRef(() => {\r\n    throw new Error('Cannot call an event handler while rendering.');\r\n  });\r\n\r\n  useLayoutEffect(() => {\r\n    ref.current = fn;\r\n  }, [fn, ...dependencies]);\r\n\r\n  return useCallback(() => {\r\n    const fn = ref.current;\r\n    return fn();\r\n  }, [ref]);\r\n}\r\n```\r\n\r\nI think `[fn, ...dependencies]` should be just `dependencies` cause `fn` is an inline function in the parent and will break the `useLayoutEffect` optimization. Am I wrong?",
  "closed_by": {
    "login": "gaearon",
    "id": 810438,
    "node_id": "MDQ6VXNlcjgxMDQzOA==",
    "avatar_url": "https://avatars0.githubusercontent.com/u/810438?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/gaearon",
    "html_url": "https://github.com/gaearon",
    "followers_url": "https://api.github.com/users/gaearon/followers",
    "following_url": "https://api.github.com/users/gaearon/following{/other_user}",
    "gists_url": "https://api.github.com/users/gaearon/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/gaearon/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/gaearon/subscriptions",
    "organizations_url": "https://api.github.com/users/gaearon/orgs",
    "repos_url": "https://api.github.com/users/gaearon/repos",
    "events_url": "https://api.github.com/users/gaearon/events{/privacy}",
    "received_events_url": "https://api.github.com/users/gaearon/received_events",
    "type": "User",
    "site_admin": false
  }
}

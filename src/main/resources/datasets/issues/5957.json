{
  "url": "https://api.github.com/repos/facebook/react/issues/5957",
  "repository_url": "https://api.github.com/repos/facebook/react",
  "labels_url": "https://api.github.com/repos/facebook/react/issues/5957/labels{/name}",
  "comments_url": "https://api.github.com/repos/facebook/react/issues/5957/comments",
  "events_url": "https://api.github.com/repos/facebook/react/issues/5957/events",
  "html_url": "https://github.com/facebook/react/issues/5957",
  "id": 130480069,
  "node_id": "MDU6SXNzdWUxMzA0ODAwNjk=",
  "number": 5957,
  "title": "Bug on resolving default props (HTMLAllCollection) + fix",
  "user": {
    "login": "karczk",
    "id": 8329336,
    "node_id": "MDQ6VXNlcjgzMjkzMzY=",
    "avatar_url": "https://avatars3.githubusercontent.com/u/8329336?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/karczk",
    "html_url": "https://github.com/karczk",
    "followers_url": "https://api.github.com/users/karczk/followers",
    "following_url": "https://api.github.com/users/karczk/following{/other_user}",
    "gists_url": "https://api.github.com/users/karczk/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/karczk/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/karczk/subscriptions",
    "organizations_url": "https://api.github.com/users/karczk/orgs",
    "repos_url": "https://api.github.com/users/karczk/repos",
    "events_url": "https://api.github.com/users/karczk/events{/privacy}",
    "received_events_url": "https://api.github.com/users/karczk/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 52079258,
      "node_id": "MDU6TGFiZWw1MjA3OTI1OA==",
      "url": "https://api.github.com/repos/facebook/react/labels/Difficulty:%20starter",
      "name": "Difficulty: starter",
      "color": "94ce52",
      "default": false
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 8,
  "created_at": "2016-02-01T20:53:41Z",
  "updated_at": "2016-02-03T23:27:52Z",
  "closed_at": "2016-02-03T22:39:50Z",
  "author_association": "CONTRIBUTOR",
  "body": "**Introduction**\nI found a bug on resolving default props when component props have property with HTMLAllCollection. React ignores value and uses default value (it should take that collection).\n\nisIE9OrLower (look at the end of topic) is simple function to test Internet Explorer in version 9 or lower. Simple use case:\n`isIE9OrLower() ? \"IE9 or lower\" : \"modern browser ;)\"`\n\nChrome/Firefox/modern IE (yeah, i know....) returns HTMLAllColection (as document.all), but old IE returns true. HTMLAllCollection is weird collection:\n\n```\ndocument.all // returns DOM collection\ntypeof document.all // returns \"undefined\" (!) on modern browsers; old IE < 10 returns \"object\"\ndocument.all === undefined // false (ok)\n!document.all // returns true (!)\ndocument.all && false // returns HTMLAllCollection (!)\n[] && false // returns false (ok)\n```\n\n**Source of bug and fix**\n- release: 0.14.7\n- file: react.js\n- line: 9149\n- code (bug): if (typeof props[propName] === 'undefined') {\n- code (fix): if (props[propName] === undefined) {\n\nBtw, === undefined is faster than typeof === 'undefined' on Chrome and IE.\nhttp://jsperf.com/type-of-undefined-vs-undefined/78\n\n**Reproduction**\nOpen in Firefox / Chrome / IE10 or higher.\n\nFiddle: https://jsfiddle.net/69z2wepo/29719/\nRaw:\n\n```\n<body>\n    <div id=\"container\"></div>\n\n    <script type=\"text/javascript\">\n        var Hello = React.createClass({\n            getDefaultProps: function() {\n                return {\n                    isPrehistoricBrowser: true\n                };\n            },\n            render: function() {\n                return React.createElement(\"div\", null, \"Hello \" + (this.props.isPrehistoricBrowser ? \"bug\" : \"World!\"));\n            }\n        });\n\n        ReactDOM.render(\n            React.createElement(Hello, { isPrehistoricBrowser: isIE9OrLower() }), \n            document.getElementById('container'));\n\n        function isIE9OrLower() {\n            return document.all && !window.atob;\n        }\n    </script>\n</body>\n```\n\n**Workaround**\nChange\n`document.all`\nto\n`!!document.all`\n",
  "closed_by": {
    "login": "jimfb",
    "id": 9595985,
    "node_id": "MDQ6VXNlcjk1OTU5ODU=",
    "avatar_url": "https://avatars3.githubusercontent.com/u/9595985?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/jimfb",
    "html_url": "https://github.com/jimfb",
    "followers_url": "https://api.github.com/users/jimfb/followers",
    "following_url": "https://api.github.com/users/jimfb/following{/other_user}",
    "gists_url": "https://api.github.com/users/jimfb/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/jimfb/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/jimfb/subscriptions",
    "organizations_url": "https://api.github.com/users/jimfb/orgs",
    "repos_url": "https://api.github.com/users/jimfb/repos",
    "events_url": "https://api.github.com/users/jimfb/events{/privacy}",
    "received_events_url": "https://api.github.com/users/jimfb/received_events",
    "type": "User",
    "site_admin": false
  }
}

{
  "url": "https://api.github.com/repos/facebook/react/issues/12981",
  "repository_url": "https://api.github.com/repos/facebook/react",
  "labels_url": "https://api.github.com/repos/facebook/react/issues/12981/labels{/name}",
  "comments_url": "https://api.github.com/repos/facebook/react/issues/12981/comments",
  "events_url": "https://api.github.com/repos/facebook/react/issues/12981/events",
  "html_url": "https://github.com/facebook/react/issues/12981",
  "id": 329399935,
  "node_id": "MDU6SXNzdWUzMjkzOTk5MzU=",
  "number": 12981,
  "title": "Get state's error message when using getDerivedStateFromProps lifecycle even when initializing the state in the constructor. ",
  "user": {
    "login": "slim-hmidi",
    "id": 31925861,
    "node_id": "MDQ6VXNlcjMxOTI1ODYx",
    "avatar_url": "https://avatars2.githubusercontent.com/u/31925861?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/slim-hmidi",
    "html_url": "https://github.com/slim-hmidi",
    "followers_url": "https://api.github.com/users/slim-hmidi/followers",
    "following_url": "https://api.github.com/users/slim-hmidi/following{/other_user}",
    "gists_url": "https://api.github.com/users/slim-hmidi/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/slim-hmidi/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/slim-hmidi/subscriptions",
    "organizations_url": "https://api.github.com/users/slim-hmidi/orgs",
    "repos_url": "https://api.github.com/users/slim-hmidi/repos",
    "events_url": "https://api.github.com/users/slim-hmidi/events{/privacy}",
    "received_events_url": "https://api.github.com/users/slim-hmidi/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 620368407,
      "node_id": "MDU6TGFiZWw2MjAzNjg0MDc=",
      "url": "https://api.github.com/repos/facebook/react/labels/Resolution:%20Needs%20More%20Information",
      "name": "Resolution: Needs More Information",
      "color": "fffde7",
      "default": false
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 10,
  "created_at": "2018-06-05T10:43:22Z",
  "updated_at": "2018-07-31T23:43:11Z",
  "closed_at": "2018-07-31T23:43:11Z",
  "author_association": "NONE",
  "body": "<!--\r\n  Note: if the issue is about documentation or the website, please file it at:\r\n  https://github.com/reactjs/reactjs.org/issues/new\r\n-->\r\n\r\n**Do you want to request a *feature* or report a *bug*?**\r\nBug\r\n**What is the current behavior?**\r\nI have a component and I'm using the life cycle `componentWillReceiveProps()`:\r\n\r\n```\r\nimport { connect } from 'react-redux';\r\nimport { Component } from 'react';\r\n\r\nclass MyApp extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      currentTab: 0,\r\n    };\r\n  }\r\n  UNSAFE_componentWillReceiveProps(nextProps) {\r\n    if (this.state.currentTab !== nextProps.tabNumber) {\r\n      this.setState({ currentTab: nextProps.tabNumber });\r\n    }\r\n  }\r\n}\r\n\r\n\r\nconnect(state => ({\r\n  tabNumber: state.common.editMyAppTabs.tabNumber,\r\n}))(MyApp);\r\n```\r\nI tried to change the `componetWillReceiveProps` by `getDerivedStateFromProps` : \r\n```\r\nimport { connect } from 'react-redux';\r\nimport { Component } from 'react';\r\nclass MyApp extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      currentTab: 0,\r\n    };\r\n  }\r\n  static getDerivedStateFromProps(props, state) {\r\n    if (state.currentTab !== props.tabNumber) {\r\n      return { currentTab: props.tabNumber };\r\n    }\r\n    return null;\r\n  }\r\n}\r\n\r\nconnect(state => ({\r\n  tabNumber: state.common.editMyAppTabs.tabNumber,\r\n}))(MyApp);\r\n```\r\nI got this error: \r\n```\r\nDid not properly initialize state during construction. Expected state to be an object, but it was undefined.\r\n\r\nThe above error occurred in the <Translate(ReduxForm)> component:\r\n    in Translate(ReduxForm) (created by WithStyles(Translate(ReduxForm)))\r\n    in WithStyles(Translate(ReduxForm)) (created by Connect(WithStyles(Translate(ReduxForm))))\r\n    in Connect(WithStyles(Translate(ReduxForm))) (created by Route)\r\n    in Route (created by withRouter(Connect(WithStyles(Translate(ReduxForm)))))\r\n    in withRouter(Connect(WithStyles(Translate(ReduxForm)))) (created by MyAppWrapper)\r\n    in MyAppWrapper (created by Route)\r\n    in Route (created by ProtectedRoute)\r\n    in ProtectedRoute (created by Main)\r\n    in Switch (created by Main)\r\n    in main (created by Main)\r\n    in Main (created by AppRoutes)\r\n    in div (created by AppRoutes)\r\n    in AppRoutes (created by App)\r\n    in Router (created by BrowserRouter)\r\n    in BrowserRouter (created by App)\r\n    in Provider (created by App)\r\n    in I18nextProvider (created by App)\r\n    in MuiThemeProvider (created by App)\r\n    in App\r\n\r\n```\r\nand the `state = null`\r\n**What is the expected behavior?**\r\nNo warning and error problem. Does this due to the `connect` function ?\r\n**Which versions of React, and which browser / OS are affected by this issue? Did this work in previous versions of React?**\r\n**react**: 16.4.0\r\n**OS**: ubtunu 17.10 (64bit)",
  "closed_by": {
    "login": "aweary",
    "id": 6886061,
    "node_id": "MDQ6VXNlcjY4ODYwNjE=",
    "avatar_url": "https://avatars2.githubusercontent.com/u/6886061?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/aweary",
    "html_url": "https://github.com/aweary",
    "followers_url": "https://api.github.com/users/aweary/followers",
    "following_url": "https://api.github.com/users/aweary/following{/other_user}",
    "gists_url": "https://api.github.com/users/aweary/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/aweary/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/aweary/subscriptions",
    "organizations_url": "https://api.github.com/users/aweary/orgs",
    "repos_url": "https://api.github.com/users/aweary/repos",
    "events_url": "https://api.github.com/users/aweary/events{/privacy}",
    "received_events_url": "https://api.github.com/users/aweary/received_events",
    "type": "User",
    "site_admin": false
  }
}

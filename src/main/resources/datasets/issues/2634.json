{
  "url": "https://api.github.com/repos/facebook/react/issues/2634",
  "repository_url": "https://api.github.com/repos/facebook/react",
  "labels_url": "https://api.github.com/repos/facebook/react/issues/2634/labels{/name}",
  "comments_url": "https://api.github.com/repos/facebook/react/issues/2634/comments",
  "events_url": "https://api.github.com/repos/facebook/react/issues/2634/events",
  "html_url": "https://github.com/facebook/react/issues/2634",
  "id": 50558844,
  "node_id": "MDU6SXNzdWU1MDU1ODg0NA==",
  "number": 2634,
  "title": "Race condition for this.state vs this.props in component?",
  "user": {
    "login": "wildfiremedia",
    "id": 6618755,
    "node_id": "MDQ6VXNlcjY2MTg3NTU=",
    "avatar_url": "https://avatars0.githubusercontent.com/u/6618755?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/wildfiremedia",
    "html_url": "https://github.com/wildfiremedia",
    "followers_url": "https://api.github.com/users/wildfiremedia/followers",
    "following_url": "https://api.github.com/users/wildfiremedia/following{/other_user}",
    "gists_url": "https://api.github.com/users/wildfiremedia/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/wildfiremedia/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/wildfiremedia/subscriptions",
    "organizations_url": "https://api.github.com/users/wildfiremedia/orgs",
    "repos_url": "https://api.github.com/users/wildfiremedia/repos",
    "events_url": "https://api.github.com/users/wildfiremedia/events{/privacy}",
    "received_events_url": "https://api.github.com/users/wildfiremedia/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 2,
  "created_at": "2014-12-01T18:43:29Z",
  "updated_at": "2014-12-02T12:01:37Z",
  "closed_at": "2014-12-01T20:03:23Z",
  "author_association": "NONE",
  "body": "I'm still confusing how App render method start render with \"undefined\" value as it will take a while for qwest to retrieve the completed JSON data. At the same time, setState with the return JSON did not rerender PaginationDemo component.\n\nMoving to the PaginationDemo render method, it seem that this.state produced an \"undefined\" value when the this.props contain a value of 3. I guess that a bug?\n\n```\nvar PaginationDemo = React.createClass({\n    getInitialState: function () {\n        return {\n            total:        0,\n            current:      0,\n            visiblePages: 0\n        };\n    },\n    componentDidMount: function() {\n        this.setState({\n            total: this.props.dataset.last_page,\n            current: this.props.dataset.first_page,\n            visiblePages: 3\n        });\n    },\n    handlePageChanged: function ( newPage ) {\n        this.setState({ current : newPage });\n    },\n    render: function() {\n        console.log(\"1>\",this.state.total)\n        console.log(\"2>\",this.props.dataset.last_page)\n        //The 2 above loggers will shown \"undefined\" and \"3\".\n        //components.jsx.js:54 1> 0\n        //components.jsx.js:55 2> undefined\n        //components.jsx.js:54 1> undefined\n        //components.jsx.js:55 2> undefined\n        //components.jsx.js:54 1> undefined\n        //components.jsx.js:55 2> 3\n\n        if (this.state.total) {     //Should use this.props.dataset.last_page?\n            return (\n                <div>\n                <Pagination total={this.state.total}\n                current={this.state.current}\n                visiblePages={this.state.visiblePages}\n                onPageChanged={this.handlePageChanged}/>\n                <p>Page: {this.state.current+1} of {this.state.total}</p>\n                <p>Total Page: {this.state.total}</p>\n                </div>\n            );\n        }return null;\n    }\n});\n\n\nvar App = React.createClass({\n  getInitialState: function () {\n    return ({\n      activeNavigationUrl: \"\",\n      navigationItems: [],\n      productItems: []\n    });\n  },\n  loadJSON: function (){\n    qwest.get(API)   //Async get url\n     .then(function(jsonData){\n        this.setState({navigationItems: jsonData,productItems: jsonData.data});\n    }.bind(this))\n     .complete(function(jsonData){\n        console.log(\"complete\",this.state.navigationItems)   //Return Object {}\n     }.bind(this));\n  },\n  componentDidMount: function() {\n    this.loadJSON();\n  },\n  render: function() {\n    return (\n      <div>\n    <ProductList items={this.state.productItems} />\n    <PaginationDemo dataset={this.state.navigationItems} />\n      </div>\n    );\n  },\n  ....\n```\n",
  "closed_by": {
    "login": "zpao",
    "id": 8445,
    "node_id": "MDQ6VXNlcjg0NDU=",
    "avatar_url": "https://avatars1.githubusercontent.com/u/8445?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/zpao",
    "html_url": "https://github.com/zpao",
    "followers_url": "https://api.github.com/users/zpao/followers",
    "following_url": "https://api.github.com/users/zpao/following{/other_user}",
    "gists_url": "https://api.github.com/users/zpao/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/zpao/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/zpao/subscriptions",
    "organizations_url": "https://api.github.com/users/zpao/orgs",
    "repos_url": "https://api.github.com/users/zpao/repos",
    "events_url": "https://api.github.com/users/zpao/events{/privacy}",
    "received_events_url": "https://api.github.com/users/zpao/received_events",
    "type": "User",
    "site_admin": false
  }
}

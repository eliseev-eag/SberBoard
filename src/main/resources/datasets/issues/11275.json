{
  "url": "https://api.github.com/repos/facebook/react/issues/11275",
  "repository_url": "https://api.github.com/repos/facebook/react",
  "labels_url": "https://api.github.com/repos/facebook/react/issues/11275/labels{/name}",
  "comments_url": "https://api.github.com/repos/facebook/react/issues/11275/comments",
  "events_url": "https://api.github.com/repos/facebook/react/issues/11275/events",
  "html_url": "https://github.com/facebook/react/issues/11275",
  "id": 266673474,
  "node_id": "MDU6SXNzdWUyNjY2NzM0NzQ=",
  "number": 11275,
  "title": "Yarn Workspaces Follow-up",
  "user": {
    "login": "gaearon",
    "id": 810438,
    "node_id": "MDQ6VXNlcjgxMDQzOA==",
    "avatar_url": "https://avatars0.githubusercontent.com/u/810438?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/gaearon",
    "html_url": "https://github.com/gaearon",
    "followers_url": "https://api.github.com/users/gaearon/followers",
    "following_url": "https://api.github.com/users/gaearon/following{/other_user}",
    "gists_url": "https://api.github.com/users/gaearon/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/gaearon/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/gaearon/subscriptions",
    "organizations_url": "https://api.github.com/users/gaearon/orgs",
    "repos_url": "https://api.github.com/users/gaearon/repos",
    "events_url": "https://api.github.com/users/gaearon/events{/privacy}",
    "received_events_url": "https://api.github.com/users/gaearon/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 71502270,
      "node_id": "MDU6TGFiZWw3MTUwMjI3MA==",
      "url": "https://api.github.com/repos/facebook/react/labels/Component:%20Build%20Infrastructure",
      "name": "Component: Build Infrastructure",
      "color": "f9d0c4",
      "default": false
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": {
    "login": "gaearon",
    "id": 810438,
    "node_id": "MDQ6VXNlcjgxMDQzOA==",
    "avatar_url": "https://avatars0.githubusercontent.com/u/810438?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/gaearon",
    "html_url": "https://github.com/gaearon",
    "followers_url": "https://api.github.com/users/gaearon/followers",
    "following_url": "https://api.github.com/users/gaearon/following{/other_user}",
    "gists_url": "https://api.github.com/users/gaearon/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/gaearon/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/gaearon/subscriptions",
    "organizations_url": "https://api.github.com/users/gaearon/orgs",
    "repos_url": "https://api.github.com/users/gaearon/repos",
    "events_url": "https://api.github.com/users/gaearon/events{/privacy}",
    "received_events_url": "https://api.github.com/users/gaearon/received_events",
    "type": "User",
    "site_admin": false
  },
  "assignees": [
    {
      "login": "gaearon",
      "id": 810438,
      "node_id": "MDQ6VXNlcjgxMDQzOA==",
      "avatar_url": "https://avatars0.githubusercontent.com/u/810438?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/gaearon",
      "html_url": "https://github.com/gaearon",
      "followers_url": "https://api.github.com/users/gaearon/followers",
      "following_url": "https://api.github.com/users/gaearon/following{/other_user}",
      "gists_url": "https://api.github.com/users/gaearon/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/gaearon/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/gaearon/subscriptions",
      "organizations_url": "https://api.github.com/users/gaearon/orgs",
      "repos_url": "https://api.github.com/users/gaearon/repos",
      "events_url": "https://api.github.com/users/gaearon/events{/privacy}",
      "received_events_url": "https://api.github.com/users/gaearon/received_events",
      "type": "User",
      "site_admin": false
    }
  ],
  "milestone": null,
  "comments": 1,
  "created_at": "2017-10-18T23:23:13Z",
  "updated_at": "2018-01-02T15:30:33Z",
  "closed_at": "2018-01-02T15:30:33Z",
  "author_association": "MEMBER",
  "body": "## Should Do Soon\r\n\r\n- [x] Having a package called `react-native` is weird.\r\n\r\n  Maybe we can just rename it to `react-native-renderer` to clarify the difference.\r\n\r\n- [x] Better strategy for shared code?\r\n\r\n  Currently we just pile code into `shared` without particular structure, and then import directly through Haste. This is the same as we do in master though, so it’s at least no worse. We might want to tighten that up a little bit in the future, and maybe have some first-class entry points into it. We need to be clear `shared` code will be duplicated between any renderers using those modules.\r\n\r\n- [x] Server shouldn't depend on reconciler modules.\r\n\r\n  I noticed `warnValidStyle` depends on `ReactDebugCurrentFiber`. This seems like it will always miss `owner` in warnings on server. Maybe it should depend on some other shared file instead? Regardless, this is *already* an issue on master so it’s not a regression.\r\n\r\n- [x] Find a more solid way to avoid Jest skipping our own modules (current hack is gross).\r\n\r\n  The hack being `\"transformIgnorePatterns\": [\"/node_modules/(?!react)\"],` in `package.json`. Otherwise Jest skips our own code thinking it doesn’t need to be compiled because it was resolved through `node_modules`.\r\n\r\n  The hack is not dangerous and can’t cause false positives with third-party code because I specifically check the resolved symlink path in the Jest transformer. Still, it means that if we add a package whose name doesn’t start with `react`, it will not be Babel-ed in tests until we add another exceptional case there.\r\n\r\n  We can live with this hack for a little bit since we don’t plan to publish packages that don’t start with `react` in near future. We should file an issue with Jest though and come up with a better solution.\r\n\r\n  Update: fixed via https://github.com/facebook/react/pull/11372.\r\n\r\n## Should Do Later\r\n\r\n- [x] Get rid of `useFiber` flag in bundle config\r\n- [x] Rename entry points to be more intuitive (e.g. `React` should be React entry point etc)\r\n- [x] Make internal folder structure more sensible\r\n- [x] Move requires around to be prettier\r\n- [x] Fix relative requires in tests\r\n- [x] Get rid of `fbEntry` in bundle config\r\n- [x] Why are we bundling `lowPriorityWarning` into PROD bundle?\r\n- [x] In general, remove anything in bundle config that can now be determined using package folder\r\n- [x] Fix the gross hack https://github.com/facebook/react/pull/11472\r\n- [ ] Forbid importing from other packages? https://github.com/facebook/react/pull/11303#discussion_r146703577\r\n- [ ] Move some Flow types\r\n- [ ] It is odd that package-level deps must be at top level too https://github.com/facebook/react/pull/11341#issuecomment-338707660\r\n- [ ] Split bundle config per package and \"autodiscover\" packages for bundling and version check\r\n- [ ] Autogenerate \"simple\" entry point files for npm (`react-dom/npm/index.js` being the exception)\r\n- [ ] Move some of `scripts` into packages too?\r\n",
  "closed_by": {
    "login": "gaearon",
    "id": 810438,
    "node_id": "MDQ6VXNlcjgxMDQzOA==",
    "avatar_url": "https://avatars0.githubusercontent.com/u/810438?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/gaearon",
    "html_url": "https://github.com/gaearon",
    "followers_url": "https://api.github.com/users/gaearon/followers",
    "following_url": "https://api.github.com/users/gaearon/following{/other_user}",
    "gists_url": "https://api.github.com/users/gaearon/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/gaearon/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/gaearon/subscriptions",
    "organizations_url": "https://api.github.com/users/gaearon/orgs",
    "repos_url": "https://api.github.com/users/gaearon/repos",
    "events_url": "https://api.github.com/users/gaearon/events{/privacy}",
    "received_events_url": "https://api.github.com/users/gaearon/received_events",
    "type": "User",
    "site_admin": false
  }
}

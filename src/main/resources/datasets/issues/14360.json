{
  "url": "https://api.github.com/repos/facebook/react/issues/14360",
  "repository_url": "https://api.github.com/repos/facebook/react",
  "labels_url": "https://api.github.com/repos/facebook/react/issues/14360/labels{/name}",
  "comments_url": "https://api.github.com/repos/facebook/react/issues/14360/comments",
  "events_url": "https://api.github.com/repos/facebook/react/issues/14360/events",
  "html_url": "https://github.com/facebook/react/issues/14360",
  "id": 385998832,
  "node_id": "MDU6SXNzdWUzODU5OTg4MzI=",
  "number": 14360,
  "title": "useReducer: dispatched actions are reduced twice",
  "user": {
    "login": "ioss",
    "id": 281787,
    "node_id": "MDQ6VXNlcjI4MTc4Nw==",
    "avatar_url": "https://avatars3.githubusercontent.com/u/281787?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/ioss",
    "html_url": "https://github.com/ioss",
    "followers_url": "https://api.github.com/users/ioss/followers",
    "following_url": "https://api.github.com/users/ioss/following{/other_user}",
    "gists_url": "https://api.github.com/users/ioss/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/ioss/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/ioss/subscriptions",
    "organizations_url": "https://api.github.com/users/ioss/orgs",
    "repos_url": "https://api.github.com/users/ioss/repos",
    "events_url": "https://api.github.com/users/ioss/events{/privacy}",
    "received_events_url": "https://api.github.com/users/ioss/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 1109410193,
      "node_id": "MDU6TGFiZWwxMTA5NDEwMTkz",
      "url": "https://api.github.com/repos/facebook/react/labels/Component:%20Hooks",
      "name": "Component: Hooks",
      "color": "c2f27b",
      "default": false
    },
    {
      "id": 40929151,
      "node_id": "MDU6TGFiZWw0MDkyOTE1MQ==",
      "url": "https://api.github.com/repos/facebook/react/labels/Type:%20Bug",
      "name": "Type: Bug",
      "color": "b60205",
      "default": false
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 4,
  "created_at": "2018-11-30T01:29:19Z",
  "updated_at": "2018-11-30T15:02:52Z",
  "closed_at": "2018-11-30T15:02:20Z",
  "author_association": "CONTRIBUTOR",
  "body": "**Do you want to request a *feature* or report a *bug*?**\r\nReport a *bug*\r\n\r\n**What is the current behavior?**\r\nThere are cases where actions dispatched by `useReducer`'s dispatch function are reduced twice (in concurrent mode).\r\n\r\nAs far as I can tell from my first quick read of the code of react-dom (so I might be totally wrong!), this happens, when a higher priority action is added to a queue that already contains lower priority actions.\r\n\r\nOn the first run, that is caused by for example an onClick handler (higher priority), the dispatched action is appended to the queue. On processing the queue the lower priority actions (for example from setInterval events)  are _ignored_ and the \"onClick action\" is reduced, but stays on the end of the queue, so that on the next time the queue is processed, that action gets reduced a second time.\r\n\r\nSee a testcase at:\r\nhttps://codesandbox.io/s/nxq3w7rwl\r\n\r\nPressing the button increments the button (most of the time not always, depending if 'TICK' actions are in the queue) by two.\r\n\r\n**What is the expected behavior?**\r\nI'd expect a dispatched action to be only reduced once.\r\n\r\n**Which versions of React, and which browser / OS are affected by this issue? Did this work in previous versions of React?**\r\nTested with React 16.7.0-alpha.2 on Chrome (70.0.3538.110) and Safari (12.0.1) both on macOs\r\n",
  "closed_by": {
    "login": "gaearon",
    "id": 810438,
    "node_id": "MDQ6VXNlcjgxMDQzOA==",
    "avatar_url": "https://avatars0.githubusercontent.com/u/810438?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/gaearon",
    "html_url": "https://github.com/gaearon",
    "followers_url": "https://api.github.com/users/gaearon/followers",
    "following_url": "https://api.github.com/users/gaearon/following{/other_user}",
    "gists_url": "https://api.github.com/users/gaearon/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/gaearon/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/gaearon/subscriptions",
    "organizations_url": "https://api.github.com/users/gaearon/orgs",
    "repos_url": "https://api.github.com/users/gaearon/repos",
    "events_url": "https://api.github.com/users/gaearon/events{/privacy}",
    "received_events_url": "https://api.github.com/users/gaearon/received_events",
    "type": "User",
    "site_admin": false
  }
}

{
  "url": "https://api.github.com/repos/facebook/react/issues/13461",
  "repository_url": "https://api.github.com/repos/facebook/react",
  "labels_url": "https://api.github.com/repos/facebook/react/issues/13461/labels{/name}",
  "comments_url": "https://api.github.com/repos/facebook/react/issues/13461/comments",
  "events_url": "https://api.github.com/repos/facebook/react/issues/13461/events",
  "html_url": "https://github.com/facebook/react/pull/13461",
  "id": 353050048,
  "node_id": "MDExOlB1bGxSZXF1ZXN0MjEwMjA3MDQ1",
  "number": 13461,
  "title": "[WIP] Remove mount safe callback out ouf react native renderer",
  "user": {
    "login": "tychota",
    "id": 13785185,
    "node_id": "MDQ6VXNlcjEzNzg1MTg1",
    "avatar_url": "https://avatars2.githubusercontent.com/u/13785185?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/tychota",
    "html_url": "https://github.com/tychota",
    "followers_url": "https://api.github.com/users/tychota/followers",
    "following_url": "https://api.github.com/users/tychota/following{/other_user}",
    "gists_url": "https://api.github.com/users/tychota/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/tychota/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/tychota/subscriptions",
    "organizations_url": "https://api.github.com/users/tychota/orgs",
    "repos_url": "https://api.github.com/users/tychota/repos",
    "events_url": "https://api.github.com/users/tychota/events{/privacy}",
    "received_events_url": "https://api.github.com/users/tychota/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 196858374,
      "node_id": "MDU6TGFiZWwxOTY4NTgzNzQ=",
      "url": "https://api.github.com/repos/facebook/react/labels/CLA%20Signed",
      "name": "CLA Signed",
      "color": "e7e7e7",
      "default": false
    }
  ],
  "state": "open",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 2,
  "created_at": "2018-08-22T17:24:40Z",
  "updated_at": "2018-08-29T23:33:49Z",
  "closed_at": null,
  "author_association": "NONE",
  "pull_request": {
    "url": "https://api.github.com/repos/facebook/react/pulls/13461",
    "html_url": "https://github.com/facebook/react/pull/13461",
    "diff_url": "https://github.com/facebook/react/pull/13461.diff",
    "patch_url": "https://github.com/facebook/react/pull/13461.patch"
  },
  "body": "# Note\r\n\r\nThis PR is wip but I opened it to get feedback from @gaearon or rest of https://github.com/facebook/react/ team.\r\n\r\n# Goals\r\n\r\nLook at https://github.com/facebook/react-native/issues/18868 especially https://github.com/facebook/react-native/issues/18868#issuecomment-413609027.\r\n\r\nThe Goal is to remove mountSafeCallback from react native renderer as it is not safe proof.\r\n\r\n> This makes sense. I don't argue with this. My argument is that mountSafeCallback already seems to not do anything for built-in components like RCTView / RCTText (to which normal Text and View forward their refs) because they have neither __isMounted nor isMounted() according to their definition. So the whole premise of mountSafeCallback being \"safe\" already seems questionable.\r\n\r\n> And for ES6 React classes, the method doesn't exist either â€” just a getter with warnings.\r\n\r\n# Open questions\r\n\r\nIs the approach I propose in https://github.com/facebook/react-native/issues/18868#issuecomment-413945370 correct ?\r\n\r\nIs the start of implementation (this PR) OK ?\r\n\r\nHow to remove the callpoints of https://github.com/facebook/react/pull/13461/files#diff-4ec7e5798bfcb299da3fc827eb7db07d ?\r\n\r\n### How to clear pending callback: \r\n\r\n- For the easy case, the ReactNativeComponent, I tried this https://github.com/facebook/react/pull/13461/files#diff-3899566ffae25dd959157d1e7a9fc8c1R56 (so in cWU, map and cancel, then delete the reference). \r\n\r\n- I have no clue how to do it for `ReactNativeFiberHostComponent` but looking at the code i guess that i can retrieve the instance with `findHostInstance(containerTag)` in ReactNativeRender, in `unmountComponentAtNode` then get the `canonical` property which is the `ReactNativeFiberHostComponent`, right ?\r\n\r\n- I also have no clue how to do it in `ReactFabricHostComponent`. My guess it is the same than above, one for `React Fiber` and one for `React stack` but the file seems edited so I must be wrong\r\n\r\n\r\n\r\n",
  "closed_by": null
}

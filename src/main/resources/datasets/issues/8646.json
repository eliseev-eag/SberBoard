{
  "url": "https://api.github.com/repos/facebook/react/issues/8646",
  "repository_url": "https://api.github.com/repos/facebook/react",
  "labels_url": "https://api.github.com/repos/facebook/react/issues/8646/labels{/name}",
  "comments_url": "https://api.github.com/repos/facebook/react/issues/8646/comments",
  "events_url": "https://api.github.com/repos/facebook/react/issues/8646/events",
  "html_url": "https://github.com/facebook/react/pull/8646",
  "id": 197758069,
  "node_id": "MDExOlB1bGxSZXF1ZXN0OTk0ODM3MTM=",
  "number": 8646,
  "title": "Renderers can queue commit effects for initial mount",
  "user": {
    "login": "bvaughn",
    "id": 29597,
    "node_id": "MDQ6VXNlcjI5NTk3",
    "avatar_url": "https://avatars0.githubusercontent.com/u/29597?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/bvaughn",
    "html_url": "https://github.com/bvaughn",
    "followers_url": "https://api.github.com/users/bvaughn/followers",
    "following_url": "https://api.github.com/users/bvaughn/following{/other_user}",
    "gists_url": "https://api.github.com/users/bvaughn/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/bvaughn/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/bvaughn/subscriptions",
    "organizations_url": "https://api.github.com/users/bvaughn/orgs",
    "repos_url": "https://api.github.com/users/bvaughn/repos",
    "events_url": "https://api.github.com/users/bvaughn/events{/privacy}",
    "received_events_url": "https://api.github.com/users/bvaughn/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 20,
  "created_at": "2016-12-27T21:08:36Z",
  "updated_at": "2016-12-28T20:16:55Z",
  "closed_at": "2016-12-28T20:16:51Z",
  "author_association": "CONTRIBUTOR",
  "pull_request": {
    "url": "https://api.github.com/repos/facebook/react/pulls/8646",
    "html_url": "https://github.com/facebook/react/pull/8646",
    "diff_url": "https://github.com/facebook/react/pull/8646.diff",
    "patch_url": "https://github.com/facebook/react/pull/8646.patch"
  },
  "body": "Auto-focus was previously managed by `ReactDOMFiberComponent.setInitialProperties` (which gets called during the complete phase). This did not work because host components are not yet present in the DOM until the entire tree has been mounted (which happens during the commit phase).\r\n\r\nThis PR resolves that by making a few changes:\r\n\r\n* The `HostConfig` `finalizeInitialChildren` method now returns a boolean. Renderers should return true to indicate that custom effects should be processed during commit (once host components have been mounted). eg `ReactDOMFiber` uses this to queue auto-focus.\r\n* A new `HostConfig` method, `commitMount`, has been added for performing this type of work. (See [this discussion thread](https://github.com/facebook/react/pull/8646#discussion_r94064811) for why a new method was added instead of repurposing `commitUpdate`.) Existing renderers have been updated with noops.\r\n\r\n#### Tests\r\n\r\nI was able to easily reproduce the broken focus behavior in a browser and verify the fix. However it was a bit awkward to catch in a unit test because PhantomJS does not require DOM elements to be mounted in order to track their focused state. I was able to add a test that caught the broken behavior and verifies the fix, but it's kind of a hack.\r\n\r\n#### IE8 compatibility note\r\n\r\nNote that this PR also drops use of the `focusNode` helper method since it was in place for IE8 and IE8 support was officially dropped in January 2016.",
  "closed_by": {
    "login": "bvaughn",
    "id": 29597,
    "node_id": "MDQ6VXNlcjI5NTk3",
    "avatar_url": "https://avatars0.githubusercontent.com/u/29597?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/bvaughn",
    "html_url": "https://github.com/bvaughn",
    "followers_url": "https://api.github.com/users/bvaughn/followers",
    "following_url": "https://api.github.com/users/bvaughn/following{/other_user}",
    "gists_url": "https://api.github.com/users/bvaughn/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/bvaughn/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/bvaughn/subscriptions",
    "organizations_url": "https://api.github.com/users/bvaughn/orgs",
    "repos_url": "https://api.github.com/users/bvaughn/repos",
    "events_url": "https://api.github.com/users/bvaughn/events{/privacy}",
    "received_events_url": "https://api.github.com/users/bvaughn/received_events",
    "type": "User",
    "site_admin": false
  }
}

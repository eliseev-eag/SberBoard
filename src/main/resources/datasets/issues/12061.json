{
  "url": "https://api.github.com/repos/facebook/react/issues/12061",
  "repository_url": "https://api.github.com/repos/facebook/react",
  "labels_url": "https://api.github.com/repos/facebook/react/issues/12061/labels{/name}",
  "comments_url": "https://api.github.com/repos/facebook/react/issues/12061/comments",
  "events_url": "https://api.github.com/repos/facebook/react/issues/12061/events",
  "html_url": "https://github.com/facebook/react/issues/12061",
  "id": 290202725,
  "node_id": "MDU6SXNzdWUyOTAyMDI3MjU=",
  "number": 12061,
  "title": "onChange event of a checkbox not firing in some circumstances",
  "user": {
    "login": "andreasciamanna",
    "id": 181780,
    "node_id": "MDQ6VXNlcjE4MTc4MA==",
    "avatar_url": "https://avatars0.githubusercontent.com/u/181780?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/andreasciamanna",
    "html_url": "https://github.com/andreasciamanna",
    "followers_url": "https://api.github.com/users/andreasciamanna/followers",
    "following_url": "https://api.github.com/users/andreasciamanna/following{/other_user}",
    "gists_url": "https://api.github.com/users/andreasciamanna/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/andreasciamanna/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/andreasciamanna/subscriptions",
    "organizations_url": "https://api.github.com/users/andreasciamanna/orgs",
    "repos_url": "https://api.github.com/users/andreasciamanna/repos",
    "events_url": "https://api.github.com/users/andreasciamanna/events{/privacy}",
    "received_events_url": "https://api.github.com/users/andreasciamanna/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 7,
  "created_at": "2018-01-20T16:08:14Z",
  "updated_at": "2018-10-16T19:16:32Z",
  "closed_at": "2018-01-23T07:50:52Z",
  "author_association": "NONE",
  "body": "I'm not sure if that's a but or (more likely) just a lack of knowledge.\r\n\r\nThe fact I started fiddling with React only a couple of weeks ago might be a hint.\r\n\r\nAnyway, the code below is meant to display a checkbox.\r\n\r\n```javascript\r\nimport React from 'react';\r\nimport {connect} from \"react-redux\";\r\nimport {fetchSettingsIfNeeded, updateSetting} from \"../../actions/settings\";\r\n\r\nclass AdjustIDs extends React.Component {\r\n\tsetting_key = 'auto_adjust_ids';\r\n\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.props.fetchSettings();\r\n\t}\r\n\r\n\tonChange = (e) => {\r\n\t\tthis.props.updateSetting(this.setting_key, e.target.checked);\r\n\t};\r\n\r\n\trender() {\r\n\t\t// console.log('AdjustIDs props', this.props);\r\n\t\tconst value = this.props.settings.data[this.setting_key];\r\n\r\n\t\treturn (<fieldset className=\"wpml-settings-section\" disabled={this.props.disabled}>\r\n\t\t\t<h4>Make themes work multilingual</h4>\r\n\t\t\t<p>\r\n\t\t\t\tThis feature turns themes into multilingual, without having to edit their PHP files.\r\n\t\t\t</p>\r\n\t\t\t<label>\r\n\t\t\t\t<input type=\"checkbox\" defaultChecked={value} onChange={this.onChange}/> Adjust IDs for multilingual\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t functionality\r\n\t\t\t</label>\r\n\t\t</fieldset>);\r\n\t}\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n\tconst {settings: settingsReducer} = state;\r\n\tconst {isFetching, didInvalidate} = settingsReducer || {isFetching: true};\r\n\r\n\treturn {\r\n\t\tisFetching,\r\n\t\tdidInvalidate,\r\n\t\tsettings: settingsReducer\r\n\t};\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch) => ({\r\n\tfetchSettings: (key, defaultValue) => dispatch(fetchSettingsIfNeeded(key)),\r\n\tupdateSetting: (key, value) => dispatch(updateSetting(key, value)),\r\n});\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(AdjustIDs);\r\n```\r\n\r\nEven if probably not relevant, for clarity, data is read and written through some REST calls and the code is [mostly based on this](https://redux.js.org/docs/advanced/AsyncActions.html).\r\n\r\nBack to the specific case, the checkbox is supposed to fire an event when clicked.\r\n\r\nAnd this is what happens, as long as the initial state of `value` (that is, `this.props.settings.data[this.setting_key]`) is `false`.\r\nIn this case, every time I click the checkbox, `this.onChange` is called.\r\n\r\nIf instead the initial state of `value` is `true` and I click on it, `this.onChange` is not called.\r\nClicking on it again will call `this.onChange` and from that moment on, everything works flawlessly: callbacks are called, data is updated and refreshed as expected.\r\n\r\nThe only problem I'm having if the initial state is `true`.\r\n\r\nI've tried many possible combinations to see if there is a different scenario which may cause the same problem, but it seems that's the only case.\r\n\r\nI've tried to check if I'm doing something wrong with controlled/uncontrolled components, and, as far as my freshness with React allows me, it looks like that's how I'm supposed to handle this.\r\n\r\n**Which versions of React, and which browser / OS are affected by this issue? Did this work in previous versions of React?**\r\n\r\nMy current dependencies (need some cleanup):\r\n```\r\n\"babel-cli\": \"^6.26.0\",\r\n\"babel-core\": \"^6.26.0\",\r\n\"babel-loader\": \"^7.1.2\",\r\n\"babel-plugin-transform-class-properties\": \"^6.24.1\",\r\n\"babel-plugin-transform-object-rest-spread\": \"^6.26.0\",\r\n\"babel-preset-env\": \"^1.6.1\",\r\n\"babel-preset-react\": \"^6.24.1\",\r\n\"cross-fetch\": \"^1.1.1\",\r\n\"css-loader\": \"^0.28.7\",\r\n\"express\": \"^4.16.2\",\r\n\"extract-text-webpack-plugin\": \"^3.0.2\",\r\n\"moment\": \"^2.20.1\",\r\n\"node-sass\": \"^4.7.2\",\r\n\"numeral\": \"^2.0.6\",\r\n\"query-string\": \"^5.0.1\",\r\n\"raf\": \"^3.4.0\",\r\n\"react\": \"^16.2.0\",\r\n\"react-addons-shallow-compare\": \"^15.6.2\",\r\n\"react-checkbox-group\": \"^3.3.4\",\r\n\"react-dates\": \"^16.0.1\",\r\n\"react-dom\": \"^16.2.0\",\r\n\"react-modal\": \"^3.1.10\",\r\n\"react-radio-group\": \"^3.0.2\",\r\n\"react-redux\": \"^5.0.6\",\r\n\"react-router-dom\": \"^4.2.2\",\r\n\"redux\": \"^3.7.2\",\r\n\"redux-form\": \"^7.2.1\",\r\n\"redux-logger\": \"^3.0.6\",\r\n\"redux-thunk\": \"^2.2.0\",\r\n\"sass-loader\": \"^6.0.6\",\r\n\"style-loader\": \"^0.19.1\",\r\n\"superagent\": \"^3.8.2\",\r\n\"validator\": \"^9.2.0\",\r\n\"webpack\": \"^3.10.0\",\r\n\"whatwg-fetch\": \"^2.0.3\"\r\n```\r\n\r\nI've tried with both Chrome (63.0.3239.132) and Firefox (57.0.1).\r\n\r\nLet me know if you need any additional detail.\r\n\r\nThought probably not needed, I can also share the project, but it wouldn't work out of the box, as it's a work I'm doing to extend the back-end of a WordPress plugin.",
  "closed_by": {
    "login": "andreasciamanna",
    "id": 181780,
    "node_id": "MDQ6VXNlcjE4MTc4MA==",
    "avatar_url": "https://avatars0.githubusercontent.com/u/181780?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/andreasciamanna",
    "html_url": "https://github.com/andreasciamanna",
    "followers_url": "https://api.github.com/users/andreasciamanna/followers",
    "following_url": "https://api.github.com/users/andreasciamanna/following{/other_user}",
    "gists_url": "https://api.github.com/users/andreasciamanna/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/andreasciamanna/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/andreasciamanna/subscriptions",
    "organizations_url": "https://api.github.com/users/andreasciamanna/orgs",
    "repos_url": "https://api.github.com/users/andreasciamanna/repos",
    "events_url": "https://api.github.com/users/andreasciamanna/events{/privacy}",
    "received_events_url": "https://api.github.com/users/andreasciamanna/received_events",
    "type": "User",
    "site_admin": false
  }
}

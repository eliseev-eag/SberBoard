{
  "url": "https://api.github.com/repos/facebook/react/issues/4053",
  "repository_url": "https://api.github.com/repos/facebook/react",
  "labels_url": "https://api.github.com/repos/facebook/react/issues/4053/labels{/name}",
  "comments_url": "https://api.github.com/repos/facebook/react/issues/4053/comments",
  "events_url": "https://api.github.com/repos/facebook/react/issues/4053/events",
  "html_url": "https://github.com/facebook/react/issues/4053",
  "id": 85944290,
  "node_id": "MDU6SXNzdWU4NTk0NDI5MA==",
  "number": 4053,
  "title": "Context and props.children",
  "user": {
    "login": "sderosiaux",
    "id": 3936459,
    "node_id": "MDQ6VXNlcjM5MzY0NTk=",
    "avatar_url": "https://avatars3.githubusercontent.com/u/3936459?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/sderosiaux",
    "html_url": "https://github.com/sderosiaux",
    "followers_url": "https://api.github.com/users/sderosiaux/followers",
    "following_url": "https://api.github.com/users/sderosiaux/following{/other_user}",
    "gists_url": "https://api.github.com/users/sderosiaux/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/sderosiaux/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/sderosiaux/subscriptions",
    "organizations_url": "https://api.github.com/users/sderosiaux/orgs",
    "repos_url": "https://api.github.com/users/sderosiaux/repos",
    "events_url": "https://api.github.com/users/sderosiaux/events{/privacy}",
    "received_events_url": "https://api.github.com/users/sderosiaux/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 2,
  "created_at": "2015-06-07T21:17:00Z",
  "updated_at": "2015-06-08T11:03:17Z",
  "closed_at": "2015-06-08T11:03:17Z",
  "author_association": "NONE",
  "body": "Hi,\n\nI'm having some troubles to understand how the context is passed on when using `this.props.children`. I don't know if it's a bug or if it's expected. I'm using React v0.13.3.\n\nI can make it work using `this.props.children()` (as a function), but not using the simple declarative way.\n\nExample :\n- The application, using ContextEmitter (children as a function), and ContextEmitter2 (children using declarative way)\n\n``` javascript\nexport default class MyApp {\n  render() {\n    return (\n      <div>\n\n        <ContextEmitter>\n          {() => <ul>\n              <ContextConsumer />\n              <ContextConsumer />\n            </ul>\n          }\n        </ContextEmitter>\n\n        <ContextEmitter2>\n            <ul>\n              <ContextConsumer />\n              <ContextConsumer />\n            </ul>\n        </ContextEmitter2>\n      </div>\n    );\n  }\n}\n```\n- ContextConsumer, a simple consumer of `this.context.value`.\n\n``` javascript\nexport class ContextConsumer extends React.Component {\n  static contextTypes = {\n     value: React.PropTypes.number.required\n  }\n\n  render() {\n    return <li>Context value: { this.context.value }</li>;\n  }\n}\n```\n- ContextEmitter,  a parent, creating a context and rendering `this.props.children()` : context is properly passed on.\n\n``` javascript\nexport class ContextEmitter extends React.Component {\n  static childContextTypes = {\n    value: React.PropTypes.number.required\n  };\n\n  getChildContext() {\n    return { value: 2 };\n  }\n\n  render() {\n    return <ul>ContextEmitter { this.props.children() }</ul>;\n  }\n}\n```\n- ContextEmitter2, a parent, creating a context and rendering `this.props.children`: context is not passed on.\n\n``` javascript\nexport class ContextEmitter2 extends React.Component {\n  static childContextTypes = {\n    value: React.PropTypes.number.required\n  };\n\n  getChildContext() {\n    return { value: 2 };\n  }\n\n  render() {\n    return (<ul>ContextEmitter2 { this.props.children }</ul>);\n  }\n}\n```\n\nI can see this result :\n\n```\nContextEmitter\nContext value: 2\nContext value: 2\nContextEmitter2\nContext value:\nContext value:\n```\n\nMeaning using the function way for `children` `() => <ContextConsumer />` it works, otherwise it does not.\n\nIs this expected ? Why such difference ?\n\nThanks\n\nEdit: I'm having several warnings in the console for the non-working case btw.\nWarning: Failed Context Types: Invariant Violation: ContextEmitter: child context type `value` is invalid; it must be a function, usually from React.PropTypes. Check the render method of `MyApp`.\n...\nWarning: owner-based and parent-based contexts differ (values: `undefined` vs `2`) for key (value) while mounting ContextConsumer (see: http://fb.me/react-context-by-parent)\n",
  "closed_by": {
    "login": "sderosiaux",
    "id": 3936459,
    "node_id": "MDQ6VXNlcjM5MzY0NTk=",
    "avatar_url": "https://avatars3.githubusercontent.com/u/3936459?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/sderosiaux",
    "html_url": "https://github.com/sderosiaux",
    "followers_url": "https://api.github.com/users/sderosiaux/followers",
    "following_url": "https://api.github.com/users/sderosiaux/following{/other_user}",
    "gists_url": "https://api.github.com/users/sderosiaux/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/sderosiaux/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/sderosiaux/subscriptions",
    "organizations_url": "https://api.github.com/users/sderosiaux/orgs",
    "repos_url": "https://api.github.com/users/sderosiaux/repos",
    "events_url": "https://api.github.com/users/sderosiaux/events{/privacy}",
    "received_events_url": "https://api.github.com/users/sderosiaux/received_events",
    "type": "User",
    "site_admin": false
  }
}

{
  "url": "https://api.github.com/repos/facebook/react/issues/2858",
  "repository_url": "https://api.github.com/repos/facebook/react",
  "labels_url": "https://api.github.com/repos/facebook/react/issues/2858/labels{/name}",
  "comments_url": "https://api.github.com/repos/facebook/react/issues/2858/comments",
  "events_url": "https://api.github.com/repos/facebook/react/issues/2858/events",
  "html_url": "https://github.com/facebook/react/issues/2858",
  "id": 54379599,
  "node_id": "MDU6SXNzdWU1NDM3OTU5OQ==",
  "number": 2858,
  "title": "Lack of TestUtils method that finds rendered component(s) by data attribute value",
  "user": {
    "login": "jackwanders",
    "id": 752393,
    "node_id": "MDQ6VXNlcjc1MjM5Mw==",
    "avatar_url": "https://avatars1.githubusercontent.com/u/752393?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/jackwanders",
    "html_url": "https://github.com/jackwanders",
    "followers_url": "https://api.github.com/users/jackwanders/followers",
    "following_url": "https://api.github.com/users/jackwanders/following{/other_user}",
    "gists_url": "https://api.github.com/users/jackwanders/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/jackwanders/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/jackwanders/subscriptions",
    "organizations_url": "https://api.github.com/users/jackwanders/orgs",
    "repos_url": "https://api.github.com/users/jackwanders/repos",
    "events_url": "https://api.github.com/users/jackwanders/events{/privacy}",
    "received_events_url": "https://api.github.com/users/jackwanders/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 2,
  "created_at": "2015-01-14T21:33:04Z",
  "updated_at": "2015-02-27T00:14:10Z",
  "closed_at": "2015-02-27T00:14:10Z",
  "author_association": "NONE",
  "body": "The React test utilities currently expose the following ways to query the contents of a rendered component for certain elements:\n- by type (`scryRenderedDOMComponentsByType`)\n- by tag (`scryRenderedDOMComponentsByTag`)\n- by className (`scryRenderedDOMComponentsByClass`)\n\nHowever, it's very common for applications that make use of automated testing tools to target elements not by className (or tag name), but rather by a specific data attribute type that is reserved explicitly for use by the testers. This paradigm allows developers to modify class names for the purposes of styling without worrying about breaking existing test suites.\n\nI feel like it could be beneficial to allow `React.addons.TestUtils` to allow querying of rendered components via data attributes, like so:\n\n``` javascript\nReactTestUtils.scryRenderedDOMComponentsWithDataAttr = function(root, attrName, attrValue) {\n    return ReactTestUtils.findAllInRenderedTree(root, function(inst) {\n        var regex = /^data-/;\n        var dataset = {};\n        for (key in inst.props) {\n            if (regex.test(key)) {\n            dataset[key.replace(regex,'')] = inst.props[key];\n            }\n        }\n        return dataset[attrName] === attrValue;\n    });\n};\n\nReactTestUtils.findRenderedDOMComponentWithDataAttr = function(root, attrName, attrValue) {\n    var all = ReactTestUtils.scryRenderedDOMComponentsWithDataAttr(root, attrName, attrValue);\n\n    if (all.length !== 1) {\n        throw new Error(\n            'Did not find exactly one match for data attribute:' + attrName + ' with value:' + attrValue\n        );\n    }\n    return all[0];\n};\n```\n\nThis would allow unit testing of React elements by rendering them via `React.addons.TestUtils.renderIntoDocument` and then validating the contents of the rendered element by querying for the same data attributes that might be used in a complementary automated test suite.\n\nI figured before even attempting to put together a formal pull request, I would open an issue and get some feedback on the perceived value of such additions to `React.TestUtils`.\n\nThanks.\n",
  "closed_by": {
    "login": "sophiebits",
    "id": 6820,
    "node_id": "MDQ6VXNlcjY4MjA=",
    "avatar_url": "https://avatars2.githubusercontent.com/u/6820?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/sophiebits",
    "html_url": "https://github.com/sophiebits",
    "followers_url": "https://api.github.com/users/sophiebits/followers",
    "following_url": "https://api.github.com/users/sophiebits/following{/other_user}",
    "gists_url": "https://api.github.com/users/sophiebits/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/sophiebits/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/sophiebits/subscriptions",
    "organizations_url": "https://api.github.com/users/sophiebits/orgs",
    "repos_url": "https://api.github.com/users/sophiebits/repos",
    "events_url": "https://api.github.com/users/sophiebits/events{/privacy}",
    "received_events_url": "https://api.github.com/users/sophiebits/received_events",
    "type": "User",
    "site_admin": false
  }
}

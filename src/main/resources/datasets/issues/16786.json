{
  "url": "https://api.github.com/repos/facebook/react/issues/16786",
  "repository_url": "https://api.github.com/repos/facebook/react",
  "labels_url": "https://api.github.com/repos/facebook/react/issues/16786/labels{/name}",
  "comments_url": "https://api.github.com/repos/facebook/react/issues/16786/comments",
  "events_url": "https://api.github.com/repos/facebook/react/issues/16786/events",
  "html_url": "https://github.com/facebook/react/issues/16786",
  "id": 493773623,
  "node_id": "MDU6SXNzdWU0OTM3NzM2MjM=",
  "number": 16786,
  "title": "Workaround to the input onChange lossing focus bug",
  "user": {
    "login": "Ziv-Barber",
    "id": 3667761,
    "node_id": "MDQ6VXNlcjM2Njc3NjE=",
    "avatar_url": "https://avatars1.githubusercontent.com/u/3667761?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/Ziv-Barber",
    "html_url": "https://github.com/Ziv-Barber",
    "followers_url": "https://api.github.com/users/Ziv-Barber/followers",
    "following_url": "https://api.github.com/users/Ziv-Barber/following{/other_user}",
    "gists_url": "https://api.github.com/users/Ziv-Barber/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/Ziv-Barber/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/Ziv-Barber/subscriptions",
    "organizations_url": "https://api.github.com/users/Ziv-Barber/orgs",
    "repos_url": "https://api.github.com/users/Ziv-Barber/repos",
    "events_url": "https://api.github.com/users/Ziv-Barber/events{/privacy}",
    "received_events_url": "https://api.github.com/users/Ziv-Barber/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 620368407,
      "node_id": "MDU6TGFiZWw2MjAzNjg0MDc=",
      "url": "https://api.github.com/repos/facebook/react/labels/Resolution:%20Needs%20More%20Information",
      "name": "Resolution: Needs More Information",
      "color": "fffde7",
      "default": false
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 5,
  "created_at": "2019-09-15T19:01:48Z",
  "updated_at": "2019-09-17T14:55:43Z",
  "closed_at": "2019-09-17T14:55:43Z",
  "author_association": "NONE",
  "body": "It's not the best solution since that React still destroying and creating the input element but when you are working with dynamic elements created on the fly, like for example, from an array, then you don't have any other choice:\r\n\r\n    import React, { useEffect } from 'react'\r\n\r\n    function InputWithFocus(props) {\r\n      const { getFocusData, setFocusData, onChange, ...rest } = props\r\n      let isNeedSaveFocus = null\r\n\r\n      useEffect(() => {\r\n        const focus = getFocusData()\r\n        if (focus && focus.key === props.id) {\r\n          const el = document.getElementById(props.id)\r\n          if (el) {\r\n            el.focus()\r\n            el.setSelectionRange(focus.pos, focus.pos)  \r\n          } // Endif.\r\n\r\n          setFocus(null)\r\n        } // Endif.\r\n\r\n        return () => {\r\n          if (isNeedSaveFocus || isNeedSaveFocus === 0) {\r\n            setFocusData({key: props.id, pos: isNeedSaveFocus})\r\n          } // Endif.\r\n        }\r\n      })\r\n\r\n      function onChangeImp(event) {\r\n        isNeedSaveFocus = event.target.selectionStart\r\n        if (props.onChange) {\r\n          props.onChange(event)\r\n        } // Endif.\r\n      }\r\n\r\n      return <input onChange={onChangeImp} {...rest} />\r\n    }\r\n\r\nWorking great here. I'll be happy for a better solution which is to fix the bug in react so it'll use the key attribute to compare elements.",
  "closed_by": {
    "login": "bvaughn",
    "id": 29597,
    "node_id": "MDQ6VXNlcjI5NTk3",
    "avatar_url": "https://avatars0.githubusercontent.com/u/29597?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/bvaughn",
    "html_url": "https://github.com/bvaughn",
    "followers_url": "https://api.github.com/users/bvaughn/followers",
    "following_url": "https://api.github.com/users/bvaughn/following{/other_user}",
    "gists_url": "https://api.github.com/users/bvaughn/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/bvaughn/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/bvaughn/subscriptions",
    "organizations_url": "https://api.github.com/users/bvaughn/orgs",
    "repos_url": "https://api.github.com/users/bvaughn/repos",
    "events_url": "https://api.github.com/users/bvaughn/events{/privacy}",
    "received_events_url": "https://api.github.com/users/bvaughn/received_events",
    "type": "User",
    "site_admin": false
  }
}

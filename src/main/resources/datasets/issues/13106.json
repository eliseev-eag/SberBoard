{
  "url": "https://api.github.com/repos/facebook/react/issues/13106",
  "repository_url": "https://api.github.com/repos/facebook/react",
  "labels_url": "https://api.github.com/repos/facebook/react/issues/13106/labels{/name}",
  "comments_url": "https://api.github.com/repos/facebook/react/issues/13106/comments",
  "events_url": "https://api.github.com/repos/facebook/react/issues/13106/events",
  "html_url": "https://github.com/facebook/react/issues/13106",
  "id": 335257947,
  "node_id": "MDU6SXNzdWUzMzUyNTc5NDc=",
  "number": 13106,
  "title": "React Nested Input wrong index Errors on Update",
  "user": {
    "login": "phandych",
    "id": 16778350,
    "node_id": "MDQ6VXNlcjE2Nzc4MzUw",
    "avatar_url": "https://avatars3.githubusercontent.com/u/16778350?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/phandych",
    "html_url": "https://github.com/phandych",
    "followers_url": "https://api.github.com/users/phandych/followers",
    "following_url": "https://api.github.com/users/phandych/following{/other_user}",
    "gists_url": "https://api.github.com/users/phandych/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/phandych/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/phandych/subscriptions",
    "organizations_url": "https://api.github.com/users/phandych/orgs",
    "repos_url": "https://api.github.com/users/phandych/repos",
    "events_url": "https://api.github.com/users/phandych/events{/privacy}",
    "received_events_url": "https://api.github.com/users/phandych/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 1,
  "created_at": "2018-06-25T04:44:18Z",
  "updated_at": "2018-06-25T12:22:58Z",
  "closed_at": "2018-06-25T12:13:17Z",
  "author_association": "NONE",
  "body": "I has been create nested attribute with nested form with React and Backend with Rails json. i has test with rails and its work fine. on Create action its work fine, but the problem its on update / edit product.\r\n\r\ni found errors on frontend not Rails. i used React `\"version\": \"0.1.0\",`\r\n\r\nProblem with this data params, json index right but if i'm update the product. they getting double of nested attribute because can find ID for existing nested item :\r\n\r\n```\r\nfor (let i = 0; i < product_specifications.length; i++) {\r\n\t\tlet specification = product_specifications[i];\r\n\t\tif (specification._destroy) {\r\n\t\t\tdata.append(`product[product_specifications_attributes][${i}][id]`, specification.id);\r\n\t       \tdata.append(`product[product_specifications_attributes][${i}][_destroy]`, '1');\r\n\t\t} else if (specification.id) {\r\n\t\t\tdata.append(`product[product_specifications_attributes][${i}][title]`, specification.title)\r\n\t\t} else {\r\n\t\t\tdata.append(`product[product_specifications_attributes][${i}][title]`, specification.title)\r\n\t\t}\r\n\t\t\r\n\t}\r\n```\r\n\r\n\r\n\r\nbefore action:\r\n<img width=\"1280\" alt=\"screen shot 2018-06-25 at 11 34 34\" src=\"https://user-images.githubusercontent.com/16778350/41830611-3f62f648-786c-11e8-9a47-625709a91eb0.png\">\r\n\r\nafter action:\r\n<img width=\"1280\" alt=\"screen shot 2018-06-25 at 11 38 42\" src=\"https://user-images.githubusercontent.com/16778350/41830651-77b4ca44-786c-11e8-9007-5fa0e5351a30.png\">\r\n\r\n\r\nsecond. if i'm use this code. its work fine with action. and attributes/params to update not getting double. but the problem, if i'm update the product with empty value of nested attriubtes, they render with json error index not index to right input field, but start with [0] index.\r\n\r\n\r\n```\r\nfor (let i = 0; i < product_specifications.length; i++) {\r\n\t\tlet specification = product_specifications[i];\r\n\t\tif (specification._destroy) {\r\n\t\t\tdata.append(`product[product_specifications_attributes][${i}][id]`, specification.id);\r\n\t       \tdata.append(`product[product_specifications_attributes][${i}][_destroy]`, '1');\r\n\t\t} else if (specification.id) {\r\n\t\t\tdata.append(`product[product_specifications_attributes][${i}][id]`, specification.id);\r\n\t\t\tdata.append(`product[product_specifications_attributes][${i}][title]`, specification.title)\r\n\t\t} else {\r\n\t\t\tdata.append(`product[product_specifications_attributes][${i}][title]`, specification.title)\r\n\t\t}\r\n\t\t\r\n\t}\r\n```\r\n\r\n\r\n<img width=\"1280\" alt=\"screen shot 2018-06-25 at 11 42 53\" src=\"https://user-images.githubusercontent.com/16778350/41830744-ef9ba0aa-786c-11e8-9181-bad5a20b140b.png\">\r\n\r\n If u change the value of each parent field (without json action only frontend action), the getting right error of index.\r\n<img width=\"1280\" alt=\"screen shot 2018-06-25 at 11 48 56\" src=\"https://user-images.githubusercontent.com/16778350/41830892-d98f747a-786d-11e8-9d78-0320afbbdf63.png\">\r\n\r\n\r\n\r\n\r\nyou must change parent field value first to get right index errors. anybody can help me with this issue?what the problem?\r\ni'm use React redux to handle form.\r\n\r\n\r\n\r\n\r\n",
  "closed_by": {
    "login": "nhunzaker",
    "id": 590904,
    "node_id": "MDQ6VXNlcjU5MDkwNA==",
    "avatar_url": "https://avatars3.githubusercontent.com/u/590904?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/nhunzaker",
    "html_url": "https://github.com/nhunzaker",
    "followers_url": "https://api.github.com/users/nhunzaker/followers",
    "following_url": "https://api.github.com/users/nhunzaker/following{/other_user}",
    "gists_url": "https://api.github.com/users/nhunzaker/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/nhunzaker/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/nhunzaker/subscriptions",
    "organizations_url": "https://api.github.com/users/nhunzaker/orgs",
    "repos_url": "https://api.github.com/users/nhunzaker/repos",
    "events_url": "https://api.github.com/users/nhunzaker/events{/privacy}",
    "received_events_url": "https://api.github.com/users/nhunzaker/received_events",
    "type": "User",
    "site_admin": false
  }
}

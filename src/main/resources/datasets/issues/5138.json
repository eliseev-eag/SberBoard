{
  "url": "https://api.github.com/repos/facebook/react/issues/5138",
  "repository_url": "https://api.github.com/repos/facebook/react",
  "labels_url": "https://api.github.com/repos/facebook/react/issues/5138/labels{/name}",
  "comments_url": "https://api.github.com/repos/facebook/react/issues/5138/comments",
  "events_url": "https://api.github.com/repos/facebook/react/issues/5138/events",
  "html_url": "https://github.com/facebook/react/issues/5138",
  "id": 110986133,
  "node_id": "MDU6SXNzdWUxMTA5ODYxMzM=",
  "number": 5138,
  "title": "`inlineElements` optimization breaks on older browsers; discussion about Symbols and React.elementFromObject() API",
  "user": {
    "login": "STRML",
    "id": 1197375,
    "node_id": "MDQ6VXNlcjExOTczNzU=",
    "avatar_url": "https://avatars2.githubusercontent.com/u/1197375?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/STRML",
    "html_url": "https://github.com/STRML",
    "followers_url": "https://api.github.com/users/STRML/followers",
    "following_url": "https://api.github.com/users/STRML/following{/other_user}",
    "gists_url": "https://api.github.com/users/STRML/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/STRML/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/STRML/subscriptions",
    "organizations_url": "https://api.github.com/users/STRML/orgs",
    "repos_url": "https://api.github.com/users/STRML/repos",
    "events_url": "https://api.github.com/users/STRML/events{/privacy}",
    "received_events_url": "https://api.github.com/users/STRML/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 139653724,
      "node_id": "MDU6TGFiZWwxMzk2NTM3MjQ=",
      "url": "https://api.github.com/repos/facebook/react/labels/Component:%20Core%20Utilities",
      "name": "Component: Core Utilities",
      "color": "c5def5",
      "default": false
    },
    {
      "id": 121709921,
      "node_id": "MDU6TGFiZWwxMjE3MDk5MjE=",
      "url": "https://api.github.com/repos/facebook/react/labels/Type:%20Feature%20Request",
      "name": "Type: Feature Request",
      "color": "c7def8",
      "default": false
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 30,
  "created_at": "2015-10-12T14:34:24Z",
  "updated_at": "2018-01-02T21:47:59Z",
  "closed_at": "2018-01-02T14:04:31Z",
  "author_association": "CONTRIBUTOR",
  "body": "See this https://github.com/babel/babel/issues/2517 and the associated discussion around the PR https://github.com/babel/babel/pull/2518, which I don't expect to be merged due to loader issues.\n\nTo recap: \n\nThe `inlineElements` optimization requires brittle knowledge of internal React values, namely, `$$typeof`. This breaks on older browsers unless the developer globally polyfills `Symbol`, because `Symbol` will be polyfilled automatically by Babel in the user's code, but will not be polyfilled in the React library. This causes `ReactElement.isValidElement` to fail as `Symbol.for('react.element') !== 0xeac7`.\n\nWorse, this bug only occurs in older browsers that don't implement Symbol, meaning that many devs won't catch it right away as it will work fine in FF, Chrome, and (latest) Safari.\n\nThis is a hard issue to fix without globally polyfilling Symbol or giving up on the use of `Symbol` for `$$typeof`. Babel could automatically this as part of enabling the optimisation, but @loganfsmyth had a better idea - how about a `React.elementFromObject()` API?\n\nThis function would be nothing more than:\n\n``` js\nReact.elementFromObject = function(obj) {\n  invariant(obj && typeof obj === 'object', \"Supply an object to React.elementFromObject.\");\n  obj.$$typeof = REACT_ELEMENT_TYPE;\n  return obj;\n}\n```\n\nThis ensures that the `REACT_ELEMENT_TYPE` we are using is equal to the one used in `ReactElement.isValidElement`. It shouldn't be necessary to do any validation in `elementFromObject` because it will be caught by `isValidElement` later on.\n\nThoughts?\n",
  "closed_by": {
    "login": "gaearon",
    "id": 810438,
    "node_id": "MDQ6VXNlcjgxMDQzOA==",
    "avatar_url": "https://avatars0.githubusercontent.com/u/810438?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/gaearon",
    "html_url": "https://github.com/gaearon",
    "followers_url": "https://api.github.com/users/gaearon/followers",
    "following_url": "https://api.github.com/users/gaearon/following{/other_user}",
    "gists_url": "https://api.github.com/users/gaearon/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/gaearon/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/gaearon/subscriptions",
    "organizations_url": "https://api.github.com/users/gaearon/orgs",
    "repos_url": "https://api.github.com/users/gaearon/repos",
    "events_url": "https://api.github.com/users/gaearon/events{/privacy}",
    "received_events_url": "https://api.github.com/users/gaearon/received_events",
    "type": "User",
    "site_admin": false
  }
}

{
  "url": "https://api.github.com/repos/facebook/react/issues/14635",
  "repository_url": "https://api.github.com/repos/facebook/react",
  "labels_url": "https://api.github.com/repos/facebook/react/issues/14635/labels{/name}",
  "comments_url": "https://api.github.com/repos/facebook/react/issues/14635/comments",
  "events_url": "https://api.github.com/repos/facebook/react/issues/14635/events",
  "html_url": "https://github.com/facebook/react/issues/14635",
  "id": 400948235,
  "node_id": "MDU6SXNzdWU0MDA5NDgyMzU=",
  "number": 14635,
  "title": "UMD build doesn't work via import in the browser (TypeError: Cannot set property 'React' of undefined)",
  "user": {
    "login": "vp2177",
    "id": 451903,
    "node_id": "MDQ6VXNlcjQ1MTkwMw==",
    "avatar_url": "https://avatars3.githubusercontent.com/u/451903?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/vp2177",
    "html_url": "https://github.com/vp2177",
    "followers_url": "https://api.github.com/users/vp2177/followers",
    "following_url": "https://api.github.com/users/vp2177/following{/other_user}",
    "gists_url": "https://api.github.com/users/vp2177/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/vp2177/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/vp2177/subscriptions",
    "organizations_url": "https://api.github.com/users/vp2177/orgs",
    "repos_url": "https://api.github.com/users/vp2177/repos",
    "events_url": "https://api.github.com/users/vp2177/events{/privacy}",
    "received_events_url": "https://api.github.com/users/vp2177/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 71502270,
      "node_id": "MDU6TGFiZWw3MTUwMjI3MA==",
      "url": "https://api.github.com/repos/facebook/react/labels/Component:%20Build%20Infrastructure",
      "name": "Component: Build Infrastructure",
      "color": "f9d0c4",
      "default": false
    }
  ],
  "state": "open",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 4,
  "created_at": "2019-01-19T01:52:04Z",
  "updated_at": "2019-03-25T13:33:19Z",
  "closed_at": null,
  "author_association": "NONE",
  "body": "When `import`ing the UMD build (both production and development) in the browser – that is, from a `<script type=\"module\">` – an error is thrown: `TypeError: Cannot set property 'React' of undefined`.\r\n\r\n\r\nThe relevant code:\r\n\r\n```js\r\n12: (function (global, factory) {\r\n13:\ttypeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() :\r\n14:\ttypeof define === 'function' && define.amd ? define(factory) :\r\n15:\t(global.React = factory());\r\n16: }(this, (function () { 'use strict';\r\n```\r\n\r\nThrows on line 15 as `global` ≣ `this` is `undefined` in a module context.  \r\nIs this as simple to fix as passing `this || self` on line 16, or is there a catch?\r\n\r\n\r\n**Do you want to request a *feature* or report a *bug*?** \r\n*bug*\r\n\r\n**What is the current behavior?**\r\n`TypeError: Cannot set property 'React' of undefined`\r\n\r\n**If the current behavior is a bug, please provide the steps to reproduce and if possible a minimal demo of the problem.**\r\n<https://jsfiddle.net/dja3wfc7/> (**_Updated_**)\r\n\r\n**What is the expected behavior?**\r\nI would expect the `import` to work, as the same file works if included via `<script src=...>`.\r\n\r\n**Which versions of React, and which browser / OS are affected by this issue? Did this work in previous versions of React?**\r\nReact 16.7.0 (latest stable) – I have found another UMD related bug, #3037, which pertains to React **0.12.2**. I have tried that version and indeed it works, it can be `import`ed.\r\nChrome 71, Safari 12 tested (probably all browsers)\r\n",
  "closed_by": null
}

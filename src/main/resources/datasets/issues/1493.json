{
  "url": "https://api.github.com/repos/facebook/react/issues/1493",
  "repository_url": "https://api.github.com/repos/facebook/react",
  "labels_url": "https://api.github.com/repos/facebook/react/issues/1493/labels{/name}",
  "comments_url": "https://api.github.com/repos/facebook/react/issues/1493/comments",
  "events_url": "https://api.github.com/repos/facebook/react/issues/1493/events",
  "html_url": "https://github.com/facebook/react/issues/1493",
  "id": 33052938,
  "node_id": "MDU6SXNzdWUzMzA1MjkzOA==",
  "number": 1493,
  "title": "When updating from many-item to single-item array, re-render is forced although item key hasn't changed",
  "user": {
    "login": "gaearon",
    "id": 810438,
    "node_id": "MDQ6VXNlcjgxMDQzOA==",
    "avatar_url": "https://avatars0.githubusercontent.com/u/810438?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/gaearon",
    "html_url": "https://github.com/gaearon",
    "followers_url": "https://api.github.com/users/gaearon/followers",
    "following_url": "https://api.github.com/users/gaearon/following{/other_user}",
    "gists_url": "https://api.github.com/users/gaearon/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/gaearon/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/gaearon/subscriptions",
    "organizations_url": "https://api.github.com/users/gaearon/orgs",
    "repos_url": "https://api.github.com/users/gaearon/repos",
    "events_url": "https://api.github.com/users/gaearon/events{/privacy}",
    "received_events_url": "https://api.github.com/users/gaearon/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 15,
  "created_at": "2014-05-08T04:15:02Z",
  "updated_at": "2014-10-19T19:24:13Z",
  "closed_at": "2014-05-23T09:16:26Z",
  "author_association": "MEMBER",
  "body": "Consider this:\n\n``` javascript\nrender: function () {\n  return <div>{arr.map(this.renderItem)}</div>;\n}\n```\n\nUsually, `key` is respected in this case and elements don't get unmounted and remounted unnecessarily if their `key`s match between subsequent `render` calls.\n\nHowever, if all elements but one are removed, React 0.10.0 for some reason doesn't realize it's the same component (the `key` hasn't changed) and forces its DOM node to update.\n\nI tried setting a breakpoint inside `shouldUpdateReactComponent` and `_updateChildren` to debug the issue and it looks like `prevComponentInstance` is `null` because its name in `nextChildren` and `prevChildren` is slightly different (in one case it includes leading `0:`, in the other it doesn't).\n\nAnyway, the workaround for me was, curiously, **not** returning an array when there is just one item, and rendering it as is. In this case, React was able to understand it's the same component, and didn't force an unnecessary re-render.\n\nI'm sorry for not providing a workable fiddle or somethingâ€”jsFiddle hosts an old version of React, and it's 8am where I live so I should go to sleep. This should be fairly simple to reproduce, unless it's already fixed.\n",
  "closed_by": {
    "login": "sophiebits",
    "id": 6820,
    "node_id": "MDQ6VXNlcjY4MjA=",
    "avatar_url": "https://avatars2.githubusercontent.com/u/6820?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/sophiebits",
    "html_url": "https://github.com/sophiebits",
    "followers_url": "https://api.github.com/users/sophiebits/followers",
    "following_url": "https://api.github.com/users/sophiebits/following{/other_user}",
    "gists_url": "https://api.github.com/users/sophiebits/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/sophiebits/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/sophiebits/subscriptions",
    "organizations_url": "https://api.github.com/users/sophiebits/orgs",
    "repos_url": "https://api.github.com/users/sophiebits/repos",
    "events_url": "https://api.github.com/users/sophiebits/events{/privacy}",
    "received_events_url": "https://api.github.com/users/sophiebits/received_events",
    "type": "User",
    "site_admin": false
  }
}

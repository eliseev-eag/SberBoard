{
  "url": "https://api.github.com/repos/facebook/react/issues/10294",
  "repository_url": "https://api.github.com/repos/facebook/react",
  "labels_url": "https://api.github.com/repos/facebook/react/issues/10294/labels{/name}",
  "comments_url": "https://api.github.com/repos/facebook/react/issues/10294/comments",
  "events_url": "https://api.github.com/repos/facebook/react/issues/10294/events",
  "html_url": "https://github.com/facebook/react/issues/10294",
  "id": 245838506,
  "node_id": "MDU6SXNzdWUyNDU4Mzg1MDY=",
  "number": 10294,
  "title": "React 16 RC",
  "user": {
    "login": "bvaughn",
    "id": 29597,
    "node_id": "MDQ6VXNlcjI5NTk3",
    "avatar_url": "https://avatars0.githubusercontent.com/u/29597?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/bvaughn",
    "html_url": "https://github.com/bvaughn",
    "followers_url": "https://api.github.com/users/bvaughn/followers",
    "following_url": "https://api.github.com/users/bvaughn/following{/other_user}",
    "gists_url": "https://api.github.com/users/bvaughn/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/bvaughn/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/bvaughn/subscriptions",
    "organizations_url": "https://api.github.com/users/bvaughn/orgs",
    "repos_url": "https://api.github.com/users/bvaughn/repos",
    "events_url": "https://api.github.com/users/bvaughn/events{/privacy}",
    "received_events_url": "https://api.github.com/users/bvaughn/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": true,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 254,
  "created_at": "2017-07-26T20:05:32Z",
  "updated_at": "2017-11-03T10:31:08Z",
  "closed_at": "2017-09-26T16:49:46Z",
  "author_association": "CONTRIBUTOR",
  "body": "The third React 16 RC is now available for public testing. üéâ\r\n\r\n# Installation Instructions\r\n\r\nThe RC has been published to NPM with the tag \"next\". Regular NPM installs will continue to use the 15.6 release. To install the RC use:\r\n\r\n```\r\nyarn add react@next react-dom@next\r\n```\r\n\r\nOr:\r\n\r\n```\r\nnpm install --save react@next react-dom@next\r\n```\r\n\r\n# What Does React 16 Mean for You?\r\n\r\nReact 16 is the first release that ships with a rewrite of the React core (previously codenamed ‚ÄúFiber‚Äù). This rewrite had a few goals:\r\n\r\n* Remove old internal abstractions that didn‚Äôt age well and hindered internal changes.\r\n* Let us ship some of the most requested features like [returning arrays from render](https://github.com/facebook/react/issues/2127), [recovering from component errors](https://github.com/facebook/react/issues/2461), and readable component stack traces for every error.\r\n* Enable us to start experimenting with asynchronous rendering of components for better perceived performance.\r\n\r\nThis initial React 16.0 release is mostly focused on compatibility with existing apps. It does not enable asynchronous rendering yet. We will introduce an opt-in to the async mode later during React 16.x. We don‚Äôt expect React 16.0 to make your apps significantly faster or slower, but we‚Äôd love to know if you see improvements or regressions.\r\n\r\n# JavaScript Environment Requirements\r\n\r\nReact 16 depends on the collection types [Map](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Map) and [Set](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Set). If you support older browsers and devices which may not yet provide these natively (eg <IE11), consider including a global polyfill in your bundled application, such as [core-js](https://github.com/zloirock/core-js) or [babel-polyfill](https://babeljs.io/docs/usage/polyfill/).\r\n\r\nA polyfilled environment for React 16 using core-js to support older browsers might look like:\r\n\r\n```js\r\nimport 'core-js/es6/map';\r\nimport 'core-js/es6/set';\r\n\r\nimport React from 'react';\r\nimport ReactDOM from 'react-dom';\r\n\r\nReactDOM.render(\r\n  <h1>Hello, world!</h1>,\r\n  document.getElementById('root')\r\n);\r\n```\r\n\r\nReact also depends on `requestAnimationFrame` (even in test environments). A simple shim for testing environments would be:\r\n\r\n```\r\nglobal.requestAnimationFrame = function(callback) {\r\n  setTimeout(callback, 0);\r\n};\r\n```\r\n\r\n# Points of Interest\r\n\r\n* This is a complete rewrite of React but we expect it to work with your existing code. If you fixed all deprecation warnings introduced in 15.x, the 16 beta should work for you.\r\n* Third party libraries that relied on deprecated or unsupported APIs may need updates to work correctly with this new release. Now is a good time to file issues against libraries that have problems. (And tell us if we broke something!)\r\n* We are particularly interested in hearing about performance differences you notice between 15.x and 16.x. We don't expect any massive changes but would love to know about improvements or regressions. Please report them here!\r\n* The server renderer has been completely rewritten, and now offers a streaming mode ([`ReactDOMServer.renderToNodeStream()`](https://github.com/facebook/react/blob/master/docs/docs/reference-react-dom-node-stream.md#rendertonodestream) and [`ReactDOMServer.renderToStaticNodeStream()`](https://github.com/facebook/react/blob/master/docs/docs/reference-react-dom-node-stream.md#rendertostaticnodestream)). Server rendering does not use markup validation anymore, and instead tries its best to attach to existing DOM, warning about inconsistencies. And there is no `data-reactid` anymore! This server renderer code is still very new, so it is likely to have issues. Please report them.\r\n* Hydrating a server rendered container now has an explicit API. Use `ReactDOM.hydrate` instead of `ReactDOM.render` if you're reviving server rendered HTML. Keep using `ReactDOM.render` if you're just doing client-side rendering.\r\n* React Native follows a different release cycle and will update to the beta in a future release. (It's already using an alpha release but not yet using Fiber.)\r\n\r\n# Breaking Changes\r\n\r\n## Error Handling\r\n\r\n* Previously, runtime errors used to put React into a broken state and produce cryptic errors. React 16 fixes this by introducing a special kind of components called ‚Äúerror boundaries‚Äù. Error boundaries can catch runtime errors in a component tree, log them, and display a fallback UI instead.\r\n* If there is an uncaught error in a component, and there is no error boundary up in the tree, the whole component tree will be unmounted. This helps avoid very nasty bugs where the UI has been corrupted due to an error, but it means that you need to add a few error boundaries to your app to handle the errors gracefully.\r\n* React 15 had a very limited undocumented support for error boundaries with a different method name. It used to be called `unstable_handleError`, but has been renamed to `componentDidCatch`.\r\n\r\n[You can learn more about the new error handling behavior here.](https://facebook.github.io/react/blog/2017/07/26/error-handling-in-react-16.html)\r\n\r\n## Scheduling and Lifecycle\r\n\r\n* `ReactDOM.render()` and `ReactDOM.unstable_renderIntoContainer()` now return `null` if called from inside a lifecycle method.\r\n  * To work around this, you can either use [the new portal API](https://github.com/facebook/react/issues/10309#issuecomment-318433235) or [refs](https://github.com/facebook/react/issues/10309#issuecomment-318434635).\r\n* `setState`:\r\n    * Calling `setState` with null no longer triggers an update. This allows you to decide in an updater function if you want to re-render.\r\n    * Calling `setState` directly in render always causes an update. This was not previously the case. Regardless, you should not be calling setState from render.\r\n    * `setState` callback (second argument) now fires immediately after `componentDidMount` / `componentDidUpdate` instead of after all components have rendered.\r\n* When replacing `<A />` with `<B />`,  `B.componentWillMount` now always happens before  `A.componentWillUnmount`. Previously, `A.componentWillUnmount` could fire first in some cases.\r\n* Previously, changing the ref to a component would always detach the ref before that component's render is called. Now, we change the ref later, when applying the changes to the DOM.\r\n* It is not safe to re-render into a container that was modified by something other than React. This worked previously in some cases but was never supported. We now emit a warning in this case. Instead you should clean up your component trees using `ReactDOM.unmountComponentAtNode`. [See this example.](https://github.com/facebook/react/issues/10294#issuecomment-318820987)\r\n* `componentDidUpdate` lifecycle no longer receives `prevContext` param. (See #8631)\r\n* Shallow renderer no longer calls `componentDidUpdate()` because DOM refs are not available. This also makes it consistent with `componentDidMount()` (which does not get called in previous versions either).\r\n* Shallow renderer does not implement `unstable_batchedUpdates()` anymore.\r\n\r\n## Packaging\r\n\r\n* There is no `react/lib/*` and `react-dom/lib/*` anymore. Even in CommonJS environments, React and ReactDOM are precompiled to single files (‚Äúflat bundles‚Äù). If you previously relied on undocumented React internals, and they don‚Äôt work anymore, let us know about your specific case in this issue, and we‚Äôll try to figure out a migration strategy for you.\r\n* There is no `react-with-addons.js` build anymore. All compatible addons are published separately on npm, and have single-file browser versions if you need them.\r\n* The deprecations introduced in 15.x have been removed from the core package. `React.createClass` is now available as `create-react-class`, `React.PropTypes` as `prop-types`, `React.DOM` as `react-dom-factories`, `react-addons-test-utils` as `react-dom/test-utils`, and shallow renderer as `react-test-renderer/shallow`. See [15.5.0](https://facebook.github.io/react/blog/2017/04/07/react-v15.5.0.html) and [15.6.0](https://facebook.github.io/react/blog/2017/06/13/react-v15.6.0.html) blog posts for instructions on migrating code and automated codemods.\r\n* The names and paths to the single-file browser builds have changed to emphasize the difference between development and production builds. For example:\r\n    * `react/dist/react.js` ‚Üí `react/umd/react.development.js`\r\n    * `react/dist/react.min.js` ‚Üí `react/umd/react.production.min.js`\r\n    * `react-dom/dist/react-dom.js` ‚Üí `react-dom/umd/react-dom.development.js`\r\n    * `react-dom/dist/react-dom.min`.js ‚Üí `react-dom/umd/react-dom.production.min.js`\r\n\r\n# Known Issues\r\n\r\n* <s>The server renderer crashes in production with inline styles. (https://github.com/facebook/react/issues/10299, fixed by https://github.com/facebook/react/pull/10300)</s>\r\n  * Fixed in `16.0.0-beta.2`\r\n* <s>The server renderer doesn't yet support returning arrays and strings from components.</s>\r\n  * Fixed in `16.0.0-beta.3`\r\n* <s>The server renderer still renders `data-reactid` somewhat unnecessarily. (https://github.com/facebook/react/issues/10306)</s>\r\n  * Fixed in `16.0.0-beta.3`\r\n* <s>Shallow renderer doesn‚Äôt pass `context` to `componentWillReceiveProps` (to be fixed by https://github.com/facebook/react/pull/10342)</s>\r\n  * Fixed in `16.0.0-beta.3`\r\n* <s>There is an issue with `'use strict'` in older browsers (https://github.com/facebook/react/issues/10294#issuecomment-319490960)</s>\r\n  * Fixed in `16.0.0-beta.3`\r\n* <s>In some cases `Error: null` is reported instead of the real error. (https://github.com/facebook/react/issues/10321)</s>\r\n  * Fixed in `16.0.0-beta.3`\r\n* <s>There is a report that Google crawler can‚Äôt render the page using 16 ([link](https://www.reddit.com/r/javascript/comments/6pqrz5/react_16_beta/dkrgvzj/?utm_content=permalink&utm_medium=front&utm_source=reddit&utm_name=javascript)).</s>\r\n  * Fixed in `16.0.0-beta.3`\r\n* Some popular third party libraries won‚Äôt work yet (e.g. Enzyme).\r\n* (Please report more issues in this thread.)\r\n\r\n# Updates\r\n\r\n* Released `16.0.0-beta.1` on July 24, 2017\r\n* Released `16.0.0-beta.2` on July 27, 2017\r\n  * Fix a crash in server rendering.\r\n* Released `16.0.0-beta.3` on August 3, 2017\r\n  * Fix strict-mode function scope problem (#10361)\r\n  * Better error log messaging and cross-origin handling (#10353, #10373)\r\n  * Shallow renderer improvements (#10372, #10342)\r\n  * Edge-case context bugfix (#10334)\r\n  * Single point of entry for server rendering (#10362)\r\n  * etc.\r\n* Released `16.0.0-beta.4` on August 8, 2017\r\n  * Warn about unresolved function as a child. #10376\r\n  * Remove data-reactid and data-react-checksum from whitelist. #10402\r\n  * New test renderer API features (disabled via feature flag, for now). #10377\r\n  * And some other minor updates to slightly reduce bundle size.\r\n* Release `16.0.0-beta.5` on 2017-08-08\r\n  * Fix bugs related to unmounting error boundaries #10403\r\n  * Enable new fiber ReactTestRenderer API methods; (previously disabled behind a feature flag) #10410\r\n\r\n* Released `16.0.0-rc.1` on September 6, 2017\r\n  * Fix error: `undefined is not a function (evaluating 'owner.getName()')` (@fxfactorial in https://github.com/facebook/react/pull/10448 and @bvaughn in https://github.com/facebook/react/pull/10520)\r\n  * Improve error message when ReactDOM loads without React (@aweary in https://github.com/facebook/react/pull/10449)\r\n  * Warn when nesting 15 subtree inside 16 (@sophiebits in https://github.com/facebook/react/pull/10434)\r\n  * Don't warn about casing in SSR for non-HTML NS (@sophiebits in https://github.com/facebook/react/pull/10452)\r\n  * Throw error to warn of mistaken loading of prod + dev React bundles (@flarnie in https://github.com/facebook/react/pull/10446)\r\n  * Reset instance vars before calling commit phase lifecycles (@acdlite in https://github.com/facebook/react/pull/10481)\r\n  * Warn if event listener is not a function (@aweary in https://github.com/facebook/react/pull/10453)\r\n  * Fix bug where 1k+ react roots would cause error (@acdlite in https://github.com/facebook/react/pull/10574)\r\n  * Allow [passing some \"unknown\" attributes through to DOM components](https://facebook.github.io/react/blog/2017/09/08/dom-attributes-in-react-16.html) (@nhunzaker in https://github.com/facebook/react/pull/10385 , https://github.com/facebook/react/pull/10564 , https://github.com/facebook/react/pull/10495 and others)\r\n  * Fix bug where `<select>` elements defaulted to first option, even when it was 'disabled'. (@aweary in https://github.com/facebook/react/pull/10456 and @nhunzaker in https://github.com/facebook/react/pull/10142)\r\n\r\n* Released `16.0.0-rc.2` on September 6, 2017\r\n  * Fix bug where React npm packages would throw an exception on startup in browsers not supporting `const` natively (@sophiebits in https://github.com/facebook/react/pull/10631)\r\n\r\n* Released `16.0.0-rc.3` on September 14, 2017\r\n  * Report bad dead code elimination to React DevTools (@gaearon in https://github.com/facebook/react/pull/10702)\r\n  * Fix false positive warning when hydrating SVG after SSR (@gaearon in https://github.com/facebook/react/pull/10676)\r\n  * Add a warning about non-lowercase custom attributes (@gaearon in https://github.com/facebook/react/pull/10699)\r\n  * Fix a memory leak (@gaearon in https://github.com/facebook/react/pull/10680)\r\n  * Remove deprecated entry point for the shallow renderer (@gaearon in https://github.com/facebook/react/pull/10682)\r\n  * Remove undocumented `TestUtils` methods (@gaearon in https://github.com/facebook/react/pull/10681)\r\n  * Add `ReactDOM.createPortal()` as an ‚Äúofficial‚Äù API without the unstable prefix (@gaearon in https://github.com/facebook/react/pull/10675)\r\n  * Don‚Äôt repeat `Object.assign` polyfill twice (@gaearon in https://github.com/facebook/react/pull/10671)",
  "closed_by": {
    "login": "gaearon",
    "id": 810438,
    "node_id": "MDQ6VXNlcjgxMDQzOA==",
    "avatar_url": "https://avatars0.githubusercontent.com/u/810438?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/gaearon",
    "html_url": "https://github.com/gaearon",
    "followers_url": "https://api.github.com/users/gaearon/followers",
    "following_url": "https://api.github.com/users/gaearon/following{/other_user}",
    "gists_url": "https://api.github.com/users/gaearon/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/gaearon/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/gaearon/subscriptions",
    "organizations_url": "https://api.github.com/users/gaearon/orgs",
    "repos_url": "https://api.github.com/users/gaearon/repos",
    "events_url": "https://api.github.com/users/gaearon/events{/privacy}",
    "received_events_url": "https://api.github.com/users/gaearon/received_events",
    "type": "User",
    "site_admin": false
  }
}

{
  "url": "https://api.github.com/repos/facebook/react/issues/13297",
  "repository_url": "https://api.github.com/repos/facebook/react",
  "labels_url": "https://api.github.com/repos/facebook/react/issues/13297/labels{/name}",
  "comments_url": "https://api.github.com/repos/facebook/react/issues/13297/comments",
  "events_url": "https://api.github.com/repos/facebook/react/issues/13297/events",
  "html_url": "https://github.com/facebook/react/issues/13297",
  "id": 346479984,
  "node_id": "MDU6SXNzdWUzNDY0Nzk5ODQ=",
  "number": 13297,
  "title": "Why not set up a static variable in React.Component to manage state as a global variable, but to set context?",
  "user": {
    "login": "MEDIOCAL",
    "id": 22210932,
    "node_id": "MDQ6VXNlcjIyMjEwOTMy",
    "avatar_url": "https://avatars1.githubusercontent.com/u/22210932?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/MEDIOCAL",
    "html_url": "https://github.com/MEDIOCAL",
    "followers_url": "https://api.github.com/users/MEDIOCAL/followers",
    "following_url": "https://api.github.com/users/MEDIOCAL/following{/other_user}",
    "gists_url": "https://api.github.com/users/MEDIOCAL/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/MEDIOCAL/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/MEDIOCAL/subscriptions",
    "organizations_url": "https://api.github.com/users/MEDIOCAL/orgs",
    "repos_url": "https://api.github.com/users/MEDIOCAL/repos",
    "events_url": "https://api.github.com/users/MEDIOCAL/events{/privacy}",
    "received_events_url": "https://api.github.com/users/MEDIOCAL/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 2,
  "created_at": "2018-08-01T07:28:01Z",
  "updated_at": "2018-08-02T13:25:18Z",
  "closed_at": "2018-08-02T13:25:18Z",
  "author_association": "NONE",
  "body": "```\r\nimport React from \"react\"\r\n\r\nexport class AssignComponent extends React.Component {\r\n    syncSetState = (state) => {\r\n        const me = this\r\n        return new Promise(function(reslove) {\r\n            me.setState(state, () => {\r\n                reslove(me.state)\r\n            })\r\n        })\r\n    }\r\n    \r\n    dispatch = async (action) => {\r\n        for(let re of AssignComponent.reducer) {\r\n            await re(action)\r\n        }\r\n    }\r\n    createStore = async (...rest) => {\r\n        let l = 2\r\n        while(l > 0 && rest.length > 0) {\r\n            let arg = rest.shift()\r\n            \r\n            if(typeof arg === 'function') {\r\n                AssignComponent.reducer.push(async (action) => {\r\n                    await arg(action, this.syncSetState)\r\n                })\r\n            } else if(typeof arg === 'object') {\r\n                for(let key in arg) {\r\n                    this[key] =  arg[key](this.dispatch)\r\n                }\r\n            } else {\r\n                throw new Error('1')\r\n            }\r\n\r\n            l--\r\n        }\r\n        return AssignComponent.reducer\r\n    }\r\n}\r\n\r\nAssignComponent.reducer = []\r\n```\r\n\r\n```\r\nimport React from \"react\"\r\nimport { AssignComponent } from '../src'\r\n\r\nconst actions = {\r\n   a: function a(dispatch) {\r\n    return async function(actions) {\r\n        dispatch(actions)\r\n    }\r\n}\r\n}\r\nexport default class TestA extends AssignComponent {\r\n    constructor(props) {\r\n        super(props)\r\n        this.state ={\r\n            name: 'xh',\r\n            age: 17,\r\n            height: 180,\r\n        }\r\n        this.createStore(Assger, actions)\r\n    }\r\n\r\n    change = async () => {\r\n        this.a({type:'C'})\r\n    }\r\n    changeAge = async () => {\r\n        this.a({type:'D'})\r\n    }\r\n    render() {\r\n        return  <div>\r\n                    <div onClick={this.change}>{this.state.name}</div>\r\n                    <div onClick={this.changeAge}>{this.state.age}---{this.state.height}</div>\r\n                </div>\r\n    }\r\n}\r\n\r\n\r\nfunction Assger( action, assign) {\r\n    switch(action.type) {\r\n        case 'A': \r\n            return  assign({\r\n                name: 'cxh'\r\n            })\r\n        case 'B':\r\n            return  assign({\r\n                age: 19\r\n            })\r\n    } \r\n}\r\n```\r\n\r\n",
  "closed_by": {
    "login": "gaearon",
    "id": 810438,
    "node_id": "MDQ6VXNlcjgxMDQzOA==",
    "avatar_url": "https://avatars0.githubusercontent.com/u/810438?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/gaearon",
    "html_url": "https://github.com/gaearon",
    "followers_url": "https://api.github.com/users/gaearon/followers",
    "following_url": "https://api.github.com/users/gaearon/following{/other_user}",
    "gists_url": "https://api.github.com/users/gaearon/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/gaearon/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/gaearon/subscriptions",
    "organizations_url": "https://api.github.com/users/gaearon/orgs",
    "repos_url": "https://api.github.com/users/gaearon/repos",
    "events_url": "https://api.github.com/users/gaearon/events{/privacy}",
    "received_events_url": "https://api.github.com/users/gaearon/received_events",
    "type": "User",
    "site_admin": false
  }
}

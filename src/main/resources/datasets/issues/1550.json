{
  "url": "https://api.github.com/repos/facebook/react/issues/1550",
  "repository_url": "https://api.github.com/repos/facebook/react",
  "labels_url": "https://api.github.com/repos/facebook/react/issues/1550/labels{/name}",
  "comments_url": "https://api.github.com/repos/facebook/react/issues/1550/comments",
  "events_url": "https://api.github.com/repos/facebook/react/issues/1550/events",
  "html_url": "https://github.com/facebook/react/pull/1550",
  "id": 33740719,
  "node_id": "MDExOlB1bGxSZXF1ZXN0MTYwMjQzNDc=",
  "number": 1550,
  "title": "Proof-of-concept, remove data-reactid and nodeCache, traverse inserted markup immediately",
  "user": {
    "login": "syranide",
    "id": 1714255,
    "node_id": "MDQ6VXNlcjE3MTQyNTU=",
    "avatar_url": "https://avatars1.githubusercontent.com/u/1714255?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/syranide",
    "html_url": "https://github.com/syranide",
    "followers_url": "https://api.github.com/users/syranide/followers",
    "following_url": "https://api.github.com/users/syranide/following{/other_user}",
    "gists_url": "https://api.github.com/users/syranide/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/syranide/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/syranide/subscriptions",
    "organizations_url": "https://api.github.com/users/syranide/orgs",
    "repos_url": "https://api.github.com/users/syranide/repos",
    "events_url": "https://api.github.com/users/syranide/events{/privacy}",
    "received_events_url": "https://api.github.com/users/syranide/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 4,
  "created_at": "2014-05-17T22:09:45Z",
  "updated_at": "2014-06-12T16:00:04Z",
  "closed_at": "2014-05-21T14:57:58Z",
  "author_association": "CONTRIBUTOR",
  "pull_request": {
    "url": "https://api.github.com/repos/facebook/react/pulls/1550",
    "html_url": "https://github.com/facebook/react/pull/1550",
    "diff_url": "https://github.com/facebook/react/pull/1550.diff",
    "patch_url": "https://github.com/facebook/react/pull/1550.patch"
  },
  "body": "Proof-of-concept implementation complete:\n\nThere are some ugly hacks (for simplicity at this point), I mainly provide this PR as a topic for discussion, **I intend to rewrite it properly and from scratch**, if a consensus is reached.\n- **`data-reactid` has been removed from the DOM**! Immediately after rendering of markup, it now traverses the DOM nodes and ReactComponents in sync.\n- DOM nodes now have `__reactComponent__` property which holds the ReactDOMComponent instance.\n- ReactComponents now have `_rootNode` which holds the DOM node.\n- `_rootNodeID` still exists but could quite easily be replaced with a monotonic ID (I'm not even sure we need that, but might be useful).\n- **`nodeCache` has been completely removed**, no cache to maintain! Additionally, apart from old browsers possibly leaking memory (IE8/IE9 perhaps?), it is no longer _strictly necessary_ to unmount React from a node I believe, but you really should.\n- Listeners are now registered directly on the ReactDOMComponent (we could probably avoid explicitly registering too).\n- All the possibilities! It's even imaginable that we can unboxing/split ReactTextComponent cheaply during traversal! Perhaps it's even more efficient to set the `style`-object directly as opposed to generating and escaping it.\n- I may be reaching to foregone conclusions here, but I believe this also opens up the _possibility_ to have true empty/multi-child components without taking on a significant performance-hit (or rather, brings us closer to).\n- Due to immediately traversing the DOM nodes (in sync with React Components), we can choose to either error immediately if the browsers mucked too much with the DOM, or try to solve when possible (for say tables) although solving correctly may be tricky.\n\nThe biggest issue moving forward is tests (if you agree with my findings). This PR breaks pretty much every single test there is (either by API change/deprecation or because they're no longer relevant), it's very likely that we want to leave shims in-place which should allow us to avoid most of the issues for now though.\n\nThis PR does not support server-rendering (I think), but it is trivial to fix. We can also get rid of `rootIndex`.\n\n---\n\nResults:\nVMIE8: http://i.imgur.com/EPlzmeq.png, http://i.imgur.com/92UdT7K.png\nVMIE9: http://i.imgur.com/Q9ya2RY.png, http://i.imgur.com/cYpbxtf.png\nVMIE10: http://i.imgur.com/Oh0pB1B.png, http://i.imgur.com/FJJtVvB.png\nIE11: http://i.imgur.com/toWaPsS.png\nFF: http://i.imgur.com/tmy9UT1.png\nChrome: http://i.imgur.com/m3EMucK.png\n\nThe IE8 test is especially interesting because of IE8's simplicity, you can see a significant and consistent performance increase in basically every test.\n\n```\n   raw     gz Compared to master @ 46de927a28eb788b4329589658dbd31a014e4edd\n -2617   -849 build/react-test.js\n -5911  -1607 build/react-with-addons.js\n -1010   -415 build/react-with-addons.min.js\n -5911  -1601 build/react.js\n -1009   -412 build/react.min.js\n```\n",
  "closed_by": {
    "login": "syranide",
    "id": 1714255,
    "node_id": "MDQ6VXNlcjE3MTQyNTU=",
    "avatar_url": "https://avatars1.githubusercontent.com/u/1714255?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/syranide",
    "html_url": "https://github.com/syranide",
    "followers_url": "https://api.github.com/users/syranide/followers",
    "following_url": "https://api.github.com/users/syranide/following{/other_user}",
    "gists_url": "https://api.github.com/users/syranide/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/syranide/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/syranide/subscriptions",
    "organizations_url": "https://api.github.com/users/syranide/orgs",
    "repos_url": "https://api.github.com/users/syranide/repos",
    "events_url": "https://api.github.com/users/syranide/events{/privacy}",
    "received_events_url": "https://api.github.com/users/syranide/received_events",
    "type": "User",
    "site_admin": false
  }
}

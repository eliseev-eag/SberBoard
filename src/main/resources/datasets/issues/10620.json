{
  "url": "https://api.github.com/repos/facebook/react/issues/10620",
  "repository_url": "https://api.github.com/repos/facebook/react",
  "labels_url": "https://api.github.com/repos/facebook/react/issues/10620/labels{/name}",
  "comments_url": "https://api.github.com/repos/facebook/react/issues/10620/comments",
  "events_url": "https://api.github.com/repos/facebook/react/issues/10620/events",
  "html_url": "https://github.com/facebook/react/issues/10620",
  "id": 255678251,
  "node_id": "MDU6SXNzdWUyNTU2NzgyNTE=",
  "number": 10620,
  "title": "New Release Checklist",
  "user": {
    "login": "gaearon",
    "id": 810438,
    "node_id": "MDQ6VXNlcjgxMDQzOA==",
    "avatar_url": "https://avatars0.githubusercontent.com/u/810438?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/gaearon",
    "html_url": "https://github.com/gaearon",
    "followers_url": "https://api.github.com/users/gaearon/followers",
    "following_url": "https://api.github.com/users/gaearon/following{/other_user}",
    "gists_url": "https://api.github.com/users/gaearon/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/gaearon/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/gaearon/subscriptions",
    "organizations_url": "https://api.github.com/users/gaearon/orgs",
    "repos_url": "https://api.github.com/users/gaearon/repos",
    "events_url": "https://api.github.com/users/gaearon/events{/privacy}",
    "received_events_url": "https://api.github.com/users/gaearon/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 74359453,
      "node_id": "MDU6TGFiZWw3NDM1OTQ1Mw==",
      "url": "https://api.github.com/repos/facebook/react/labels/Type:%20Release",
      "name": "Type: Release",
      "color": "00D8EA",
      "default": false
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 13,
  "created_at": "2017-09-06T17:11:09Z",
  "updated_at": "2018-01-02T15:17:45Z",
  "closed_at": "2018-01-02T15:17:45Z",
  "author_association": "MEMBER",
  "body": "The current release process is convoluted. I think we agreed that we won’t be maintaining `stable` branches from now on, and will release from master. This means breaking changes land behind a flag. In this issue I am documenting the new master-based release process. It **is** intended to be exhaustive so let me know if something is missing.\r\n\r\nIf we agree on this, I’ll be deleting the [existing documentation](https://github.com/facebook/react/blob/master/scripts/release-manager/Readme.md) and point it to this issue instead. This issue is in checklist format to be copy-pasteable for specific release issues (h/t @flarnie for the tip). Ideally we should automate some parts of this, potentially by fixing RRM to work with this model.\r\n\r\n## So You Want to Cut a Release...\r\n\r\n#### Ensure all commits in master were tested at Facebook.\r\n\r\n* Check that they were a part of the latest internal sync.\r\n* For stable releases, prefer that they’ve been landed for a week or so.\r\n* Only skip this step if you really know what you’re doing!\r\n\r\n#### Verify that you have npm permissions.\r\n\r\n- [ ] You’re in `npm owner ls react`\r\n- [ ] You’re in `npm owner ls react-art`\r\n- [ ] You’re in `npm owner ls react-dom`\r\n- [ ] You’re in `npm owner ls react-test-renderer`\r\n- If not, ping someone on the team!\r\n\r\n#### Ensure your React is fresh.\r\n\r\n- [ ] Ensure you’re on `master`\r\n- [ ] Do a `git pull`\r\n- [ ] Is master green on CI? Check [the most recent commits](https://github.com/facebook/react/commits/master).\r\n- [ ] Check that your local `git log` output matches the commit list.\r\n- [ ] Run `yarn` in the repo root.\r\n\r\n#### Ensure runtime dependencies match what users would get.\r\n\r\n- [ ] For `fbjs`:\r\n  - [ ] Look at the version range of `fbjs` in root `package.json`.\r\n  - [ ] Ensure all `packages/*/package.json` depending on `fbjs` specify the same range.\r\n- [ ] For `object-assign`:\r\n  - [ ] Look at the version range of `object-assign` in root `package.json`.\r\n  - [ ] Ensure all `packages/*/package.json` depending on `object-assign` specify the same range.\r\n- [ ] For `prop-types`:\r\n  - [ ] Look at the version range of `prop-types` in root `package.json`.\r\n  - [ ] Ensure all `packages/*/package.json` depending on `prop-types` specify the same range.\r\n- [ ] Run `yarn upgrade object-assign prop-types fbjs`\r\n- [ ] This might change the lockfile. This **should not** change any `package.json`.\r\n- [ ] Commit the changes, if any.\r\n\r\n#### Do the local sanity checks in the repo root.\r\n\r\n- [ ] Run `yarn test` in the repo root.\r\n- [ ] Run `yarn lint` in the repo root.\r\n- [ ] Run `yarn flow` in the repo root.\r\n\r\n#### _STABLE RELEASE ONLY:_ Update error codes.\r\n\r\n- [ ] Run `yarn build -- --extract-errors` in the repo root.\r\n- [ ] If `scripts/error-codes/codes.json` changes, `git commit -am 'Update error codes'`\r\n- [ ] **Maybe:** If we still have a separate `*-stable` branch for docs when you’re reading this, we need to cherry-pick that commit to that branch. This makes sure the website decoder knows about the updated error codes. But ideally we should just change docs to serve from master.\r\n\r\n#### _STABLE RELEASE ONLY:_ Write the changelog.\r\n\r\n- [ ] Open `CHANGELOG.md` and add release notes in the same format as earlier.\r\n- [ ] Make sure the changes are easy to understand. Friendly one-liners are better than PR titles.\r\n- [ ] Make sure all contributors are credited, just like before.\r\n- [ ] Verify that the markup isn’t messed up by previewing it in the [online editor](https://github.com/facebook/react/edit/master/CHANGELOG.md).\r\n\r\n#### Update the version.\r\n\r\n- [ ] Update `version` in root `package.json`\r\n- [ ] Update export in `src/ReactVersion.js`\r\n- [ ] Update both `version` and React version in `peerDependencies` in all `packages/*/package.json`:\r\n  - [ ] `packages/react/package.json`\r\n  - [ ] `packages/react-art/package.json`\r\n  - [ ] `packages/react-dom/package.json`\r\n  - [ ] `packages/react-noop-renderer/package.json`\r\n  - [ ] `packages/react-test-renderer/package.json`\r\n  - [ ] If you see any other packages, update this list :-)\r\n- [ ] Run `yarn version-check` to verify your changes.\r\n- [ ] `git commit -am \"<version number>\"`\r\n\r\n#### Build it!\r\n\r\n- [ ] Run `yarn build` in the repo root.\r\n\r\n#### Run fast packaging smoke test.\r\n\r\n- [ ] Open `fixtures/packaging/babel-standalone/dev.html` in the browser for a smoke test.\r\n- [ ] It should say “Hello world!”\r\n\r\n#### Run slow packaging smoke test.\r\n\r\n- [ ] Go to `cd fixtures/packaging` and run `node build-all.js`\r\n- [ ] `npm install -g serve`\r\n- [ ] Go to the repo root and run `serve -s .`\r\n- [ ] Open http://localhost:5000/fixtures/packaging/ and verify every iframe shows “Hello World!”\r\n\r\n#### Release!\r\n\r\n- [ ] Run `git push`\r\n- [ ] Run `git push --tags`\r\n- [ ] Go to `build/packages`\r\n  - [ ] For every subfolder:\r\n    - [ ] **For non-stable versions:** Run `npm publish --tag next` in the subfolder.\r\n    - [ ] **For stable versions:** Run `npm publish` in the subfolder.\r\n- [ ] Run `npm info <package> dist-tags` to verify that things were published as you expect.\r\n- [ ] **FIXME:** We should really automate this part because it’s currently not atomic.\r\n\r\n#### _STABLE RELEASE ONLY:_ Create GitHub Release.\r\n\r\n- [ ] Open [New Release](https://github.com/facebook/react/releases/new) page on GitHub.\r\n- [ ] Choose the tag version you just pushed in the dropdown so that it says “Existing tag”.\r\n- [ ] Paste the new release notes from `CHANGELOG.md`.\r\n- [ ] Attach all files in `build/dist/*.js` except `react-art.*` to the release.\r\n- [ ] Press “Publish release”!\r\n\r\n#### _STABLE RELEASE ONLY:_ Update the version reported on the website.\r\n\r\n- [ ] Open `docs/_config.yml`\r\n- [ ] Change `react_version` in it to the newly published version.\r\n- [ ] `git commit -am \"Update the reported React version on the website\"`\r\n- [ ] **Maybe:** If we still have a separate `*-stable` branch for docs when you’re reading this, we need to cherry-pick that commit to that branch. This makes sure the website knows about the updated config. But ideally we should just change docs to serve from master.\r\n\r\n#### _STABLE RELEASE ONLY:_ Update Bower.\r\n\r\n- [ ] Clone the Bower repo outside of main repo: `git clone https://github.com/reactjs/react-bower.git`\r\n- [ ] Make sure it’s on `master` and you did `git pull`\r\n- [ ] Delete all JS files from the Bower repo and copy all `build/dist/*.js` from React repo into it.\r\n- [ ] In the Bower repo, `git commit -am \"<version number>\"`\r\n- [ ] In the Bower repo, `git tag -a v<version number>` (Don’t miss the `v`!)\r\n- [ ] In the Bower repo, `git push` and `git push --tags`\r\n\r\n#### _STABLE RELEASE ONLY:_ Try it out!\r\n\r\n- [ ] `npm i -g create-react-app`\r\n- [ ] `create-react-app myapp`\r\n- [ ] `cd myapp`\r\n- [ ] `npm start`\r\n\r\n#### _STABLE RELEASE ONLY_: Reach out to DOM team.\r\n\r\n- [ ] Reach out to the DOM team (@nhunzaker @jquense @aweary) in case they would like to go through DOM fixtures. (This doesn’t block the release.)",
  "closed_by": {
    "login": "gaearon",
    "id": 810438,
    "node_id": "MDQ6VXNlcjgxMDQzOA==",
    "avatar_url": "https://avatars0.githubusercontent.com/u/810438?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/gaearon",
    "html_url": "https://github.com/gaearon",
    "followers_url": "https://api.github.com/users/gaearon/followers",
    "following_url": "https://api.github.com/users/gaearon/following{/other_user}",
    "gists_url": "https://api.github.com/users/gaearon/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/gaearon/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/gaearon/subscriptions",
    "organizations_url": "https://api.github.com/users/gaearon/orgs",
    "repos_url": "https://api.github.com/users/gaearon/repos",
    "events_url": "https://api.github.com/users/gaearon/events{/privacy}",
    "received_events_url": "https://api.github.com/users/gaearon/received_events",
    "type": "User",
    "site_admin": false
  }
}

{
  "url": "https://api.github.com/repos/facebook/react/issues/12439",
  "repository_url": "https://api.github.com/repos/facebook/react",
  "labels_url": "https://api.github.com/repos/facebook/react/issues/12439/labels{/name}",
  "comments_url": "https://api.github.com/repos/facebook/react/issues/12439/comments",
  "events_url": "https://api.github.com/repos/facebook/react/issues/12439/events",
  "html_url": "https://github.com/facebook/react/issues/12439",
  "id": 307970255,
  "node_id": "MDU6SXNzdWUzMDc5NzAyNTU=",
  "number": 12439,
  "title": "next context api: why rerender children?",
  "user": {
    "login": "artemxgruden",
    "id": 15815627,
    "node_id": "MDQ6VXNlcjE1ODE1NjI3",
    "avatar_url": "https://avatars3.githubusercontent.com/u/15815627?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/artemxgruden",
    "html_url": "https://github.com/artemxgruden",
    "followers_url": "https://api.github.com/users/artemxgruden/followers",
    "following_url": "https://api.github.com/users/artemxgruden/following{/other_user}",
    "gists_url": "https://api.github.com/users/artemxgruden/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/artemxgruden/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/artemxgruden/subscriptions",
    "organizations_url": "https://api.github.com/users/artemxgruden/orgs",
    "repos_url": "https://api.github.com/users/artemxgruden/repos",
    "events_url": "https://api.github.com/users/artemxgruden/events{/privacy}",
    "received_events_url": "https://api.github.com/users/artemxgruden/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 2,
  "created_at": "2018-03-23T10:14:22Z",
  "updated_at": "2018-03-24T14:11:53Z",
  "closed_at": "2018-03-24T14:11:53Z",
  "author_association": "NONE",
  "body": "**npm node modules versions:**\r\n\"react\": \"^16.4.0-alpha.0911da3\",\r\n\"react-dom\": \"^16.4.0-alpha.0911da3\",\r\n\r\n## **Question: Why is the component Z  being rerendered every time we click the button in component B?**\r\n\r\n\r\n**MainContainer.js**\r\n```javascript\r\nconst testContext = createContext( null )\r\nexport { testContext }\r\n\r\nexport default class MainContainer extends Component {\r\n  constructor( props ){\r\n    super( props )\r\n    this.state = { h: 'w' }\r\n  }\r\n  render(){\r\n    console.log( 'render main container' )\r\n    return createElement( testContext.Provider, { value: this.state.h },\r\n      this.props.children ? this.props.children : null\r\n    )\r\n  }\r\n}\r\n\r\n\r\n\r\n\r\n\r\n\r\n```\r\n**ButtonContainer.js**\r\n```javascript\r\nimport { testContext } from './MainContainer.mjs'\r\n\r\nexport default class ButtonContainer extends Component {\r\n  constructor( props ){\r\n    super( props )\r\n  }\r\n  render(){\r\n    console.log( 'render button container' )\r\n    return createElement( testContext.Consumer, {},\r\n      test => {\r\n        console.log( 'test context consumer value changed?', test )\r\n        return createElement( Z, { test } )\r\n      }\r\n    )\r\n  }\r\n\r\n}\r\n\r\nclass Z extends Component {\r\n  constructor( props ){\r\n    super( props )\r\n  }\r\n\r\n  render(){\r\n    console.log( 'render z', this.props.test )\r\n    return createElement( A, { test: this.props.test } )\r\n  }\r\n\r\n}\r\n\r\nclass A extends Component {\r\n  constructor( props ){\r\n    super( props )\r\n    this.state = { h2: 0 }\r\n    this.incr = this.incr.bind( this )\r\n  }\r\n\r\n  render(){\r\n    console.log( 'render a', this.props.test )\r\n    return createElement( B, { incr: this.incr, h2: this.state.h2, test: this.props.test } )\r\n  }\r\n\r\n  incr(){\r\n    console.log( 'increment' )\r\n    this.setState( { h2: this.state.h2 + 1 } )\r\n  }\r\n}\r\n\r\nconst B = props => {\r\n  console.log( 'render b' )\r\n  return createElement( 'button', { onClick: e => { \r\n  console.log( 'click' )\r\n  props.incr()\r\n\r\n} }, 'button ' + JSON.stringify( props.h2 ) + ' ' + JSON.stringify( props.test ) ) }\r\n```\r\n\r\n\r\n\r\n**log:** \r\n```javascript\r\nclick\r\nincrement\r\ntest context consumer value changed? w\r\nrender z w\r\nrender a w\r\nrender b\r\n```\r\n",
  "closed_by": {
    "login": "gaearon",
    "id": 810438,
    "node_id": "MDQ6VXNlcjgxMDQzOA==",
    "avatar_url": "https://avatars0.githubusercontent.com/u/810438?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/gaearon",
    "html_url": "https://github.com/gaearon",
    "followers_url": "https://api.github.com/users/gaearon/followers",
    "following_url": "https://api.github.com/users/gaearon/following{/other_user}",
    "gists_url": "https://api.github.com/users/gaearon/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/gaearon/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/gaearon/subscriptions",
    "organizations_url": "https://api.github.com/users/gaearon/orgs",
    "repos_url": "https://api.github.com/users/gaearon/repos",
    "events_url": "https://api.github.com/users/gaearon/events{/privacy}",
    "received_events_url": "https://api.github.com/users/gaearon/received_events",
    "type": "User",
    "site_admin": false
  }
}

{
  "url": "https://api.github.com/repos/facebook/react/issues/12919",
  "repository_url": "https://api.github.com/repos/facebook/react",
  "labels_url": "https://api.github.com/repos/facebook/react/issues/12919/labels{/name}",
  "comments_url": "https://api.github.com/repos/facebook/react/issues/12919/comments",
  "events_url": "https://api.github.com/repos/facebook/react/issues/12919/events",
  "html_url": "https://github.com/facebook/react/pull/12919",
  "id": 327055292,
  "node_id": "MDExOlB1bGxSZXF1ZXN0MTkwOTUyMTAw",
  "number": 12919,
  "title": "Always use event capturing. Remove media events.",
  "user": {
    "login": "nhunzaker",
    "id": 590904,
    "node_id": "MDQ6VXNlcjU5MDkwNA==",
    "avatar_url": "https://avatars3.githubusercontent.com/u/590904?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/nhunzaker",
    "html_url": "https://github.com/nhunzaker",
    "followers_url": "https://api.github.com/users/nhunzaker/followers",
    "following_url": "https://api.github.com/users/nhunzaker/following{/other_user}",
    "gists_url": "https://api.github.com/users/nhunzaker/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/nhunzaker/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/nhunzaker/subscriptions",
    "organizations_url": "https://api.github.com/users/nhunzaker/orgs",
    "repos_url": "https://api.github.com/users/nhunzaker/repos",
    "events_url": "https://api.github.com/users/nhunzaker/events{/privacy}",
    "received_events_url": "https://api.github.com/users/nhunzaker/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 196858374,
      "node_id": "MDU6TGFiZWwxOTY4NTgzNzQ=",
      "url": "https://api.github.com/repos/facebook/react/labels/CLA%20Signed",
      "name": "CLA Signed",
      "color": "e7e7e7",
      "default": false
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 17,
  "created_at": "2018-05-28T15:05:05Z",
  "updated_at": "2018-08-24T09:52:48Z",
  "closed_at": "2018-08-23T21:19:50Z",
  "author_association": "COLLABORATOR",
  "pull_request": {
    "url": "https://api.github.com/repos/facebook/react/pulls/12919",
    "html_url": "https://github.com/facebook/react/pull/12919",
    "diff_url": "https://github.com/facebook/react/pull/12919.diff",
    "patch_url": "https://github.com/facebook/react/pull/12919.patch"
  },
  "body": "**What**\r\n\r\nI finally had a chance to circle back on what I learned investigating event listener attachment. \r\n\r\nIn short, we distinguished between captured and bubbled events, however I believe this is not necessary as of IE9+. Captured events do not appear to exhibit the same edge cases as bubbled events, allowing us to simplify event code.\r\n\r\n**Why do we want to do this?**\r\n\r\nI think we can probably drastically reduce the code for eagerly attaching listeners for events that do not bubble. So far, all events that do not bubble appear to capture on parent elements. \r\n\r\nLonger term, [I wonder if we can remove the `.bind()` when attaching listeners](https://github.com/facebook/react/blob/master/packages/react-dom/src/events/ReactDOMEventListener.js#L180), and maybe even remove top level types.\r\n\r\n**More info**\r\n\r\nThis commit changes event subscription such that all events are attached with capturing. This prevents the need to eagerly attach media event listeners to video, audio, and source tags, and simplifies the event subscription process.\r\n\r\nI think we can probably extend this to more event types, maybe [most/all eager event attachments](https://github.com/facebook/react/blob/master/packages/react-dom/src/client/ReactDOMFiberComponent.js#L451-L516), but that will require substantial testing. Until that time, this commit lays the foundation for that work by demonstrating that capturing is applicable in cases where bubbling does not occur.\r\n\r\n**Test plan**\r\n\r\n1. Verify fixtures on https://react-capture-all-events.surge.sh/media-events\r\n2. Verify fixtures on https://react-capture-all-events.surge.sh/input-change-events\r\n3. Verify fixtures on https://react-capture-all-events.surge.sh/pointer-events\r\n\r\nI believe these to be the key event types to test, however this change definitely affects all event listeners.\r\n\r\n**I've tested so far in:**\r\n\r\n- Internet Explorer: 9, 11\r\n- Edge 16\r\n- Firefox: 49, 60\r\n- Chrome 47, 66\r\n- Safari 9, 11.1\r\n",
  "closed_by": {
    "login": "nhunzaker",
    "id": 590904,
    "node_id": "MDQ6VXNlcjU5MDkwNA==",
    "avatar_url": "https://avatars3.githubusercontent.com/u/590904?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/nhunzaker",
    "html_url": "https://github.com/nhunzaker",
    "followers_url": "https://api.github.com/users/nhunzaker/followers",
    "following_url": "https://api.github.com/users/nhunzaker/following{/other_user}",
    "gists_url": "https://api.github.com/users/nhunzaker/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/nhunzaker/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/nhunzaker/subscriptions",
    "organizations_url": "https://api.github.com/users/nhunzaker/orgs",
    "repos_url": "https://api.github.com/users/nhunzaker/repos",
    "events_url": "https://api.github.com/users/nhunzaker/events{/privacy}",
    "received_events_url": "https://api.github.com/users/nhunzaker/received_events",
    "type": "User",
    "site_admin": false
  }
}

{
  "url": "https://api.github.com/repos/facebook/react/issues/15583",
  "repository_url": "https://api.github.com/repos/facebook/react",
  "labels_url": "https://api.github.com/repos/facebook/react/issues/15583/labels{/name}",
  "comments_url": "https://api.github.com/repos/facebook/react/issues/15583/comments",
  "events_url": "https://api.github.com/repos/facebook/react/issues/15583/events",
  "html_url": "https://github.com/facebook/react/issues/15583",
  "id": 441670946,
  "node_id": "MDU6SXNzdWU0NDE2NzA5NDY=",
  "number": 15583,
  "title": "Memory leak after removing video elements",
  "user": {
    "login": "raRaRa",
    "id": 4303914,
    "node_id": "MDQ6VXNlcjQzMDM5MTQ=",
    "avatar_url": "https://avatars3.githubusercontent.com/u/4303914?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/raRaRa",
    "html_url": "https://github.com/raRaRa",
    "followers_url": "https://api.github.com/users/raRaRa/followers",
    "following_url": "https://api.github.com/users/raRaRa/following{/other_user}",
    "gists_url": "https://api.github.com/users/raRaRa/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/raRaRa/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/raRaRa/subscriptions",
    "organizations_url": "https://api.github.com/users/raRaRa/orgs",
    "repos_url": "https://api.github.com/users/raRaRa/repos",
    "events_url": "https://api.github.com/users/raRaRa/events{/privacy}",
    "received_events_url": "https://api.github.com/users/raRaRa/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 710722093,
      "node_id": "MDU6TGFiZWw3MTA3MjIwOTM=",
      "url": "https://api.github.com/repos/facebook/react/labels/Type:%20Needs%20Investigation",
      "name": "Type: Needs Investigation",
      "color": "fbca04",
      "default": false
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 15,
  "created_at": "2019-05-08T10:46:57Z",
  "updated_at": "2019-06-19T10:15:20Z",
  "closed_at": "2019-06-19T09:43:04Z",
  "author_association": "NONE",
  "body": "This is a bug report. Seems to be related to https://github.com/facebook/react/issues/14272 but this clearly affects other browsers than just IE 11. I'm using the latest Google Chrome.\r\n\r\n**What is the current behavior?**\r\nThe current behavior is that when you create and remove many video elements, the browser isn't able to garbage collect detached nodes after the video elements have been removed. This will cause a memory leak and eventually crash the browser (if you hit the memory limit)\r\n\r\n**Sandbox demo**: https://codesandbox.io/s/9jjlr52vr - I have one button that renders 20 empty video tags and another button to render 20 empty img tags, to show the difference of detached nodes, that there's clearly something wrong with how React handles the video tag.\r\n\r\n**Production demo**: https://csb-9jjlr52vr.netlify.com/\r\n\r\nWhen you run the website, take a heap snapshot. Click on \"_Render 20 empty video components_\" and \"_Remove empty video components_\" a few times. Take another heap snapshot. On the second heap snapshot compare it with the first one. In the class filter type: _Detached_ and note how there are bunch of detached nodes that weren't garbage collected.\r\n\r\n**What is the expected behavior?**\r\nThat React removes all references to the video element, so that the browser can garbage collect the detached nodes.\r\n\r\n**Which versions of React, and which browser / OS are affected by this issue? Did this work in previous versions of React?**\r\nReact: 16.8.6\r\nCRA: 3.0.0\r\nChrome: Version 74.0.3729.131 (Official Build) (64-bit)\r\n",
  "closed_by": {
    "login": "gaearon",
    "id": 810438,
    "node_id": "MDQ6VXNlcjgxMDQzOA==",
    "avatar_url": "https://avatars0.githubusercontent.com/u/810438?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/gaearon",
    "html_url": "https://github.com/gaearon",
    "followers_url": "https://api.github.com/users/gaearon/followers",
    "following_url": "https://api.github.com/users/gaearon/following{/other_user}",
    "gists_url": "https://api.github.com/users/gaearon/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/gaearon/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/gaearon/subscriptions",
    "organizations_url": "https://api.github.com/users/gaearon/orgs",
    "repos_url": "https://api.github.com/users/gaearon/repos",
    "events_url": "https://api.github.com/users/gaearon/events{/privacy}",
    "received_events_url": "https://api.github.com/users/gaearon/received_events",
    "type": "User",
    "site_admin": false
  }
}

{
  "url": "https://api.github.com/repos/facebook/react/issues/12361",
  "repository_url": "https://api.github.com/repos/facebook/react",
  "labels_url": "https://api.github.com/repos/facebook/react/issues/12361/labels{/name}",
  "comments_url": "https://api.github.com/repos/facebook/react/issues/12361/comments",
  "events_url": "https://api.github.com/repos/facebook/react/issues/12361/events",
  "html_url": "https://github.com/facebook/react/issues/12361",
  "id": 304730433,
  "node_id": "MDU6SXNzdWUzMDQ3MzA0MzM=",
  "number": 12361,
  "title": "question about setTimeout effect of two  react demo",
  "user": {
    "login": "yangdonglai",
    "id": 17786362,
    "node_id": "MDQ6VXNlcjE3Nzg2MzYy",
    "avatar_url": "https://avatars2.githubusercontent.com/u/17786362?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/yangdonglai",
    "html_url": "https://github.com/yangdonglai",
    "followers_url": "https://api.github.com/users/yangdonglai/followers",
    "following_url": "https://api.github.com/users/yangdonglai/following{/other_user}",
    "gists_url": "https://api.github.com/users/yangdonglai/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/yangdonglai/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/yangdonglai/subscriptions",
    "organizations_url": "https://api.github.com/users/yangdonglai/orgs",
    "repos_url": "https://api.github.com/users/yangdonglai/repos",
    "events_url": "https://api.github.com/users/yangdonglai/events{/privacy}",
    "received_events_url": "https://api.github.com/users/yangdonglai/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 40929154,
      "node_id": "MDU6TGFiZWw0MDkyOTE1NA==",
      "url": "https://api.github.com/repos/facebook/react/labels/Resolution:%20Invalid",
      "name": "Resolution: Invalid",
      "color": "e6e6e6",
      "default": false
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 4,
  "created_at": "2018-03-13T11:42:46Z",
  "updated_at": "2018-03-27T22:25:31Z",
  "closed_at": "2018-03-27T22:25:21Z",
  "author_association": "NONE",
  "body": "I am a react learner. I'm counfuse by two react demo\r\n[demo1](https://8nv081l708.codesandbox.io/)\r\n[demo2](https://xj4j54lk9z.codesandbox.io/)\r\n\r\n>[demo1](https://8nv081l708.codesandbox.io/)\r\n\r\n```js\r\nimport React from \"react\";\r\n\r\nlet num = 0;\r\nexport default class Hello extends React.Component {\r\n  state = {\r\n    loading: false,\r\n    data: 0\r\n  };\r\n  componentDidMount() {\r\n    // setTimeout(() => {\r\n    // const button = document.getElementById('button');\r\n    const button = this.button;\r\n    console.log(\"button first click\");\r\n    button.click();\r\n    console.log(\"button second click\");\r\n    button.click();\r\n    // }, 3000);\r\n  }\r\n  delay = () => {\r\n    const count = num++;\r\n    console.log(\"out\", count);\r\n    this.setState({\r\n      loading: true\r\n    });\r\n\r\n    setTimeout(() => {\r\n      const data = Math.random() * 10;\r\n      console.log(\"in\", count);\r\n      this.setState({\r\n        data: data,\r\n        loading: false\r\n      });\r\n    }, 1000);\r\n  };\r\n  render() {\r\n    const { loading, data } = this.state;\r\n    if (loading) {\r\n      return <p>this is loading</p>;\r\n    }\r\n    return (\r\n      <div>\r\n        <p>{`data: ${data}`}</p>\r\n        <p>\r\n          <button\r\n            id=\"button\"\r\n            ref={ref => (this.button = ref)}\r\n            onClick={this.delay}\r\n          >\r\n            update\r\n          </button>\r\n        </p>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n```\r\n\r\n> [demo2](https://xj4j54lk9z.codesandbox.io/)\r\n```js\r\nimport React from \"react\";\r\n\r\nlet num = 0;\r\nexport default class Hello extends React.Component {\r\n  state = {\r\n    loading: false,\r\n    data: 0\r\n  };\r\n  componentDidMount() {\r\n    setTimeout(() => {\r\n      // const button = document.getElementById('button');\r\n      const button = this.button;\r\n      console.log(\"button first click\");\r\n      button.click();\r\n      console.log(\"button second click\");\r\n      button.click();\r\n    }, 3000);\r\n  }\r\n  delay = () => {\r\n    const count = num++;\r\n    console.log(\"out\", count);\r\n    this.setState({\r\n      loading: true\r\n    });\r\n\r\n    setTimeout(() => {\r\n      const data = Math.random() * 10;\r\n      console.log(\"in\", count);\r\n      this.setState({\r\n        data: data,\r\n        loading: false\r\n      });\r\n    }, 1000);\r\n  };\r\n  render() {\r\n    const { loading, data } = this.state;\r\n    if (loading) {\r\n      return <p>this is loading</p>;\r\n    }\r\n    return (\r\n      <div>\r\n        <p>{`data: ${data}`}</p>\r\n        <p>\r\n          <button\r\n            id=\"button\"\r\n            ref={ref => (this.button = ref)}\r\n            onClick={this.delay}\r\n          >\r\n            update\r\n          </button>\r\n        </p>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\n```\r\n\r\nthe only different code is in **componentDidMount()**\r\nthe console message is aslo different about two demo\r\n> [demo1](https://8nv081l708.codesandbox.io/) result\r\n![image](https://user-images.githubusercontent.com/17786362/37339919-3e4bf352-26f7-11e8-8c38-06064ba3b466.png)\r\n\r\n> [demo2](https://xj4j54lk9z.codesandbox.io/) result\r\n![image](https://user-images.githubusercontent.com/17786362/37339948-55f0bd6c-26f7-11e8-93b6-6a6e79df986d.png)\r\n",
  "closed_by": {
    "login": "aweary",
    "id": 6886061,
    "node_id": "MDQ6VXNlcjY4ODYwNjE=",
    "avatar_url": "https://avatars2.githubusercontent.com/u/6886061?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/aweary",
    "html_url": "https://github.com/aweary",
    "followers_url": "https://api.github.com/users/aweary/followers",
    "following_url": "https://api.github.com/users/aweary/following{/other_user}",
    "gists_url": "https://api.github.com/users/aweary/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/aweary/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/aweary/subscriptions",
    "organizations_url": "https://api.github.com/users/aweary/orgs",
    "repos_url": "https://api.github.com/users/aweary/repos",
    "events_url": "https://api.github.com/users/aweary/events{/privacy}",
    "received_events_url": "https://api.github.com/users/aweary/received_events",
    "type": "User",
    "site_admin": false
  }
}

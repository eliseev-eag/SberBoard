{
  "url": "https://api.github.com/repos/facebook/react/issues/12707",
  "repository_url": "https://api.github.com/repos/facebook/react",
  "labels_url": "https://api.github.com/repos/facebook/react/issues/12707/labels{/name}",
  "comments_url": "https://api.github.com/repos/facebook/react/issues/12707/comments",
  "events_url": "https://api.github.com/repos/facebook/react/issues/12707/events",
  "html_url": "https://github.com/facebook/react/pull/12707",
  "id": 318539230,
  "node_id": "MDExOlB1bGxSZXF1ZXN0MTg0NzE5ODA3",
  "number": 12707,
  "title": "[RFC] Schedule supports two priorities",
  "user": {
    "login": "flarnie",
    "id": 1114467,
    "node_id": "MDQ6VXNlcjExMTQ0Njc=",
    "avatar_url": "https://avatars2.githubusercontent.com/u/1114467?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/flarnie",
    "html_url": "https://github.com/flarnie",
    "followers_url": "https://api.github.com/users/flarnie/followers",
    "following_url": "https://api.github.com/users/flarnie/following{/other_user}",
    "gists_url": "https://api.github.com/users/flarnie/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/flarnie/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/flarnie/subscriptions",
    "organizations_url": "https://api.github.com/users/flarnie/orgs",
    "repos_url": "https://api.github.com/users/flarnie/repos",
    "events_url": "https://api.github.com/users/flarnie/events{/privacy}",
    "received_events_url": "https://api.github.com/users/flarnie/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 196858374,
      "node_id": "MDU6TGFiZWwxOTY4NTgzNzQ=",
      "url": "https://api.github.com/repos/facebook/react/labels/CLA%20Signed",
      "name": "CLA Signed",
      "color": "e7e7e7",
      "default": false
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 2,
  "created_at": "2018-04-27T20:26:04Z",
  "updated_at": "2018-05-03T20:41:58Z",
  "closed_at": "2018-05-03T20:41:58Z",
  "author_association": "CONTRIBUTOR",
  "pull_request": {
    "url": "https://api.github.com/repos/facebook/react/pulls/12707",
    "html_url": "https://github.com/facebook/react/pull/12707",
    "diff_url": "https://github.com/facebook/react/pull/12707.diff",
    "patch_url": "https://github.com/facebook/react/pull/12707.patch"
  },
  "body": "This depends on https://github.com/facebook/react/pull/12682 which still needs review, but I wanted to keep pushing forward so submitting this anyway.\r\n\r\nWould love early feedback on this, and for now I'll shift to working on test coverage, which is the last significant piece.\r\n\r\nTo write the unit and fixture test coverage for this new complex behavior, we need to allow configuring 'schedule' with dependency injection. Something like this - pseudocode - : \r\n```\r\nscheduleFactory(config: {requestAnimationFrame: Function, ...other dependencies}) {\r\n  // ... schedule logic defining requestSerialCallback and requestDeferredCallback\r\n  return {\r\n    requestSerialCallback,\r\n    requestDeferredCallback,\r\n  };\r\n};\r\n\r\n// in schedule.js\r\n// check to ensure global.requestAnimationFrame is defined\r\nexport scheduleFactory({requestAnimationFrame: global.requestAnimationFrame});\r\n\r\n// in noopSchedule.js\r\n// ... define mockRequestAnimationFrame and a 'flushFrame' method you could use to flush callbacks.\r\nexport scheduleFactory({requestAnimationFrame: mockRequestAnimationFrame});\r\n\r\n// in our fixture\r\nconst wrappedRequestAnimationFrame = function(callback) {\r\n  // record something to a log which can be displayed in the fixture later\r\n  const wrappedCallback = function() {\r\n    // record something to a log which can be displayed in the fixture later\r\n    callback(...arguments);\r\n  };\r\n  requestAnimationFrame(wrappedCallback);\r\n};\r\nexport scheduleFactory({requestAnimationFrame: wrappedRequestAnimationFrame});\r\n```",
  "closed_by": {
    "login": "flarnie",
    "id": 1114467,
    "node_id": "MDQ6VXNlcjExMTQ0Njc=",
    "avatar_url": "https://avatars2.githubusercontent.com/u/1114467?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/flarnie",
    "html_url": "https://github.com/flarnie",
    "followers_url": "https://api.github.com/users/flarnie/followers",
    "following_url": "https://api.github.com/users/flarnie/following{/other_user}",
    "gists_url": "https://api.github.com/users/flarnie/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/flarnie/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/flarnie/subscriptions",
    "organizations_url": "https://api.github.com/users/flarnie/orgs",
    "repos_url": "https://api.github.com/users/flarnie/repos",
    "events_url": "https://api.github.com/users/flarnie/events{/privacy}",
    "received_events_url": "https://api.github.com/users/flarnie/received_events",
    "type": "User",
    "site_admin": false
  }
}

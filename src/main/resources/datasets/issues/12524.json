{
  "url": "https://api.github.com/repos/facebook/react/issues/12524",
  "repository_url": "https://api.github.com/repos/facebook/react",
  "labels_url": "https://api.github.com/repos/facebook/react/issues/12524/labels{/name}",
  "comments_url": "https://api.github.com/repos/facebook/react/issues/12524/comments",
  "events_url": "https://api.github.com/repos/facebook/react/issues/12524/events",
  "html_url": "https://github.com/facebook/react/issues/12524",
  "id": 310782126,
  "node_id": "MDU6SXNzdWUzMTA3ODIxMjY=",
  "number": 12524,
  "title": "unmount/mount console warning. Changed behaviour from React 15.6",
  "user": {
    "login": "wnr",
    "id": 719555,
    "node_id": "MDQ6VXNlcjcxOTU1NQ==",
    "avatar_url": "https://avatars2.githubusercontent.com/u/719555?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/wnr",
    "html_url": "https://github.com/wnr",
    "followers_url": "https://api.github.com/users/wnr/followers",
    "following_url": "https://api.github.com/users/wnr/following{/other_user}",
    "gists_url": "https://api.github.com/users/wnr/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/wnr/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/wnr/subscriptions",
    "organizations_url": "https://api.github.com/users/wnr/orgs",
    "repos_url": "https://api.github.com/users/wnr/repos",
    "events_url": "https://api.github.com/users/wnr/events{/privacy}",
    "received_events_url": "https://api.github.com/users/wnr/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 7,
  "created_at": "2018-04-03T10:35:57Z",
  "updated_at": "2018-04-05T07:25:04Z",
  "closed_at": "2018-04-04T00:12:34Z",
  "author_association": "NONE",
  "body": "**Do you want to request a *feature* or report a *bug*?**\r\nBug\r\n\r\n**What is the current behavior?**\r\nWhen migrating our very large codebase from React 15.6 to 16, the following messages started showing in the console:\r\n\r\n```\r\nreact-dom.development.js:530 Warning: unmountComponentAtNode(): The node you're attempting to unmount was rendered by React and is not a top-level container. Instead, have the parent component update its state and rerender in order to remove this component.\r\nprintWarning @ react-dom.development.js:530\r\nwarning @ react-dom.development.js:554\r\nunmountComponentAtNode @ react-dom.development.js:17020\r\nhandleClick @ Inline Babel script:36\r\ncallCallback @ react-dom.development.js:144\r\ninvokeGuardedCallbackDev @ react-dom.development.js:182\r\ninvokeGuardedCallback @ react-dom.development.js:231\r\ninvokeGuardedCallbackAndCatchFirstError @ react-dom.development.js:245\r\nexecuteDispatch @ react-dom.development.js:608\r\nexecuteDispatchesInOrder @ react-dom.development.js:630\r\nexecuteDispatchesAndRelease @ react-dom.development.js:728\r\nexecuteDispatchesAndReleaseTopLevel @ react-dom.development.js:739\r\nforEachAccumulated @ react-dom.development.js:709\r\nrunEventsInBatch @ react-dom.development.js:870\r\nrunExtractedEventsInBatch @ react-dom.development.js:879\r\nhandleTopLevel @ react-dom.development.js:4548\r\nbatchedUpdates @ react-dom.development.js:12852\r\nbatchedUpdates @ react-dom.development.js:2119\r\ndispatchEvent @ react-dom.development.js:4629\r\ninteractiveUpdates @ react-dom.development.js:12907\r\ninteractiveUpdates @ react-dom.development.js:2138\r\ndispatchInteractiveEvent @ react-dom.development.js:4606\r\n\r\n12:23:10.223 react-dom.development.js:530 Warning: render(...): Replacing React-rendered children with a new root component. If you intended to update the children of this node, you should instead have the existing children update their state and render the new components instead of calling ReactDOM.render.\r\n```\r\n\r\nWe do not fully understand why, but have tracked this to unmounting/mounting components during an event (such as click). See https://jsfiddle.net/rv9jtfy4/ in order to reproduce it. Click on the header to trigger the warnings. When this example is running React 15, no warnings/issues are present.\r\n\r\nIt seems like the `unmountComponentAtNode` function unmounts the component asynchronously during an event. When debugging, after executing the method the root is still populated with HTML and internal React properties are still present. This probably makes the following `React.render` call problematic.\r\n\r\n**If the current behavior is a bug, please provide the steps to reproduce and if possible a minimal demo of the problem. Your bug will get fixed much faster if we can run your code and it doesn't have dependencies other than React. Paste the link to your JSFiddle (https://jsfiddle.net/Luktwrdm/) or CodeSandbox (https://codesandbox.io/s/new) example below:**\r\n\r\nSee https://jsfiddle.net/rv9jtfy4/ in order to reproduce it. Click on the header to trigger the warnings. \r\n\r\n**What is the expected behavior?**\r\n\r\nTo have no warnings present in the console (like React 15).\r\n\r\n**Which versions of React, and which browser / OS are affected by this issue? Did this work in previous versions of React?**\r\n\r\nAll OS/browsers. Bug present in React 16. Works as expected in React 15.\r\n",
  "closed_by": {
    "login": "gaearon",
    "id": 810438,
    "node_id": "MDQ6VXNlcjgxMDQzOA==",
    "avatar_url": "https://avatars0.githubusercontent.com/u/810438?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/gaearon",
    "html_url": "https://github.com/gaearon",
    "followers_url": "https://api.github.com/users/gaearon/followers",
    "following_url": "https://api.github.com/users/gaearon/following{/other_user}",
    "gists_url": "https://api.github.com/users/gaearon/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/gaearon/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/gaearon/subscriptions",
    "organizations_url": "https://api.github.com/users/gaearon/orgs",
    "repos_url": "https://api.github.com/users/gaearon/repos",
    "events_url": "https://api.github.com/users/gaearon/events{/privacy}",
    "received_events_url": "https://api.github.com/users/gaearon/received_events",
    "type": "User",
    "site_admin": false
  }
}

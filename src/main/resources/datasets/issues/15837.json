{
  "url": "https://api.github.com/repos/facebook/react/issues/15837",
  "repository_url": "https://api.github.com/repos/facebook/react",
  "labels_url": "https://api.github.com/repos/facebook/react/issues/15837/labels{/name}",
  "comments_url": "https://api.github.com/repos/facebook/react/issues/15837/comments",
  "events_url": "https://api.github.com/repos/facebook/react/issues/15837/events",
  "html_url": "https://github.com/facebook/react/issues/15837",
  "id": 453481181,
  "node_id": "MDU6SXNzdWU0NTM0ODExODE=",
  "number": 15837,
  "title": "Hooks can only be called inside the body of a function component.",
  "user": {
    "login": "ChiefORZ",
    "id": 6916518,
    "node_id": "MDQ6VXNlcjY5MTY1MTg=",
    "avatar_url": "https://avatars1.githubusercontent.com/u/6916518?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/ChiefORZ",
    "html_url": "https://github.com/ChiefORZ",
    "followers_url": "https://api.github.com/users/ChiefORZ/followers",
    "following_url": "https://api.github.com/users/ChiefORZ/following{/other_user}",
    "gists_url": "https://api.github.com/users/ChiefORZ/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/ChiefORZ/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/ChiefORZ/subscriptions",
    "organizations_url": "https://api.github.com/users/ChiefORZ/orgs",
    "repos_url": "https://api.github.com/users/ChiefORZ/repos",
    "events_url": "https://api.github.com/users/ChiefORZ/events{/privacy}",
    "received_events_url": "https://api.github.com/users/ChiefORZ/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 3,
  "created_at": "2019-06-07T12:09:17Z",
  "updated_at": "2019-09-04T11:14:33Z",
  "closed_at": "2019-09-04T11:14:33Z",
  "author_association": "NONE",
  "body": "Hello there!\r\n\r\nWe, in our team, love the new Hooks API!\r\nBut it comes with one negative thing we are experiencing since the 16.8 update...\r\n\r\n```\r\nHooks can only be called inside the body of a function component.\r\n```\r\n\r\nWe internally use multiple repositories.\r\nOne for every customer project and multiple shared libraries.\r\n\r\nSince hooks require us to only have one copy of react in the scope (https://reactjs.org/warnings/invalid-hook-call-warning.html#duplicate-react) we are forced to link our project to allow development of the shared libraries while running the dev server from the customer projects.\r\nSo we have to link our projects depending on which project we are currently working on.\r\n```sh\r\n#!/bin/bash\r\ncd /shared-component-library\r\npushd ./node_modules/react && yarn link && popd\r\npushd ./node_modules/react-dom && yarn link && popd\r\nyarn link\r\n\r\ncd /shared-hooks-library\r\nyarn link \"react\"\r\nyarn link \"react-dom\"\r\nyarn link\r\n\r\ncd /customer-project-1\r\nyarn link \"react\"\r\nyarn link \"react-dom\"\r\nyarn link \"shared-component-library\"\r\nyarn link \"shared-hooks-library\"\r\n```\r\nThis process has to be done for every frontend developer and does not work every time you try.\r\nBefore you add new dependencies you have to unlink every linked dependency.\r\nand therefore it is very time consuming and is in our way.\r\n\r\n---\r\n\r\nThen we stumbled upon yarn plug'n play... which is not working for the most part. most npm packages cannot be installed, therefore its not a viable option for us.\r\n\r\nAnd then we tried the package manager `pnpm` which installs all dependencies on a central location in the filesystem and we thought that this might fix all of our issues. unfortunately there are two react instances too...\r\n\r\n---\r\n\r\nWe would highly appreciate if someone would put some effort into this topic.\r\nMaybe by finding a way to make sure only one react instance is present - making it a Singleton somehow?!\r\nWe don't have to re-invent the package management for this issue i think - it's just a matter of detecting of a react instance is already present - i think ^^",
  "closed_by": {
    "login": "threepointone",
    "id": 18808,
    "node_id": "MDQ6VXNlcjE4ODA4",
    "avatar_url": "https://avatars2.githubusercontent.com/u/18808?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/threepointone",
    "html_url": "https://github.com/threepointone",
    "followers_url": "https://api.github.com/users/threepointone/followers",
    "following_url": "https://api.github.com/users/threepointone/following{/other_user}",
    "gists_url": "https://api.github.com/users/threepointone/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/threepointone/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/threepointone/subscriptions",
    "organizations_url": "https://api.github.com/users/threepointone/orgs",
    "repos_url": "https://api.github.com/users/threepointone/repos",
    "events_url": "https://api.github.com/users/threepointone/events{/privacy}",
    "received_events_url": "https://api.github.com/users/threepointone/received_events",
    "type": "User",
    "site_admin": false
  }
}

{
  "url": "https://api.github.com/repos/facebook/react/issues/15113",
  "repository_url": "https://api.github.com/repos/facebook/react",
  "labels_url": "https://api.github.com/repos/facebook/react/issues/15113/labels{/name}",
  "comments_url": "https://api.github.com/repos/facebook/react/issues/15113/comments",
  "events_url": "https://api.github.com/repos/facebook/react/issues/15113/events",
  "html_url": "https://github.com/facebook/react/issues/15113",
  "id": 421230556,
  "node_id": "MDU6SXNzdWU0MjEyMzA1NTY=",
  "number": 15113,
  "title": "eslint-plugin-react-hooks useCallback circular dependencies?",
  "user": {
    "login": "KhodorAmmar",
    "id": 854420,
    "node_id": "MDQ6VXNlcjg1NDQyMA==",
    "avatar_url": "https://avatars2.githubusercontent.com/u/854420?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/KhodorAmmar",
    "html_url": "https://github.com/KhodorAmmar",
    "followers_url": "https://api.github.com/users/KhodorAmmar/followers",
    "following_url": "https://api.github.com/users/KhodorAmmar/following{/other_user}",
    "gists_url": "https://api.github.com/users/KhodorAmmar/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/KhodorAmmar/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/KhodorAmmar/subscriptions",
    "organizations_url": "https://api.github.com/users/KhodorAmmar/orgs",
    "repos_url": "https://api.github.com/users/KhodorAmmar/repos",
    "events_url": "https://api.github.com/users/KhodorAmmar/events{/privacy}",
    "received_events_url": "https://api.github.com/users/KhodorAmmar/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 1249821345,
      "node_id": "MDU6TGFiZWwxMjQ5ODIxMzQ1",
      "url": "https://api.github.com/repos/facebook/react/labels/Component:%20ESLint%20Rules",
      "name": "Component: ESLint Rules",
      "color": "f7afdb",
      "default": false
    },
    {
      "id": 40929151,
      "node_id": "MDU6TGFiZWw0MDkyOTE1MQ==",
      "url": "https://api.github.com/repos/facebook/react/labels/Type:%20Bug",
      "name": "Type: Bug",
      "color": "b60205",
      "default": false
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 2,
  "created_at": "2019-03-14T20:31:59Z",
  "updated_at": "2019-03-15T15:14:01Z",
  "closed_at": "2019-03-15T15:14:01Z",
  "author_association": "NONE",
  "body": "*bug/question*\r\n\r\n**What is the current behavior?**\r\n\r\nWhen there's a function that mentions itself wrapped with useCallback or useEffect, eslint-plugin-react-hooks will add the function to the list of dependencies causing no-use-before-define warnings\r\n\r\nExample:\r\n\r\n```js\r\nconst updateAndClean = useCallback(() => {\r\n  console.log(\"update something\")\r\n  document.removeEventListener(\"event\", updateAndClean);\r\n});\r\n```\r\n\r\nThe idea of the function above is to clean after itself when there's no need for the event anymore. I'm sure there are better ways to do that, but for the sake of the issue let's presume this is valid code.\r\n\r\neslint-plugin-react-hooks would propose adding \"updateAndClean\" to the list of dependencies:\r\n\r\n```js\r\nconst updateAndClean = useCallback(() => {\r\n  console.log(\"update something\")\r\n  document.removeEventListener(\"event\", updateAndClean);\r\n}, [updateAndClean]);\r\n```\r\nCausing no-use-before-define warning:\r\n`Line 17:  'updateAndClean' was used before it was defined  no-use-before-define` \r\n\r\nQuestions are:\r\n- Is this ok to leave as is? would \"using the function before defining it\" break any useCallback optimisation? \r\n- Can eslint-plugin-react-hooks not automatically fix that since it causes other warnings?\r\n- Knowing the function needs to run once, can I pass an empty array to useCallback?\r\n\r\n",
  "closed_by": {
    "login": "gaearon",
    "id": 810438,
    "node_id": "MDQ6VXNlcjgxMDQzOA==",
    "avatar_url": "https://avatars0.githubusercontent.com/u/810438?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/gaearon",
    "html_url": "https://github.com/gaearon",
    "followers_url": "https://api.github.com/users/gaearon/followers",
    "following_url": "https://api.github.com/users/gaearon/following{/other_user}",
    "gists_url": "https://api.github.com/users/gaearon/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/gaearon/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/gaearon/subscriptions",
    "organizations_url": "https://api.github.com/users/gaearon/orgs",
    "repos_url": "https://api.github.com/users/gaearon/repos",
    "events_url": "https://api.github.com/users/gaearon/events{/privacy}",
    "received_events_url": "https://api.github.com/users/gaearon/received_events",
    "type": "User",
    "site_admin": false
  }
}

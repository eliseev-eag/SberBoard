{
  "url": "https://api.github.com/repos/facebook/react/issues/16289",
  "repository_url": "https://api.github.com/repos/facebook/react",
  "labels_url": "https://api.github.com/repos/facebook/react/issues/16289/labels{/name}",
  "comments_url": "https://api.github.com/repos/facebook/react/issues/16289/comments",
  "events_url": "https://api.github.com/repos/facebook/react/issues/16289/events",
  "html_url": "https://github.com/facebook/react/issues/16289",
  "id": 476582021,
  "node_id": "MDU6SXNzdWU0NzY1ODIwMjE=",
  "number": 16289,
  "title": "What’s the best way to handle scroll with effects hooks?",
  "user": {
    "login": "dbismut",
    "id": 5003380,
    "node_id": "MDQ6VXNlcjUwMDMzODA=",
    "avatar_url": "https://avatars2.githubusercontent.com/u/5003380?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/dbismut",
    "html_url": "https://github.com/dbismut",
    "followers_url": "https://api.github.com/users/dbismut/followers",
    "following_url": "https://api.github.com/users/dbismut/following{/other_user}",
    "gists_url": "https://api.github.com/users/dbismut/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/dbismut/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/dbismut/subscriptions",
    "organizations_url": "https://api.github.com/users/dbismut/orgs",
    "repos_url": "https://api.github.com/users/dbismut/repos",
    "events_url": "https://api.github.com/users/dbismut/events{/privacy}",
    "received_events_url": "https://api.github.com/users/dbismut/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 2,
  "created_at": "2019-08-04T18:45:43Z",
  "updated_at": "2019-08-15T13:01:23Z",
  "closed_at": "2019-08-15T13:01:22Z",
  "author_association": "NONE",
  "body": "Hi, this is not issue per se, more a question on what’s the best recommended way of handling scroll with hooks.\r\n\r\nI want to freeze and unfreeze a div on demand (freezing hides the div overflow and scrolls it to the current body scroll, unfreezing scrolls the body back to its previous position and frees the overflow of the div). I believe this can be handy when dealing with transitions.\r\n\r\nEssentially to freeze the div you would need to read the current `window.scrollY`, add the `frozen` class (which sets `position: fixed` and `overflow: hidden`) to the div and immediately scroll it to the scroll position you’ve just read. \r\n\r\nI tried several implementations, using `useEffect`, `useLayoutEffect`, a mix of both or directly manipulating the DOM (ie adding the class manually declaratively).\r\n\r\nhttps://codesandbox.io/s/freezing-dom-6k7lb\r\n\r\n\r\nThe first three implementations sometimes show a flash on Safari, only the last one is flash-free on both Safari desktop and mobile.\r\n\r\nI’d be happy to get some thoughts on what’s the best strategy t prevent any flashes, ie adding the `frozen` class and scrolling the div in the same render cycle. \r\n\r\n",
  "closed_by": {
    "login": "gaearon",
    "id": 810438,
    "node_id": "MDQ6VXNlcjgxMDQzOA==",
    "avatar_url": "https://avatars0.githubusercontent.com/u/810438?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/gaearon",
    "html_url": "https://github.com/gaearon",
    "followers_url": "https://api.github.com/users/gaearon/followers",
    "following_url": "https://api.github.com/users/gaearon/following{/other_user}",
    "gists_url": "https://api.github.com/users/gaearon/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/gaearon/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/gaearon/subscriptions",
    "organizations_url": "https://api.github.com/users/gaearon/orgs",
    "repos_url": "https://api.github.com/users/gaearon/repos",
    "events_url": "https://api.github.com/users/gaearon/events{/privacy}",
    "received_events_url": "https://api.github.com/users/gaearon/received_events",
    "type": "User",
    "site_admin": false
  }
}

{
  "url": "https://api.github.com/repos/facebook/react/issues/6747",
  "repository_url": "https://api.github.com/repos/facebook/react",
  "labels_url": "https://api.github.com/repos/facebook/react/issues/6747/labels{/name}",
  "comments_url": "https://api.github.com/repos/facebook/react/issues/6747/comments",
  "events_url": "https://api.github.com/repos/facebook/react/issues/6747/events",
  "html_url": "https://github.com/facebook/react/issues/6747",
  "id": 154208597,
  "node_id": "MDU6SXNzdWUxNTQyMDg1OTc=",
  "number": 6747,
  "title": "Attributes on custom elements are not removed during the diff",
  "user": {
    "login": "grassator",
    "id": 317518,
    "node_id": "MDQ6VXNlcjMxNzUxOA==",
    "avatar_url": "https://avatars1.githubusercontent.com/u/317518?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/grassator",
    "html_url": "https://github.com/grassator",
    "followers_url": "https://api.github.com/users/grassator/followers",
    "following_url": "https://api.github.com/users/grassator/following{/other_user}",
    "gists_url": "https://api.github.com/users/grassator/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/grassator/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/grassator/subscriptions",
    "organizations_url": "https://api.github.com/users/grassator/orgs",
    "repos_url": "https://api.github.com/users/grassator/repos",
    "events_url": "https://api.github.com/users/grassator/events{/privacy}",
    "received_events_url": "https://api.github.com/users/grassator/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 0,
  "created_at": "2016-05-11T10:19:09Z",
  "updated_at": "2016-05-13T00:00:04Z",
  "closed_at": "2016-05-13T00:00:04Z",
  "author_association": "CONTRIBUTOR",
  "body": "We are trying to adopt custom elements for some parts of your UI and ran into the issue that during an update to the tree, custom attributes on the the custom elements are not removed correctly as can be seen here: http://jsbin.com/ferohipaje/edit?html,output (you will need to click on \"false\" and then inspect the DOM node in the dev tools of the browser).\n\nI've tracked the issue to the `_updateDOMProperties` method in `ReactDOMComponent.js`. It seems that there is a special check in the loop for `nextProps`:\n\n``` js\nelse if (isCustomComponent(this._tag, nextProps)) {\n  if (!RESERVED_PROPS.hasOwnProperty(propKey)) {\n    DOMPropertyOperations.setValueForAttribute(getNode(this), propKey, nextProp);\n  }\n}\n```\n\nBut the corresponding section is missing for `lastProps` (deleting), which results in the incorrect behavior.\n\nI'm starting the work on the patch.\n",
  "closed_by": {
    "login": "jimfb",
    "id": 9595985,
    "node_id": "MDQ6VXNlcjk1OTU5ODU=",
    "avatar_url": "https://avatars3.githubusercontent.com/u/9595985?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/jimfb",
    "html_url": "https://github.com/jimfb",
    "followers_url": "https://api.github.com/users/jimfb/followers",
    "following_url": "https://api.github.com/users/jimfb/following{/other_user}",
    "gists_url": "https://api.github.com/users/jimfb/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/jimfb/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/jimfb/subscriptions",
    "organizations_url": "https://api.github.com/users/jimfb/orgs",
    "repos_url": "https://api.github.com/users/jimfb/repos",
    "events_url": "https://api.github.com/users/jimfb/events{/privacy}",
    "received_events_url": "https://api.github.com/users/jimfb/received_events",
    "type": "User",
    "site_admin": false
  }
}

{
  "url": "https://api.github.com/repos/facebook/react/issues/8833",
  "repository_url": "https://api.github.com/repos/facebook/react",
  "labels_url": "https://api.github.com/repos/facebook/react/issues/8833/labels{/name}",
  "comments_url": "https://api.github.com/repos/facebook/react/issues/8833/comments",
  "events_url": "https://api.github.com/repos/facebook/react/issues/8833/events",
  "html_url": "https://github.com/facebook/react/pull/8833",
  "id": 202035942,
  "node_id": "MDExOlB1bGxSZXF1ZXN0MTAyMzkxOTM3",
  "number": 8833,
  "title": "Polyfill requestIdleCallback when native is not available",
  "user": {
    "login": "sebmarkbage",
    "id": 63648,
    "node_id": "MDQ6VXNlcjYzNjQ4",
    "avatar_url": "https://avatars2.githubusercontent.com/u/63648?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/sebmarkbage",
    "html_url": "https://github.com/sebmarkbage",
    "followers_url": "https://api.github.com/users/sebmarkbage/followers",
    "following_url": "https://api.github.com/users/sebmarkbage/following{/other_user}",
    "gists_url": "https://api.github.com/users/sebmarkbage/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/sebmarkbage/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/sebmarkbage/subscriptions",
    "organizations_url": "https://api.github.com/users/sebmarkbage/orgs",
    "repos_url": "https://api.github.com/users/sebmarkbage/repos",
    "events_url": "https://api.github.com/users/sebmarkbage/events{/privacy}",
    "received_events_url": "https://api.github.com/users/sebmarkbage/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 196858374,
      "node_id": "MDU6TGFiZWwxOTY4NTgzNzQ=",
      "url": "https://api.github.com/repos/facebook/react/labels/CLA%20Signed",
      "name": "CLA Signed",
      "color": "e7e7e7",
      "default": false
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 3,
  "created_at": "2017-01-20T02:56:09Z",
  "updated_at": "2017-01-21T18:37:48Z",
  "closed_at": "2017-01-21T18:27:46Z",
  "author_association": "MEMBER",
  "pull_request": {
    "url": "https://api.github.com/repos/facebook/react/pulls/8833",
    "html_url": "https://github.com/facebook/react/pull/8833",
    "diff_url": "https://github.com/facebook/react/pull/8833.diff",
    "patch_url": "https://github.com/facebook/react/pull/8833.patch"
  },
  "body": "I introduce the ReactDOMFrameScheduling module which just exposes rIC and rAF.\r\n\r\nThe polyfill works by scheduling a requestAnimationFrame, store the `frame start time` for the start of the frame, then schedule a postMessage which gets scheduled after paint. The deadline is set to `frame start time` + `frame rate`. By separating the idle call into a separate event tick we ensure that layout, paint and other browser work is counted against the available time.\r\n\r\n```\r\n| frame start time                                      deadline |\r\n[requestAnimationFrame] [layout] [paint] [composite] [postMessage]\r\n```\r\n\r\nThe frame rate is dynamically adjusted by tracking the minimum time between two rAF callbacks. This is not perfect because browsers can schedule multiple callbacks to catch up after a long frame. To compensate for this we only adjust if two consecutive periods are faster than normal.\r\n\r\nThis seems to guarantee that we will hit frame deadlines and we don't end up dropping frames. However, there is still some lost time so we risk starving by not having enough idle time.\r\n\r\nEspecially Firefox seems to have issues keeping up on the triangle demo. However, that is also true for native rIC in Firefox. It seems like more render work is scheduled on the main thread pipeline and also that JS execution just generally has more overhead. Safari has little trouble keeping up with this polyfill. I have not tested IE yet.",
  "closed_by": {
    "login": "sebmarkbage",
    "id": 63648,
    "node_id": "MDQ6VXNlcjYzNjQ4",
    "avatar_url": "https://avatars2.githubusercontent.com/u/63648?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/sebmarkbage",
    "html_url": "https://github.com/sebmarkbage",
    "followers_url": "https://api.github.com/users/sebmarkbage/followers",
    "following_url": "https://api.github.com/users/sebmarkbage/following{/other_user}",
    "gists_url": "https://api.github.com/users/sebmarkbage/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/sebmarkbage/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/sebmarkbage/subscriptions",
    "organizations_url": "https://api.github.com/users/sebmarkbage/orgs",
    "repos_url": "https://api.github.com/users/sebmarkbage/repos",
    "events_url": "https://api.github.com/users/sebmarkbage/events{/privacy}",
    "received_events_url": "https://api.github.com/users/sebmarkbage/received_events",
    "type": "User",
    "site_admin": false
  }
}

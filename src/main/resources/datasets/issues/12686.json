{
  "url": "https://api.github.com/repos/facebook/react/issues/12686",
  "repository_url": "https://api.github.com/repos/facebook/react",
  "labels_url": "https://api.github.com/repos/facebook/react/issues/12686/labels{/name}",
  "comments_url": "https://api.github.com/repos/facebook/react/issues/12686/comments",
  "events_url": "https://api.github.com/repos/facebook/react/issues/12686/events",
  "html_url": "https://github.com/facebook/react/issues/12686",
  "id": 317491913,
  "node_id": "MDU6SXNzdWUzMTc0OTE5MTM=",
  "number": 12686,
  "title": "Strange beahvior React + new Context API",
  "user": {
    "login": "axules",
    "id": 20991327,
    "node_id": "MDQ6VXNlcjIwOTkxMzI3",
    "avatar_url": "https://avatars2.githubusercontent.com/u/20991327?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/axules",
    "html_url": "https://github.com/axules",
    "followers_url": "https://api.github.com/users/axules/followers",
    "following_url": "https://api.github.com/users/axules/following{/other_user}",
    "gists_url": "https://api.github.com/users/axules/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/axules/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/axules/subscriptions",
    "organizations_url": "https://api.github.com/users/axules/orgs",
    "repos_url": "https://api.github.com/users/axules/repos",
    "events_url": "https://api.github.com/users/axules/events{/privacy}",
    "received_events_url": "https://api.github.com/users/axules/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 739761016,
      "node_id": "MDU6TGFiZWw3Mzk3NjEwMTY=",
      "url": "https://api.github.com/repos/facebook/react/labels/Component:%20Reconciler",
      "name": "Component: Reconciler",
      "color": "f9a798",
      "default": false
    },
    {
      "id": 40929151,
      "node_id": "MDU6TGFiZWw0MDkyOTE1MQ==",
      "url": "https://api.github.com/repos/facebook/react/labels/Type:%20Bug",
      "name": "Type: Bug",
      "color": "b60205",
      "default": false
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 5,
  "created_at": "2018-04-25T06:19:03Z",
  "updated_at": "2018-04-28T00:55:04Z",
  "closed_at": "2018-04-28T00:52:49Z",
  "author_association": "NONE",
  "body": "I think it is a bug.\r\n\r\nGit with example - https://github.com/axules/react-context-research\r\n> npm i\r\nnpm start\r\ngo to http://localhost:3003\r\n\r\n**Dependencies**\r\nReact v16.3.2\r\nChrome v65.0.3325.181\r\n\r\n### Components\r\nContext - OrderDetailsContext\r\nRoot component - OrdersView\r\nSimple component - OrdersViewRow \r\nSubscribed component - OrderDetailsView\r\n\r\n### Problem\r\nApplication have one dynamic context (OrderDetailsContext) and 3 components: one root component (OrdersView) and 2 children components (OrdersViewRow and OrderDetailsView). Only one component (OrderDetailsView) subscribed to dynamic context and have to be refreshed once context data is changed. But with them we have problem.\r\nWhen context is changed the subscribed component is not refreshed and have old version of context data.\r\n\r\n#### actual\r\nOrderDetailsView do not update once context is updated.\r\n\r\n#### expected\r\nOrderDetailsView will update once context is updated.\r\n\r\n### First solution\r\nGo to OrdersView and move OrderDetailsView to the top of render function, then subscribed component will be updated when context is changed.\r\n![image](https://user-images.githubusercontent.com/20991327/39345798-42d1dd14-49f3-11e8-8d45-ac29bd50204f.png)\r\n\r\n### Second strange solution\r\nGo to separeted component (OrdersViewRow) and just remove `<td>Remove this td and I will work!</td>`, then subscribed component will be updated when context is changed.\r\n\r\n### Video\r\nhttps://youtu.be/WET0a2hApwM\r\n\r\n### Reproduce\r\n\r\n1. Clone https://github.com/axules/react-context-research.git\r\n1. npm i\r\n1. npm start\r\n1. Open http://localhost:3003 in Chrome\r\n1. Open dev tools in Chrome\r\n1. Click on View button\r\n\r\n#### expected\r\n* 'Loading...' text should be visibled and hidden after.\r\n* Text should be updated and new number should be displayed.\r\n* console log should be\r\n![image](https://user-images.githubusercontent.com/20991327/39346895-073bc6c4-49f9-11e8-85c9-1f085208bcb3.png)\r\n\r\n#### actual\r\n* 'Loading...' text is not visibled.\r\n* Text is not changed.\r\n* console log is\r\n![image](https://user-images.githubusercontent.com/20991327/39346859-e5877f46-49f8-11e8-95a6-38b0fe492e5e.png)\r\n",
  "closed_by": {
    "login": "gaearon",
    "id": 810438,
    "node_id": "MDQ6VXNlcjgxMDQzOA==",
    "avatar_url": "https://avatars0.githubusercontent.com/u/810438?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/gaearon",
    "html_url": "https://github.com/gaearon",
    "followers_url": "https://api.github.com/users/gaearon/followers",
    "following_url": "https://api.github.com/users/gaearon/following{/other_user}",
    "gists_url": "https://api.github.com/users/gaearon/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/gaearon/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/gaearon/subscriptions",
    "organizations_url": "https://api.github.com/users/gaearon/orgs",
    "repos_url": "https://api.github.com/users/gaearon/repos",
    "events_url": "https://api.github.com/users/gaearon/events{/privacy}",
    "received_events_url": "https://api.github.com/users/gaearon/received_events",
    "type": "User",
    "site_admin": false
  }
}

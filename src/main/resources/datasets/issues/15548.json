{
  "url": "https://api.github.com/repos/facebook/react/issues/15548",
  "repository_url": "https://api.github.com/repos/facebook/react",
  "labels_url": "https://api.github.com/repos/facebook/react/issues/15548/labels{/name}",
  "comments_url": "https://api.github.com/repos/facebook/react/issues/15548/comments",
  "events_url": "https://api.github.com/repos/facebook/react/issues/15548/events",
  "html_url": "https://github.com/facebook/react/issues/15548",
  "id": 439051648,
  "node_id": "MDU6SXNzdWU0MzkwNTE2NDg=",
  "number": 15548,
  "title": "Feedback on useEffect depndencies change error",
  "user": {
    "login": "togakangaroo",
    "id": 66150,
    "node_id": "MDQ6VXNlcjY2MTUw",
    "avatar_url": "https://avatars0.githubusercontent.com/u/66150?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/togakangaroo",
    "html_url": "https://github.com/togakangaroo",
    "followers_url": "https://api.github.com/users/togakangaroo/followers",
    "following_url": "https://api.github.com/users/togakangaroo/following{/other_user}",
    "gists_url": "https://api.github.com/users/togakangaroo/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/togakangaroo/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/togakangaroo/subscriptions",
    "organizations_url": "https://api.github.com/users/togakangaroo/orgs",
    "repos_url": "https://api.github.com/users/togakangaroo/repos",
    "events_url": "https://api.github.com/users/togakangaroo/events{/privacy}",
    "received_events_url": "https://api.github.com/users/togakangaroo/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "open",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 6,
  "created_at": "2019-05-01T02:46:22Z",
  "updated_at": "2019-09-25T21:14:43Z",
  "closed_at": null,
  "author_association": "NONE",
  "body": "Some feedback on `useEffect`\r\n\r\n**What is the current behavior?**\r\n\r\nI am using `useEffect` to load details on a set of users that are kept in props.\r\n\r\nI want to minimize loading and there are situations where the array of users (and the actual user objects) are recreated but really they refer to the same identities.\r\n\r\nSo I do\r\n\r\n```\r\nconst userIds = users.map(u => id)\r\nuseEffect(() => {\r\n  if(!userIds.length)\r\n    return\r\n  ...load more stuff by querying endpoints about these ids and set state..\r\n}, userIds)\r\n```\r\n\r\naand I run into a warning\r\n\r\n> The final argument passed to useEffect changed size between renders. The order and size of this array must remain constant\r\n\r\nwhich to me is...kinda the point, is it not? I understand if we don't want to do a deep comparison in the dependencies, but if the dependencies themselves change...well that seems straightforward, run the effect. \r\n\r\nI know that I can do `[userIds.join(' '])` in this case, but that seems like just extra work for no reason and really anti-intuitive. And ends up doing the same exact thing but with extra steps! \r\n\r\nTo be clear, what I'm proposing is removing [this whole block here](https://github.com/facebook/react/blob/master/packages/react-reconciler/src/ReactFiberHooks.js#L308) and replacing it with\r\n\r\n```\r\nif (nextDeps.length !== prevDeps.length)\r\n  return false\r\n```\r\n\r\nAs far as I can tell, this warning serves no real purpose and makes the use case outlined above awkward to deal with",
  "closed_by": null
}

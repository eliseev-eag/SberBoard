{
  "url": "https://api.github.com/repos/facebook/react/issues/6667",
  "repository_url": "https://api.github.com/repos/facebook/react",
  "labels_url": "https://api.github.com/repos/facebook/react/issues/6667/labels{/name}",
  "comments_url": "https://api.github.com/repos/facebook/react/issues/6667/comments",
  "events_url": "https://api.github.com/repos/facebook/react/issues/6667/events",
  "html_url": "https://github.com/facebook/react/issues/6667",
  "id": 152036152,
  "node_id": "MDU6SXNzdWUxNTIwMzYxNTI=",
  "number": 6667,
  "title": "Invalid ref error when rendering exported react component from HTML",
  "user": {
    "login": "c9s",
    "id": 50894,
    "node_id": "MDQ6VXNlcjUwODk0",
    "avatar_url": "https://avatars2.githubusercontent.com/u/50894?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/c9s",
    "html_url": "https://github.com/c9s",
    "followers_url": "https://api.github.com/users/c9s/followers",
    "following_url": "https://api.github.com/users/c9s/following{/other_user}",
    "gists_url": "https://api.github.com/users/c9s/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/c9s/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/c9s/subscriptions",
    "organizations_url": "https://api.github.com/users/c9s/orgs",
    "repos_url": "https://api.github.com/users/c9s/repos",
    "events_url": "https://api.github.com/users/c9s/events{/privacy}",
    "received_events_url": "https://api.github.com/users/c9s/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 2,
  "created_at": "2016-04-30T15:21:48Z",
  "updated_at": "2016-04-30T17:06:09Z",
  "closed_at": "2016-04-30T17:06:09Z",
  "author_association": "NONE",
  "body": "I encountered the famous `addComponentAsRefTo` issue when I upgraded react 0.13 to v15.0.1 on the same code.\n\nI've checked the `addComponentAsRefTo Invariant Violation` gist and confirmed that I don't have two copied of react.\n\nThe following component code is compiled by webpack with config  `{ external: { 'react': 'React' } }` hence the react library is not bundled in the output js.  The bundle exports react components to window.*, for example `window.Editor = Editor;`\n\nThe component is not rendered inside the bundled code, instead, it is rendered from HTML page and bind to an element, like the code below:\n\n```\n<!-- .... include react v15, react-dom v15 and react addon v15 in the browser -->\n<script>\n// runs ReactDOM to render the components ....\n$(function() {\n  ReactDOM.render(React.createElement(window.Editor, { ..... }), document.getElementById('container'));\n});\n</script>\n```\n\nHere is the component code, which is pretty simple and was simplified to just few lines:\n\n```\nvar SearchBar = React.createClass({\n  getInitialState: function() {\n    return {};\n  },\n  handleChange: function(e) { },\n  render: function() {\n    return (\n      <div className=\"form-group\">\n        <input className=\"form-control\"\n          type=\"text\"\n          onChange={this.handleChange}/>\n      </div>\n    );\n  }\n});\nexport default React.createClass({\n  getInitialState: function() {\n    return {};\n  },\n  render: function() {\n    return <div className=\"crud-list-container\">\n      <SearchBar ref=\"searchBar\"/>\n    </div>;\n  }\n});\n```\n\nHowever, If I put the render method in the bundle code, it works fine. like:\n\nhttps://jsfiddle.net/dskd5um9/1/\n",
  "closed_by": {
    "login": "c9s",
    "id": 50894,
    "node_id": "MDQ6VXNlcjUwODk0",
    "avatar_url": "https://avatars2.githubusercontent.com/u/50894?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/c9s",
    "html_url": "https://github.com/c9s",
    "followers_url": "https://api.github.com/users/c9s/followers",
    "following_url": "https://api.github.com/users/c9s/following{/other_user}",
    "gists_url": "https://api.github.com/users/c9s/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/c9s/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/c9s/subscriptions",
    "organizations_url": "https://api.github.com/users/c9s/orgs",
    "repos_url": "https://api.github.com/users/c9s/repos",
    "events_url": "https://api.github.com/users/c9s/events{/privacy}",
    "received_events_url": "https://api.github.com/users/c9s/received_events",
    "type": "User",
    "site_admin": false
  }
}

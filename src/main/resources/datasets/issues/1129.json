{
  "url": "https://api.github.com/repos/facebook/react/issues/1129",
  "repository_url": "https://api.github.com/repos/facebook/react",
  "labels_url": "https://api.github.com/repos/facebook/react/issues/1129/labels{/name}",
  "comments_url": "https://api.github.com/repos/facebook/react/issues/1129/comments",
  "events_url": "https://api.github.com/repos/facebook/react/issues/1129/events",
  "html_url": "https://github.com/facebook/react/issues/1129",
  "id": 27840601,
  "node_id": "MDU6SXNzdWUyNzg0MDYwMQ==",
  "number": 1129,
  "title": "React.renderComponentToString() and ExecutionEnvironment.canUseDOM",
  "user": {
    "login": "insin",
    "id": 226692,
    "node_id": "MDQ6VXNlcjIyNjY5Mg==",
    "avatar_url": "https://avatars1.githubusercontent.com/u/226692?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/insin",
    "html_url": "https://github.com/insin",
    "followers_url": "https://api.github.com/users/insin/followers",
    "following_url": "https://api.github.com/users/insin/following{/other_user}",
    "gists_url": "https://api.github.com/users/insin/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/insin/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/insin/subscriptions",
    "organizations_url": "https://api.github.com/users/insin/orgs",
    "repos_url": "https://api.github.com/users/insin/repos",
    "events_url": "https://api.github.com/users/insin/events{/privacy}",
    "received_events_url": "https://api.github.com/users/insin/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 2,
  "created_at": "2014-02-19T00:14:14Z",
  "updated_at": "2014-04-07T04:21:45Z",
  "closed_at": "2014-04-07T04:21:45Z",
  "author_association": "NONE",
  "body": "I'm using `React.renderComponentToString()` to test generated output from my [forms library](https://github.com/insin/newforms/tree/react), sharing the same set of QUnit tests between Firefox, Chrome and Node.js (using [qqunit](https://github.com/hornairs/qqunit)).\n\nThis function has always thrown errors for me when used in the browser, but my tests still worked because it seemed to call the callback before throwing the error in the [custom assertion function](https://gist.github.com/insin/9005207) I've been using.\n\nTrying 0.9.0-rc1:\n- my browser test suites are complaining because the function is now synchronous so the error is being thrown before I can get a hold of generated HTML.\n- when run in Node.js, the tests are bombing out on the navigator check for Chrome becuase qqunit fakes out a `window` global using jsdom, but not a `navigator`. If I patch in a check for navigator not being undefined, I then get the same results as when running in a browser.\n\nSo I edited the node_modules version of 0.9.0-rc1 to add a process check to `canUseDOM`:\n\n``` javascript\nvar canUseDOM = typeof window !== 'undefined' && typeof process === 'undefined';\n```\n\nNow all my tests run in Node.js, but it complains about some assertions (because boolean HTML attributes no longer have the `=\"boolean\"` part in the generated markup - no biggie).\n\nI then edited the version of 0.9.0-rc1 my test browsers were using with the following:\n\n``` javascript\nvar canUseDOM = false;\n```\n\nNow there are no more errors being thrown when I call `React.renderComponentToString()` and I have the same errors about HTML differences as I was getting when running in Node.js.\n\nTL;DR: should React always be using the equivalent of `var canUseDOM = false;` when executing `React.renderComponentToString()`? It stops it from throwing errors.\n",
  "closed_by": {
    "login": "sophiebits",
    "id": 6820,
    "node_id": "MDQ6VXNlcjY4MjA=",
    "avatar_url": "https://avatars2.githubusercontent.com/u/6820?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/sophiebits",
    "html_url": "https://github.com/sophiebits",
    "followers_url": "https://api.github.com/users/sophiebits/followers",
    "following_url": "https://api.github.com/users/sophiebits/following{/other_user}",
    "gists_url": "https://api.github.com/users/sophiebits/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/sophiebits/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/sophiebits/subscriptions",
    "organizations_url": "https://api.github.com/users/sophiebits/orgs",
    "repos_url": "https://api.github.com/users/sophiebits/repos",
    "events_url": "https://api.github.com/users/sophiebits/events{/privacy}",
    "received_events_url": "https://api.github.com/users/sophiebits/received_events",
    "type": "User",
    "site_admin": false
  }
}

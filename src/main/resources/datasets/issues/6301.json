{
  "url": "https://api.github.com/repos/facebook/react/issues/6301",
  "repository_url": "https://api.github.com/repos/facebook/react",
  "labels_url": "https://api.github.com/repos/facebook/react/issues/6301/labels{/name}",
  "comments_url": "https://api.github.com/repos/facebook/react/issues/6301/comments",
  "events_url": "https://api.github.com/repos/facebook/react/issues/6301/events",
  "html_url": "https://github.com/facebook/react/pull/6301",
  "id": 142101346,
  "node_id": "MDExOlB1bGxSZXF1ZXN0NjM0Nzg5Nzk=",
  "number": 6301,
  "title": "Remove unused export from DOMChildrenOperations",
  "user": {
    "login": "gaearon",
    "id": 810438,
    "node_id": "MDQ6VXNlcjgxMDQzOA==",
    "avatar_url": "https://avatars0.githubusercontent.com/u/810438?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/gaearon",
    "html_url": "https://github.com/gaearon",
    "followers_url": "https://api.github.com/users/gaearon/followers",
    "following_url": "https://api.github.com/users/gaearon/following{/other_user}",
    "gists_url": "https://api.github.com/users/gaearon/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/gaearon/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/gaearon/subscriptions",
    "organizations_url": "https://api.github.com/users/gaearon/orgs",
    "repos_url": "https://api.github.com/users/gaearon/repos",
    "events_url": "https://api.github.com/users/gaearon/events{/privacy}",
    "received_events_url": "https://api.github.com/users/gaearon/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 2,
  "created_at": "2016-03-19T21:16:21Z",
  "updated_at": "2016-03-20T00:41:29Z",
  "closed_at": "2016-03-20T00:41:29Z",
  "author_association": "MEMBER",
  "pull_request": {
    "url": "https://api.github.com/repos/facebook/react/pulls/6301",
    "html_url": "https://github.com/facebook/react/pull/6301",
    "diff_url": "https://github.com/facebook/react/pull/6301.diff",
    "patch_url": "https://github.com/facebook/react/pull/6301.patch"
  },
  "body": "It appears that the only usage of `DOMChildrenOperations.updateTextContent()` was [removed](https://github.com/facebook/react/pull/5753/files#diff-44b5be52eab53fed9630bb5010d82d80L128) in #5753. More specifically, #5753 [started using `replaceDelimitedText()` instead](https://github.com/facebook/react/pull/5753/files#diff-44b5be52eab53fed9630bb5010d82d80R138), which it added in the same commit.\n\n`setTextContent()` itself is [still used](https://github.com/facebook/react/blob/2f24f89111f957e536f574759409197a1e0377af/src/renderers/dom/client/utils/DOMChildrenOperations.js#L168-L171) inside `DOMChildrenOperations.processUpdates()`—it’s just that there is no need to re-export it from `DOMChildrenOperations` now.\n### Due Diligence\n\nNo `DOMChildrenOperations.updateTextContent` calls in the codebase:\n\n```\nSearching 541 files for \"DOMChildrenOperations.\" (case sensitive)\n\n/Users/dan/p/react/src/renderers/dom/client/ReactDOMIDOperations.js:\n   29    dangerouslyProcessChildrenUpdates: function(parentInst, updates) {\n   30      var node = ReactDOMComponentTree.getNodeFromInstance(parentInst);\n   31:     DOMChildrenOperations.processUpdates(node, updates);\n   32    },\n   33  };\n\n/Users/dan/p/react/src/renderers/dom/shared/ReactComponentBrowserEnvironment.js:\n   27  \n   28    replaceNodeWithMarkup:\n   29:     DOMChildrenOperations.dangerouslyReplaceNodeWithMarkup,\n   30  \n   31    /**\n\n/Users/dan/p/react/src/renderers/dom/shared/ReactDOMTextComponent.js:\n  137          this._stringText = nextStringText;\n  138          var commentNodes = this.getNativeNode();\n  139:         DOMChildrenOperations.replaceDelimitedText(\n  140            commentNodes[0],\n  141            commentNodes[1],\n\n3 matches across 3 files\n```\n\nExisting matches of `updateTextContent` refer to a function defined on `ReactMultiChild` rather than the one exported from `DOMChildrenOperations`:\n\n```\nSearching 541 files for \"updateTextContent\" (case sensitive)\n\n/Users/dan/p/react/src/renderers/dom/shared/ReactDOMComponent.js:\n  976        this.updateChildren(null, transaction, context);\n  977      } else if (lastHasContentOrHtml && !nextHasContentOrHtml) {\n  978:       this.updateTextContent('');\n  979      }\n  980  \n  981      if (nextContent != null) {\n  982        if (lastContent !== nextContent) {\n  983:         this.updateTextContent('' + nextContent);\n  984        }\n  985      } else if (nextHtml != null) {\n\n/Users/dan/p/react/src/renderers/shared/reconciler/ReactMultiChild.js:\n  240       * @internal\n  241       */\n  242:     updateTextContent: function(nextContent) {\n  243        var prevChildren = this._renderedChildren;\n  244        // Remove any rendered children.\n  ...\n  246        for (var name in prevChildren) {\n  247          if (prevChildren.hasOwnProperty(name)) {\n  248:           invariant(false, 'updateTextContent called on non-empty component.');\n  249          }\n  250        }\n  ...\n  266        for (var name in prevChildren) {\n  267          if (prevChildren.hasOwnProperty(name)) {\n  268:           invariant(false, 'updateTextContent called on non-empty component.');\n  269          }\n  270        }\n\n5 matches across 2 files\n```\n\nIt appears that this is safe to remove.\n### Reviewers\n\n@sebmarkbage @spicyj \n",
  "closed_by": {
    "login": "gaearon",
    "id": 810438,
    "node_id": "MDQ6VXNlcjgxMDQzOA==",
    "avatar_url": "https://avatars0.githubusercontent.com/u/810438?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/gaearon",
    "html_url": "https://github.com/gaearon",
    "followers_url": "https://api.github.com/users/gaearon/followers",
    "following_url": "https://api.github.com/users/gaearon/following{/other_user}",
    "gists_url": "https://api.github.com/users/gaearon/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/gaearon/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/gaearon/subscriptions",
    "organizations_url": "https://api.github.com/users/gaearon/orgs",
    "repos_url": "https://api.github.com/users/gaearon/repos",
    "events_url": "https://api.github.com/users/gaearon/events{/privacy}",
    "received_events_url": "https://api.github.com/users/gaearon/received_events",
    "type": "User",
    "site_admin": false
  }
}

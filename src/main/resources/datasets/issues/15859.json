{
  "url": "https://api.github.com/repos/facebook/react/issues/15859",
  "repository_url": "https://api.github.com/repos/facebook/react",
  "labels_url": "https://api.github.com/repos/facebook/react/issues/15859/labels{/name}",
  "comments_url": "https://api.github.com/repos/facebook/react/issues/15859/comments",
  "events_url": "https://api.github.com/repos/facebook/react/issues/15859/events",
  "html_url": "https://github.com/facebook/react/issues/15859",
  "id": 454561995,
  "node_id": "MDU6SXNzdWU0NTQ1NjE5OTU=",
  "number": 15859,
  "title": "ReactDOM.render should flush useEffect queue",
  "user": {
    "login": "kgram",
    "id": 7780268,
    "node_id": "MDQ6VXNlcjc3ODAyNjg=",
    "avatar_url": "https://avatars0.githubusercontent.com/u/7780268?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/kgram",
    "html_url": "https://github.com/kgram",
    "followers_url": "https://api.github.com/users/kgram/followers",
    "following_url": "https://api.github.com/users/kgram/following{/other_user}",
    "gists_url": "https://api.github.com/users/kgram/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/kgram/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/kgram/subscriptions",
    "organizations_url": "https://api.github.com/users/kgram/orgs",
    "repos_url": "https://api.github.com/users/kgram/repos",
    "events_url": "https://api.github.com/users/kgram/events{/privacy}",
    "received_events_url": "https://api.github.com/users/kgram/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 1,
  "created_at": "2019-06-11T08:53:27Z",
  "updated_at": "2019-06-11T23:06:42Z",
  "closed_at": "2019-06-11T23:06:41Z",
  "author_association": "NONE",
  "body": "**Do you want to request a *feature* or report a *bug*?**\r\n\r\nReport a possible bug\r\n\r\n**What is the current behavior?**\r\n\r\nEffects queued using `useEffect` are not executed synchronously by `ReactDOM.render`. This means it is impossible to execute something after the app is fully mounted.\r\n\r\n**If the current behavior is a bug, please provide the steps to reproduce and if possible a minimal demo of the problem. Your bug will get fixed much faster if we can run your code and it doesn't have dependencies other than React. Paste the link to your JSFiddle (https://jsfiddle.net/Luktwrdm/) or CodeSandbox (https://codesandbox.io/s/new) example below:**\r\n\r\nExample showing possibly incorrect behavior: https://codesandbox.io/s/adoring-cloud-q4b17\r\n\r\nLog order is \r\n>before render \r\n>render \r\n>callback \r\n>after render \r\n>effect\r\n\r\n**What is the expected behavior?**\r\n\r\nI'm not sure if this is intentional or not, but the behavior I'd expect is that all effects are run before control is returned from `ReactDOM.render`. This would match the behavior of `componentDidMount`, which does run before control is returned. Example: https://codesandbox.io/s/intelligent-browser-g6n2n\r\n\r\nLog order is\r\n>before render \r\n>render \r\n>mount \r\n>callback \r\n>after render\r\n\r\nThe concrete example I have is that I subscribe to a store, and then immediately update the store. This change triggers other external effects, so it is necessary that it happens after mount. Because the subscribe-effect has not been run, the app never updates. It can be fixed by subscribing with `useLayoutEffect` instead of `useEffect`, but this seems to run counter to the intention of the hooks.\r\n\r\n**Which versions of React, and which browser / OS are affected by this issue? Did this work in previous versions of React?**\r\n\r\nReplicated in React/ReactDOM 16.8.4 and 16.8.6\r\n",
  "closed_by": {
    "login": "gaearon",
    "id": 810438,
    "node_id": "MDQ6VXNlcjgxMDQzOA==",
    "avatar_url": "https://avatars0.githubusercontent.com/u/810438?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/gaearon",
    "html_url": "https://github.com/gaearon",
    "followers_url": "https://api.github.com/users/gaearon/followers",
    "following_url": "https://api.github.com/users/gaearon/following{/other_user}",
    "gists_url": "https://api.github.com/users/gaearon/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/gaearon/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/gaearon/subscriptions",
    "organizations_url": "https://api.github.com/users/gaearon/orgs",
    "repos_url": "https://api.github.com/users/gaearon/repos",
    "events_url": "https://api.github.com/users/gaearon/events{/privacy}",
    "received_events_url": "https://api.github.com/users/gaearon/received_events",
    "type": "User",
    "site_admin": false
  }
}

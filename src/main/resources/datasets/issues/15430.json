{
  "url": "https://api.github.com/repos/facebook/react/issues/15430",
  "repository_url": "https://api.github.com/repos/facebook/react",
  "labels_url": "https://api.github.com/repos/facebook/react/issues/15430/labels{/name}",
  "comments_url": "https://api.github.com/repos/facebook/react/issues/15430/comments",
  "events_url": "https://api.github.com/repos/facebook/react/issues/15430/events",
  "html_url": "https://github.com/facebook/react/issues/15430",
  "id": 434104729,
  "node_id": "MDU6SXNzdWU0MzQxMDQ3Mjk=",
  "number": 15430,
  "title": "`useState` has something wrong in devtools if used with `useContext` and `useEffect`.",
  "user": {
    "login": "zhengxiaoyao0716",
    "id": 12682063,
    "node_id": "MDQ6VXNlcjEyNjgyMDYz",
    "avatar_url": "https://avatars1.githubusercontent.com/u/12682063?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/zhengxiaoyao0716",
    "html_url": "https://github.com/zhengxiaoyao0716",
    "followers_url": "https://api.github.com/users/zhengxiaoyao0716/followers",
    "following_url": "https://api.github.com/users/zhengxiaoyao0716/following{/other_user}",
    "gists_url": "https://api.github.com/users/zhengxiaoyao0716/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/zhengxiaoyao0716/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/zhengxiaoyao0716/subscriptions",
    "organizations_url": "https://api.github.com/users/zhengxiaoyao0716/orgs",
    "repos_url": "https://api.github.com/users/zhengxiaoyao0716/repos",
    "events_url": "https://api.github.com/users/zhengxiaoyao0716/events{/privacy}",
    "received_events_url": "https://api.github.com/users/zhengxiaoyao0716/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": {
    "login": "bvaughn",
    "id": 29597,
    "node_id": "MDQ6VXNlcjI5NTk3",
    "avatar_url": "https://avatars0.githubusercontent.com/u/29597?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/bvaughn",
    "html_url": "https://github.com/bvaughn",
    "followers_url": "https://api.github.com/users/bvaughn/followers",
    "following_url": "https://api.github.com/users/bvaughn/following{/other_user}",
    "gists_url": "https://api.github.com/users/bvaughn/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/bvaughn/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/bvaughn/subscriptions",
    "organizations_url": "https://api.github.com/users/bvaughn/orgs",
    "repos_url": "https://api.github.com/users/bvaughn/repos",
    "events_url": "https://api.github.com/users/bvaughn/events{/privacy}",
    "received_events_url": "https://api.github.com/users/bvaughn/received_events",
    "type": "User",
    "site_admin": false
  },
  "assignees": [
    {
      "login": "bvaughn",
      "id": 29597,
      "node_id": "MDQ6VXNlcjI5NTk3",
      "avatar_url": "https://avatars0.githubusercontent.com/u/29597?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/bvaughn",
      "html_url": "https://github.com/bvaughn",
      "followers_url": "https://api.github.com/users/bvaughn/followers",
      "following_url": "https://api.github.com/users/bvaughn/following{/other_user}",
      "gists_url": "https://api.github.com/users/bvaughn/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/bvaughn/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/bvaughn/subscriptions",
      "organizations_url": "https://api.github.com/users/bvaughn/orgs",
      "repos_url": "https://api.github.com/users/bvaughn/repos",
      "events_url": "https://api.github.com/users/bvaughn/events{/privacy}",
      "received_events_url": "https://api.github.com/users/bvaughn/received_events",
      "type": "User",
      "site_admin": false
    }
  ],
  "milestone": null,
  "comments": 4,
  "created_at": "2019-04-17T05:57:04Z",
  "updated_at": "2019-04-18T14:38:42Z",
  "closed_at": "2019-04-17T14:24:50Z",
  "author_association": "NONE",
  "body": "**Do you want to request a *feature* or report a *bug*?**\r\n*bug*\r\n\r\n**What is the current behavior?**\r\nThe `useState` got an unexpected state like `{tag: 192, create: ƒ, destroy: undefined, deps: Array(0), next: {…}}` when we open the Chrome devtools and select the mounted node.\r\n\r\nHere the test code:\r\n```\r\nimport React, { createContext, useContext, useEffect, useState } from 'react';\r\nimport ReactDOM from 'react-dom';\r\n\r\nconst TestContext = createContext();\r\n\r\nconst useTest = () => {\r\n    const context = useContext(TestContext) || {};\r\n    useEffect(() => { console.log(context); }, []);\r\n\r\n    const [state, _setState] = useState(null);\r\n    console.log(state);\r\n};\r\n\r\nconst Test = () => {\r\n    useTest();\r\n    return <div></div>;\r\n};\r\n\r\nReactDOM.render(<Test/>, document.getElementById('root'));\r\n\r\n```\r\n\r\nThen if we open the Chrome devtools and click the `Test` node, we can see the `useState` returns an unexpected state:\r\n![image](https://user-images.githubusercontent.com/12682063/56264258-787bcf00-6118-11e9-8d9e-f48cda714aea.png)\r\n\r\n\r\n**Which versions of React, and which browser / OS are affected by this issue? Did this work in previous versions of React?**\r\nOS:\r\n> Microsoft Windows [版本 10.0.15063]\r\n\r\nReact:\r\n```\r\n    \"react\": \"^16.8.3\",\r\n    \"react-dom\": \"^16.8.3\",\r\n```\r\n\r\nChrome:\r\n> 版本 72.0.3626.109（正式版本） （64 位）\r\n",
  "closed_by": {
    "login": "bvaughn",
    "id": 29597,
    "node_id": "MDQ6VXNlcjI5NTk3",
    "avatar_url": "https://avatars0.githubusercontent.com/u/29597?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/bvaughn",
    "html_url": "https://github.com/bvaughn",
    "followers_url": "https://api.github.com/users/bvaughn/followers",
    "following_url": "https://api.github.com/users/bvaughn/following{/other_user}",
    "gists_url": "https://api.github.com/users/bvaughn/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/bvaughn/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/bvaughn/subscriptions",
    "organizations_url": "https://api.github.com/users/bvaughn/orgs",
    "repos_url": "https://api.github.com/users/bvaughn/repos",
    "events_url": "https://api.github.com/users/bvaughn/events{/privacy}",
    "received_events_url": "https://api.github.com/users/bvaughn/received_events",
    "type": "User",
    "site_admin": false
  }
}

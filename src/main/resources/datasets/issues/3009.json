{
  "url": "https://api.github.com/repos/facebook/react/issues/3009",
  "repository_url": "https://api.github.com/repos/facebook/react",
  "labels_url": "https://api.github.com/repos/facebook/react/issues/3009/labels{/name}",
  "comments_url": "https://api.github.com/repos/facebook/react/issues/3009/comments",
  "events_url": "https://api.github.com/repos/facebook/react/issues/3009/events",
  "html_url": "https://github.com/facebook/react/issues/3009",
  "id": 56173215,
  "node_id": "MDU6SXNzdWU1NjE3MzIxNQ==",
  "number": 3009,
  "title": "Streaming renderToStaticMarkup",
  "user": {
    "login": "jussi-kalliokoski",
    "id": 547186,
    "node_id": "MDQ6VXNlcjU0NzE4Ng==",
    "avatar_url": "https://avatars3.githubusercontent.com/u/547186?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/jussi-kalliokoski",
    "html_url": "https://github.com/jussi-kalliokoski",
    "followers_url": "https://api.github.com/users/jussi-kalliokoski/followers",
    "following_url": "https://api.github.com/users/jussi-kalliokoski/following{/other_user}",
    "gists_url": "https://api.github.com/users/jussi-kalliokoski/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/jussi-kalliokoski/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/jussi-kalliokoski/subscriptions",
    "organizations_url": "https://api.github.com/users/jussi-kalliokoski/orgs",
    "repos_url": "https://api.github.com/users/jussi-kalliokoski/repos",
    "events_url": "https://api.github.com/users/jussi-kalliokoski/events{/privacy}",
    "received_events_url": "https://api.github.com/users/jussi-kalliokoski/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 127893911,
      "node_id": "MDU6TGFiZWwxMjc4OTM5MTE=",
      "url": "https://api.github.com/repos/facebook/react/labels/Component:%20DOM",
      "name": "Component: DOM",
      "color": "fef2c0",
      "default": false
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 63,
  "created_at": "2015-02-01T18:51:14Z",
  "updated_at": "2018-01-01T01:10:50Z",
  "closed_at": "2017-08-04T00:13:25Z",
  "author_association": "NONE",
  "body": "I've been messing around with trying to get my current project to cater the critical rendering path (i.e. the first ~14kb of data) ASAP. Our landing page is quite heavy in content and takes around 200ms for `React.renderToStaticMarkup()` to process, which is not the time we want the users to wait until they can get something on their screens. Currently I'm doing it so that it `res.write()`s everything up until the `<body>` tag first, then the content, finishing up with a bundled JSON dump of the data the server used to render the page and the ~1kb of JS for webpack bootstrapping. This gets me somewhere, as in you get background color and title in the first rountrip, but no content.\n\nIt would be neat if there was a version of `React.renderToStaticMarkup()` that returned a node stream, and an option to specify some function that tells the number of bytes to render before pushing stuff downstream, for example:\n\n``` javascript\nvar chunksWritten = 0;\nReact.renderToStaticMarkupStream({\n    getChunkSize: function () {\n        if ( chunksWritten++ === 0 ) {\n            // first push the first 13kb\n            return 13 * 1024;\n        } else {\n            // push the rest in one big chunk\n            return -1;\n        }\n    },\n}).pipe(res);\n```\n",
  "closed_by": {
    "login": "gaearon",
    "id": 810438,
    "node_id": "MDQ6VXNlcjgxMDQzOA==",
    "avatar_url": "https://avatars0.githubusercontent.com/u/810438?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/gaearon",
    "html_url": "https://github.com/gaearon",
    "followers_url": "https://api.github.com/users/gaearon/followers",
    "following_url": "https://api.github.com/users/gaearon/following{/other_user}",
    "gists_url": "https://api.github.com/users/gaearon/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/gaearon/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/gaearon/subscriptions",
    "organizations_url": "https://api.github.com/users/gaearon/orgs",
    "repos_url": "https://api.github.com/users/gaearon/repos",
    "events_url": "https://api.github.com/users/gaearon/events{/privacy}",
    "received_events_url": "https://api.github.com/users/gaearon/received_events",
    "type": "User",
    "site_admin": false
  }
}

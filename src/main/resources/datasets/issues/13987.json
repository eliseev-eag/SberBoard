{
  "url": "https://api.github.com/repos/facebook/react/issues/13987",
  "repository_url": "https://api.github.com/repos/facebook/react",
  "labels_url": "https://api.github.com/repos/facebook/react/issues/13987/labels{/name}",
  "comments_url": "https://api.github.com/repos/facebook/react/issues/13987/comments",
  "events_url": "https://api.github.com/repos/facebook/react/issues/13987/events",
  "html_url": "https://github.com/facebook/react/issues/13987",
  "id": 374391005,
  "node_id": "MDU6SXNzdWUzNzQzOTEwMDU=",
  "number": 13987,
  "title": "React 16.6.0 performance is worse than 16.5.2",
  "user": {
    "login": "dragonflypl",
    "id": 5444220,
    "node_id": "MDQ6VXNlcjU0NDQyMjA=",
    "avatar_url": "https://avatars3.githubusercontent.com/u/5444220?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/dragonflypl",
    "html_url": "https://github.com/dragonflypl",
    "followers_url": "https://api.github.com/users/dragonflypl/followers",
    "following_url": "https://api.github.com/users/dragonflypl/following{/other_user}",
    "gists_url": "https://api.github.com/users/dragonflypl/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/dragonflypl/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/dragonflypl/subscriptions",
    "organizations_url": "https://api.github.com/users/dragonflypl/orgs",
    "repos_url": "https://api.github.com/users/dragonflypl/repos",
    "events_url": "https://api.github.com/users/dragonflypl/events{/privacy}",
    "received_events_url": "https://api.github.com/users/dragonflypl/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 710722093,
      "node_id": "MDU6TGFiZWw3MTA3MjIwOTM=",
      "url": "https://api.github.com/repos/facebook/react/labels/Type:%20Needs%20Investigation",
      "name": "Type: Needs Investigation",
      "color": "fbca04",
      "default": false
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 44,
  "created_at": "2018-10-26T13:45:19Z",
  "updated_at": "2019-02-20T14:29:00Z",
  "closed_at": "2018-11-07T14:34:11Z",
  "author_association": "NONE",
  "body": "Some time ago I did refactoring of cell renderers components to achieve performance gain (I have a huge table). I did refactoring from functional stateless components to `PureComponent`. E.g.:\r\n\r\n    import React from 'react';\r\n    import PropTypes from 'prop-types';\r\n    \r\n    class SomeCell extends React.PureComponent {\r\n      render() {\r\n        const { obj } = this.props;\r\n        return (\r\n          <>\r\n            {obj.name}\r\n            <br />\r\n            {obj.isin}\r\n          </>\r\n        );\r\n      }\r\n    }\r\n    \r\n    SomeCell .propTypes = {\r\n      obj: PropTypes.object,\r\n    };\r\n    \r\n    export default SomeCell ;\r\n\r\n\r\n\r\nNow I saw that `React.memo` was released so I updated to `react@16.6.0` and `react-dom@16.6.0` (from `16.5.2`) and refactored from `PureComponent` to `React.memo` with the expectation that it would be even faster (no lifecycle methods called, function smaller than class in memory etc...):\r\n\r\n    import React from 'react';\r\n    import PropTypes from 'prop-types';\r\n    \r\n    const SomeCell = React.memo(function({ obj }) {\r\n      return (\r\n        <>\r\n          {obj.name}\r\n          <br />\r\n          {obj.isin}\r\n        </>\r\n      );\r\n    });\r\n    \r\n    SomeCell .propTypes = {\r\n      obj: PropTypes.object,\r\n    };\r\n    \r\n    export default SomeCell;\r\n\r\n\r\nAnd to my surprise, performance went significantly down.\r\n\r\nProfile data in prod mode (no addons in chrome) show that there's much more scripting happening than before with `PureComponent` (scripting time for my case went from 0.5s to 3.8sek).\r\n\r\nAfter some investigation, it seems that it is not an issue with `React.memo` but with the new version of React. I've reverted cell renderers to PureComponent and left new react@16.6.0 version and a result (significantly slower performance) is still present.\r\n\r\nDo you have any idea what could be the issue with it?",
  "closed_by": {
    "login": "gaearon",
    "id": 810438,
    "node_id": "MDQ6VXNlcjgxMDQzOA==",
    "avatar_url": "https://avatars0.githubusercontent.com/u/810438?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/gaearon",
    "html_url": "https://github.com/gaearon",
    "followers_url": "https://api.github.com/users/gaearon/followers",
    "following_url": "https://api.github.com/users/gaearon/following{/other_user}",
    "gists_url": "https://api.github.com/users/gaearon/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/gaearon/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/gaearon/subscriptions",
    "organizations_url": "https://api.github.com/users/gaearon/orgs",
    "repos_url": "https://api.github.com/users/gaearon/repos",
    "events_url": "https://api.github.com/users/gaearon/events{/privacy}",
    "received_events_url": "https://api.github.com/users/gaearon/received_events",
    "type": "User",
    "site_admin": false
  }
}

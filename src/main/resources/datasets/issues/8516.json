{
  "url": "https://api.github.com/repos/facebook/react/issues/8516",
  "repository_url": "https://api.github.com/repos/facebook/react",
  "labels_url": "https://api.github.com/repos/facebook/react/issues/8516/labels{/name}",
  "comments_url": "https://api.github.com/repos/facebook/react/issues/8516/comments",
  "events_url": "https://api.github.com/repos/facebook/react/issues/8516/events",
  "html_url": "https://github.com/facebook/react/issues/8516",
  "id": 194099547,
  "node_id": "MDU6SXNzdWUxOTQwOTk1NDc=",
  "number": 8516,
  "title": "Components need key attribute?",
  "user": {
    "login": "bajalovic",
    "id": 1307779,
    "node_id": "MDQ6VXNlcjEzMDc3Nzk=",
    "avatar_url": "https://avatars2.githubusercontent.com/u/1307779?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/bajalovic",
    "html_url": "https://github.com/bajalovic",
    "followers_url": "https://api.github.com/users/bajalovic/followers",
    "following_url": "https://api.github.com/users/bajalovic/following{/other_user}",
    "gists_url": "https://api.github.com/users/bajalovic/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/bajalovic/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/bajalovic/subscriptions",
    "organizations_url": "https://api.github.com/users/bajalovic/orgs",
    "repos_url": "https://api.github.com/users/bajalovic/repos",
    "events_url": "https://api.github.com/users/bajalovic/events{/privacy}",
    "received_events_url": "https://api.github.com/users/bajalovic/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 3,
  "created_at": "2016-12-07T16:36:09Z",
  "updated_at": "2017-05-01T22:05:04Z",
  "closed_at": "2017-05-01T22:05:04Z",
  "author_association": "NONE",
  "body": "**Do you want to request a *feature* or report a *bug*?**\r\nBug\r\n\r\n**What is the current behavior?**\r\nI have created a `Dropdown` component that receives a value and an array of options as props. In `MyComponent` I render a multi step form (`currentStep` is saved in `state` object). When you switch between steps (and `MyComponent` is re rendered), `Dropdown` component keeps state from previous component instance. \r\nFor example on one step `Dropdown` component is giving you options for Font Family, and on next step for Font Size. \r\nI fixed this bug with setting `key={1}`, `key={2}`, etc on each `Dropdown` component.\r\n\r\n```javascript\r\nexport default class Dropdown extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      value: props.value,\r\n      content: props.options.get(props.value)\r\n    }\r\n\r\n    this.onChange = this.onChange.bind(this);\r\n  }\r\n  onChange(e, value) {\r\n    e.preventDefault();\r\n    this.setState({value: value});\r\n    if(this.props.onChange) {\r\n      this.props.onChange(value);\r\n    }\r\n  }\r\n  getOptions() {\r\n    const items = [];\r\n    this.props.options.forEach((content, value) => {\r\n      items.push(<li key={value}><a href=\"#\" onClick={(e) => {this.onChange(e, value)}}>{content}</a></li>);\r\n    });\r\n    return items;\r\n  }\r\n\r\n  render() {\r\n    const options = this.getOptions();\r\n    return <div>\r\n      {this.props.options.get(this.state.value)}\r\n      <i className=\"fa fa-caret-down\"></i>\r\n      <ul>\r\n        {options}\r\n      </ul>\r\n    </div>\r\n  }\r\n```\r\n\r\n```javascript\r\nexport default class MyComponent extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {step: 0, font_family: 'Arial', font_size: '10'};\r\n    this.goToStep = (e, step) => {e.preventDefault(); this.setState({step: step}); };\r\n    this.onFamilyChange = (value) => this.setState({font_family: value});\r\n    this.onSizeChange = (value) => this.setState({font_size: value});\r\n\r\n    this.fontFamilyOptions = new Map([['arial', 'Arial'], ['times', 'Times'], ['helvetica', 'Helvetica']]);\r\n    this.fontSizeOptions = new Map([[10, '10 px'], [12, '12 px'], [14, '14 px']]);\r\n  }\r\n\r\n  getFirstStep() {\r\n    return <div>\r\n        <label>Choose Font Family</label> \r\n        <Dropdown value={this.state.font_family} options={this.fontFamilyOptions} onChange={(value) => this.onFamilyChange(value) } />\r\n        </div>\r\n  }\r\n\r\n  getSecondStep() {\r\n    return <div>\r\n        <label>Choose Font Size</label> \r\n        <Dropdown value={this.state.font_size} options={this.fontSizeOptions} onChange={(value) => this.onSizeChange(value) } />\r\n        </div>\r\n  }\r\n\r\n  render() {\r\n    return <div>\r\n      <a href=\"#\" onClick={(e) => this.goToStep(e, 0)}>Step 0</a>\r\n      <a href=\"#\" onClick={(e) => this.goToStep(e, 1)}>Step 1</a>\r\n      {this.state.step === 0 ? this.getFirstStep() : this.getSecondStep()} \r\n    </div>\r\n  }\r\n}\r\n```\r\n\r\n**Which versions of React, and which browser / OS are affected by this issue? Did this work in previous versions of React?**\r\nReact 0.9.1\r\nChrome 54.0\r\nMac OS Sierra 10.12.1\r\n\r\n\r\nI am not sure if I am doing something wrong here or is it a bug.",
  "closed_by": {
    "login": "aweary",
    "id": 6886061,
    "node_id": "MDQ6VXNlcjY4ODYwNjE=",
    "avatar_url": "https://avatars2.githubusercontent.com/u/6886061?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/aweary",
    "html_url": "https://github.com/aweary",
    "followers_url": "https://api.github.com/users/aweary/followers",
    "following_url": "https://api.github.com/users/aweary/following{/other_user}",
    "gists_url": "https://api.github.com/users/aweary/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/aweary/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/aweary/subscriptions",
    "organizations_url": "https://api.github.com/users/aweary/orgs",
    "repos_url": "https://api.github.com/users/aweary/repos",
    "events_url": "https://api.github.com/users/aweary/events{/privacy}",
    "received_events_url": "https://api.github.com/users/aweary/received_events",
    "type": "User",
    "site_admin": false
  }
}

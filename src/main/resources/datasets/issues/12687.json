{
  "url": "https://api.github.com/repos/facebook/react/issues/12687",
  "repository_url": "https://api.github.com/repos/facebook/react",
  "labels_url": "https://api.github.com/repos/facebook/react/issues/12687/labels{/name}",
  "comments_url": "https://api.github.com/repos/facebook/react/issues/12687/comments",
  "events_url": "https://api.github.com/repos/facebook/react/issues/12687/events",
  "html_url": "https://github.com/facebook/react/issues/12687",
  "id": 317585510,
  "node_id": "MDU6SXNzdWUzMTc1ODU1MTA=",
  "number": 12687,
  "title": "Show culprit in `Cannot update during an existing state transition...` ?",
  "user": {
    "login": "mrlubos",
    "id": 12529395,
    "node_id": "MDQ6VXNlcjEyNTI5Mzk1",
    "avatar_url": "https://avatars2.githubusercontent.com/u/12529395?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/mrlubos",
    "html_url": "https://github.com/mrlubos",
    "followers_url": "https://api.github.com/users/mrlubos/followers",
    "following_url": "https://api.github.com/users/mrlubos/following{/other_user}",
    "gists_url": "https://api.github.com/users/mrlubos/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/mrlubos/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/mrlubos/subscriptions",
    "organizations_url": "https://api.github.com/users/mrlubos/orgs",
    "repos_url": "https://api.github.com/users/mrlubos/repos",
    "events_url": "https://api.github.com/users/mrlubos/events{/privacy}",
    "received_events_url": "https://api.github.com/users/mrlubos/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 121709921,
      "node_id": "MDU6TGFiZWwxMjE3MDk5MjE=",
      "url": "https://api.github.com/repos/facebook/react/labels/Type:%20Feature%20Request",
      "name": "Type: Feature Request",
      "color": "c7def8",
      "default": false
    }
  ],
  "state": "open",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 7,
  "created_at": "2018-04-25T11:23:02Z",
  "updated_at": "2018-06-11T12:43:24Z",
  "closed_at": null,
  "author_association": "NONE",
  "body": "**Do you want to request a *feature* or report a *bug*?**\r\n*Feature.*\r\n\r\n**What is the current behavior?**\r\nWe are probably all familiar with the following message.\r\n\r\n```\r\nbundle.js:1\r\n\r\nWarning: Cannot update during an existing state transition (such as within `render`\r\nor another component's constructor). Render methods should be a pure function\r\nof props and state; constructor side-effects are an anti-pattern, but can be moved\r\nto `componentWillMount`.\r\n```\r\n\r\nFor those who never came across this message, it can be created simply by mounting the following component.\r\n\r\n```js\r\nclass UpdateDuringRender extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      text: 'initial',\r\n    };\r\n  }\r\n\r\n  updateState(text) {\r\n    this.setState({ text });\r\n  }\r\n\r\n  render() {\r\n    this.updateState('updated!');\r\n\r\n    return (\r\n      <div>\r\n        {this.state.text}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n```\r\n\r\n**What is the expected behavior?**\r\nCan we be more specific which component triggers this warning (I think it could be even treated as an optional error)? When this suddenly appears in the app, sometimes it's tough to find the culprit. Some stack trace or at least the offending component would be helpful in the warning message. Not sure how it's solved internally, but yeah, would be a nice hint to help remove anti-patterns.\r\n\r\n**Which versions of React, and which browser / OS are affected by this issue? Did this work in previous versions of React?**\r\n`\"react\": \"^16.3.1\"`",
  "closed_by": null
}
